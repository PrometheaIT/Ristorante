import{a as Z}from"./chunk-RWHEAJGO.js";import"./chunk-MEGBB4Y7.js";import{za as $}from"./chunk-UFRMGX42.js";import{a as N,b as j,d as q,h as R,j as G,q as Y,r as H,s as J,t as K,u as Q,v as U,x as X}from"./chunk-22BNR7AL.js";import"./chunk-NPMWXJE4.js";import"./chunk-6GCWWUP3.js";import{j as L,k as D,s as z}from"./chunk-N5RTTLWI.js";import{Eb as C,Fb as w,Ha as c,Hb as W,Ib as a,Jb as x,Kb as p,Lb as A,Ob as _,Pb as h,Qb as b,Xa as O,Z as T,ab as y,ca as I,g as F,ia as m,ib as v,ja as g,jb as n,kb as o,lb as k,rb as B,u as P,ub as u,v as V,wb as d}from"./chunk-R56C6QW6.js";import{a as S,b as M,j as f}from"./chunk-4ZZIO3ZI.js";var ie=[{value:"vino_rosso",label:"Vino Rosso",icon:"wine_bar",color:"#8B0000"},{value:"vino_bianco",label:"Vino Bianco",icon:"wine_bar",color:"#F5DEB3"},{value:"vino_rosato",label:"Vino Rosato",icon:"wine_bar",color:"#FFB6C1"},{value:"spumante",label:"Spumante",icon:"celebration",color:"#FFFACD"},{value:"prosecco",label:"Prosecco",icon:"celebration",color:"#FFF8DC"},{value:"champagne",label:"Champagne",icon:"celebration",color:"#FFD700"},{value:"birra",label:"Birra",icon:"sports_bar",color:"#D2691E"},{value:"birra_chiara",label:"Birra Chiara",icon:"sports_bar",color:"#FFD700"},{value:"birra_scura",label:"Birra Scura",icon:"sports_bar",color:"#8B4513"},{value:"birra_artigianale",label:"Birra Artigianale",icon:"brewery",color:"#CD853F"},{value:"whisky",label:"Whisky",icon:"liquor",color:"#8B4513"},{value:"vodka",label:"Vodka",icon:"liquor",color:"#F0FFFF"},{value:"gin",label:"Gin",icon:"liquor",color:"#98FB98"},{value:"rum",label:"Rum",icon:"liquor",color:"#DAA520"},{value:"tequila",label:"Tequila",icon:"liquor",color:"#FFD700"},{value:"brandy",label:"Brandy",icon:"liquor",color:"#8B0000"},{value:"cognac",label:"Cognac",icon:"liquor",color:"#A0522D"},{value:"cocktail",label:"Cocktail",icon:"local_cafe",color:"#FF6347"},{value:"aperitivo",label:"Aperitivo",icon:"local_bar",color:"#FF4500"},{value:"digestivo",label:"Digestivo",icon:"local_bar",color:"#4B0082"},{value:"amaro",label:"Amaro",icon:"local_bar",color:"#8B0000"},{value:"vermut",label:"Vermut",icon:"wine_bar",color:"#800000"},{value:"analcolico",label:"Analcolico",icon:"water_drop",color:"#4682B4"},{value:"succo",label:"Succo",icon:"water_drop",color:"#FF6347"},{value:"bibita",label:"Bibita",icon:"local_drink",color:"#32CD32"},{value:"acqua",label:"Acqua",icon:"water_drop",color:"#1E90FF"},{value:"caffe",label:"Caff\xE8",icon:"coffee",color:"#8B4513"},{value:"te",label:"T\xE8",icon:"coffee",color:"#228B22"},{value:"altro",label:"Altro",icon:"local_bar",color:"#6B7280"}],E=class s extends Z{statsSubject=new F({total:0,active:0,inventoryValue:0,averagePrice:0,lowStockCount:0});stats$=this.statsSubject.asObservable();categoriesSubject=new F(ie);categories$=this.categoriesSubject.asObservable();beveragesWithCategories$=V([this.data$,this.categories$]).pipe(P(([i,e])=>{this.calculateStats(i);let t=e.map(r=>M(S({},r),{count:i.filter(l=>l.category===r.value).length}));return{beverages:i,categories:t}}));getTableName(){return"beverages"}constructor(){super(),this.data$.subscribe(i=>{this.updateCategoryCounts(i)})}updateCategoryCounts(i){let t=this.categoriesSubject.value.map(r=>M(S({},r),{count:i.filter(l=>l.category===r.value).length}));this.categoriesSubject.next(t)}getCategories(){return this.categoriesSubject.value}getCategoryByValue(i){return this.categoriesSubject.value.find(e=>e.value===i)||{value:"altro",label:"Altro",icon:"local_bar",color:"#6B7280"}}filterBeverages(i={}){let e=this.data;if(i.category&&(e=e.filter(t=>t.category===i.category)),i.search){let t=i.search.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.producer?.toLowerCase().includes(t)||r.region?.toLowerCase().includes(t)||r.description?.toLowerCase().includes(t))}return i.minPrice!==void 0&&(e=e.filter(t=>t.price>=i.minPrice)),i.maxPrice!==void 0&&(e=e.filter(t=>t.price<=i.maxPrice)),i.inStock!==void 0&&(e=e.filter(t=>i.inStock?t.current_stock>0:t.current_stock===0)),e}sortBeverages(i,e){let t=[...i];switch(e){case"name":return t.sort((r,l)=>r.name.localeCompare(l.name));case"price_asc":return t.sort((r,l)=>r.price-l.price);case"price_desc":return t.sort((r,l)=>l.price-r.price);case"stock":return t.sort((r,l)=>l.current_stock-r.current_stock);default:return t}}updateStock(i,e){return f(this,null,function*(){let t=this.data.find(l=>l.id===i);if(!t)return!1;let r=Math.max(0,t.current_stock+e);return yield this.update(i,{current_stock:r,is_available:r>0,to_buy:r<=t.minimum_stock,updated_at:new Date().toISOString()})})}createBeverage(i){return f(this,null,function*(){return i.category?this.categoriesSubject.value.find(t=>t.value===i.category)||(console.error("\u274C Categoria non valida:",i.category),i.category="altro"):i.category="altro",yield this.create(i)})}updateBeverage(i,e){return f(this,null,function*(){return e.category&&(this.categoriesSubject.value.find(r=>r.value===e.category)||(console.error("\u274C Categoria non valida:",e.category),e.category="altro")),yield this.update(i,e)})}calculateStats(i){let e={total:i.length,active:i.filter(t=>t.is_active).length,inventoryValue:i.reduce((t,r)=>t+r.cost_per_unit*r.current_stock,0),averagePrice:i.length>0?i.reduce((t,r)=>t+r.price,0)/i.length:0,lowStockCount:i.filter(t=>t.current_stock<=t.minimum_stock).length};this.statsSubject.next(e)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"})};function re(s,i){if(s&1&&(n(0,"option",31),a(1),o()),s&2){let e=i.$implicit;v("value",e.value),c(),A(" ",e.label," (",e.count,") ")}}function ne(s,i){s&1&&(n(0,"tr")(1,"td",32)(2,"div",33)(3,"span",34),a(4,"refresh"),o(),n(5,"span"),a(6,"Caricamento bevande..."),o()()()())}function oe(s,i){if(s&1&&(n(0,"div",56),a(1),o()),s&2){let e=d().$implicit;c(),p(" ",e.description," ")}}function ae(s,i){if(s&1&&(n(0,"div",57),a(1),o()),s&2){let e=d().$implicit,t=d();c(),p(" Costo: \u20AC",t.formatPrice(e.cost_per_unit)," ")}}function le(s,i){if(s&1){let e=B();n(0,"tr",35)(1,"td")(2,"div",36)(3,"span",37),a(4),o(),n(5,"div")(6,"strong"),a(7),o(),y(8,oe,2,1,"div",38),o()()(),n(9,"td")(10,"div",39)(11,"span",12),a(12),o(),n(13,"span",40),a(14),o()()(),n(15,"td")(16,"span",41),a(17),o()(),n(18,"td")(19,"span",41),a(20),o()(),n(21,"td")(22,"span",41),a(23),o()(),n(24,"td")(25,"div")(26,"strong",42),a(27),o(),y(28,ae,2,1,"div",43),o()(),n(29,"td")(30,"div",44)(31,"div",45)(32,"div",46)(33,"div",47),k(34,"div",48),o()(),n(35,"span"),a(36),o()(),n(37,"div",49),a(38),o()()(),n(39,"td")(40,"span",39),a(41),o()(),n(42,"td")(43,"div",50)(44,"div",45)(45,"button",51),u("click",function(){let r=m(e).$implicit,l=d();return g(l.updateStock(r.id,-1))}),n(46,"span",37),a(47,"remove"),o()(),n(48,"span",52),a(49),o(),n(50,"button",53),u("click",function(){let r=m(e).$implicit,l=d();return g(l.updateStock(r.id,1))}),n(51,"span",37),a(52,"add"),o()()(),n(53,"button",54),u("click",function(){let r=m(e).$implicit,l=d();return g(l.editBeverage(r))}),n(54,"span",37),a(55,"edit"),o()(),n(56,"button",55),u("click",function(){let r=m(e).$implicit,l=d();return g(l.deleteBeverage(r.id))}),n(57,"span",37),a(58,"delete"),o()()()()()}if(s&2){let e=i.$implicit,t=d();w("bg-red-50",e.current_stock<=e.minimum_stock)("bg-green-50",e.current_stock>e.minimum_stock*2),c(2),C("background-color",t.getCategoryColor(e.category)+"20"),c(),C("color",t.getCategoryColor(e.category)),c(),p(" ",t.getCategoryIcon(e.category)," "),c(3),x(e.name),c(),v("ngIf",e.description),c(2),C("background-color",t.getCategoryColor(e.category)),c(2),p(" ",t.getCategoryIcon(e.category)," "),c(2),p(" ",t.getCategoryLabel(e.category)," "),c(3),x(e.producer||"N/D"),c(3),x(e.region||"N/D"),c(3),x(e.vintage||"-"),c(4),p("\u20AC",t.formatPrice(e.price)),c(),v("ngIf",e.cost_per_unit>0),c(6),C("width",t.getStockPercentage(e)+"%")("background-color",t.getStockColor(e)),c(),w("text-red-500",e.current_stock<=e.minimum_stock)("font-bold",e.current_stock<=e.minimum_stock),c(),p(" ",e.current_stock," "),c(2),A(" ",e.bottle_format||"pz"," / min: ",e.minimum_stock," "),c(2),W(t.getStockStatus(e).class),c(),p(" ",t.getStockStatus(e).text," "),c(4),v("disabled",e.current_stock<=0),c(4),x(e.current_stock)}}function ce(s,i){s&1&&(n(0,"p",41),a(1," Prova a modificare i filtri di ricerca "),o())}function se(s,i){s&1&&k(0,"p",41)}function de(s,i){if(s&1&&(n(0,"tr")(1,"td",58)(2,"div",59)(3,"span",60),a(4,"wine_bar"),o(),n(5,"h3"),a(6,"Nessuna bevanda trovata"),o(),y(7,ce,2,0,"p",61)(8,se,1,0,"p",61),o()()()),s&2){let e=d();c(7),v("ngIf",e.searchTerm||e.selectedCategory||e.showLowStockOnly||e.showAvailableOnly),c(),v("ngIf",!e.searchTerm&&!e.selectedCategory&&!e.showLowStockOnly&&!e.showAvailableOnly)}}function me(s,i){if(s&1&&(n(0,"option",31),a(1),o()),s&2){let e=i.$implicit;v("value",e.value),c(),p(" ",e.label," ")}}function ge(s,i){if(s&1){let e=B();n(0,"div",62),u("click",function(){m(e);let r=d();return g(r.closeBeverageModal())}),n(1,"div",63),u("click",function(r){return m(e),g(r.stopPropagation())}),n(2,"div",64)(3,"div",65)(4,"div",66)(5,"span",12),a(6),o()(),n(7,"div")(8,"h1",67),a(9),o()()(),n(10,"button",68),u("click",function(){m(e);let r=d();return g(r.closeBeverageModal())}),n(11,"span",12),a(12,"close"),o()()(),n(13,"div",69)(14,"div",70)(15,"div",71)(16,"label",11),a(17,"Nome Bevanda *"),o(),n(18,"input",72),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.name,r)||(l.beverageForm.name=r),g(r)}),o()(),n(19,"div",71)(20,"label",11),a(21,"Categoria *"),o(),n(22,"select",73),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.category,r)||(l.beverageForm.category=r),g(r)}),n(23,"option",16),a(24,"Seleziona categoria"),o(),y(25,me,2,2,"option",17),o()()(),n(26,"div",74)(27,"div",71)(28,"label",11),a(29,"Produttore"),o(),n(30,"input",75),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.producer,r)||(l.beverageForm.producer=r),g(r)}),o()(),n(31,"div",71)(32,"label",11),a(33,"Regione/Paese"),o(),n(34,"input",76),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.region,r)||(l.beverageForm.region=r),g(r)}),o()()(),n(35,"div",74)(36,"div",71)(37,"label",11),a(38,"Prezzo di vendita (\u20AC) *"),o(),n(39,"input",77),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.price,r)||(l.beverageForm.price=r),g(r)}),o()(),n(40,"div",71)(41,"label",11),a(42,"Costo unitario (\u20AC)"),o(),n(43,"input",78),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.cost_per_unit,r)||(l.beverageForm.cost_per_unit=r),g(r)}),o()()(),n(44,"div",74)(45,"div",71)(46,"label",11),a(47,"Stock attuale"),o(),n(48,"input",79),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.current_stock,r)||(l.beverageForm.current_stock=r),g(r)}),o()(),n(49,"div",71)(50,"label",11),a(51,"Stock minimo"),o(),n(52,"input",79),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.minimum_stock,r)||(l.beverageForm.minimum_stock=r),g(r)}),o()()(),n(53,"div",80)(54,"div",71)(55,"label",11),a(56,"Annata"),o(),n(57,"input",81),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.vintage,r)||(l.beverageForm.vintage=r),g(r)}),o()(),n(58,"div",71)(59,"label",11),a(60,"Gradazione (%)"),o(),n(61,"input",82),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.alcohol_percentage,r)||(l.beverageForm.alcohol_percentage=r),g(r)}),o()(),n(62,"div",71)(63,"label",11),a(64,"Formato"),o(),n(65,"input",83),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.bottle_format,r)||(l.beverageForm.bottle_format=r),g(r)}),o()()(),n(66,"div",84)(67,"label",11),a(68,"Descrizione"),o(),n(69,"textarea",85),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.description,r)||(l.beverageForm.description=r),g(r)}),o()(),n(70,"div",80)(71,"label",86)(72,"input",87),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.is_active,r)||(l.beverageForm.is_active=r),g(r)}),o(),n(73,"span"),a(74,"Attivo"),o()(),n(75,"label",86)(76,"input",87),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.is_available,r)||(l.beverageForm.is_available=r),g(r)}),o(),n(77,"span"),a(78,"Disponibile"),o()(),n(79,"label",86)(80,"input",87),b("ngModelChange",function(r){m(e);let l=d();return h(l.beverageForm.display_in_menu,r)||(l.beverageForm.display_in_menu=r),g(r)}),o(),n(81,"span"),a(82,"In menu"),o()()()(),n(83,"div",22)(84,"button",88),u("click",function(){m(e);let r=d();return g(r.closeBeverageModal())}),a(85," Annulla "),o(),n(86,"button",89),u("click",function(){m(e);let r=d();return g(r.showEditModal?r.updateBeverage():r.addBeverage())}),n(87,"span",12),a(88,"check"),o(),a(89),o()()()()}if(s&2){let e=d();c(6),x(e.showEditModal?"edit":"add_circle"),c(3),p("",e.showEditModal?"Modifica":"Nuova"," Bevanda"),c(9),_("ngModel",e.beverageForm.name),c(4),_("ngModel",e.beverageForm.category),c(3),v("ngForOf",e.categories),c(5),_("ngModel",e.beverageForm.producer),c(4),_("ngModel",e.beverageForm.region),c(5),_("ngModel",e.beverageForm.price),c(4),_("ngModel",e.beverageForm.cost_per_unit),c(5),_("ngModel",e.beverageForm.current_stock),c(4),_("ngModel",e.beverageForm.minimum_stock),c(5),_("ngModel",e.beverageForm.vintage),v("max",e.currentYear),c(4),_("ngModel",e.beverageForm.alcohol_percentage),c(4),_("ngModel",e.beverageForm.bottle_format),c(4),_("ngModel",e.beverageForm.description),c(3),_("ngModel",e.beverageForm.is_active),c(4),_("ngModel",e.beverageForm.is_available),c(4),_("ngModel",e.beverageForm.display_in_menu),c(9),p(" ",e.showEditModal?"Aggiorna":"Crea"," Bevanda ")}}function ue(s,i){if(s&1){let e=B();n(0,"div",62),u("click",function(){m(e);let r=d();return g(r.showConfirmModal=!1)}),n(1,"div",90),u("click",function(r){return m(e),g(r.stopPropagation())}),n(2,"div",91)(3,"span",92),a(4,"warning"),o(),n(5,"h3",93),a(6,"Conferma eliminazione"),o(),n(7,"p",94),a(8,"Sei sicuro di voler eliminare questa bevanda?"),k(9,"br"),a(10,"L'azione non pu\xF2 essere annullata."),o()(),n(11,"div",22)(12,"button",88),u("click",function(){m(e);let r=d();return g(r.showConfirmModal=!1)}),a(13," Annulla "),o(),n(14,"button",95),u("click",function(){m(e);let r=d();return g(r.confirmDelete())}),n(15,"span",12),a(16,"delete"),o(),a(17," Elimina "),o()()()()}}var ee=class s{beverageService=I(E);subscriptions=[];allBeverages=[];filteredBeverages=[];categories=[];totalProducts=0;activeProducts=0;inventoryValue=0;averagePrice=0;lowStockCount=0;categoriesCount=0;searchTerm="";selectedCategory="";sortBy="name";showAvailableOnly=!1;showLowStockOnly=!1;isLoading=!0;showAddModal=!1;showEditModal=!1;showConfirmModal=!1;beverageForm=this.getEmptyBeverageForm();currentYear=new Date().getFullYear();beverageToDeleteId=null;editingBeverage=null;ngOnInit(){this.loadData(),this.subscribeToData()}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}subscribeToData(){let i=this.beverageService.beveragesWithCategories$.subscribe(({beverages:t,categories:r})=>{this.allBeverages=t,this.categories=r,this.categoriesCount=r.length,console.log("\u{1F4CB} Categorie caricate:",this.categories.length),console.log("\u{1F37A} Bevande caricate:",this.allBeverages.length),this.updateStatistics(),this.applyFilters(),this.isLoading=!1},t=>{console.error("Error loading beverages:",t),this.isLoading=!1}),e=this.beverageService.stats$.subscribe(t=>{t&&(this.totalProducts=t.total,this.activeProducts=t.active,this.inventoryValue=t.inventoryValue,this.averagePrice=t.averagePrice,this.lowStockCount=t.lowStockCount)});this.subscriptions.push(i,e)}loadData(){this.isLoading=!0,this.beverageService.loadData()}onSearchChange(i){this.searchTerm=i,this.applyFilters()}onCategoryFilterChange(i){this.selectedCategory=i,this.applyFilters()}onSortChange(i){this.sortBy=i,this.applyFilters()}toggleAvailableFilter(){this.showAvailableOnly=!this.showAvailableOnly,this.applyFilters()}toggleLowStockFilter(){this.showLowStockOnly=!this.showLowStockOnly,this.applyFilters()}applyFilters(){let i=[...this.allBeverages];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();i=i.filter(t=>t.name.toLowerCase().includes(e)||t.producer?.toLowerCase().includes(e)||t.region?.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}this.selectedCategory&&(i=i.filter(e=>e.category===this.selectedCategory)),this.showAvailableOnly&&(i=i.filter(e=>e.is_available&&e.current_stock>0)),this.showLowStockOnly&&(i=i.filter(e=>e.current_stock<=e.minimum_stock)),this.filteredBeverages=this.beverageService.sortBeverages(i,this.sortBy)}getEmptyBeverageForm(){return{name:"",category:this.categories[0]?.value||"vino_rosso",price:0,cost_per_unit:0,current_stock:0,minimum_stock:10,alcohol_percentage:13,bottle_format:"750ml",is_active:!0,is_available:!0,display_in_menu:!0,alert_enabled:!0,to_buy:!1,menu_position:0}}addBeverage(){return f(this,null,function*(){if(this.validateBeverageForm())try{(yield this.beverageService.createBeverage(this.beverageForm))?(this.showAddModal=!1,this.resetBeverageForm()):alert("Errore nella creazione della bevanda")}catch(i){console.error("Error adding beverage:",i),alert("Errore nella creazione della bevanda")}})}editBeverage(i){this.editingBeverage=i,this.beverageForm=S({},i),this.showEditModal=!0}updateBeverage(){return f(this,null,function*(){if(!(!this.validateBeverageForm()||!this.editingBeverage))try{(yield this.beverageService.updateBeverage(this.editingBeverage.id,this.beverageForm))?(this.showEditModal=!1,this.resetBeverageForm()):alert("Errore nell'aggiornamento della bevanda")}catch(i){console.error("Error updating beverage:",i),alert("Errore nell'aggiornamento della bevanda")}})}deleteBeverage(i){this.beverageToDeleteId=i,this.showConfirmModal=!0}confirmDelete(){return f(this,null,function*(){if(this.beverageToDeleteId)try{(yield this.beverageService.delete(this.beverageToDeleteId))?(this.showConfirmModal=!1,this.beverageToDeleteId=null):alert("Errore nell'eliminazione della bevanda")}catch(i){console.error("Error deleting beverage:",i),alert("Errore nell'eliminazione della bevanda")}})}updateStock(i,e){return f(this,null,function*(){try{yield this.beverageService.updateStock(i,e)}catch(t){console.error("Error updating stock:",t),alert("Errore nell'aggiornamento dello stock")}})}validateBeverageForm(){return this.beverageForm.name?.trim()?this.beverageForm.category?!this.beverageForm.price||this.beverageForm.price<=0?(alert("Inserisci un prezzo valido"),!1):!0:(alert("Seleziona una categoria"),!1):(alert("Il nome della bevanda \xE8 obbligatorio"),!1)}resetBeverageForm(){this.beverageForm=this.getEmptyBeverageForm(),this.editingBeverage=null}closeBeverageModal(){this.showAddModal=!1,this.showEditModal=!1,this.resetBeverageForm()}getCategoryLabel(i){return this.categories.find(t=>t.value===i)?.label||i}getCategoryIcon(i){return this.categories.find(t=>t.value===i)?.icon||"local_bar"}getCategoryColor(i){return this.categories.find(t=>t.value===i)?.color||"#6B7280"}getStockColor(i){return i.current_stock===0?"#FF6B6B":i.current_stock<=i.minimum_stock?"#FFA726":"#4CAF50"}getStockPercentage(i){let e=Math.max(i.current_stock,i.minimum_stock*2);return Math.min(i.current_stock/e*100,100)}getStockStatus(i){return i.current_stock===0?{class:"chip-error",text:"Esaurito"}:i.current_stock<=i.minimum_stock?{class:"chip-warning",text:"Scorta bassa"}:{class:"chip-success",text:"Disponibile"}}formatPrice(i){return i.toFixed(2).replace(".",",")}formatNumber(i){return i.toFixed(2).replace(".",",")}updateStatistics(){this.totalProducts=this.allBeverages.length,this.activeProducts=this.allBeverages.filter(i=>i.is_active).length,this.inventoryValue=this.allBeverages.reduce((i,e)=>i+e.cost_per_unit*e.current_stock,0),this.averagePrice=this.allBeverages.length>0?this.allBeverages.reduce((i,e)=>i+e.price,0)/this.allBeverages.length:0,this.lowStockCount=this.allBeverages.filter(i=>i.current_stock<=i.minimum_stock).length}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=O({type:s,selectors:[["app-alcoholic-beverages"]],decls:115,vars:20,consts:[[1,"page-container"],[1,"grid-cards","p-sm"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"card-title"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"card-footer","text-muted"],[1,"form-card","mt-lg"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","gap-md"],[1,"form-group","flex-1"],[1,"standard-label"],[1,"material-icons"],["type","text","placeholder","Cerca per nome, produttore, regione...",1,"form-input",3,"input","value"],[1,"form-row"],[1,"form-input",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","name"],["value","price_asc"],["value","price_desc"],["value","stock"],[1,"modal-footer"],["title","Mostra solo disponibili",1,"promethea-button","ghost",3,"click"],["title","Mostra solo scorte basse",1,"promethea-button","ghost",3,"click"],[1,"promethea-button",3,"click"],[1,"table-section","p-sm"],[1,"crm-table"],[4,"ngIf"],["class","beverage-row",3,"bg-red-50","bg-green-50",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],["colspan","9",1,"text-center","p-xl"],[1,"flex","flex-col","items-center","justify-center","gap-md"],[1,"material-icons","animate-spin"],[1,"beverage-row"],[1,"flex","items-center","gap-sm","rounded"],[1,"material-icons","text-sm"],["class","text-mini text-muted truncate max-w-xs",4,"ngIf"],[1,"chip"],[1,"flex","p-sm",2,"text-wrap","nowrap"],[1,"text-muted"],[1,"text-primary"],["class","text-mini text-muted",4,"ngIf"],[1,"flex","flex-col"],[1,"flex","items-center","gap-2"],[1,"w-20"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all"],[1,"text-mini","text-muted","mt-1"],[1,"flex","gap-sm"],["title","Diminuisci stock",1,"icon-button",3,"click","disabled"],[1,"p-sm","text-mini"],["title","Aumenta stock",1,"icon-button",3,"click"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small","danger",3,"click"],[1,"text-mini","text-muted","truncate","max-w-xs"],[1,"text-mini","text-muted"],["colspan","9",1,"empty-state-row"],[1,"empty-state","mb-lg"],[1,"material-icons","text-4xl","text-gray-300","mb-4"],["class","text-muted",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"modal-header"],[1,"flex"],[1,"header-icon"],[1,"section-title"],[1,"icon-button",3,"click"],[1,"form-card"],[1,"grid","grid-cols-2","gap-md"],[1,"form-group"],["type","text","placeholder","Es: Chianti Classico","required","",1,"form-input",3,"ngModelChange","ngModel"],["required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-md","mt-sm"],["type","text","placeholder","Nome produttore",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Es: Toscana, Italia",1,"form-input",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-3","gap-md","mt-sm"],["type","number","min","1900",1,"form-input",3,"ngModelChange","ngModel","max"],["type","number","step","0.1","min","0","max","100",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Es: 750ml, 1L",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-group","mt-sm"],["rows","2","placeholder","Note di degustazione, abbinamenti...",1,"form-input",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"promethea-button","ghost","flex-1",3,"click"],[1,"promethea-button","primary","flex-1",3,"click"],[1,"modal-container","modal-xs",3,"click"],[1,"modal-body","text-center"],[1,"material-icons","text-4xl","text-red-500","mb-sm"],[1,"text-md","font-bold","mb-sm"],[1,"text-muted","mb-md"],[1,"promethea-button","danger","flex-1",3,"click"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),a(5,"inventory"),o(),n(6,"h3",5),a(7,"Prodotti Totali"),o()(),n(8,"div",6),a(9),o(),n(10,"div",7),a(11),o()(),n(12,"div",2)(13,"div",3)(14,"span",4),a(15,"euro"),o(),n(16,"h3",5),a(17,"Valore Inventario"),o()(),n(18,"div",6),a(19),o(),n(20,"div",7),a(21),o()(),n(22,"div",2)(23,"div",3)(24,"span",4),a(25,"category"),o(),n(26,"h3",5),a(27,"Categorie"),o()(),n(28,"div",6),a(29),o(),n(30,"div",7),a(31,"Categorie disponibili"),o()(),n(32,"div",2)(33,"div",3)(34,"span",4),a(35,"warning"),o(),n(36,"h3",5),a(37,"Scorte Basse"),o()(),n(38,"div",6),a(39),o(),n(40,"div",7),a(41),o()()(),n(42,"div",8)(43,"div",9)(44,"div",10)(45,"label",11)(46,"span",12),a(47,"search"),o(),a(48," Cerca Prodotto "),o(),n(49,"input",13),u("input",function(l){return t.onSearchChange(l.target.value)}),o()(),n(50,"div",14)(51,"div",10)(52,"label",11)(53,"span",12),a(54,"category"),o(),a(55," Categoria "),o(),n(56,"select",15),u("change",function(l){return t.onCategoryFilterChange(l.target.value)}),n(57,"option",16),a(58,"Tutte le categorie"),o(),y(59,re,2,3,"option",17),o()(),n(60,"div",10)(61,"label",11)(62,"span",12),a(63,"sort"),o(),a(64," Ordina per "),o(),n(65,"select",15),u("change",function(l){return t.onSortChange(l.target.value)}),n(66,"option",18),a(67,"Nome"),o(),n(68,"option",19),a(69,"Prezzo crescente"),o(),n(70,"option",20),a(71,"Prezzo decrescente"),o(),n(72,"option",21),a(73,"Disponibilit\xE0"),o()()()()(),n(74,"div",22)(75,"button",23),u("click",function(){return t.toggleAvailableFilter()}),n(76,"span",12),a(77,"check_circle"),o(),a(78," Disponibili "),o(),n(79,"button",24),u("click",function(){return t.toggleLowStockFilter()}),n(80,"span",12),a(81,"warning"),o(),a(82," Scorte basse "),o(),n(83,"button",25),u("click",function(){return t.showAddModal=!0}),n(84,"span",12),a(85,"add"),o(),a(86," Nuova Bevanda "),o()()(),n(87,"div",26)(88,"table",27)(89,"thead")(90,"tr")(91,"th"),a(92,"Prodotto"),o(),n(93,"th"),a(94,"Categoria"),o(),n(95,"th"),a(96,"Produttore"),o(),n(97,"th"),a(98,"Regione"),o(),n(99,"th"),a(100,"Annata"),o(),n(101,"th"),a(102,"Prezzo"),o(),n(103,"th"),a(104,"Stock"),o(),n(105,"th"),a(106,"Stato"),o(),n(107,"th"),a(108,"Azioni"),o()()(),n(109,"tbody"),y(110,ne,7,0,"tr",28)(111,le,59,36,"tr",29)(112,de,9,2,"tr",28),o()()()(),y(113,ge,90,20,"div",30)(114,ue,18,0,"div",30)),e&2&&(c(9),x(t.totalProducts),c(2),p("",t.activeProducts," attivi"),c(8),p("\u20AC",t.formatNumber(t.inventoryValue)),c(2),p("Costo medio: \u20AC",t.formatNumber(t.averagePrice)),c(8),x(t.categoriesCount),c(10),x(t.lowStockCount),c(2),p(" ",t.lowStockCount>0?"Riordina presto":"Tutto ok"," "),c(8),v("value",t.searchTerm),c(7),v("value",t.selectedCategory||""),c(3),v("ngForOf",t.categories),c(6),v("value",t.sortBy),c(10),w("active",t.showAvailableOnly),c(4),w("active",t.showLowStockOnly),c(31),v("ngIf",t.isLoading),c(),v("ngForOf",t.filteredBeverages),c(),v("ngIf",!t.isLoading&&t.filteredBeverages.length===0),c(),v("ngIf",t.showAddModal||t.showEditModal),c(),v("ngIf",t.showConfirmModal))},dependencies:[z,L,D,X,H,J,j,G,N,Y,q,U,Q,K,R,$],styles:[".icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;max-height:200px;overflow-y:auto;padding:8px;background:var(--smoke-0);border-radius:8px}.icon-grid-button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border:2px solid transparent;border-radius:6px;background:transparent;cursor:pointer;transition:all .2s}.icon-grid-button[_ngcontent-%COMP%]:hover{background:var(--smoke-1);transform:translateY(-2px)}.icon-grid-button.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:var(--primary-light)}.color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:6px;max-height:120px;overflow-y:auto;padding:8px;background:var(--smoke-0);border-radius:8px}.color-grid-button[_ngcontent-%COMP%]{width:30px;height:30px;border:2px solid transparent;border-radius:50%;cursor:pointer;transition:all .2s}.color-grid-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.color-grid-button.selected[_ngcontent-%COMP%]{border-color:var(--dark);transform:scale(1.1);box-shadow:0 2px 8px #0003}.chip.warning[_ngcontent-%COMP%]{background:#ffa726;color:#fff;font-size:12px;padding:4px 8px;border-radius:12px;display:inline-flex;align-items:center;gap:4px}.icon-button.danger[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.icon-button.danger[_ngcontent-%COMP%]:hover{background:#ff5252}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:8px;border-radius:6px;transition:background .2s}.checkbox-label[_ngcontent-%COMP%]:hover{background:var(--smoke-0)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;border-radius:4px;border:2px solid var(--gray-3);cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--primary);border-color:var(--primary)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:var(--smoke-0);border-radius:12px;border:2px dashed var(--gray-3)}@media (max-width: 768px){.modal-container.modal-md[_ngcontent-%COMP%]{width:95%;margin:20px auto}.icon-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.color-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}"]})};export{ee as AlcoholicBeverages};
