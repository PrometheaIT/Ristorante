import{a as J}from"./chunk-A3NX6F26.js";import{a as X}from"./chunk-4E5AB43O.js";import"./chunk-GKNZLVDN.js";import{b as q,d as L,h as j,o as W,p as U,q as Q,v as G}from"./chunk-Y4TUQNZC.js";import{a as H}from"./chunk-7V5YPNIB.js";import{a as B}from"./chunk-KNL3CWA3.js";import{d as F,e as z,i as A,k as $}from"./chunk-DCWKKS33.js";import{$b as M,Db as g,E as D,Eb as c,La as o,Lb as C,Mb as V,Pb as I,Qb as a,Rb as y,Sb as u,Tb as O,Vb as w,Wb as k,Xb as E,ab as R,bc as P,ea as S,ec as T,f,fb as p,ja as v,ka as h,qb as m,rb as r,sb as n,tb as N,zb as b}from"./chunk-K5RDB55Y.js";function ne(s,e){s&1&&(r(0,"div",32)(1,"span",6),a(2,"restaurant_menu"),n(),r(3,"h3"),a(4,"Nessun ordine attivo"),n(),r(5,"p",7),a(6,"Tutti gli ordini sono stati completati"),n()())}function re(s,e){if(s&1&&(r(0,"span",67),a(1),n()),s&2){let t=c().$implicit,i=c(2);o(),u(" (",t.preparation_time-i.getElapsedTime(t)," min rimanenti) ")}}function ae(s,e){if(s&1&&(r(0,"div",68)(1,"small"),a(2),n()()),s&2){let t=c().$implicit;o(2),y(t.notes)}}function se(s,e){if(s&1){let t=b();r(0,"button",69),g("click",function(){v(t);let l=c().$implicit,d=c(2);return h(d.updateItemStatus(l,"preparing"))}),r(1,"span",6),a(2,"play_arrow"),n(),a(3," Inizia "),n()}}function oe(s,e){if(s&1){let t=b();r(0,"button",70),g("click",function(){v(t);let l=c().$implicit,d=c(2);return h(d.updateItemStatus(l,"ready"))}),r(1,"span",6),a(2,"check"),n(),a(3," Pronto "),n()}}function le(s,e){if(s&1){let t=b();r(0,"button",71),g("click",function(){v(t);let l=c().$implicit,d=c(2);return h(d.updateItemStatus(l,"served"))}),r(1,"span",6),a(2,"local_shipping"),n(),a(3," Servito "),n()}}function de(s,e){if(s&1){let t=b();r(0,"select",72),g("change",function(l){v(t);let d=c().$implicit,x=c(2);return h(x.updateItemStatus(d,l))}),r(1,"option",73),a(2,"In Attesa"),n(),r(3,"option",23),a(4,"In Preparazione"),n(),r(5,"option",24),a(6,"Pronto"),n()()}if(s&2){let t=c().$implicit;m("value",t.status)}}function ce(s,e){if(s&1){let t=b();r(0,"div",48)(1,"div",49)(2,"div",50)(3,"h4",51),a(4),n(),r(5,"div",52)(6,"span",53),a(7),n(),r(8,"span",54)(9,"span",6),a(10,"schedule"),n(),a(11),n(),r(12,"span",55),a(13),p(14,re,2,1,"span",56),n()(),p(15,ae,3,1,"div",57),n(),r(16,"div",58)(17,"span",59),a(18),n(),r(19,"div",60),p(20,se,4,0,"button",61)(21,oe,4,0,"button",62)(22,le,4,0,"button",63),r(23,"button",64),g("click",function(){let l=v(t).$implicit,d=c(2);return h(d.openRecipeModal(l))}),r(24,"span",6),a(25,"menu_book"),n(),a(26," Ricetta "),n(),r(27,"button",65),g("click",function(){let l=v(t).$implicit,d=c(2);return h(d.markItemAsOutOfStock(l))}),r(28,"span",6),a(29,"block"),n(),a(30," Esaurito "),n(),p(31,de,7,1,"select",66),n()()()()}if(s&2){let t=e.$implicit,i=c(2);I("status-"+t.status),o(4),y(t.dish_name),o(3),u("x",t.quantity),o(4),u(" ",t.preparation_time," min "),o(),I(i.getPreparationTimeColor(i.getElapsedTime(t),t.preparation_time)),o(),O(" ",i.getElapsedTime(t),"/",t.preparation_time," min "),o(),m("ngIf",t.status==="preparing"),o(),m("ngIf",t.notes),o(2),I(i.getStatusColor(t.status)),o(),u(" ",i.getStatusText(t.status)," "),o(2),m("ngIf",t.status==="waiting"),o(),m("ngIf",t.status==="preparing"),o(),m("ngIf",t.status==="ready"),o(5),m("disabled",t.status==="out_of_stock"),o(4),m("ngIf",t.status!=="served"&&t.status!=="out_of_stock")}}function me(s,e){if(s&1){let t=b();r(0,"div",74)(1,"button",75),g("click",function(){v(t);let l=c().$implicit,d=c();return h(d.markOrderAsReady(l))}),r(2,"span",6),a(3,"done_all"),n(),a(4," Segna tutto come pronto "),n()()}if(s&2){let t=c().$implicit;o(),m("disabled",t.status==="ready")}}function pe(s,e){if(s&1&&(r(0,"div",33)(1,"div",11)(2,"div",34)(3,"div",35)(4,"div",5),a(5),n(),r(6,"div",36)(7,"span",37),a(8),n(),r(9,"span",38),a(10),n(),r(11,"span",39),a(12),n()()(),r(13,"div",40)(14,"div",41)(15,"span"),a(16),n(),r(17,"span",42),a(18),M(19,"number"),n()(),r(20,"div",43),N(21,"div",44),n()()()(),r(22,"div",10)(23,"div",45),p(24,ce,32,19,"div",46),n(),p(25,me,5,1,"div",47),n()()),s&2){let t=e.$implicit,i=c();o(5),u("Ordine #",t.order_number),o(3),u("Tavolo ",t.table_number),o(2),y(i.formatTime(t.created_at)),o(),I(i.getStatusColor(t.status)),o(),u(" ",i.getStatusText(t.status)," "),o(4),O("",t.completed_items,"/",t.total_items," piatti"),o(2),u("",P(19,15,t.progress_percentage,"1.0-0"),"%"),o(3),I(i.getStatusColor(t.status)),V("width",t.progress_percentage,"%"),o(3),m("ngForOf",i.getNonServedItems(t.items)),o(),m("ngIf",t.items.length>0)}}function ge(s,e){if(s&1&&(r(0,"div",99),a(1),M(2,"number"),n()),s&2){let t=c().$implicit,i=c(4);o(),u(" Costo: \u20AC",P(2,1,i.getIngredientCost(t),"1.2-2")," ")}}function ue(s,e){if(s&1&&(r(0,"div",100)(1,"label",17)(2,"span",6),a(3,"notes"),n(),a(4," Note di preparazione: "),n(),r(5,"div",101),a(6),n()()),s&2){let t=c().$implicit,i=c(4);o(6),u(" ",i.getIngredientNotes(t)," ")}}function _e(s,e){if(s&1&&(r(0,"div",92)(1,"div",93)(2,"div",94)(3,"strong",95),a(4),n(),r(5,"span",96),a(6),n()(),p(7,ge,3,4,"div",97),n(),p(8,ue,7,1,"div",98),n()),s&2){let t=e.$implicit,i=c(4);o(4),y(i.getIngredientName(t)),o(2),O(" ",i.getIngredientQuantity(t)," ",i.getIngredientUnit(t)," "),o(),m("ngIf",i.getIngredientCost(t)>0),o(),m("ngIf",i.getIngredientNotes(t))}}function ve(s,e){if(s&1&&(r(0,"div",90),p(1,_e,9,5,"div",91),n()),s&2){let t=c(3);o(),m("ngForOf",t.getRecipe(t.selectedRecipeItem.dish_id))}}function he(s,e){s&1&&(r(0,"div",32)(1,"span",6),a(2,"info"),n(),r(3,"p"),a(4,"Nessun ingrediente definito per questo piatto"),n()())}function fe(s,e){if(s&1&&(r(0,"div",85)(1,"h4",86)(2,"span",6),a(3,"menu_book"),n(),a(4," Istruzioni di Preparazione "),n(),r(5,"div",102)(6,"p"),a(7),n()()()),s&2){let t=c(3);o(7),y(t.getRecipeInstructions(t.selectedRecipeItem.dish_id))}}function xe(s,e){s&1&&(r(0,"div",32)(1,"span",6),a(2,"info"),n(),r(3,"p"),a(4,"Nessuna istruzione di preparazione disponibile"),n()())}function ye(s,e){if(s&1&&(r(0,"div")(1,"div",85)(2,"h4",86)(3,"span",6),a(4,"list_alt"),n(),a(5," Ingredienti "),r(6,"span",87),a(7),n()(),p(8,ve,2,1,"div",88)(9,he,5,0,"ng-template",null,1,T),n(),p(11,fe,8,1,"div",89)(12,xe,5,0,"div",29),n()),s&2){let t=C(10),i=c(2);o(7),u(" ",i.getRecipe(i.selectedRecipeItem.dish_id).length," "),o(),m("ngIf",i.getRecipe(i.selectedRecipeItem.dish_id).length>0)("ngIfElse",t),o(3),m("ngIf",i.getRecipeInstructions(i.selectedRecipeItem.dish_id)!=="Nessuna istruzione disponibile"),o(),m("ngIf",!i.getRecipeInstructions(i.selectedRecipeItem.dish_id))}}function be(s,e){s&1&&(r(0,"div",32)(1,"span",6),a(2,"info"),n(),r(3,"p"),a(4,"Nessuna ricetta disponibile per questo piatto"),n()())}function Ie(s,e){if(s&1){let t=b();r(0,"div",76),g("click",function(){v(t);let l=c();return h(l.closeRecipeModal())}),r(1,"div",77),g("click",function(l){return v(t),h(l.stopPropagation())}),r(2,"div",78)(3,"h2",79)(4,"span",6),a(5,"menu_book"),n(),a(6),r(7,"span",80),a(8),n()(),r(9,"button",81),g("click",function(){v(t);let l=c();return h(l.closeRecipeModal())}),r(10,"span",6),a(11,"close"),n()()(),r(12,"div",82),p(13,ye,13,5,"div",83)(14,be,5,0,"ng-template",null,0,T),n(),r(16,"div",84)(17,"button",27),g("click",function(){v(t);let l=c();return h(l.closeRecipeModal())}),r(18,"span",6),a(19,"close"),n(),a(20," Chiudi "),n()()()()}if(s&2){let t=C(15),i=c();o(6),u(" Ricetta - ",i.selectedRecipeItem==null?null:i.selectedRecipeItem.dish_name," "),o(2),u(" ",i.selectedRecipeItem==null?null:i.selectedRecipeItem.preparation_time," min "),o(5),m("ngIf",i.selectedRecipeItem)("ngIfElse",t)}}var Y=class s{orderService=S(X);dishService=S(H);tableService=S(J);authService=S(B);kitchenOrders=[];filteredOrders=[];statusFilter="all";searchTerm="";refreshSubscription;timers={};elapsedTimes={};dishStatusOptions=[{value:"waiting",label:"In Attesa",icon:"schedule"},{value:"preparing",label:"In Preparazione",icon:"kitchen"},{value:"ready",label:"Pronto",icon:"done"},{value:"served",label:"Servito",icon:"local_shipping"},{value:"out_of_stock",label:"Esaurito",icon:"block"}];get waitingOrdersCount(){return this.kitchenOrders.filter(e=>this.getNonServedItems(e.items).some(i=>i.status==="waiting")).length}showRecipeModal=!1;selectedRecipeItem=null;get preparingOrdersCount(){return this.kitchenOrders.filter(e=>this.getNonServedItems(e.items).some(i=>i.status==="preparing")).length}get readyOrdersCount(){return this.kitchenOrders.filter(e=>this.getNonServedItems(e.items).some(i=>i.status==="ready")).length}get totalActiveOrders(){return this.kitchenOrders.filter(e=>this.getNonServedItems(e.items).length>0).length}ngOnInit(){console.log("\u{1F3C1} KitchenDisplay initialized"),this.loadKitchenData(),this.refreshSubscription=D(3e4).subscribe(()=>{this.loadKitchenData()})}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe(),Object.keys(this.timers).forEach(e=>{clearInterval(this.timers[e])}),this.timers={}}loadKitchenData(){return f(this,null,function*(){try{console.log("\u{1F504} Loading kitchen data..."),yield Promise.all([this.loadActiveKitchenOrders(),this.dishService.loadDishes(),this.tableService.loadTables()]),console.log("\u2705 Kitchen data loaded successfully")}catch(e){console.error("\u{1F4A5} Error loading kitchen data:",e)}})}loadActiveKitchenOrders(){return f(this,null,function*(){try{let e=yield this.orderService.loadActiveOrders();console.log("\u{1F50D} Active orders for kitchen:",e.length);let t=new Map;this.kitchenOrders.forEach(i=>{i.items.forEach(l=>{t.set(l.id,l.status)})}),this.kitchenOrders=yield Promise.all(e.map(i=>f(this,null,function*(){return yield this.transformOrderForKitchen(i)}))),this.kitchenOrders.forEach(i=>{i.items.forEach(l=>{let d=t.get(l.id);d&&d!=="waiting"&&(l.status=d)}),i.status=this.determineOverallOrderStatus(i.items,i.status)}),this.kitchenOrders.sort((i,l)=>new Date(i.created_at).getTime()-new Date(l.created_at).getTime()),this.applyFilters()}catch(e){console.error("\u274C Error loading kitchen orders:",e),this.kitchenOrders=[]}})}transformOrderForKitchen(e){return f(this,null,function*(){let t=e.order_items||[],i=yield Promise.all(t.map(_=>f(this,null,function*(){let K=this.dishService.getDishById(_.dish_id),te=yield this.getTableById(e.table_id),ie=_.status||"waiting";return{id:_.id,dish_id:_.dish_id,dish_name:_.dish_name||K?.name||"Piatto sconosciuto",quantity:_.quantity,status:ie,order_id:e.id,table_number:te?.table_number||"N/A",table_id:e.table_id,preparation_time:K?.preparation_time||15,elapsed_time:this.calculateElapsedTime(_.created_at||e.created_at),notes:_.item_notes,created_at:_.created_at||e.created_at}}))),l=i.length,d=i.filter(_=>_.status==="ready"||_.status==="served").length,x=l>0?d/l*100:0,Z=this.determineOverallOrderStatus(i,e.status),ee=yield this.getTableById(e.table_id);return{id:e.id,order_number:e.order_number,table_id:e.table_id,table_number:ee?.table_number||"N/A",status:Z,items:i,created_at:e.created_at,total_items:l,completed_items:d,progress_percentage:x}})}mapItemStatus(e){return"waiting"}determineOverallOrderStatus(e,t){return e.length===0?t:e.every(x=>x.status==="ready"||x.status==="served")?"ready":e.some(x=>x.status==="preparing")||e.some(x=>x.status==="ready")?"preparing":t}calculateElapsedTime(e){let t=new Date(e).getTime(),i=new Date().getTime();return Math.floor((i-t)/(1e3*60))}getTableById(e){return f(this,null,function*(){return e?this.tableService.getTables().find(i=>i.id===e):null})}markOrderAsReady(e){return f(this,null,function*(){try{console.log(`\u{1F504} Marking order ${e.order_number} as ready`);for(let t of e.items)t.status!=="served"&&(yield this.updateItemStatus(t,"ready"));console.log("\u2705 Order marked as ready")}catch(t){console.error("\u274C Error marking order as ready:",t)}})}applyFilters(){let e=this.kitchenOrders;if(this.statusFilter!=="all"&&(e=e.filter(t=>t.status===this.statusFilter)),this.searchTerm){let t=this.searchTerm.toLowerCase();e=e.filter(i=>i.order_number.toLowerCase().includes(t)||i.table_number.toLowerCase().includes(t)||i.items.some(l=>l.dish_name.toLowerCase().includes(t)))}e=e.filter(t=>t.items.some(i=>i.status!=="served")),this.filteredOrders=e}onStatusFilterChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}getStatusColor(e){return{waiting:"warning",preparing:"primary",ready:"success",served:"secondary",out_of_stock:"danger"}[e]||"secondary"}getStatusText(e){return{waiting:"In Attesa",preparing:"In Preparazione",ready:"Pronto",served:"Servito",out_of_stock:"Esaurito"}[e]||e}formatTime(e){return new Date(e).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}getPreparationTimeColor(e,t){let i=e/t*100;return i<50?"success":i<75?"warning":"danger"}forceRefresh(){return f(this,null,function*(){yield this.loadKitchenData()})}markItemAsOutOfStock(e){return f(this,null,function*(){try{console.log(`\u{1F504} Marking item ${e.dish_name} as out of stock`);let t=this.dishService.getDishById(e.dish_id);t&&(yield this.dishService.updateDish(t.id,{status:"out_of_stock"})),yield this.updateItemStatus(e,"out_of_stock"),console.log("\u2705 Item marked as out of stock")}catch(t){console.error("\u274C Error marking item as out of stock:",t)}})}openRecipeModal(e){this.selectedRecipeItem=e,this.showRecipeModal=!0}closeRecipeModal(){this.selectedRecipeItem=null,this.showRecipeModal=!1}getRecipe(e){if(!e)return console.warn("Nessun dishId fornito"),[];let t=this.dishService.getDishById(e);return t?t.ingredients_composition||[]:(console.warn(`Piatto con ID ${e} non trovato`),[])}startTimer(e){this.timers[e.id]&&clearInterval(this.timers[e.id]),this.timers[e.id]=setInterval(()=>{this.elapsedTimes[e.id]===void 0?this.elapsedTimes[e.id]=this.calculateElapsedTime(e.created_at):this.elapsedTimes[e.id]++,this.elapsedTimes[e.id]>=e.preparation_time&&e.status==="preparing"&&this.autoCompletePreparation(e)},6e4)}stopTimer(e){this.timers[e]&&(clearInterval(this.timers[e]),delete this.timers[e])}autoCompletePreparation(e){console.log(`\u23F0 Auto-completing preparation for ${e.dish_name}`),this.updateItemStatus(e,"ready")}updateItemStatus(e,t){return f(this,null,function*(){try{let i;if(typeof t=="string"?i=t:i=t.target.value,console.log(`\u{1F504} Updating item ${e.id} status to ${i}`),!(yield this.orderService.updateOrderItemStatus(e.id,i)))throw new Error("Failed to update status in database");if((i==="ready"||i==="served"||i==="out_of_stock")&&this.stopTimer(e.id),i==="preparing"&&(this.elapsedTimes[e.id]=this.calculateElapsedTime(e.created_at),this.startTimer(e)),e.status=i,i==="out_of_stock"){let d=this.dishService.getDishById(e.dish_id);d&&(yield this.dishService.updateDish(d.id,{status:"out_of_stock"}))}this.updateLocalOrderStatus(e.order_id),console.log("\u2705 Item status updated successfully")}catch(i){console.error("\u274C Error updating item status:",i),alert("Errore durante l'aggiornamento dello stato")}})}updateLocalOrderStatus(e){let t=this.kitchenOrders.find(i=>i.id===e);if(t){let i=this.getNonServedItems(t.items);if(i.length===0){this.kitchenOrders=this.kitchenOrders.filter(d=>d.id!==e),this.applyFilters();return}t.status=this.determineOverallOrderStatus(i,t.status);let l=i.filter(d=>d.status==="ready"||d.status==="served").length;t.completed_items=l,t.total_items=i.length,t.progress_percentage=t.total_items>0?l/t.total_items*100:0}}getElapsedTime(e){return this.elapsedTimes[e.id]!==void 0?this.elapsedTimes[e.id]:this.calculateElapsedTime(e.created_at)}getRecipeInstructions(e){return e&&this.dishService.getDishById(e)?.recipe_instructions||""}getIngredientNotes(e){return e.recipe_notes||""}getIngredientName(e){return this.getIngredientDetails(e)?.name||"Ingrediente"}getIngredientQuantity(e){return this.getIngredientDetails(e)?.quantity||0}getIngredientUnit(e){let t=this.getIngredientDetails(e);return t?.unit_symbol||t?.unit||""}getIngredientCost(e){return this.getIngredientDetails(e)?.cost||0}getIngredientDetails(e){if(!e)return null;if(e.name&&e.quantity&&e.unit)return e;let t=this.selectedRecipeItem?.dish_id;if(!t)return console.warn("Nessun dish_id disponibile per cercare gli ingredienti"),e;let i=this.dishService.getDishById(t);return!i||!i.ingredients_composition?e:i.ingredients_composition.find(d=>d.ingredient_id===e.ingredient_id)||e}getNonServedItems(e){return e.filter(t=>t.status!=="served")}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=R({type:s,selectors:[["app-kitchen-display"]],decls:77,vars:9,consts:[["noRecipe",""],["noIngredients",""],[1,"kitchen-display-container","page-container"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"material-icons"],[1,"text-muted"],[1,"grid-cards"],[1,"card"],[1,"card-content"],[1,"card-header"],[1,"card-title"],[1,"card-number"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[1,"form-input",3,"ngModelChange","change","ngModel"],["value","all"],["value","pending"],["value","confirmed"],["value","active"],["value","preparing"],["value","ready"],["type","text","placeholder","Numero ordine, tavolo o piatto...",1,"form-input",3,"ngModelChange","input","ngModel"],[1,"actions-container"],[1,"promethea-button","primary",3,"click"],[1,"orders-section"],["class","empty-state",4,"ngIf"],["class","order-card card",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"empty-state"],[1,"order-card","card"],[1,"order-header"],[1,"order-info"],[1,"order-details"],[1,"table-badge"],[1,"time-badge"],[1,"chip"],[1,"order-progress"],[1,"progress-info"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"order-items"],["class","order-item",3,"class",4,"ngFor","ngForOf"],["class","order-actions",4,"ngIf"],[1,"order-item"],[1,"item-main"],[1,"item-info"],[1,"item-name"],[1,"item-details"],[1,"quantity"],[1,"preparation-time"],[1,"elapsed-time"],["class","time-remaining",4,"ngIf"],["class","item-notes",4,"ngIf"],[1,"item-actions"],[1,"item-status","chip"],[1,"action-buttons"],["class","promethea-button primary small",3,"click",4,"ngIf"],["class","promethea-button success small",3,"click",4,"ngIf"],["class","promethea-button secondary small",3,"click",4,"ngIf"],[1,"promethea-button","ghost","small","info",3,"click"],[1,"promethea-button","ghost","small","danger",3,"click","disabled"],["class","form-input small status-selector",3,"value","change",4,"ngIf"],[1,"time-remaining"],[1,"item-notes"],[1,"promethea-button","primary","small",3,"click"],[1,"promethea-button","success","small",3,"click"],[1,"promethea-button","secondary","small",3,"click"],[1,"form-input","small","status-selector",3,"change","value"],["value","waiting"],[1,"order-actions"],[1,"promethea-button","success",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"preparation-badge","chip","active"],[1,"modal-close",3,"click"],[1,"modal-body"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],[1,"form-section"],[1,"subsection-title"],[1,"chip","active"],["class","settings-grid",4,"ngIf","ngIfElse"],["class","form-section",4,"ngIf"],[1,"settings-grid"],["class","form-subsection ingredient-card",4,"ngFor","ngForOf"],[1,"form-subsection","ingredient-card"],[1,"ingredient-header"],[1,"ingredient-main-info"],[1,"ingredient-name"],[1,"ingredient-quantity","chip","active"],["class","ingredient-cost text-muted",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"ingredient-cost","text-muted"],[1,"form-group"],[1,"ingredient-notes-content"],[1,"recipe-instructions-content"]],template:function(t,i){t&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5)(4,"span",6),a(5,"restaurant"),n(),a(6," Display Cucina "),n(),r(7,"p",7),a(8,"Gestisci gli ordini in tempo reale"),n()()(),r(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",6),a(14,"schedule"),n(),r(15,"div",12),a(16,"In Attesa"),n()(),r(17,"div",13),a(18),n()()(),r(19,"div",9)(20,"div",10)(21,"div",11)(22,"span",6),a(23,"kitchen"),n(),r(24,"div",12),a(25,"In Preparazione"),n()(),r(26,"div",13),a(27),n()()(),r(28,"div",9)(29,"div",10)(30,"div",11)(31,"span",6),a(32,"done"),n(),r(33,"div",12),a(34,"Pronti"),n()(),r(35,"div",13),a(36),n()()(),r(37,"div",9)(38,"div",10)(39,"div",11)(40,"span",6),a(41,"list_alt"),n(),r(42,"div",12),a(43,"Ordini Totali"),n()(),r(44,"div",13),a(45),n()()()(),r(46,"div",14)(47,"div",15)(48,"div",16)(49,"label",17),a(50,"Stato:"),n(),r(51,"select",18),E("ngModelChange",function(d){return k(i.statusFilter,d)||(i.statusFilter=d),d}),g("change",function(){return i.onStatusFilterChange()}),r(52,"option",19),a(53,"Tutti gli ordini"),n(),r(54,"option",20),a(55,"In Attesa"),n(),r(56,"option",21),a(57,"Confermati"),n(),r(58,"option",22),a(59,"Attivi"),n(),r(60,"option",23),a(61,"In Preparazione"),n(),r(62,"option",24),a(63,"Pronti"),n()()(),r(64,"div",16)(65,"label",17),a(66,"Cerca:"),n(),r(67,"input",25),E("ngModelChange",function(d){return k(i.searchTerm,d)||(i.searchTerm=d),d}),g("input",function(){return i.onSearchChange()}),n()()(),r(68,"div",26)(69,"button",27),g("click",function(){return i.forceRefresh()}),r(70,"span",6),a(71,"refresh"),n(),a(72," Aggiorna "),n()()(),r(73,"div",28),p(74,ne,7,0,"div",29)(75,pe,26,18,"div",30),n()(),p(76,Ie,21,4,"div",31)),t&2&&(o(18),y(i.waitingOrdersCount),o(9),y(i.preparingOrdersCount),o(9),y(i.readyOrdersCount),o(9),y(i.totalActiveOrders),o(6),w("ngModel",i.statusFilter),o(16),w("ngModel",i.searchTerm),o(7),m("ngIf",i.filteredOrders.length===0),o(),m("ngForOf",i.filteredOrders),o(),m("ngIf",i.showRecipeModal))},dependencies:[$,F,z,G,U,Q,q,W,L,j,A],styles:[".kitchen-display-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg)}.order-card[_ngcontent-%COMP%]{margin-bottom:var(--gutter-md);border-left:4px solid var(--primary);transition:all .3s ease}.order-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px var(--shadow)}.order-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:var(--gutter-md);border-bottom:1px solid var(--smoke-color-1);background:var(--smoke-color-0)}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--gutter-md);flex-wrap:wrap}.order-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--gutter-sm) 0;font-size:var(--fs-lg);color:var(--text-color);font-weight:600}.order-details[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);align-items:center;flex-wrap:wrap}.table-badge[_ngcontent-%COMP%]{background:var(--primary);color:#fff;padding:4px 8px;border-radius:6px;font-weight:600;font-size:var(--fs-sm)}.time-badge[_ngcontent-%COMP%]{background:var(--smoke-color-1);color:var(--text-muted);padding:4px 8px;border-radius:6px;font-size:var(--fs-sm)}.order-progress[_ngcontent-%COMP%]{min-width:200px;flex-shrink:0}.progress-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:4px;font-size:var(--fs-sm);color:var(--text-muted)}.progress-percentage[_ngcontent-%COMP%]{font-weight:600;color:var(--primary)}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:var(--smoke-color-1);border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.progress-fill.success[_ngcontent-%COMP%]{background:var(--success)}.progress-fill.warning[_ngcontent-%COMP%]{background:var(--warning)}.progress-fill.info[_ngcontent-%COMP%]{background:var(--info)}.progress-fill.primary[_ngcontent-%COMP%]{background:var(--primary)}.order-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.order-item[_ngcontent-%COMP%]{padding:var(--gutter-md);border-radius:8px;border:1px solid var(--smoke-color-1);transition:all .3s ease;background:var(--background);transition:all .3s ease-in-out}.order-item[_ngcontent-%COMP%]:hover{border-color:var(--primary);box-shadow:0 2px 8px var(--shadow)}.order-item.status-waiting[_ngcontent-%COMP%]{border-left:4px solid var(--warning)}.order-item.status-preparing[_ngcontent-%COMP%]{border-left:4px solid var(--info)}.order-item.status-ready[_ngcontent-%COMP%]{border-left:4px solid var(--success)}.order-item.status-out_of_stock[_ngcontent-%COMP%]{border-left:4px solid var(--danger);opacity:.7}.item-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--gutter-md);flex-wrap:wrap}.item-info[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{margin:0 0 var(--gutter-sm) 0;font-size:var(--fs-md);font-weight:600;color:var(--text-color)}.item-details[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md);align-items:center;flex-wrap:wrap;margin-bottom:var(--gutter-sm)}.quantity[_ngcontent-%COMP%]{background:var(--primary);color:#fff;padding:2px 6px;border-radius:4px;font-size:var(--fs-sm);font-weight:600}.preparation-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:var(--text-muted);font-size:var(--fs-sm)}.elapsed-time[_ngcontent-%COMP%]{font-size:var(--fs-sm);padding:2px 6px;border-radius:4px}.elapsed-time.success[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--success) 15%,transparent);color:var(--success)}.elapsed-time.warning[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--warning) 15%,transparent);color:var(--warning)}.elapsed-time.danger[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--danger) 15%,transparent);color:var(--danger)}.item-notes[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic;margin-top:var(--gutter-sm)}.item-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--gutter-sm);min-width:200px}.item-status[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);flex-wrap:wrap;justify-content:flex-end}.order-actions[_ngcontent-%COMP%]{margin-top:var(--gutter-md);padding-top:var(--gutter-md);border-top:1px solid var(--smoke-color-1);display:flex;justify-content:flex-end}@media (max-width: 768px){.order-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.order-progress[_ngcontent-%COMP%]{width:100%;margin-top:var(--gutter-sm)}.item-main[_ngcontent-%COMP%]{flex-direction:column}.item-actions[_ngcontent-%COMP%]{width:100%;align-items:stretch}.action-buttons[_ngcontent-%COMP%]{justify-content:space-between}}.chip.warning[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--warning) 15%,transparent);color:var(--warning)}.chip.info[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--info) 15%,transparent);color:var(--info)}.chip.primary[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 15%,transparent);color:var(--primary)}.chip.success[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--success) 15%,transparent);color:var(--success)}.chip.secondary[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 15%,transparent);color:var(--secondary)}.chip.danger[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--danger) 15%,transparent);color:var(--danger)}.time-remaining[_ngcontent-%COMP%]{font-size:.8em;opacity:.8;margin-left:4px}.status-selector[_ngcontent-%COMP%]{max-width:150px;font-size:var(--fs-sm)}.status-selector.form-input.small[_ngcontent-%COMP%]{padding:4px 8px;height:32px}.preparation-badge[_ngcontent-%COMP%]{margin-left:var(--gutter-sm)}.ingredient-notes-content[_ngcontent-%COMP%]{background:var(--smoke-color-1);padding:var(--gutter-sm);border-radius:8px;border-left:3px solid var(--primary);font-style:italic}.recipe-instructions-content[_ngcontent-%COMP%]{background:var(--smoke-color-1);padding:var(--gutter-md);border-radius:8px;border-left:3px solid var(--secondary);white-space:pre-line;line-height:1.6}.order-item.status-waiting[_ngcontent-%COMP%]{border-left:4px solid var(--warning-color, #f59e0b)}.order-item.status-preparing[_ngcontent-%COMP%]{border-left:4px solid var(--primary)}.order-item.status-ready[_ngcontent-%COMP%]{border-left:4px solid var(--success-color, #10b981)}.order-item.status-served[_ngcontent-%COMP%]{border-left:4px solid var(--secondary)}.order-item.status-out_of_stock[_ngcontent-%COMP%]{border-left:4px solid var(--danger-color, #ef4444)}@media (max-width: 768px){.status-selector[_ngcontent-%COMP%]{max-width:100%;margin-top:var(--gutter-sm)}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}}.order-item.fading-out[_ngcontent-%COMP%]{opacity:0;transform:translate(-20px);max-height:0;overflow:hidden;margin:0;padding:0}.order-card[_ngcontent-%COMP%]{transition:all .4s ease-in-out}.order-card.fading-out[_ngcontent-%COMP%]{opacity:0;max-height:0;overflow:hidden;margin:0;padding:0}"]})};export{Y as KitchenDisplay};
