import{a as re,b as ae}from"./chunk-IG67TT3L.js";import{a as oe}from"./chunk-ZTGLLAOR.js";import{a as le}from"./chunk-PNWRTRB7.js";import{b as Q,d as j,e as $,g as G,h as U,i as Y,j as H,o as J,p as K,q as X,r as Z,s as ee,t as te,v as ie}from"./chunk-CV27PIWO.js";import{a as ne}from"./chunk-CBPMQ6KM.js";import{a as L}from"./chunk-CXV4BLDF.js";import{d as R,e as F,f as A,h as q,i as z,j as W,k as N,p as B}from"./chunk-L5SOXNIK.js";import{$a as I,Cb as _,Db as c,Ka as s,Lb as P,Ob as k,Pb as r,Qb as x,Rb as v,Sb as E,Ub as f,Vb as S,Wb as T,_b as M,ac as w,bc as D,da as y,eb as b,f as h,g as V,ia as u,ja as m,pb as p,qb as t,rb as i,sb as C,yb as g}from"./chunk-KZSY5CHT.js";function ce(o,n){if(o&1&&(t(0,"option",49),r(1),i()),o&2){let e=n.$implicit;p("ngValue",e),s(),x(e.name)}}function ue(o,n){if(o&1&&(t(0,"div",57)(1,"small"),r(2),i()()),o&2){let e=c().$implicit;s(2),v("Pren: ",e.currentReservation.customer_name)}}function me(o,n){if(o&1&&(t(0,"div",57)(1,"small"),r(2),i()()),o&2){let e=c().$implicit;s(2),v("Ord: ",e.currentOrder.order_items==null?null:e.currentOrder.order_items.length," piatti")}}function pe(o,n){if(o&1){let e=g();t(0,"div",50),_("click",function(){let a=u(e).$implicit,d=c();return m(d.onTableClick(a))}),t(1,"div",51)(2,"div",52),r(3),i(),t(4,"div",53)(5,"div",54),r(6),i(),t(7,"div",55),r(8),i()(),b(9,ue,3,1,"div",56)(10,me,3,1,"div",56),i()()}if(o&2){let e=n.$implicit,l=c();k(l.getTableClass(e)),p("ngStyle",l.getTableStyle(e.table)),s(3),x(e.table.table_number),s(3),v("",e.table.capacity," p"),s(),k(l.getStatusChipClass(e.status)),s(),v(" ",l.getStatusText(e.status)," "),s(),p("ngIf",e.currentReservation),s(),p("ngIf",e.currentOrder)}}function _e(o,n){o&1&&(t(0,"div",58)(1,"span",4),r(2,"search_off"),i(),t(3,"h3"),r(4,"Nessun tavolo trovato"),i(),t(5,"p",5),r(6,"Modifica i filtri di ricerca"),i()())}function ve(o,n){if(o&1&&(t(0,"div",63)(1,"span",4),r(2,"person"),i(),t(3,"div",64)(4,"span",65),r(5,"Prenotazione:"),i(),t(6,"span",67),r(7),i(),t(8,"span",71),r(9),i()()()),o&2){let e=c(2);s(7),x(e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.customer_name),s(2),E("",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.party_size," p \xB7 ",e.formatTime(e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.reservation_time))}}function ge(o,n){if(o&1&&(t(0,"div",63)(1,"span",4),r(2,"receipt"),i(),t(3,"div",64)(4,"span",65),r(5,"Ordine attivo:"),i(),t(6,"span",67),r(7),i(),t(8,"span",71),r(9),M(10,"number"),i()()()),o&2){let e=c(2);s(7),v("",(e.selectedTableStatus==null||e.selectedTableStatus.currentOrder.order_items==null?null:e.selectedTableStatus.currentOrder.order_items.length)||0," piatti"),s(2),v("\u20AC",w(10,2,e.getCurrentOrderTotal(),"1.2-2"))}}function be(o,n){if(o&1){let e=g();t(0,"div",72)(1,"button",27),_("click",function(){u(e);let a=c(2);return m(a.openManualReservationModal())}),t(2,"span",4),r(3,"event_available"),i(),r(4," Prenota Tavolo "),i(),t(5,"button",73),_("click",function(){u(e);let a=c(2);return m(a.openCreateOrderModal())}),t(6,"span",4),r(7,"restaurant"),i(),r(8," Inizia Ordinazione "),i()()}}function xe(o,n){if(o&1){let e=g();t(0,"button",76),_("click",function(){u(e);let a=c(3);return m(a.openOrderDetails())}),t(1,"span",4),r(2,"receipt_long"),i(),r(3," Vedi Conto "),i()}}function he(o,n){if(o&1){let e=g();t(0,"div",72)(1,"button",73),_("click",function(){u(e);let a=c(2);return m(a.openCreateOrderModal())}),t(2,"span",4),r(3,"check_circle"),i(),r(4),i(),t(5,"button",74),_("click",function(){u(e);let a=c(2);return m(a.openManualReservationModal())}),t(6,"span",4),r(7,"edit_calendar"),i(),r(8," Modifica Prenotazione "),i(),b(9,xe,4,0,"button",75),i()}if(o&2){let e=c(2);s(4),v(" ",e.selectedTableStatus!=null&&e.selectedTableStatus.currentOrder?"Modifica Ordine":"Conferma Arrivo"," "),s(5),p("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)}}function fe(o,n){if(o&1){let e=g();t(0,"div",72)(1,"button",27),_("click",function(){u(e);let a=c(2);return m(a.openCreateOrderModal())}),t(2,"span",4),r(3,"add_circle"),i(),r(4),i(),t(5,"button",76),_("click",function(){u(e);let a=c(2);return m(a.openOrderDetails())}),t(6,"span",4),r(7,"receipt_long"),i(),r(8," Gestisci Ordine "),i(),t(9,"button",73),_("click",function(){u(e);let a=c(2);return m(a.closeOrder())}),t(10,"span",4),r(11,"paid"),i(),r(12," Chiudi Conto "),i()()}if(o&2){let e=c(2);s(4),v(" ",e.selectedTableStatus!=null&&e.selectedTableStatus.currentOrder?"Aggiungi Piatti":"Crea Ordine"," ")}}function Se(o,n){if(o&1){let e=g();t(0,"div",59),_("click",function(){u(e);let a=c();return m(a.deselectTable())}),t(1,"div",60),_("click",function(a){return u(e),m(a.stopPropagation())}),t(2,"div",30)(3,"h3",31),r(4),i(),t(5,"button",61),_("click",function(){u(e);let a=c();return m(a.deselectTable())}),t(6,"span",4),r(7,"close"),i()()(),t(8,"div",41)(9,"div",62)(10,"div",63)(11,"span",4),r(12,"info"),i(),t(13,"div",64)(14,"span",65),r(15,"Stato:"),i(),t(16,"span",66),r(17),i()()(),t(18,"div",63)(19,"span",4),r(20,"group"),i(),t(21,"div",64)(22,"span",65),r(23,"Capacit\xE0:"),i(),t(24,"span",67),r(25),i()()(),b(26,ve,10,3,"div",68)(27,ge,11,5,"div",68),i(),t(28,"div",69),b(29,be,9,0,"div",70)(30,he,10,2,"div",70)(31,fe,13,1,"div",70),i()()()()}if(o&2){let e=c();s(),P("left",(e.selectedTable==null?null:e.selectedTable.position_x)??0,"px")("top",(e.selectedTable==null?null:e.selectedTable.position_y)??0,"px"),s(3),v("Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number),s(12),k(e.getStatusChipClass((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")),s(),v(" ",e.getStatusText((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")," "),s(8),v("",e.selectedTable==null?null:e.selectedTable.capacity," persone"),s(),p("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation),s(),p("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder),s(2),p("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="free"),s(),p("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="reserved"),s(),p("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="occupied")}}function Te(o,n){if(o&1){let e=g();t(0,"div",77),_("click",function(){u(e);let a=c();return m(a.closeManualReservationModal())}),t(1,"div",78),_("click",function(a){return u(e),m(a.stopPropagation())}),t(2,"div",79)(3,"div",30)(4,"h3",31),r(5),i(),t(6,"button",61),_("click",function(){u(e);let a=c();return m(a.closeManualReservationModal())}),t(7,"span",4),r(8,"close"),i()()(),t(9,"div",41)(10,"form",80)(11,"div",81)(12,"label",17),r(13,"Nome Cliente *"),i(),t(14,"input",82),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.customer_name,a)||(d.manualReservationData.customer_name=a),m(a)}),i()(),t(15,"div",81)(16,"label",17),r(17,"Telefono *"),i(),t(18,"input",83),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.customer_phone,a)||(d.manualReservationData.customer_phone=a),m(a)}),i()(),t(19,"div",84)(20,"div",81)(21,"label",17),r(22,"Data *"),i(),t(23,"input",85),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.reservation_date,a)||(d.manualReservationData.reservation_date=a),m(a)}),i()(),t(24,"div",81)(25,"label",17),r(26,"Orario *"),i(),t(27,"input",86),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.reservation_time,a)||(d.manualReservationData.reservation_time=a),m(a)}),i()()(),t(28,"div",81)(29,"label",17),r(30,"Numero Persone"),i(),t(31,"input",87),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.party_size,a)||(d.manualReservationData.party_size=a),m(a)}),i()(),t(32,"div",81)(33,"label",17),r(34,"Note Speciali"),i(),t(35,"textarea",88),T("ngModelChange",function(a){u(e);let d=c();return S(d.manualReservationData.special_requests,a)||(d.manualReservationData.special_requests=a),m(a)}),i()(),t(36,"div",89)(37,"button",90),_("click",function(){u(e);let a=c();return m(a.closeManualReservationModal())}),r(38," Annulla "),i(),t(39,"button",91),_("click",function(){u(e);let a=c();return m(a.createManualReservation())}),r(40," Conferma Prenotazione "),i()()()()()()()}if(o&2){let e=c();s(5),v("Prenotazione Manuale - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number),s(9),f("ngModel",e.manualReservationData.customer_name),s(4),f("ngModel",e.manualReservationData.customer_phone),s(5),f("ngModel",e.manualReservationData.reservation_date),s(4),f("ngModel",e.manualReservationData.reservation_time),s(4),f("ngModel",e.manualReservationData.party_size),p("max",(e.selectedTable==null?null:e.selectedTable.capacity)??10),s(4),f("ngModel",e.manualReservationData.special_requests),s(4),p("disabled",!e.manualReservationData.customer_name||!e.manualReservationData.customer_phone)}}function Me(o,n){if(o&1&&(t(0,"div",111),r(1),M(2,"slice"),i()),o&2){let e=c().$implicit;s(),E(" ",D(2,2,e.description,0,80),"",e.description.length>80?"...":""," ")}}function ye(o,n){if(o&1){let e=g();t(0,"div",107),_("click",function(){let a=u(e).$implicit,d=c(2);return m(d.addDishAndContinue(a))}),t(1,"div",108)(2,"strong"),r(3),i(),t(4,"span",109),r(5),M(6,"number"),i()(),b(7,Me,3,6,"div",110),i()}if(o&2){let e=n.$implicit;s(3),x(e.name),s(2),v("\u20AC",w(6,3,e.base_price,"1.2-2")),s(2),p("ngIf",e.description)}}function we(o,n){if(o&1&&(t(0,"div",112)(1,"div",63)(2,"span",4),r(3,"event"),i(),t(4,"div",64)(5,"span",65),r(6,"Prenotazione:"),i(),t(7,"span",67),r(8),i()()()()),o&2){let e=c(2);s(8),E(" ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.customer_name," - ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.party_size," persone ")}}function Oe(o,n){if(o&1){let e=g();t(0,"div",115)(1,"div",116)(2,"strong"),r(3),i(),t(4,"span",117),r(5),M(6,"number"),i()(),t(7,"div",118)(8,"button",119),_("click",function(){let a=u(e).$implicit,d=c(3);return m(d.updateOrderItemQuantity(a,-1))}),r(9,"-"),i(),t(10,"span",120),r(11),i(),t(12,"button",119),_("click",function(){let a=u(e).$implicit,d=c(3);return m(d.updateOrderItemQuantity(a,1))}),r(13,"+"),i(),t(14,"button",121),_("click",function(){let a=u(e).index,d=c(3);return m(d.removeOrderItem(a))}),t(15,"span",4),r(16,"delete"),i()()()()}if(o&2){let e=n.$implicit;s(3),x(e.dish_name),s(2),v("\u20AC",w(6,3,e.total_price,"1.2-2")),s(6),x(e.quantity)}}function Ce(o,n){if(o&1&&(t(0,"div",113),b(1,Oe,17,6,"div",114),i()),o&2){let e=c(2);s(),p("ngForOf",e.newOrderData.items)}}function Ee(o,n){o&1&&(t(0,"div",122)(1,"p",5),r(2,"Nessun piatto aggiunto"),i(),t(3,"p",123),r(4,"Clicca sui piatti dal menu per aggiungerli"),i()())}function ke(o,n){if(o&1&&(t(0,"div",124)(1,"strong"),r(2),M(3,"number"),i()()),o&2){let e=c(2);s(2),v("Totale: \u20AC",w(3,1,e.orderTotal,"1.2-2"))}}function Pe(o,n){if(o&1){let e=g();t(0,"button",125),_("click",function(){u(e);let a=c(2);return m(a.createOrder())}),t(1,"span",4),r(2,"add_circle"),i(),r(3," Aggiungi all'Ordine "),i()}if(o&2){let e=c(2);p("disabled",e.newOrderData.items.length===0)}}function Ve(o,n){if(o&1){let e=g();t(0,"button",126),_("click",function(){u(e);let a=c(2);return m(a.createOrder())}),t(1,"span",4),r(2,"check_circle"),i(),r(3," Conferma Ordine "),i()}if(o&2){let e=c(2);p("disabled",e.newOrderData.items.length===0)}}function Ie(o,n){if(o&1){let e=g();t(0,"button",126),_("click",function(){u(e);let a=c(2);return m(a.createOrder())}),t(1,"span",4),r(2,"update"),i(),r(3," Aggiorna Ordine "),i()}if(o&2){let e=c(2);p("disabled",e.newOrderData.items.length===0)}}function De(o,n){if(o&1){let e=g();t(0,"button",127),_("click",function(){u(e);let a=c(2);return m(a.closeCreateOrderModal())}),t(1,"span",4),r(2,"arrow_back"),i(),r(3," Torna alla Mappa "),i()}}function Re(o,n){o&1&&(t(0,"div",128)(1,"p",123)(2,"span",4),r(3,"info"),i(),r(4," Clicca sui piatti dal menu per aggiungerli all'ordine "),i()())}function Fe(o,n){if(o&1){let e=g();t(0,"div",77),_("click",function(){u(e);let a=c();return m(a.closeCreateOrderModal())}),t(1,"div",92),_("click",function(a){return u(e),m(a.stopPropagation())}),t(2,"div",29)(3,"div",30)(4,"h3",31),r(5),i(),t(6,"button",61),_("click",function(){u(e);let a=c();return m(a.closeCreateOrderModal())}),t(7,"span",4),r(8,"close"),i()()(),t(9,"div",41)(10,"div",93)(11,"div",94)(12,"h4"),r(13,"Menu Disponibile"),i(),t(14,"div",95),b(15,ye,8,6,"div",96),i()(),t(16,"div",97)(17,"h4"),r(18,"Riepilogo Ordine"),i(),b(19,we,9,2,"div",98)(20,Ce,2,1,"div",99)(21,Ee,5,0,"div",100)(22,ke,4,4,"div",101),t(23,"div",102),b(24,Pe,4,1,"button",103)(25,Ve,4,1,"button",104)(26,Ie,4,1,"button",104)(27,De,4,0,"button",105),i(),b(28,Re,5,0,"div",106),i()()()()()()}if(o&2){let e=c();s(5),E(" ",e.editingOrder?e.isAddingToExistingOrder?"Aggiungi all'Ordine":"Modifica Ordine":"Nuovo Ordine"," - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number," "),s(10),p("ngForOf",e.dishes),s(4),p("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation),s(),p("ngIf",e.newOrderData.items.length>0),s(),p("ngIf",e.newOrderData.items.length===0),s(),p("ngIf",e.newOrderData.items.length>0),s(2),p("ngIf",e.isAddingToExistingOrder),s(),p("ngIf",!e.editingOrder),s(),p("ngIf",e.editingOrder&&!e.isAddingToExistingOrder),s(),p("ngIf",e.newOrderData.items.length>0),s(),p("ngIf",e.newOrderData.items.length===0)}}function Ae(o,n){if(o&1&&(t(0,"div",134)(1,"span",135),r(2),i(),t(3,"span",136),r(4),i(),t(5,"span",117),r(6),M(7,"number"),i()()),o&2){let e=n.$implicit;s(2),x(e.dish_name||"Piatto"),s(2),v("x",e.quantity),s(2),v("\u20AC",w(7,3,e.total_price,"1.2-2"))}}function qe(o,n){if(o&1){let e=g();t(0,"div")(1,"div",130)(2,"div",63)(3,"span",4),r(4,"info"),i(),t(5,"div",64)(6,"span",65),r(7,"Stato:"),i(),t(8,"span",67),r(9),i()()(),t(10,"div",63)(11,"span",4),r(12,"schedule"),i(),t(13,"div",64)(14,"span",65),r(15,"Creato il:"),i(),t(16,"span",67),r(17),M(18,"date"),i()()()(),t(19,"div",131)(20,"h4",132)(21,"span",4),r(22,"restaurant_menu"),i(),r(23," Piatti Ordinati "),i(),b(24,Ae,8,6,"div",133),i(),t(25,"div",124)(26,"strong"),r(27),M(28,"number"),i()(),t(29,"div",89)(30,"button",73),_("click",function(){u(e);let a=c(2);return m(a.closeOrder())}),t(31,"span",4),r(32,"check"),i(),r(33," Chiudi Ordine e Aggiorna Scorte "),i()()()}if(o&2){let e=n.ngIf,l=c(2);s(9),x(e.status),s(8),x(w(18,4,e.created_at,"dd/MM/yyyy HH:mm")),s(7),p("ngForOf",e.order_items),s(3),v("Totale: \u20AC",w(28,7,l.getCurrentOrderTotal(),"1.2-2"))}}function ze(o,n){if(o&1){let e=g();t(0,"div",77),_("click",function(){u(e);let a=c();return m(a.closeOrderDetailsModal())}),t(1,"div",78),_("click",function(a){return u(e),m(a.stopPropagation())}),t(2,"div",29)(3,"div",30)(4,"h3",31),r(5),i(),t(6,"button",61),_("click",function(){u(e);let a=c();return m(a.closeOrderDetailsModal())}),t(7,"span",4),r(8,"close"),i()()(),t(9,"div",41),b(10,qe,34,10,"div",129),i()()()()}if(o&2){let e=c();s(5),v("Dettagli Ordine - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number),s(5),p("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)}}var se=class o{floorPlanService=y(re);tableService=y(ae);reservationService=y(le);orderService=y(oe);dishService=y(ne);authService=y(L);router=y(B);floorPlans=[];currentFloorPlan=null;tables=[];tableStatuses=[];reservations=[];activeOrders=[];dishes=[];editingOrder=null;get freeTablesCount(){return this.tableStatuses.filter(n=>n.status==="free").length}get reservedTablesCount(){return this.tableStatuses.filter(n=>n.status==="reserved").length}get occupiedTablesCount(){return this.tableStatuses.filter(n=>n.status==="occupied").length}get totalTablesCount(){return this.tableStatuses.length}get orderTotal(){return this.newOrderData.items.reduce((n,e)=>n+e.total_price,0)}selectedTable=null;selectedTableStatus=null;showManualReservationModal=!1;showCreateOrderModal=!1;showOrderDetailsModal=!1;showQuickActionsModal=!1;manualReservationData={customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",party_size:2,special_requests:""};newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]};searchTerm="";statusFilter="all";isAddingToExistingOrder=!1;subscriptions=new V;ngOnInit(){return h(this,null,function*(){console.log("\u{1F3C1} TableMap initialized"),yield this.loadData(),this.setupSubscriptions()})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadData(){return h(this,null,function*(){try{yield Promise.all([this.floorPlanService.loadFloorPlans(),this.tableService.loadTables(),this.dishService.loadDishes(),this.loadReservations(),this.loadActiveOrders()]),this.updateTableStatuses()}catch(n){console.error("\u{1F4A5} Error loading data:",n)}})}setupSubscriptions(){this.subscriptions.add(this.floorPlanService.floorPlans$.subscribe(n=>{this.floorPlans=n,n.length>0&&!this.currentFloorPlan&&(this.currentFloorPlan=n[0],this.loadTablesForFloorPlan())})),this.subscriptions.add(this.tableService.tables$.subscribe(()=>{this.loadTablesForFloorPlan()})),this.subscriptions.add(this.dishService.dishes$.subscribe(n=>{this.dishes=n.filter(e=>e.status==="available")}))}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[],this.tableStatuses=[];return}this.tables=this.tableService.getTablesByFloorPlan(this.currentFloorPlan.id),this.updateTableStatuses()}loadReservations(){return h(this,null,function*(){try{let n=new Date().toISOString().split("T")[0],{data:e,error:l}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",n).in("status",["pending","confirmed"]);if(l)throw l;this.reservations=e||[]}catch(n){console.error("\u274C Error loading reservations:",n)}})}updateTableStatuses(){this.tableStatuses=this.tables.map(n=>{let e=this.reservations.find(d=>d.table_id===n.id&&this.isReservationActive(d)),l=this.activeOrders.find(d=>d.table_id===n.id),a="free";return l?a="occupied":e&&(a="reserved"),{table:n,status:a,currentOrder:l,currentReservation:e}})}isReservationActive(n){let e=new Date,l=new Date(`${n.reservation_date}T${n.reservation_time}`),a=new Date(l.getTime()+7200*1e3);return e>=l&&e<=a}onTableClick(n){this.selectedTable=n.table,this.selectedTableStatus=n,this.showQuickActionsModal=!0}deselectTable(){this.selectedTable=null,this.selectedTableStatus=null,this.showQuickActionsModal=!1}openManualReservationModal(){if(!this.selectedTable)return;let n=new Date;this.manualReservationData={customer_name:"",customer_phone:"",reservation_date:n.toISOString().split("T")[0],reservation_time:n.toTimeString().split(" ")[0].substring(0,5),party_size:this.selectedTable.capacity||2,special_requests:""},this.showQuickActionsModal=!1,this.showManualReservationModal=!0}closeManualReservationModal(){this.showManualReservationModal=!1}createManualReservation(){return h(this,null,function*(){if(this.selectedTable){if(this.manualReservationData.party_size>this.selectedTable.capacity){alert(`Il tavolo pu\xF2 ospitare al massimo ${this.selectedTable.capacity} persone.`);return}try{let n={restaurant_id:this.selectedTable.restaurant_id,table_id:this.selectedTable.id,reservation_date:this.manualReservationData.reservation_date,reservation_time:this.manualReservationData.reservation_time,party_size:this.manualReservationData.party_size,special_requests:this.manualReservationData.special_requests,customer_info:{first_name:this.manualReservationData.customer_name.split(" ")[0]||"",last_name:this.manualReservationData.customer_name.split(" ").slice(1).join(" ")||"",email:"",phone:this.manualReservationData.customer_phone}};(yield this.reservationService.createReservation(n))&&(console.log("\u2705 Manual reservation created"),this.closeManualReservationModal(),yield this.loadReservations(),this.updateTableStatuses())}catch(n){console.error("\u274C Error creating manual reservation:",n),alert("Errore durante la creazione della prenotazione")}}})}closeCreateOrderModal(){this.showCreateOrderModal=!1,this.editingOrder=null,this.isAddingToExistingOrder=!1}openCreateOrderModal(){this.selectedTable&&(this.selectedTableStatus?.currentOrder?(this.editingOrder=this.selectedTableStatus.currentOrder,this.isAddingToExistingOrder=!0,this.newOrderData={customer_name:"",customer_phone:"",order_type:this.editingOrder.order_type||"dine_in",notes:this.editingOrder.customer_notes||"",items:this.editingOrder.order_items?[...this.editingOrder.order_items]:[]}):(this.editingOrder=null,this.isAddingToExistingOrder=!1,this.newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]}),this.showQuickActionsModal=!1,this.showCreateOrderModal=!0)}addDishToOrder(n){let e=this.newOrderData.items.find(l=>l.dish_id===n.id);e?(e.quantity+=1,e.total_price=e.quantity*e.unit_price):this.newOrderData.items.push({dish_id:n.id,dish_name:n.name,quantity:1,unit_price:n.base_price,total_price:n.base_price,notes:""})}removeOrderItem(n){this.newOrderData.items.splice(n,1)}updateOrderItemQuantity(n,e){n.quantity=Math.max(1,n.quantity+e),n.total_price=n.quantity*n.unit_price}createOrder(){return h(this,null,function*(){if(!(!this.selectedTable||this.newOrderData.items.length===0))try{let n={restaurant_id:this.selectedTable.restaurant_id,customer_id:this.authService.currentUserValue?.id||"00000000-0000-0000-0000-000000000000",order_number:this.orderService.generateOrderNumber(),order_type:this.newOrderData.order_type,status:"pending",customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,total_amount:this.orderTotal,table_id:this.selectedTable.id,reservation_id:this.selectedTableStatus?.currentReservation?.id||null},e;if(this.editingOrder){if(e=this.editingOrder.id,!(yield this.orderService.updateOrder(e,{customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,total_amount:this.orderTotal})))throw new Error("Failed to update order");if(!(yield this.orderService.deleteOrderItems(e)))throw new Error("Failed to delete order items")}else{let d=yield this.orderService.createOrder(n);if(!d)throw new Error("Failed to create order with any status");e=d.id,console.log("\u2705 Order created with status:",d.status)}let l=this.newOrderData.items.map(d=>({order_id:e,dish_id:d.dish_id,quantity:d.quantity,unit_price:d.unit_price,total_price:d.total_price,item_notes:d.notes,dish_name:d.dish_name}));if(!(yield this.orderService.createOrderItems(l)))throw new Error("Failed to create order items");console.log("\u2705 Order saved successfully"),this.closeCreateOrderModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),this.isAddingToExistingOrder?alert("Piatti aggiunti all'ordine con successo!"):this.showOrderDetailsModal=!0}catch(n){console.error("\u274C Error saving order:",n),alert("Errore durante il salvataggio dell'ordine: "+n.message)}})}addDishAndContinue(n){this.addDishToOrder(n)}loadActiveOrders(){return h(this,null,function*(){try{let n=this.authService.currentUserValue;if(!n)return;let{data:e,error:l}=yield this.orderService.supabaseService.getSupabaseClient().from("restaurants").select("id").eq("owner_id",n.id).limit(1);if(l||!e||e.length===0){console.error("\u274C No restaurant found for user:",n.id);return}let a=e[0].id,{data:d,error:O}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").select(`
        *,
        order_items (*)
      `).eq("restaurant_id",a).not("status","in",["completed","cancelled"]).order("created_at",{ascending:!1});if(O)throw O;this.activeOrders=d||[],console.log("\u{1F4CA} Active orders loaded:",this.activeOrders.length),this.activeOrders.length>0&&console.log("\u{1F4CB} Status degli ordini attivi:",this.activeOrders.map(de=>de.status))}catch(n){console.error("\u274C Error loading active orders:",n),this.activeOrders=[]}})}openOrderDetails(){this.selectedTableStatus?.currentOrder&&(this.showQuickActionsModal=!1,this.showOrderDetailsModal=!0)}closeOrderDetailsModal(){this.showOrderDetailsModal=!1}closeOrder(){return h(this,null,function*(){if(this.selectedTableStatus?.currentOrder)try{let{error:n}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",this.selectedTableStatus.currentOrder.id);if(n)throw n;console.log("\u2705 Order closed successfully"),this.closeOrderDetailsModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),yield this.updateInventoryFromOrder(this.selectedTableStatus.currentOrder)}catch(n){console.error("\u274C Error closing order:",n),alert("Errore durante la chiusura dell'ordine")}})}updateInventoryFromOrder(n){return h(this,null,function*(){try{console.log("\u{1F4E6} Updating inventory from order:",n.id);for(let e of n.order_items){let l=yield this.dishService.getDishById(e.dish_id);if(l&&l.ingredients_composition)for(let a of l.ingredients_composition)yield this.updateIngredientStock(a.ingredient_id,-a.quantity*e.quantity)}console.log("\u2705 Inventory updated successfully")}catch(e){console.error("\u274C Error updating inventory:",e)}})}updateIngredientStock(n,e){return h(this,null,function*(){try{let{data:l,error:a}=yield this.orderService.supabaseService.getSupabaseClient().from("ingredients").select("current_stock").eq("id",n).single();if(a)throw a;let d=Math.max(0,(l.current_stock||0)+e),{error:O}=yield this.orderService.supabaseService.getSupabaseClient().from("ingredients").update({current_stock:d,updated_at:new Date().toISOString()}).eq("id",n);if(O)throw O;console.log(`\u{1F4CA} Updated ingredient ${n} stock: ${d}`)}catch(l){throw console.error(`\u274C Error updating ingredient ${n}:`,l),l}})}getTableClass(n){let e=["table-element",`shape-${n.table.shape}`];return e.push(n.status),this.selectedTable?.id===n.table.id&&e.push("selected"),e.join(" ")}getTableStyle(n){let e=n.shape==="rectangle"||n.shape==="square"?"8px":"50%";return{left:n.position_x+"px",top:n.position_y+"px",width:n.width+"px",height:n.height+"px","border-radius":e,transform:`rotate(${n.rotation}deg)`}}getStatusText(n){return{free:"Libero",reserved:"Prenotato",occupied:"Occupato",needs_attention:"Da controllare"}[n]||n}getFilteredTables(){let n=this.tableStatuses;return this.statusFilter!=="all"&&(n=n.filter(e=>e.status===this.statusFilter)),this.searchTerm&&(n=n.filter(e=>e.table.table_number.toLowerCase().includes(this.searchTerm.toLowerCase())||e.table.table_name.toLowerCase().includes(this.searchTerm.toLowerCase()))),n}onFloorPlanSelect(n){this.currentFloorPlan=n,this.loadTablesForFloorPlan(),this.deselectTable()}formatTime(n){return n?n.substring(0,5):""}getCurrentOrderTotal(){return this.selectedTableStatus?.currentOrder?.order_items?this.selectedTableStatus.currentOrder.order_items.reduce((n,e)=>n+e.total_price,0):0}getStatusChipClass(n){return{free:"active",reserved:"role-manager",occupied:"inactive",needs_attention:"role-employee"}[n]||""}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-table-map"]],decls:106,vars:19,consts:[[1,"table-map-container","page-container"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"material-icons"],[1,"text-muted"],[1,"stats-grid","grid-cards"],[1,"stat-card","card"],[1,"stat-icon","free"],[1,"stat-content"],[1,"card-number"],[1,"stat-icon","reserved"],[1,"stat-icon","occupied"],[1,"stat-icon","total"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-select",3,"ngModelChange","ngModel"],["value","all"],["value","free"],["value","reserved"],["value","occupied"],["type","text","placeholder","Numero o nome tavolo...",1,"form-input",3,"ngModelChange","ngModel"],[1,"actions-container"],[1,"promethea-button","primary",3,"click"],[1,"map-section"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"map-legend"],[1,"legend-item","chip","active"],[1,"legend-color","free"],[1,"legend-item","chip"],[1,"legend-color","reserved"],[1,"legend-item","chip","inactive"],[1,"legend-color","occupied"],[1,"legend-item","chip","role-admin"],[1,"legend-color","selected"],[1,"card-content"],[1,"canvas-container"],[1,"floor-plan-canvas"],[1,"grid-overlay"],["class","table-element",3,"class","ngStyle","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay quick-actions-overlay",3,"click",4,"ngIf"],["class","modal-overlay centered-modal",3,"click",4,"ngIf"],[3,"ngValue"],[1,"table-element",3,"click","ngStyle"],[1,"table-content"],[1,"table-number"],[2,"display","flex","flex-direction","row","justify-content","space-between","padding","0 var(--gutter-sm)"],[1,"table-capacity"],[1,"table-status-badge","chip"],["class","table-info",4,"ngIf"],[1,"table-info"],[1,"empty-state"],[1,"modal-overlay","quick-actions-overlay",3,"click"],[1,"quick-actions-modal","card",3,"click"],[1,"icon-button",3,"click"],[1,"table-info-grid"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value","chip"],[1,"info-value"],["class","info-item",4,"ngIf"],[1,"actions-grid"],["class","action-buttons",4,"ngIf"],[1,"info-detail"],[1,"action-buttons"],[1,"promethea-button","success",3,"click"],[1,"promethea-button","warning",3,"click"],["class","promethea-button info",3,"click",4,"ngIf"],[1,"promethea-button","info",3,"click"],[1,"modal-overlay","centered-modal",3,"click"],[1,"modal-content",3,"click"],[1,"card","form-card"],[1,"generic-form"],[1,"form-group"],["type","text","name","customer_name","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","customer_phone","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date","name","reservation_date","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","time","name","reservation_time","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-input",3,"ngModelChange","ngModel","max"],["name","special_requests","rows","3",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"promethea-button","secondary",3,"click"],["type","button",1,"promethea-button","primary",3,"click","disabled"],[1,"modal-content","large",3,"click"],[1,"order-creation-layout"],[1,"menu-section"],[1,"dishes-grid"],["class","dish-card",3,"click",4,"ngFor","ngForOf"],[1,"order-summary-section"],["class","reservation-info",4,"ngIf"],["class","order-items",4,"ngIf"],["class","empty-order",4,"ngIf"],["class","order-total",4,"ngIf"],[1,"order-actions","multiple-actions"],["class","promethea-button success",3,"disabled","click",4,"ngIf"],["class","promethea-button primary",3,"disabled","click",4,"ngIf"],["class","promethea-button secondary",3,"click",4,"ngIf"],["class","instructions",4,"ngIf"],[1,"dish-card",3,"click"],[1,"dish-info"],[1,"dish-price"],["class","dish-description",4,"ngIf"],[1,"dish-description"],[1,"reservation-info"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"item-info"],[1,"item-price"],[1,"item-controls"],[1,"quantity-btn",3,"click"],[1,"quantity"],[1,"remove-btn",3,"click"],[1,"empty-order"],[1,"text-muted","small"],[1,"order-total"],[1,"promethea-button","success",3,"click","disabled"],[1,"promethea-button","primary",3,"click","disabled"],[1,"promethea-button","secondary",3,"click"],[1,"instructions"],[4,"ngIf"],[1,"order-info"],[1,"order-items-list"],[1,"subsection-title"],["class","order-item-detail",4,"ngFor","ngForOf"],[1,"order-item-detail"],[1,"item-name"],[1,"item-quantity"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),r(5,"map"),i(),r(6," Mappa Tavoli - Gestione Ristorante "),i(),t(7,"p",5),r(8,"Gestisci prenotazioni e ordini in tempo reale"),i()()(),t(9,"div",6)(10,"div",7)(11,"div",8)(12,"span",4),r(13,"event_available"),i()(),t(14,"div",9)(15,"h3",10),r(16),i(),t(17,"p",5),r(18,"Tavoli Liberi"),i()()(),t(19,"div",7)(20,"div",11)(21,"span",4),r(22,"event"),i()(),t(23,"div",9)(24,"h3",10),r(25),i(),t(26,"p",5),r(27,"Prenotati"),i()()(),t(28,"div",7)(29,"div",12)(30,"span",4),r(31,"restaurant"),i()(),t(32,"div",9)(33,"h3",10),r(34),i(),t(35,"p",5),r(36,"Occupati"),i()()(),t(37,"div",7)(38,"div",13)(39,"span",4),r(40,"table_restaurant"),i()(),t(41,"div",9)(42,"h3",10),r(43),i(),t(44,"p",5),r(45,"Tavoli Totali"),i()()()(),t(46,"div",14)(47,"div",15)(48,"div",16)(49,"label",17),r(50,"Mappa:"),i(),t(51,"select",18),T("ngModelChange",function(d){return S(l.currentFloorPlan,d)||(l.currentFloorPlan=d),d}),_("change",function(){return l.onFloorPlanSelect(l.currentFloorPlan)}),b(52,ce,2,2,"option",19),i()(),t(53,"div",16)(54,"label",17),r(55,"Stato:"),i(),t(56,"select",20),T("ngModelChange",function(d){return S(l.statusFilter,d)||(l.statusFilter=d),d}),t(57,"option",21),r(58,"Tutti gli stati"),i(),t(59,"option",22),r(60,"Libero"),i(),t(61,"option",23),r(62,"Prenotato"),i(),t(63,"option",24),r(64,"Occupato"),i()()(),t(65,"div",16)(66,"label",17),r(67,"Cerca:"),i(),t(68,"input",25),T("ngModelChange",function(d){return S(l.searchTerm,d)||(l.searchTerm=d),d}),i()()(),t(69,"div",26)(70,"button",27),_("click",function(){return l.loadData()}),t(71,"span",4),r(72,"refresh"),i(),r(73," Aggiorna "),i()()(),t(74,"div",28)(75,"div",29)(76,"div",30)(77,"h2",31),r(78),i(),t(79,"div",32)(80,"div",33),C(81,"div",34),t(82,"span"),r(83,"Libero"),i()(),t(84,"div",35),C(85,"div",36),t(86,"span"),r(87,"Prenotato"),i()(),t(88,"div",37),C(89,"div",38),t(90,"span"),r(91,"Occupato"),i()(),t(92,"div",39),C(93,"div",40),t(94,"span"),r(95,"Selezionato"),i()()()(),t(96,"div",41)(97,"div",42)(98,"div",43),C(99,"div",44),b(100,pe,11,10,"div",45)(101,_e,7,0,"div",46),i()()()()(),b(102,Se,32,14,"div",47)(103,Te,41,9,"div",48)(104,Fe,29,12,"div",48)(105,ze,11,2,"div",48),i()),e&2&&(s(16),x(l.freeTablesCount),s(9),x(l.reservedTablesCount),s(9),x(l.occupiedTablesCount),s(9),x(l.totalTablesCount),s(8),f("ngModel",l.currentFloorPlan),s(),p("ngForOf",l.floorPlans),s(4),f("ngModel",l.statusFilter),s(12),f("ngModel",l.searchTerm),s(10),x((l.currentFloorPlan==null?null:l.currentFloorPlan.name)||"Mappa"),s(20),P("width",(l.currentFloorPlan==null?null:l.currentFloorPlan.width)||1e3,"px")("height",(l.currentFloorPlan==null?null:l.currentFloorPlan.height)||800,"px"),s(2),p("ngForOf",l.getFilteredTables()),s(),p("ngIf",l.getFilteredTables().length===0),s(),p("ngIf",l.showQuickActionsModal),s(),p("ngIf",l.showManualReservationModal),s(),p("ngIf",l.showCreateOrderModal),s(),p("ngIf",l.showOrderDetailsModal))},dependencies:[N,R,F,A,ie,Y,K,X,Q,H,J,j,$,te,ee,Z,U,G,W,z,q],styles:[".table-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg)}.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--gutter-md)}.stat-card.card[_ngcontent-%COMP%]{flex-direction:row;align-items:center;padding:var(--gutter-md);gap:var(--gutter);min-height:100px}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:var(--fs-md);line-height:1}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-sm)}.map-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.canvas-container[_ngcontent-%COMP%]{border:1px solid var(--smoke-color-1);border-radius:12px;background:var(--background);overflow:auto;max-height:70vh}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:color-mix(in srgb,var(--background) 98%,white);min-height:600px;margin:var(--gutter-md)}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:40px 40px;opacity:.3;pointer-events:none}.table-element[_ngcontent-%COMP%]{position:absolute;border:2px solid;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.2,.9,.2,1);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px var(--shadow);min-width:80px;min-height:80px}.table-element[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 8px 20px var(--shadow2)}.table-element.free[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 8%,transparent)}.table-element.reserved[_ngcontent-%COMP%]{border-color:var(--secondary);background:color-mix(in srgb,var(--secondary) 8%,transparent)}.table-element.occupied[_ngcontent-%COMP%]{border-color:var(--tertiary);background:color-mix(in srgb,var(--tertiary) 8%,transparent)}.table-element.selected[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 20%,transparent),0 8px 25px var(--shadow2);z-index:100}.table-content[_ngcontent-%COMP%]{text-align:center;padding:var(--gutter-sm);width:100%}.table-number[_ngcontent-%COMP%]{font-weight:800;font-size:16px;color:var(--text-color);margin-bottom:4px}.table-capacity[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-muted);margin-bottom:6px}.table-status-badge.chip[_ngcontent-%COMP%]{font-size:10px;padding:4px 8px;margin-bottom:6px}.table-info[_ngcontent-%COMP%]{font-size:9px;color:var(--text-muted);line-height:1.2}.map-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md);flex-wrap:wrap;align-items:center}.legend-item.chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 12px;margin:0}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:2px solid;flex-shrink:0}.legend-color.free[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 15%,transparent);border-color:var(--primary)}.legend-color.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 15%,transparent);border-color:var(--secondary)}.legend-color.occupied[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--tertiary) 15%,transparent);border-color:var(--tertiary)}.legend-color.selected[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.quick-actions-modal.card[_ngcontent-%COMP%]{position:absolute;min-width:280px;max-width:320px;z-index:1001;transform:translateY(10px);box-shadow:0 12px 32px var(--shadow2),0 0 0 1px var(--smoke-color-1);pointer-events:all;animation:_ngcontent-%COMP%_quickActionsAppear .2s ease-out}@keyframes _ngcontent-%COMP%_quickActionsAppear{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(10px)}}.order-creation-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:var(--gutter-lg);height:60vh;min-height:400px}.menu-section[_ngcontent-%COMP%]{border-right:1px solid var(--smoke-color-1);padding-right:var(--gutter-lg);overflow-y:auto}.dishes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--gutter-sm);margin-top:var(--gutter)}.order-summary-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md)}.order-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:var(--gutter-sm)}@media (max-width: 768px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.stat-card.card[_ngcontent-%COMP%]{min-height:80px;padding:var(--gutter-sm)}.stat-icon[_ngcontent-%COMP%]{width:44px;height:44px}.order-creation-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr auto;height:auto;max-height:70vh}.menu-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid var(--smoke-color-1);padding-right:0;padding-bottom:var(--gutter-lg);max-height:40vh}.map-legend[_ngcontent-%COMP%]{justify-content:center}.quick-actions-modal.card[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90vw;max-width:300px}.dishes-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.order-creation-layout[_ngcontent-%COMP%]{max-height:calc(100vh - 120px)}}.reservation-info[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 10%,transparent);border:1px solid var(--secondary);border-radius:8px;padding:var(--gutter-sm);margin-bottom:var(--gutter-md)}.reservation-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{border-bottom:none;padding:0}.reservation-info[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.8rem}.reservation-info[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.multiple-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.multiple-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{justify-content:center}.instructions[_ngcontent-%COMP%]{margin-top:var(--gutter);padding:var(--gutter-sm);background-color:var(--color-background-alt);border-radius:var(--border-radius);text-align:center}.instructions[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle;margin-right:4px}"]})};export{se as TableMap};
