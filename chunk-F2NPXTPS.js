import{b as u}from"./chunk-M5ABBUWH.js";import{Z as s,ca as a,g as n}from"./chunk-QIXMMTC2.js";import{j as r}from"./chunk-4ZZIO3ZI.js";var c=class i{supabaseService=a(u);unitsSubject=new n([]);units$=this.unitsSubject.asObservable();constructor(){this.loadUnits()}loadUnits(){return r(this,null,function*(){try{let{data:e,error:t}=yield this.supabaseService.getSupabaseClient().from("units").select("*").order("name");if(t)throw t;this.unitsSubject.next(e||[])}catch(e){console.error("Error loading units:",e)}})}getUnits(){return this.unitsSubject.value}getUnitById(e){return this.unitsSubject.value.find(t=>t.id===e)}getUnitsByType(e){return this.unitsSubject.value.filter(t=>t.type===e)}getBaseUnitForType(e){switch(e){case"weight":return"g";case"volume":return"mL";case"piece":return"pz";case"package":return"pz";default:return""}}getUnitsForIngredientType(e){let t={solid:["weight"],liquid:["volume"],piece:["piece","package"]};return this.unitsSubject.value.filter(o=>t[e].includes(o.type))}getConversionFactor(e){switch(e.symbol){case"kg":return 1e3;case"g":return 1;case"L":return 1e3;case"mL":return 1;case"pz":return 1;default:return 1}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})};export{c as a};
