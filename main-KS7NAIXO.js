import{a as Zn}from"./chunk-G6UDCSSI.js";import{a as Xn}from"./chunk-55QV6LZ2.js";import{a as Kn}from"./chunk-TC3GERLA.js";import{a as $}from"./chunk-O3MMBNXC.js";import{a as qn,b as Re}from"./chunk-IBXDNXCO.js";import{a as fe}from"./chunk-GWSXV7X4.js";import{a as Hn}from"./chunk-OUR3FGX7.js";import"./chunk-IA35PSVO.js";import"./chunk-2S5KLAST.js";import"./chunk-NY2YDINH.js";import"./chunk-JZM5GRUM.js";import"./chunk-FEI4XXIJ.js";import"./chunk-U54A6EW2.js";import"./chunk-VUEJXLA3.js";import"./chunk-5VB7O5BW.js";import"./chunk-ET44XX2C.js";import"./chunk-AMYEPXIV.js";import{a as _e}from"./chunk-SY2ZWW6D.js";import{a as Wn}from"./chunk-BHOO3GGD.js";import{$ as bi,$a as xn,A as Wt,Aa as Wi,Ab as B,B as qt,Ba as qi,C as Kt,Ca as Ki,D as Zt,Da as Zi,E as Xt,Ea as Xi,F as Yt,Fa as Yi,G as Jt,Ga as Ji,H as Qt,Ha as Qi,I as ei,Ia as en,J as ti,Ja as tn,K as ii,Ka as nn,L as ni,La as an,M as ai,Ma as rn,N as ri,Na as on,O as oi,Oa as sn,P as si,Pa as ln,Q as li,Qa as cn,R as ci,Ra as pn,S as pi,Sa as dn,T as di,Ta as un,U as ui,Ua as mn,V as mi,Va as gn,W as gi,Wa as vn,X as vi,Xa as _n,Y as _i,Ya as hn,Z as hi,Za as fn,_ as fi,_a as bn,a as xt,aa as xi,ab as Cn,b as Ct,ba as Ci,bb as Sn,c as St,ca as Si,cb as kn,d as kt,da as ki,db as Pn,e as Pt,ea as Pi,eb as yn,f as yt,fa as yi,fb as wn,g as wt,ga as wi,gb as Mn,h as Mt,ha as Mi,hb as Tn,i as Tt,ia as Ti,ib as On,j as Ot,ja as Oi,jb as An,k as At,ka as Ai,kb as zn,l as zt,la as zi,lb as he,m as It,ma as Ii,mb as In,n as Et,na as Ei,nb as En,o as Rt,oa as Ri,ob as Rn,p as Lt,pa as Li,pb as Ln,q as Dt,qa as Di,qb as Dn,r as Ut,ra as Ui,rb as Un,s as Ft,sa as Fi,sb as Fn,t as Vt,ta as Vi,tb as Vn,u as Nt,ua as Ni,ub as Nn,v as jt,va as ji,vb as jn,w as Bt,wa as Bi,wb as Bn,x as $t,xa as $i,xb as $n,y as Gt,ya as Gi,yb as Gn,z as Ht,za as Hi,zb as X}from"./chunk-N3VPFYDE.js";import{A as bt,d as gt,i as vt,s as _t,t as ht,u as ft}from"./chunk-45CSFDAZ.js";import{c as mt,d as y}from"./chunk-TB7INTC7.js";import{a as at,b as re,c as ot,d as st,e as P,f as lt,g as ct,h as pt,i as dt,j as ut}from"./chunk-Q3EITIAW.js";import{b as rt}from"./chunk-RC3HHTXM.js";import{k as nt,l as Z,p as ve,v as L}from"./chunk-MPTEMNWF.js";import{$ as He,B as q,C as N,I as j,Ib as c,J as Be,Jb as H,Ka as Ze,Kb as F,La as a,Lb as Ie,Ob as Qe,Pb as et,Qa as te,Qb as tt,R as Te,S as Q,U as $e,V as K,Va as R,Vb as A,W as Ge,Wb as z,Y as O,_a as u,a as J,ba as ee,c as se,ca as g,cb as Xe,cc as Ee,dc as it,ea as We,eb as Ae,f as le,fa as qe,fb as v,g as je,gb as s,hb as ie,ib as M,kc as me,la as f,lb as ue,lc as ge,ma as b,mb as C,nb as ze,ob as ne,pa as pe,pb as ae,qb as n,rb as o,s as T,sb as p,t as ce,ta as de,tb as Ye,ua as Ke,ub as Je,vb as S,xa as Oe,yb as x,zb as d}from"./chunk-5BU4UD4M.js";import{a as Ne,g as w}from"./chunk-RA2WU32H.js";var V=class t{authService=g(y);router=g(P);canActivate(){return w(this,null,function*(){console.log("\u{1F6E1}\uFE0F AuthGuard: checking authentication");try{(yield Promise.race([this.authService.waitForAuthInit(),new Promise(r=>setTimeout(()=>r(!1),5e3))]))||console.warn("\u{1F6E1}\uFE0F AuthGuard - Auth init timeout, checking current state");let e=this.authService.isAuthenticated();return console.log("\u{1F6E1}\uFE0F AuthGuard - User authenticated:",e),e?(console.log("\u{1F6E1}\uFE0F AuthGuard - Access granted"),!0):(console.log("\u{1F6E1}\uFE0F AuthGuard - Redirecting to login"),this.router.navigate(["/login"]),!1)}catch(i){return console.error("\u{1F6E1}\uFE0F AuthGuard - Error:",i),this.router.navigate(["/login"]),!1}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{authService=g(y);permissionService=g(mt);router=g(P);canActivate(i){return w(this,null,function*(){if(console.log("\u{1F510} RoleGuard: Checking route:",i.routeConfig?.path),yield this.authService.waitForAuthInit(),!this.authService.currentUserValue)return this.router.navigate(["/login"]),!1;if(this.authService.isRestaurantUser()&&!this.authService.hasAnyPermissions())return i.routeConfig?.path==="no-permission"?(console.log("\u{1F510} RoleGuard - Already on no-permission, allowing access"),!0):(console.log("\u{1F510} RoleGuard - User has no permissions, redirecting to no-permission"),this.router.navigate(["/no-permission"]),!1);let r=i.data.permissions;return!r||r.length===0?(console.log("\u{1F510} RoleGuard - No permissions required, access granted"),!0):this.permissionService.hasAnyPermission(r)?(console.log("\u{1F510} RoleGuard - Access granted"),!0):(console.log("\u{1F510} Permission denied, redirecting to dashboard"),this.redirectToAppropriateDashboard(),!1)})}redirectToAppropriateDashboard(){switch(this.authService.getCurrentContext()){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer"]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var W=class t{authService=g(y);router=g(P);canActivate(){return w(this,null,function*(){if(yield this.authService.waitForAuthInit(),!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=this.authService.getCurrentContext(),e=this.authService.canBeStaff();return console.log("\u{1F468}\u200D\u{1F4BC} StaffGuard Debug:",{currentContext:i,canBeStaff:e,staffRole:this.authService.getStaffRole()}),i==="staff"||this.authService.isOwner()||e?(i!=="staff"&&(console.log("\u{1F504} Setting context to staff for staff area access"),this.authService.setContext("staff")),!0):(this.redirectToAppropriateDashboard(),!1)})}redirectToAppropriateDashboard(){switch(this.authService.getCurrentContext()){case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer/menu-display"]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var be=class t{authService=g(y);router=g(P);canActivate(){return w(this,null,function*(){if(yield this.authService.waitForAuthInit(),!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=this.authService.getCurrentContext(),e=this.authService.canBeSupplier();console.log("\u{1F69A} SupplierGuard Debug:",{currentContext:i,canBeSupplier:e,availableContexts:this.authService.getAvailableContexts()});let r=i==="supplier"||e;return console.log("\u{1F510} SupplierGuard - Can access supplier area:",r),r?(i!=="supplier"&&(console.log("\u{1F504} Setting context to supplier for supplier area access"),this.authService.setContext("supplier")),!0):(console.log("\u{1F6AB} User cannot access supplier area, redirecting to customer"),this.authService.setContext("customer"),this.router.navigate(["/customer/menu-display"]),!1)})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var Yn=[{path:"login",loadComponent:()=>import("./chunk-3HGBZ24X.js").then(t=>t.Login)},{path:"policy",loadComponent:()=>import("./chunk-YDGRTBVF.js").then(t=>t.Policy),data:{title:"Privacy Policy",icon:"file-text"}},{path:"features",loadComponent:()=>import("./chunk-R2DUEWWB.js").then(t=>t.Features),data:{hideGlobalHeader:!0}},{path:"register",children:[{path:"",loadComponent:()=>import("./chunk-2IKQFYHI.js").then(t=>t.Register),data:{hideGlobalHeader:!0}},{path:":role",loadComponent:()=>import("./chunk-2IKQFYHI.js").then(t=>t.Register),data:{hideGlobalHeader:!0}}]},{path:"no-permission",loadComponent:()=>import("./chunk-E76ERNRC.js").then(t=>t.NoPermission),canActivate:[_],data:{title:"Accesso Negato",icon:"shield-alert"}},{path:"customer/restaurant/restaurant-list",loadComponent:()=>import("./chunk-QASHLUWZ.js").then(t=>t.RestaurantList),data:{title:"Cerca Ristoranti",icon:"utensils"}},{path:"customer/restaurant/:restaurantId/map",loadComponent:()=>import("./chunk-XDTU7KEV.js").then(t=>t.RestaurantMapViewer),data:{hideGlobalHeader:!0}},{path:"restaurant",canActivate:[V,W],children:[{path:"dashboard",loadComponent:()=>import("./chunk-TREHM4JP.js").then(t=>t.Dashboard),canActivate:[_],data:{permissions:["view_dashboard"],title:"Dashboard",icon:"layout-dashboard"}},{path:"menu",loadComponent:()=>import("./chunk-IXLN4UEK.js").then(t=>t.MenuBuilder),canActivate:[_],data:{permissions:["manage_menu"],title:"Men\xF9 & Piatti",icon:"utensils"}},{path:"alcoholic-beverages",loadComponent:()=>import("./chunk-A2FIPY3I.js").then(t=>t.AlcoholicBeverages),canActivate:[_],data:{permissions:["manage_menu"],title:"Bevande",icon:"glass-water"}},{path:"orders",loadComponent:()=>import("./chunk-5I3E7VM3.js").then(t=>t.LiveOrders),canActivate:[_],data:{permissions:["manage_orders"],title:"Ordini",icon:"shopping-cart"}},{path:"kitchen-display",loadComponent:()=>import("./chunk-YY4ROUTL.js").then(t=>t.KitchenDisplay),canActivate:[_],data:{permissions:["view_kitchen_display"],title:"Pannello Cucina",icon:"chef-hat"}},{path:"recipe",loadComponent:()=>import("./chunk-A7GZJDBD.js").then(t=>t.Recipe),canActivate:[_],data:{permissions:["view_ingredients"],title:"Ricette",icon:"scroll-text"}},{path:"expense-management",loadComponent:()=>import("./chunk-EXZO3Q2I.js").then(t=>t.ExpenseManagement),canActivate:[_],data:{permissions:["view_reports"],title:"Gestione Spese",icon:"credit-card"}},{path:"financial-report",loadComponent:()=>import("./chunk-M5FQHMKP.js").then(t=>t.FinancialReport),canActivate:[_],data:{permissions:["view_reports"],title:"Report Finanziario",icon:"bar-chart-3"}},{path:"reservation-manager",loadComponent:()=>import("./chunk-5IDF2LHO.js").then(t=>t.ReservationManager),canActivate:[_],data:{permissions:["manage_reservations"],title:"Lista Prenotazioni",icon:"notebook-text"}},{path:"table-map",loadComponent:()=>import("./chunk-F3BEF5WS.js").then(t=>t.TableMap),canActivate:[_],data:{permissions:["take_orders"],title:"Ordini",icon:"utensils-crossed"}},{path:"floor-plan",loadComponent:()=>import("./chunk-YDFQYTHP.js").then(t=>t.FloorPlanEditor),canActivate:[_],data:{permissions:["view_table_map"],title:"Mappa Ristorante",icon:"table-2"}},{path:"calendar-view",loadComponent:()=>import("./chunk-NNMLUDYF.js").then(t=>t.RestaurantCalendar),canActivate:[_],data:{permissions:["manage_reservations"],title:"Calendario",icon:"calendar"}},{path:"inventory",loadComponent:()=>import("./chunk-KFEPKFNQ.js").then(t=>t.Inventory),canActivate:[_],data:{permissions:["manage_inventory"],title:"Inventario",icon:"package"}},{path:"ingredient-search",loadComponent:()=>import("./chunk-2THJINNI.js").then(t=>t.IngredientSearch),canActivate:[_],data:{permissions:["manage_inventory"],title:"Ricerca Ingredienti",icon:"package-search"}},{path:"suppliers",loadComponent:()=>import("./chunk-MTCC2ZXL.js").then(t=>t.SupplierManager),canActivate:[_],data:{permissions:["manage_inventory"],title:"Fornitori",icon:"truck"}},{path:"tables",loadComponent:()=>import("./chunk-4OX5Y4H4.js").then(t=>t.TablemapView),canActivate:[_],data:{permissions:["take_orders"],title:"Tavoli",icon:"table-2"}},{path:"staff-management",loadComponent:()=>import("./chunk-YXMGAWFV.js").then(t=>t.StaffManagement),canActivate:[_],data:{permissions:["manage_staff"],title:"Staff",icon:"users"}},{path:"marketing-management",loadComponent:()=>import("./chunk-L3S2V4K7.js").then(t=>t.MarketingManagement),canActivate:[_],data:{permissions:["manage_staff"],title:"Gestione Marketing",icon:"megaphone"}},{path:"web-site",loadComponent:()=>import("./chunk-JKJCJVBG.js").then(t=>t.WebSite),canActivate:[_],data:{permissions:["manage_staff"],title:"Crea il tuo sito web",icon:"globe"}},{path:"marketing",loadComponent:()=>import("./chunk-AHJ6Z5WT.js").then(t=>t.Marketing),canActivate:[_],data:{permissions:["manage_staff"],title:"Promuovi il ristorante",icon:"trending-up"}},{path:"contabile-fiscale",loadComponent:()=>import("./chunk-VKK4ICV7.js").then(t=>t.ContabileFiscale),canActivate:[_],data:{permissions:["manage_staff"],title:"Gestione Fiscale",icon:"landmark"}},{path:"profile",loadComponent:()=>import("./chunk-EQRP3HTO.js").then(t=>t.Profile),canActivate:[_],data:{permissions:["manage_staff"],title:"Profilo",icon:"user"}},{path:"settings",loadComponent:()=>import("./chunk-OLVXXJTA.js").then(t=>t.RestaurantSettings),canActivate:[_],data:{permissions:["manage_restaurant_settings"],title:"Impostazioni",icon:"settings"}},{path:"chat-window",loadComponent:()=>import("./chunk-DCKY5NVJ.js").then(t=>t.ChatWindow),canActivate:[_],data:{title:"Chat del Ristorante",icon:"messages-square"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"supplier",canActivate:[V,be],data:{roles:["supplier"],context:"supplier"},children:[{path:"dashboard",loadComponent:()=>import("./chunk-VA3SBHNZ.js").then(t=>t.SupplierDashboard),data:{title:"Dashboard",icon:"layout-dashboard"}},{path:"settings",loadComponent:()=>import("./chunk-PTLRMPPG.js").then(t=>t.SupplierSettings),data:{title:"Impostazioni Fornitore",icon:"settings"}},{path:"restaurants",loadComponent:()=>import("./chunk-SZ5WIQPB.js").then(t=>t.SupplierRestaurants),data:{title:"Cerca Ristoranti",icon:"store"}},{path:"products",loadComponent:()=>import("./chunk-ND27XPTW.js").then(t=>t.SupplierIngredients),data:{title:"Catalogo Prodotti",icon:"package-search"}},{path:"ingredients",loadComponent:()=>import("./chunk-ND27XPTW.js").then(t=>t.SupplierIngredients),data:{title:"Ingredienti",icon:"package"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"customer",canActivate:[V,_],data:{roles:["customer"],context:"customer"},children:[{path:"home",loadComponent:()=>import("./chunk-2MOKXO7B.js").then(t=>t.Home),data:{title:"Home",icon:"home"}},{path:"search",loadComponent:()=>import("./chunk-F6NIEHJR.js").then(t=>t.RestaurantSearch),data:{title:"Cerca Ristoranti",icon:"search"}},{path:"menu/:id",loadComponent:()=>import("./chunk-X2DDNRH2.js").then(t=>t.MenuDisplay),data:{hideGlobalHeader:!0}},{path:"restaurant/:restaurantId/reservation",loadComponent:()=>import("./chunk-ICEQVOGR.js").then(t=>t.ReservationWizard),data:{title:"Prenotazione Tavolo",icon:"calendar-check"}},{path:"orders",loadComponent:()=>import("./chunk-BKXSQGBV.js").then(t=>t.OrderTracker),data:{title:"I miei Ordini",icon:"shopping-bag"}},{path:"reviews",loadComponent:()=>import("./chunk-57J7L2VO.js").then(t=>t.ReviewSystem),data:{title:"Le mie Recensioni",icon:"star"}},{path:"user-promotions",loadComponent:()=>import("./chunk-7X4SIBAL.js").then(t=>t.UserPromotionsComponent),data:{title:"Le mie Promozioni",icon:"tag"}},{path:"restaurant/:id",loadComponent:()=>import("./chunk-V4W2HHHN.js").then(t=>t.RestaurantDetail),data:{hideGlobalHeader:!0}},{path:"settings",loadComponent:()=>import("./chunk-OOSNUE2N.js").then(t=>t.SettingsCustomer),data:{title:"Impostazioni",icon:"settings"}},{path:"profile-user",loadComponent:()=>import("./chunk-X7I2WR7J.js").then(t=>t.ProfileUser),data:{title:"Account",icon:"user"}},{path:"",redirectTo:"home",pathMatch:"full"}]},{path:"food-cost",loadComponent:()=>import("./chunk-IYAQRY3M.js").then(t=>t.FoodCostCalculator),canActivate:[V,W],data:{permissions:["view_ingredients"],title:"Food Cost",icon:"piggy-bank"}},{path:"food-cost-calculator/:id",component:Hn,canActivate:[V,W],data:{permissions:["view_ingredients"],title:"Modifica Piatto",icon:"piggy-bank"}},{path:"food-cost/ingredient/new",loadComponent:()=>import("./chunk-IYAQRY3M.js").then(t=>t.FoodCostCalculator),canActivate:[V,W],data:{permissions:["view_ingredients"],title:"Crea Ingrediente",icon:"package-plus"}},{path:"",pathMatch:"full",redirectTo:"customer/home"},{path:"**",redirectTo:"customer/home"}];var Le="Service workers are disabled or not supported by this browser",Y=class{serviceWorker;worker;registration;events;constructor(i,e){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=new se(r=>r.error(new K(5601,!1)));else{let r=null,l=new le;this.worker=new se(E=>(r!==null&&E.next(r),l.subscribe(G=>E.next(G))));let m=()=>{let{controller:E}=i;E!==null&&(r=E,l.next(r))};i.addEventListener("controllerchange",m),m(),this.registration=this.worker.pipe(Q(()=>i.getRegistration()));let h=new le;this.events=h.asObservable();let k=E=>{let{data:G}=E;G?.type&&h.next(G)};i.addEventListener("message",k),e?.get(Ae,null,{optional:!0})?.onDestroy(()=>{i.removeEventListener("controllerchange",m),i.removeEventListener("message",k)})}}postMessage(i,e){return new Promise(r=>{this.worker.pipe(j(1)).subscribe(l=>{l.postMessage(Ne({action:i},e)),r()})})}postMessageWithOperation(i,e,r){let l=this.waitForOperationCompleted(r),m=this.postMessage(i,e);return Promise.all([m,l]).then(([,h])=>h)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=r=>r.type===i:e=r=>i.includes(r.type),this.events.pipe(N(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(j(1))}waitForOperationCompleted(i){return new Promise((e,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(N(l=>l.nonce===i),j(1),T(l=>{if(l.result!==void 0)return l.result;throw new Error(l.error)})).subscribe({next:e,error:r})})}get isEnabled(){return!!this.serviceWorker}},oa=(()=>{class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new le;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=q,this.notificationClicks=q,this.subscription=q;return}this.messages=this.sw.eventsOfType("PUSH").pipe(T(l=>l.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(T(l=>l.data)),this.pushManager=this.sw.registration.pipe(T(l=>l.pushManager));let r=this.pushManager.pipe(Q(l=>l.getSubscription()));this.subscription=new se(l=>{let m=r.subscribe(l),h=this.subscriptionChanges.subscribe(l);return()=>{m.unsubscribe(),h.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Le));let r={userVisibleOnly:!0},l=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),m=new Uint8Array(new ArrayBuffer(l.length));for(let h=0;h<l.length;h++)m[h]=l.charCodeAt(h);return r.applicationServerKey=m,new Promise((h,k)=>{this.pushManager.pipe(Q(I=>I.subscribe(r)),j(1)).subscribe({next:I=>{this.subscriptionChanges.next(I),h(I)},error:k})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Le));let e=r=>{if(r===null)throw new K(5602,!1);return r.unsubscribe().then(l=>{if(!l)throw new K(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,l)=>{this.subscription.pipe(j(1),Q(e)).subscribe({next:r,error:l})})}decodeBase64(e){return atob(e)}static \u0275fac=function(r){return new(r||t)(ee(Y))};static \u0275prov=O({token:t,factory:t.\u0275fac})}return t})(),sa=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=q,this.unrecoverable=q;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Le));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new K(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(r){return new(r||t)(ee(Y))};static \u0275prov=O({token:t,factory:t.\u0275fac})}return t})();var Qn=new He("");function la(){let t=g(oe);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let i=g(Qn),e=g(de),r=g(Ae);e.runOutsideAngular(()=>{let l=navigator.serviceWorker,m=()=>l.controller?.postMessage({action:"INITIALIZE"});l.addEventListener("controllerchange",m),r.onDestroy(()=>{l.removeEventListener("controllerchange",m)})}),e.runOutsideAngular(()=>{let l,{registrationStrategy:m}=t;if(typeof m=="function")l=new Promise(h=>m().subscribe(()=>h()));else{let[h,...k]=(m||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":l=Promise.resolve();break;case"registerWithDelay":l=Jn(+k[0]||0);break;case"registerWhenStable":l=Promise.race([r.whenStable(),Jn(+k[0])]);break;default:throw new K(5600,!1)}}l.then(()=>{r.destroyed||navigator.serviceWorker.register(i,{scope:t.scope}).catch(h=>console.error(Ge(5604,!1)))})})}function Jn(t){return new Promise(i=>setTimeout(i,t))}function ca(t,i){return new Y(t.enabled!==!1?navigator.serviceWorker:void 0,i)}var oe=class{enabled;scope;registrationStrategy};function De(t,i={}){return We([oa,sa,{provide:Qn,useValue:t},{provide:oe,useValue:i},{provide:Y,useFactory:ca,deps:[oe,pe]},Xe(la)])}var xe=class t{constructor(i){this.injector=i}handleError(i){console.error("\u274C Global error:",i)}static \u0275fac=function(e){return new(e||t)(ee(pe))};static \u0275prov=O({token:t,factory:t.\u0275fac})};var ea={providers:[rt(),{provide:Ke,useClass:xe},pt(Yn,dt()),qe(B.pick({Home:xi,Search:dn,User:Dn,Menu:Vi,Smartphone:fn,Calendars:Ut,Sparkles:bn,UtensilsCrossed:Fn,CalendarClock:Et,BellRing:yt,TicketPercent:Tn,History:bi,Camera:Ft,Palette:Xi,Target:Mn,PenTool:Yi,Info:Pi,ListX:Ai,Calendar:Dt,BellOff:Pt,CalendarCheck:It,PauseCircle:Zt,CalendarX:Lt,CheckCircle:Wt,LayoutDashboard:Mi,Heart:fi,Pencil:Ji,Calculator:zt,Tags:wn,AlertTriangle:he,Fish:mi,GripVertical:hi,ArrowUpDown:kt,Save:cn,List:zi,Check:Bt,PlusCircle:Yt,X:$n,CircleDot:Kt,Egg:si,Sprout:xn,Milk:Bi,Shell:gn,Nut:qi,Euro:li,FileText:ui,BarChart:Nt,Leaf:Ti,Droplet:oi,Rocket:on,Phone:en,Zap:Gn,ShoppingCart:hn,Clock:ti,RefreshCw:rn,Infinity:ki,PlayCircle:Xt,Flower:gi,Circle:Qt,Wind:jn,Timer:On,Wheat:Nn,Table2:Pn,Users:Un,UsersRound:Ln,Building2:At,NotebookText:Wi,Utensils:Vn,ScrollText:pn,PiggyBank:tn,ChefHat:$t,Package:Zi,Percent:Qi,PieChart:jt,Download:ri,Trash2:An,Type:En,Image:Si,RotateCcw:sn,Wine:Bn,RotateCw:ln,Truck:In,Upload:Rn,CreditCard:ai,BarChart3:Vt,PackageSearch:Ki,AlertCircle:Ht,ShoppingBag:_n,ClipboardList:ei,BookOpen:Tt,Star:Cn,Globe:_i,ArrowRight:St,MapPin:Ui,UserCircle:Jt,TrendingUp:zn,ArrowLeft:Ct,Megaphone:Fi,Settings:mn,LogOut:Li,Sun:kn,Moon:Gi,Minus:$i,Plus:nn,Mail:Di,Eye:di,EyeOff:pi,LogIn:Ri,Store:Sn,Landmark:yi,Move:Hi,Layers:wi,Bike:Mt,ShieldCheck:vn,Tag:yn,Coins:ii,Loader:Ii,ImagePlus:Ci,Briefcase:Ot,ExternalLink:ci,Lock:Ei,SendHorizontal:un,Proportions:an,MessageCircle:Ni,Compass:ni,GlassWater:vi,CalendarDays:Rt,MessagesSquare:ji,Armchair:xt,Link:Oi,Bell:wt,CircleCheck:qt,TriangleAlert:he,ChevronLeft:Gt})),De("ngsw-worker.js",{enabled:!Ee(),registrationStrategy:"registerWhenStable:30000"}),De("ngsw-worker.js",{enabled:!Ee(),registrationStrategy:"registerWhenStable:30000"})]};function pa(t,i){if(t&1&&(n(0,"option",6),c(1),o()),t&2){let e=i.$implicit,r=d(3);s("value",e),a(),F(" ",r.getContextLabel(e)," ")}}function da(t,i){if(t&1){let e=S();n(0,"div",2)(1,"label",3),c(2,"Visualizzazione:"),o(),n(3,"select",4),tt("ngModelChange",function(l){f(e);let m=d(2);return et(m.selectedContext,l)||(m.selectedContext=l),b(l)}),x("ngModelChange",function(l){f(e);let m=d(2);return b(m.onContextChange(l))}),u(4,pa,2,2,"option",5),o()()}if(t&2){let e=d(2);M("text-large",e.largeText),a(3),Qe("ngModel",e.selectedContext),s("title",e.getContextTitle(e.selectedContext)),a(),s("ngForOf",e.availableContexts)}}function ua(t,i){if(t&1&&(Ye(0),u(1,da,5,5,"div",1),Je()),t&2){let e=d();a(),s("ngIf",e.availableContexts.length>1)}}var Ce=class t{authService=g(y);router=g(P);tutorialService=g($);largeText=!1;isReady=!1;availableContexts=[];selectedContext="customer";subscriptions=[];ngOnInit(){return w(this,null,function*(){yield this.authService.waitForAuthInit(),this.subscriptions.push(ce([this.authService.availableRestaurants$,this.authService.supplier$]).subscribe(([i,e])=>{let r=["customer"];i&&i.length>0&&r.push("staff"),e&&r.push("supplier"),this.availableContexts=r})),this.subscriptions.push(this.authService.currentContext$.subscribe(i=>{this.selectedContext=i})),this.isReady=!0})}onContextChange(i){this.switchContext(i)}switchContext(i){return w(this,null,function*(){if(yield this.authService.switchContext(i)){switch(i){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":this.router.navigate(["/customer/menu-display"]);break}yield this.tutorialService.checkAndStart()}})}getContextLabel(i){return{customer:"Cliente",staff:"Ristorante",supplier:"Fornitore"}[i]||i}getContextTitle(i){return`Visualizza come ${this.getContextLabel(i).toLowerCase()}`}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-context-selector"]],inputs:{largeText:"largeText"},decls:1,vars:1,consts:[[4,"ngIf"],["class","context-selector",3,"text-large",4,"ngIf"],[1,"context-selector"],[1,"context-visualizzazione"],[1,"tipovisualizzazione","p-mini",3,"ngModelChange","ngModel","title"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){e&1&&u(0,ua,2,1,"ng-container",0),e&2&&s("ngIf",r.isReady)},dependencies:[L,nt,Z,bt,ht,ft,_t,gt,vt],styles:[".context-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);padding:0 0 var(--gap-sm) 0;border-radius:4px}.context-visualizzazione[_ngcontent-%COMP%]{font-size:var(--fs-mini);color:var(--text-muted)}.tipovisualizzazione[_ngcontent-%COMP%]{border:1px solid var(--smoke-1);border-radius:8px;background-color:var(--background2);cursor:pointer}.context-selector.text-large[_ngcontent-%COMP%]   .context-visualizzazione[_ngcontent-%COMP%], .context-selector.text-large[_ngcontent-%COMP%]   .tipovisualizzazione[_ngcontent-%COMP%]{font-size:var(--fs-md)}.tipovisualizzazione[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--background2)}"]})};function ma(t,i){t&1&&p(0,"img",34)}function ga(t,i){t&1&&p(0,"img",35)}function va(t,i){if(t&1&&(n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),u(5,ma,1,0,"img",9),A(6,"async"),u(7,ga,1,0,"img",10),A(8,"async"),o(),n(9,"p",11),c(10," Gestione aziendale a 360\xB0 per ristoranti. "),p(11,"br"),c(12," Ottimizzazione, digitalizzazione e crescita. "),o(),n(13,"p",12),c(14,"makin' life easier"),o()(),n(15,"div",13)(16,"h4",14),c(17,"Prodotto"),o(),n(18,"a",15),c(19,"Funzionalit\xE0"),o(),n(20,"a",16),c(21,"Prezzi"),o(),n(22,"a",17),c(23,"Richiedi Demo"),o()(),n(24,"div",18)(25,"h4",14),c(26,"Risorse"),o(),n(27,"a",19),c(28,"Blog"),o(),n(29,"a",20),c(30,"Supporto"),o(),n(31,"a",21),c(32,"API Docs"),o()(),n(33,"div",22)(34,"h4",14),c(35,"Contatti"),o(),n(36,"div",23)(37,"span",24),c(38,"location_on"),o(),n(39,"span",25),c(40,"Via della Ginnastica 21/A"),p(41,"br"),c(42,"34126 Trieste (TS)"),o()(),n(43,"div",26)(44,"span",24),c(45,"phone"),o(),n(46,"a",27),c(47,"040 993210"),o()(),n(48,"div",26)(49,"span",24),c(50,"email"),o(),n(51,"a",28),c(52,"info@prometheasrl.it"),o()()()(),p(53,"div",29),n(54,"div",30)(55,"div",31)(56,"span"),c(57,"\xA9 2026 Promethea S.r.l."),o(),n(58,"span"),c(59,"P.IVA 01417350327"),o(),n(60,"a",32),c(61,"Privacy"),o(),n(62,"a",33),c(63,"Termini"),o()()()()()),t&2){let e=d(2);a(5),s("ngIf",z(6,2,e.themeService.currentTheme$)==="light"),a(2),s("ngIf",z(8,4,e.themeService.currentTheme$)==="dark")}}function _a(t,i){t&1&&p(0,"img",47)}function ha(t,i){t&1&&p(0,"img",48)}function fa(t,i){if(t&1&&(n(0,"div",36)(1,"div",37)(2,"div",38)(3,"div",8)(4,"a",39),u(5,_a,1,0,"img",40),A(6,"async"),u(7,ha,1,0,"img",41),A(8,"async"),o()(),n(9,"span"),c(10,"\xA9 2026"),o(),n(11,"a",42),c(12,"Privacy"),o(),n(13,"a",43),c(14,"Termini"),o()(),n(15,"div",38)(16,"a",44)(17,"span",45),c(18,"help_outline"),o(),c(19," Supporto "),o(),n(20,"a",46)(21,"span",45),c(22,"email"),o(),c(23," Contattaci "),o()()()()),t&2){let e=d(2);a(5),s("ngIf",z(6,2,e.themeService.currentTheme$)==="light"),a(2),s("ngIf",z(8,4,e.themeService.currentTheme$)==="dark")}}function ba(t,i){if(t&1&&(n(0,"footer",1),u(1,va,64,6,"div",2)(2,fa,24,6,"div",3),o()),t&2){let e=d();M("app-footer--compact",e.isCompactMode()),a(),s("ngIf",!e.isCompactMode()),a(),s("ngIf",e.isCompactMode())}}var ke=class t{router=g(P);authService=g(y);loadingService=g(_e);themeService=g(fe);isCompactMode(){let i=this.router.url;return!["/login","/register","/policy"].some(r=>i.startsWith(r))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-footer"]],decls:2,vars:3,consts:[["class","app-footer",3,"app-footer--compact",4,"ngIf"],[1,"app-footer"],["class","footer-full",4,"ngIf"],["class","footer-compact",4,"ngIf"],[1,"footer-full"],[1,"flex","flex-col","gap-lg","p-lg"],[1,"flex","flex-wrap","justify-between","gap-lg"],[1,"flex","flex-col","gap-md",2,"flex","1"],[1,"flex","items-center","gap-sm"],["src","logo_promethea_dark.webp","alt","Promethea","class","logopiccolo",4,"ngIf"],["src","logo_promethea_light.webp","alt","Promethea","class","logopiccolo",4,"ngIf"],[1,"text-muted","text-sm"],[1,"text-mini","font-semibold","gradient-text"],[1,"flex","flex-col","gap-sm",2,"flex","0 0 150px"],[1,"font-bold","text-sm","mb-sm"],["href","#/features",1,"link","text-sm"],["href","/prezzi",1,"link","text-sm",2,"display","none"],["href","/demo",1,"link","text-sm",2,"display","none"],[1,"flex","flex-col","gap-sm",2,"flex","0 0 150px","display","none"],["href","/blog",1,"link","text-sm"],["href","/supporto",1,"link","text-sm"],["href","/api-docs",1,"link","text-sm"],[1,"flex","flex-col","gap-sm",2,"flex","0 0 200px"],[1,"flex","gap-sm","items-start"],[1,"material-icons","text-sm"],[1,"text-sm"],[1,"flex","gap-sm","items-center"],["href","tel:+39040993210",1,"link","text-sm"],["href","mailto:info@prometheasrl.it",1,"link","text-sm"],[2,"border-top","1px solid var(--smoke-1)"],[1,"flex","flex-wrap","justify-between","items-center","gap-md"],[1,"flex","flex-wrap","gap-md","items-center","text-mini","text-muted"],["href","/policy",1,"link","text-mini"],["href","/termini",1,"link","text-mini",2,"display","none"],["src","logo_promethea_dark.webp","alt","Promethea",1,"logopiccolo"],["src","logo_promethea_light.webp","alt","Promethea",1,"logopiccolo"],[1,"footer-compact"],[1,"flex","flex-wrap","justify-between","items-center","gap-md","p-md"],[1,"flex","items-center","gap-md","text-mini","text-muted"],["href","https://www.prometheasrl.it/","target","_blank","rel","noopener noreferrer"],["src","logo_promethea_dark.webp","alt","Promethea","class","logomini",4,"ngIf"],["src","logo_promethea_light.webp","alt","Promethea","class","logomini",4,"ngIf"],["href","#/policy",1,"link","text-mini",2,"display","none"],["href","termini",1,"link","text-mini",2,"display","none"],["href","/supporto",1,"link","text-mini","flex","items-center","gap-sm",2,"display","none"],[1,"material-icons"],["href","mailto:info@prometheasrl.it",1,"link","text-mini","flex","items-center","gap-sm"],["src","logo_promethea_dark.webp","alt","Promethea",1,"logomini"],["src","logo_promethea_light.webp","alt","Promethea",1,"logomini"]],template:function(e,r){e&1&&(u(0,ba,3,4,"footer",0),A(1,"async")),e&2&&s("ngIf",!z(1,1,r.loadingService.loading$))},dependencies:[L,Z,ve],styles:[".app-footer[_ngcontent-%COMP%]{margin-top:auto;border-top:1px solid var(--smoke-1);background:var(--background)}.app-footer--compact[_ngcontent-%COMP%]   .footer-full[_ngcontent-%COMP%]{display:none}.app-footer[_ngcontent-%COMP%]:not(.app-footer--compact)   .footer-compact[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.footer-full[_ngcontent-%COMP%]   .flex.flex-wrap[_ngcontent-%COMP%]{flex-direction:column}}"]})};var xa=(t,i)=>i.id;function Ca(t,i){if(t&1&&p(0,"span",18),t&2){let e=i.$index,r=d(3);M("tutorial-dot--active",e===r.tutorial.currentStep()),v("aria-selected",e===r.tutorial.currentStep())}}function Sa(t,i){if(t&1&&(n(0,"div",7)(1,"div",12),p(2,"lucide-angular",13),o(),n(3,"h2",14),c(4),o(),n(5,"p",15),c(6),o(),n(7,"div",16),ne(8,Ca,1,3,"span",17,xa),o()()),t&2){let e=i,r=d(2);a(2),s("name",e.icon)("size",36),a(2),F(" ",e.title," "),a(2),F(" ",e.description," "),a(2),ae(r.tutorial.steps())}}function ka(t,i){if(t&1){let e=S();n(0,"button",19),x("click",function(){f(e);let l=d(2);return b(l.tutorial.prevStep())}),p(1,"lucide-angular",20),c(2," Indietro "),o()}t&2&&(a(),s("size",16))}function Pa(t,i){t&1&&(p(0,"lucide-angular",21),c(1," Inizia il tour ")),t&2&&s("size",16)}function ya(t,i){t&1&&(c(0," Avanti "),p(1,"lucide-angular",22)),t&2&&(a(),s("size",16))}function wa(t,i){if(t&1){let e=S();n(0,"div",11)(1,"div",23)(2,"div",2)(3,"div",24),p(4,"lucide-angular",25),n(5,"span",26),c(6,"Saltare il tutorial?"),o()()(),n(7,"div",27)(8,"p",28),c(9," Potrai sempre riavviarlo dalle impostazioni del tuo profilo. "),o()(),n(10,"div",8)(11,"button",19),x("click",function(){f(e);let l=d(2);return b(l.tutorial.cancelSkip())}),c(12," Continua tutorial "),o(),n(13,"button",10),x("click",function(){f(e);let l=d(2);return b(l.tutorial.confirmSkip())}),c(14," S\xEC, salta "),o()()()()}t&2&&(a(4),s("size",20))}function Ma(t,i){if(t&1){let e=S();n(0,"div",0),x("click",function(){f(e);let l=d();return b(l.tutorial.requestSkip())}),n(1,"div",1),x("click",function(l){return f(e),b(l.stopPropagation())}),n(2,"div",2)(3,"div",3),p(4,"div",4),o(),n(5,"button",5),x("click",function(){f(e);let l=d();return b(l.tutorial.requestSkip())}),p(6,"lucide-angular",6),o()(),u(7,Sa,10,4,"div",7),n(8,"div",8),u(9,ka,3,1,"button",9),n(10,"button",10),x("click",function(){f(e);let l=d();return b(l.tutorial.nextStep())}),u(11,Pa,2,1)(12,ya,2,1),o()()()(),u(13,wa,15,1,"div",11)}if(t&2){let e,r=d();a(4),ie("width",r.tutorial.progress(),"%"),a(2),s("size",18),a(),C((e=r.tutorial.currentStepData())?7:-1,e),a(2),C(r.tutorial.currentStep()>0?9:-1),a(2),C(r.tutorial.isLastStep()?11:12),a(2),C(r.tutorial.showSkipConfirm()?13:-1)}}var Pe=class t{tutorial=g($);isModalPhase=me(()=>this.tutorial.phase()==="modal");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-tutorial-modal"]],decls:1,vars:1,consts:[[1,"modal-overlay",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","tutorial-title",1,"modal-container","modal-md",3,"click"],[1,"modal-header"],[1,"tutorial-progress-bar"],[1,"tutorial-progress-fill"],["aria-label","Salta tutorial",1,"icon-button","x-small",3,"click"],["name","x",3,"size"],[1,"flex","flex-col","items-center","text-center","p-lg","gap-md"],[1,"modal-footer"],[1,"promethea-button","outline"],[1,"promethea-button",3,"click"],[1,"modal-overlay",2,"z-index","10001"],[1,"avatartondo","tutorial-icon-lg"],[3,"name","size"],["id","tutorial-title",1,"font-bold","gradient-text","m-0",2,"font-size","var(--fs-lg)","line-height","1.2"],[1,"text-muted","m-0",2,"font-size","var(--fs-sm)","line-height","1.6","max-width","420px"],["role","tablist",1,"flex","gap-sm",2,"margin-top","var(--gap-sm)"],["role","tab",1,"tutorial-dot",3,"tutorial-dot--active"],["role","tab",1,"tutorial-dot"],[1,"promethea-button","outline",3,"click"],["name","arrow-left",3,"size"],["name","check",3,"size"],["name","arrow-right",3,"size"],["role","alertdialog",1,"modal-container","modal-md"],[1,"flex","items-center","gap-sm"],["name","alert-triangle",2,"color","var(--secondary)",3,"size"],[1,"font-bold",2,"font-size","var(--fs-md)"],[1,"p-md"],[1,"text-muted","m-0",2,"font-size","var(--fs-sm)"]],template:function(e,r){e&1&&u(0,Ma,14,7),e&2&&C(r.tutorial.isVisible()&&r.isModalPhase()?0:-1)},dependencies:[L,B,X],styles:[".tutorial-icon-lg[_ngcontent-%COMP%]{width:80px;height:80px;flex-shrink:0}.tutorial-icon-lg[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%], .tutorial-icon-lg[_ngcontent-%COMP%]     svg{color:#fff}.tutorial-progress-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:var(--smoke-1);border-radius:999px;overflow:hidden}.tutorial-progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--gradiente);border-radius:999px;transition:width .4s ease}.tutorial-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--smoke-2);transition:all .25s ease;flex-shrink:0}.tutorial-dot--active[_ngcontent-%COMP%]{background:var(--primary);width:24px;border-radius:999px}.modal-container[_ngcontent-%COMP%]{animation:modalAppear .3s cubic-bezier(.2,.9,.2,1)}"],changeDetection:0})};function Ta(t,i){if(t&1&&p(0,"div",5),t&2){let e=i;ie("top",e.top-6,"px")("left",e.left-6,"px")("width",e.width+12,"px")("height",e.height+12,"px")}}function Oa(t,i){if(t&1&&p(0,"span",22),t&2){let e=i.$index,r=d();M("active",e===r.current-1)}}function Aa(t,i){if(t&1&&(n(0,"div",20),ne(1,Oa,1,2,"span",21,ze),o()),t&2){let e=d(4);a(),ae(e.getDots(i.total))}}function za(t,i){if(t&1){let e=S();n(0,"div",12)(1,"div",9)(2,"div",13),p(3,"lucide-angular",14),o(),n(4,"strong",15),c(5),o()(),n(6,"button",16),x("click",function(){f(e);let l=d(3);return b(l.tutorial.requestSkip())}),p(7,"lucide-angular",17),o()(),n(8,"div",18)(9,"p",19),c(10),o()(),u(11,Aa,3,0,"div",20)}if(t&2){let e,r=i,l=d(3);a(3),s("name",l.tutorial.currentStepData().icon),a(2),H(r.title),a(5),H(r.description),a(),C((e=l.tutorial.subStepProgress())?11:-1,e)}}function Ia(t,i){if(t&1){let e=S();n(0,"button",23),x("click",function(){f(e);let l=d(3);return b(l.tutorial.prevStep())}),p(1,"lucide-angular",24),o()}}function Ea(t,i){t&1&&c(0," Fine ")}function Ra(t,i){t&1&&c(0," Continua ")}function La(t,i){t&1&&c(0," Avanti ")}function Da(t,i){if(t&1){let e=S();n(0,"div",6),u(1,za,12,4),n(2,"div",7)(3,"span",8),c(4),o(),n(5,"div",9),u(6,Ia,2,0,"button",10),n(7,"button",11),x("click",function(){f(e);let l=d(2);return b(l.tutorial.nextStep())}),u(8,Ea,1,0)(9,Ra,1,0)(10,La,1,0),o()()()()}if(t&2){let e,r=i,l=d(2);ue("card tooltip-card arrow-",r.arrowSide," relative"),ie("top",r.top,"px")("left",r.left,"px"),a(),C((e=l.tutorial.currentTooltipData())?1:-1,e),a(3),Ie(" ",l.tutorial.currentStep()+1," / ",l.tutorial.steps().length," "),a(2),C(l.tutorial.currentStep()>0||l.tutorial.currentSubStep()>0?6:-1),a(2),C(l.tutorial.isLastStep()&&l.tutorial.isLastSubStep()?8:l.tutorial.isLastSubStep()?10:9)}}function Ua(t,i){if(t&1&&p(0,"span",22),t&2){let e=i.$index,r=d();M("active",e===r.current-1)}}function Fa(t,i){if(t&1&&(n(0,"div",20),ne(1,Ua,1,2,"span",21,ze),o()),t&2){let e=d(4);a(),ae(e.getDots(i.total))}}function Va(t,i){if(t&1){let e=S();n(0,"div",12)(1,"div",27)(2,"div",13),p(3,"lucide-angular",14),o(),n(4,"strong",15),c(5),o()(),n(6,"button",28),x("click",function(){f(e);let l=d(3);return b(l.tutorial.requestSkip())}),p(7,"lucide-angular",29),o()(),n(8,"p",30),c(9),o(),u(10,Fa,3,0,"div",20)}if(t&2){let e,r=i,l=d(3);a(3),s("name",l.tutorial.currentStepData().icon),a(2),H(r.title),a(4),H(r.description),a(),C((e=l.tutorial.subStepProgress())?10:-1,e)}}function Na(t,i){if(t&1){let e=S();n(0,"button",31),x("click",function(){f(e);let l=d(3);return b(l.tutorial.prevStep())}),p(1,"lucide-angular",24),o()}}function ja(t,i){t&1&&c(0," Fine ")}function Ba(t,i){t&1&&c(0," Continua ")}function $a(t,i){t&1&&c(0," Avanti ")}function Ga(t,i){if(t&1){let e=S();n(0,"div",3),u(1,Va,11,4),n(2,"div",7)(3,"span",8),c(4),o(),n(5,"div",9),u(6,Na,2,0,"button",25),n(7,"button",26),x("click",function(){f(e);let l=d(2);return b(l.tutorial.nextStep())}),u(8,ja,1,0)(9,Ba,1,0)(10,$a,1,0),o()()()()}if(t&2){let e,r=d(2);a(),C((e=r.tutorial.currentTooltipData())?1:-1,e),a(3),Ie(" ",r.tutorial.currentStep()+1," / ",r.tutorial.steps().length," "),a(2),C(r.tutorial.currentStep()>0||r.tutorial.currentSubStep()>0?6:-1),a(2),C(r.tutorial.isLastStep()&&r.tutorial.isLastSubStep()?8:r.tutorial.isLastSubStep()?10:9)}}function Ha(t,i){if(t&1){let e=S();n(0,"div",4)(1,"div",32)(2,"div",12)(3,"div",9),p(4,"lucide-angular",33),n(5,"span",34),c(6,"Saltare il tour?"),o()()(),n(7,"div",35)(8,"p",36),c(9," Potrai sempre riavviarlo dalle impostazioni del profilo. "),o()(),n(10,"div",37)(11,"button",38),x("click",function(){f(e);let l=d(2);return b(l.tutorial.cancelSkip())}),c(12,"Continua"),o(),n(13,"button",26),x("click",function(){f(e);let l=d(2);return b(l.tutorial.confirmSkip())}),c(14,"S\xEC, salta"),o()()()()}t&2&&(a(4),s("size",20))}function Wa(t,i){if(t&1&&(p(0,"div",0),u(1,Ta,1,8,"div",1)(2,Da,11,12,"div",2)(3,Ga,11,5,"div",3)(4,Ha,15,1,"div",4)),t&2){let e,r,l=d();a(),C((e=l.highlightRect())?1:-1,e),a(),C((r=l.tooltipPos())?2:3,r),a(2),C(l.tutorial.showSkipConfirm()?4:-1)}}var ye=class t{tutorial=g($);auth=g(y);zone=g(de);router=g(P);isTooltipPhase=me(()=>this.tutorial.phase()==="tooltip");tooltipPos=Oe(null);highlightRect=Oe(null);sidebarObserver;resizeObserver;navSubscription;_onScroll;constructor(){ge(()=>{let i=this.tutorial.currentStepData(),e=this.tutorial.phase(),r=this.tutorial.refreshSignal(),l=this.tutorial.currentSubStep(),m=this.tutorial.isIntroStep();if(e!=="tooltip"||!i){setTimeout(()=>{this.tooltipPos.set(null),this.highlightRect.set(null)},0);return}setTimeout(()=>this.navigateAndRecalculate(i),0)})}navigateAndRecalculate(i){if(!i.route){this.recalculate();return}let e=this.router.url.split("?")[0],r=i.route.split("?")[0];if(e===r){this.recalculate();return}this.navSubscription?.unsubscribe(),this.navSubscription=this.router.events.pipe(N(l=>l instanceof re),j(1)).subscribe(()=>{window.scrollTo(0,0),setTimeout(()=>this.recalculate(),150)}),this.router.navigate([i.route])}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.resizeObserver=new ResizeObserver(()=>{this.zone.run(()=>this.recalculate())}),this.resizeObserver.observe(document.body),this.sidebarObserver=new ResizeObserver(()=>{this.zone.run(()=>this.recalculate())});let i=document.querySelector(".sidebar");i&&this.sidebarObserver.observe(i),this._onScroll=()=>this.zone.run(()=>this._updateHighlightOnly()),window.addEventListener("scroll",this._onScroll,{passive:!0,capture:!0})})}_updateHighlightOnly(){let i=this.tutorial.currentTooltipData();if(!i?.tooltipTarget)return;let e=document.querySelector(i.tooltipTarget);if(!e)return;let r=e.getBoundingClientRect();r.width===0||r.height===0||(this.highlightRect.set(r),this._computePosition(r,i.tooltipPosition))}ngOnDestroy(){this.resizeObserver?.disconnect(),this.sidebarObserver?.disconnect(),this.navSubscription?.unsubscribe(),this._onScroll&&window.removeEventListener("scroll",this._onScroll,{capture:!0})}recalculate(i=0){let e=this.tutorial.currentTooltipData();if(!e?.tooltipTarget){this.tooltipPos.set(null),this.highlightRect.set(null);return}let r=document.querySelector(e.tooltipTarget);if(!r){i<5?setTimeout(()=>this.recalculate(i+1),150*(i+1)):(console.warn(`[Tutorial] "${e.tooltipTarget}" non trovato \u2192 fallback`),this.tooltipPos.set(null),this.highlightRect.set(null));return}let l=window.innerWidth<768,m=this.auth.getSidebarCollapsed(),h=r.closest(".sidebar")!==null;if(l&&m&&h){this.auth.setSidebarCollapsed(!1),setTimeout(()=>this.recalculate(i+1),300);return}let k=r.getBoundingClientRect();if(k.width===0||k.height===0){i<5?setTimeout(()=>this.recalculate(i+1),150*(i+1)):(this.tooltipPos.set(null),this.highlightRect.set(null));return}r.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{let I=r.getBoundingClientRect();this.highlightRect.set(I),this._computePosition(I,e.tooltipPosition)},300)}_computePosition(i,e){let r=this.isMobile(),l=r?0:this.getSidebarWidth(),m=16,h=r?Math.min(350,window.innerWidth-32):450,k=200,I=window.innerWidth,E=window.innerHeight,G=e??"bottom",Ue=[{pos:"bottom",top:i.bottom+m,left:i.left+i.width/2-h/2},{pos:"top",top:i.top-k-m,left:i.left+i.width/2-h/2},{pos:"right",top:i.top+i.height/2-k/2,left:i.right+m},{pos:"left",top:i.top+i.height/2-k/2,left:i.left-h-m}],na=(U,Ve)=>Ve>=l+8&&Ve+h<=I-8&&U>=8&&U+k<=E-8,Fe=[Ue.find(U=>U.pos===G),...Ue.filter(U=>U.pos!==G)],Me=Fe.find(U=>na(U.top,U.left))??Fe[0],aa=Math.max(l+8,Math.min(Me.left,I-h-8)),ra=Math.max(8,Math.min(Me.top,E-k-8));this.tooltipPos.set({top:ra,left:aa,arrowSide:Me.pos})}isMobile(){return window.innerWidth<768}getDots(i){return Array.from({length:i},(e,r)=>r)}getSidebarWidth(){let i=document.querySelector(".sidebar");return i?i.offsetWidth:0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-tutorial-tooltip"]],decls:1,vars:1,consts:[[1,"tooltip-backdrop"],[1,"tooltip-highlight",3,"top","left","width","height"],["role","tooltip",3,"class","top","left"],[1,"card","tooltip-card","tooltip-card--fallback","relative","p-md"],[1,"modal-overlay","exittutorial"],[1,"tooltip-highlight"],["role","tooltip"],[1,"flex","justify-between","items-center","gap-sm","mt-md","p-sm"],[1,"chip-mini"],[1,"flex","items-center","gap-sm"],["aria-label","Passo precedente",1,"promethea-button","ghost","tooltip-btn","x-small"],[1,"promethea-button","tooltip-btn",3,"click"],[1,"modal-header"],[1,"avatartondo","tooltip-icon-sm"],["size","16",3,"name"],[1,"text-md"],["title","Chiudi tour","aria-label","Chiudi tutorial",1,"icon-button","absolute","top-2","right-2","z-10","x-small",3,"click"],["name","x","size","18"],[1,"form-card"],[1,"text-muted","mb-md","leading-tight"],[1,"substep-dots"],[1,"substep-dot",3,"active"],[1,"substep-dot"],["aria-label","Passo precedente",1,"promethea-button","ghost","tooltip-btn","x-small",3,"click"],["name","arrow-left","size","14"],[1,"promethea-button","ghost","x-small"],[1,"promethea-button",3,"click"],[1,"flex","items-center","gap-sm","mb-sm","pr-12"],["aria-label","Chiudi tutorial",1,"icon-button","absolute","top-3","right-3","z-10",3,"click"],["name","x","size","20"],[1,"text-muted","mb-md","mt-sm","p-md"],[1,"promethea-button","ghost","x-small",3,"click"],["role","alertdialog",1,"modal-container","modal-sm","exittutorial"],["name","alert-triangle",2,"color","var(--secondary)",3,"size"],[1,"font-bold",2,"font-size","var(--fs-md)"],[1,"p-md"],[1,"text-muted","m-0",2,"font-size","var(--fs-sm)"],[1,"modal-footer"],[1,"promethea-button","outline",3,"click"]],template:function(e,r){e&1&&u(0,Wa,5,3),e&2&&C(r.tutorial.isVisible()&&r.isTooltipPhase()?0:-1)},dependencies:[L,B,X],styles:[".app-tutorial-tooltip[_ngcontent-%COMP%]{z-index:10001!important}.tooltip-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:var(--smoke-1);z-index:100000}.tooltip-highlight[_ngcontent-%COMP%]{position:fixed;border-radius:8px;box-shadow:0 0 0 4px var(--primary),0 0 0 9999px #00000080;pointer-events:none;z-index:100001;animation:_ngcontent-%COMP%_pulseHighlight 2s ease-in-out infinite}.exittutorial[_ngcontent-%COMP%]{z-index:100002!important}.tooltip-card[_ngcontent-%COMP%]{position:fixed;z-index:100001!important;width:clamp(300px,35vw,580px);pointer-events:all;transform:none!important;padding:var(--gap-lg);animation:none!important;padding:0;background:var(--background2)}.tooltip-card[_ngcontent-%COMP%]:hover{transform:none!important;box-shadow:0 2px 8px var(--smoke-1)!important;border-color:var(--smoke-1)!important}.tooltip-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}.modal-header[_ngcontent-%COMP%]{border-radius:var(--gap-sm) var(--gap-sm) 0 0}.tooltip-card--fallback[_ngcontent-%COMP%]{top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;width:clamp(300px,35vw,580px)}.tooltip-card--fallback[_ngcontent-%COMP%]:hover{transform:translate(-50%,-50%)!important;border-color:var(--smoke-1)!important;box-shadow:0 2px 8px var(--smoke-1)!important}.tooltip-btn[_ngcontent-%COMP%]{padding:var(--gap-sm) var(--gap-md)!important;min-height:32px!important;font-size:var(--fs-mini)!important}@keyframes _ngcontent-%COMP%_pulseHighlight{0%,to{box-shadow:0 0 0 4px var(--primary),0 0 0 9999px #00000080}50%{box-shadow:0 0 0 8px var(--primary),0 0 0 9999px #00000080}}"],changeDetection:0})};function qa(t,i){t&1&&(n(0,"div",36)(1,"div",37),p(2,"img",38),o(),n(3,"div",39),c(4,"Platea"),o()())}function Ka(t,i){t&1&&(n(0,"div",40),c(1,"Gestione Ristorante"),o())}function Za(t,i){t&1&&p(0,"div",41)}function Xa(t,i){if(t&1&&(n(0,"li",20)(1,"a",42),p(2,"lucide-angular",43),n(3,"span",23),c(4,"Dashboard"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Dashboard":null),a(),s("size",e.iconSize)}}function Ya(t,i){if(t&1&&(n(0,"li",20)(1,"a",44),p(2,"lucide-angular",45),n(3,"span",23),c(4,"Mappa Ristorante"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Layout Sala":null),a(),s("size",e.iconSize)}}function Ja(t,i){if(t&1&&(n(0,"li",20)(1,"a",46),p(2,"lucide-angular",47),n(3,"span",23),c(4,"Marketing"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Gestione Marketing":null),a(),s("size",e.iconSize)}}function Qa(t,i){if(t&1&&(n(0,"li",20)(1,"a",48),p(2,"lucide-angular",49),n(3,"span",23),c(4,"Staff"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Staff":null),a(),s("size",e.iconSize)}}function er(t,i){if(t&1&&(n(0,"div",15),u(1,Ka,2,0,"div",16)(2,Za,1,0,"div",17),n(3,"ul",18),u(4,Xa,5,2,"li",19)(5,Ya,5,2,"li",19)(6,Ja,5,2,"li",19)(7,Qa,5,2,"li",19),o()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.authService.hasPermission("view_dashboard")),a(),s("ngIf",e.authService.hasPermission("view_table_map")),a(),s("ngIf",e.authService.hasPermission("manage_restaurant_settings")),a(),s("ngIf",e.authService.hasPermission("manage_staff"))}}function tr(t,i){t&1&&(n(0,"div",40),c(1,"Prenotazioni Tavoli"),o())}function ir(t,i){t&1&&p(0,"div",41)}function nr(t,i){if(t&1&&(n(0,"li",20)(1,"a",50),p(2,"lucide-angular",51),n(3,"span",23),c(4,"Ordini"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Ordini":null),a(),s("size",e.iconSize)}}function ar(t,i){if(t&1&&(n(0,"li",20)(1,"a",52),p(2,"lucide-angular",53),n(3,"span",23),c(4,"Calendario"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Calendario":null),a(),s("size",e.iconSize)}}function rr(t,i){if(t&1&&(n(0,"li",20)(1,"a",54),p(2,"lucide-angular",55),n(3,"span",23),c(4,"Lista Prenotazioni"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Lista Prenotazioni":null),a(),s("size",e.iconSize)}}function or(t,i){if(t&1&&(n(0,"div",15),u(1,tr,2,0,"div",16)(2,ir,1,0,"div",17),n(3,"ul",18),u(4,nr,5,2,"li",19)(5,ar,5,2,"li",19)(6,rr,5,2,"li",19),o()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.authService.hasPermission("manage_reservations")),a(),s("ngIf",e.authService.hasPermission("manage_reservations")),a(),s("ngIf",e.authService.hasPermission("manage_reservations"))}}function sr(t,i){t&1&&(n(0,"div",40),c(1,"Menu & Cucina"),o())}function lr(t,i){t&1&&p(0,"div",41)}function cr(t,i){if(t&1&&(n(0,"li",20)(1,"a",56),p(2,"lucide-angular",57),n(3,"span",23),c(4,"Men\xF9 & Piatti"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Men\xF9 & Piatti":null),a(),s("size",e.iconSize)}}function pr(t,i){if(t&1&&(n(0,"li",20)(1,"a",58),p(2,"lucide-angular",59),n(3,"span",23),c(4,"Ricette"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Ricette":null),a(),s("size",e.iconSize)}}function dr(t,i){if(t&1&&(n(0,"li",20)(1,"a",60),p(2,"lucide-angular",61),n(3,"span",23),c(4,"Food Cost"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Food Cost":null),a(),s("size",e.iconSize)}}function ur(t,i){if(t&1&&(n(0,"li",20)(1,"a",62),p(2,"lucide-angular",63),n(3,"span",23),c(4,"Pannello Cucina"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Pannello Cucina":null),a(),s("size",e.iconSize)}}function mr(t,i){if(t&1&&(n(0,"div",15),u(1,sr,2,0,"div",16)(2,lr,1,0,"div",17),n(3,"ul",18),u(4,cr,5,2,"li",19)(5,pr,5,2,"li",19)(6,dr,5,2,"li",19)(7,ur,5,2,"li",19),o()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.authService.hasPermission("manage_menu")),a(),s("ngIf",e.authService.hasPermission("manage_inventory")),a(),s("ngIf",e.authService.hasPermission("manage_inventory")),a(),s("ngIf",e.authService.hasPermission("view_kitchen_display"))}}function gr(t,i){t&1&&(n(0,"div",40),c(1,"Magazzino & Acquisti"),o())}function vr(t,i){t&1&&p(0,"div",41)}function _r(t,i){if(t&1&&(n(0,"li",20)(1,"a",64),p(2,"lucide-angular",65),n(3,"span",23),c(4,"Inventario"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Inventario":null),a(),s("size",e.iconSize)}}function hr(t,i){if(t&1&&(n(0,"li",20)(1,"a",66),p(2,"lucide-angular",67),n(3,"span",23),c(4,"Bevande"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Bevande":null),a(),s("size",e.iconSize)}}function fr(t,i){if(t&1&&(n(0,"li",20)(1,"a",68),p(2,"lucide-angular",69),n(3,"span",23),c(4,"Fornitori"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Fornitori":null),a(),s("size",e.iconSize)}}function br(t,i){if(t&1&&(n(0,"div",15),u(1,gr,2,0,"div",16)(2,vr,1,0,"div",17),n(3,"ul",18),u(4,_r,5,2,"li",19)(5,hr,5,2,"li",19)(6,fr,5,2,"li",19),o()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.authService.hasPermission("manage_inventory")),a(),s("ngIf",e.authService.hasPermission("manage_inventory")),a(),s("ngIf",e.authService.hasPermission("manage_inventory"))}}function xr(t,i){t&1&&(n(0,"div",40),c(1,"Finanze"),o())}function Cr(t,i){t&1&&p(0,"div",41)}function Sr(t,i){if(t&1&&(n(0,"li",20)(1,"a",70),p(2,"lucide-angular",71),n(3,"span",23),c(4,"Gestione Spese"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Gestione Spese":null),a(),s("size",e.iconSize)}}function kr(t,i){if(t&1&&(n(0,"li",20)(1,"a",72),p(2,"lucide-angular",73),n(3,"span",23),c(4,"Report Finanziario"),o()()()),t&2){let e=d(3);a(),v("title",e.isSidebarCollapsed?"Report Finanziario":null),a(),s("size",e.iconSize)}}function Pr(t,i){if(t&1&&(n(0,"div",15),u(1,xr,2,0,"div",16)(2,Cr,1,0,"div",17),n(3,"ul",18),u(4,Sr,5,2,"li",19)(5,kr,5,2,"li",19),o()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.authService.hasPermission("view_expenses")),a(),s("ngIf",e.authService.hasPermission("view_reports"))}}function yr(t,i){t&1&&(n(0,"div",40),c(1,"Promethea"),o())}function wr(t,i){t&1&&p(0,"div",41)}function Mr(t,i){if(t&1&&(n(0,"div",15),u(1,yr,2,0,"div",16)(2,wr,1,0,"div",17),n(3,"ul",18)(4,"li",20)(5,"a",74),p(6,"lucide-angular",75),n(7,"span",23),c(8,"Crea il tuo sito web"),o()()(),n(9,"li",20)(10,"a",76),p(11,"lucide-angular",77),n(12,"span",23),c(13,"Gestione Fiscale"),o()()(),n(14,"li",20)(15,"a",78),p(16,"lucide-angular",79),n(17,"span",23),c(18,"Promuovi il ristorante"),o()()()()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(3),v("title",e.isSidebarCollapsed?"Crea il tuo sito web":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Gestione Fiscale":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Promuovi il ristorante":null),a(),s("size",e.iconSize)}}function Tr(t,i){t&1&&(n(0,"div",40),c(1,"Gestione Fornitore"),o())}function Or(t,i){t&1&&p(0,"div",41)}function Ar(t,i){if(t&1&&(n(0,"div",15),u(1,Tr,2,0,"div",16)(2,Or,1,0,"div",17),n(3,"ul",18)(4,"li",20)(5,"a",80),p(6,"lucide-angular",43),n(7,"span",23),c(8,"Dashboard"),o()()(),n(9,"li",20)(10,"a",81),p(11,"lucide-angular",82),n(12,"span",23),c(13,"Catalogo Prodotti"),o()()()()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(3),v("title",e.isSidebarCollapsed?"Dashboard":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Catalogo Prodotti":null),a(),s("size",e.iconSize)}}function zr(t,i){t&1&&(n(0,"div",40),c(1,"Cliente"),o())}function Ir(t,i){t&1&&p(0,"div",41)}function Er(t,i){if(t&1&&(n(0,"div",15),u(1,zr,2,0,"div",16)(2,Ir,1,0,"div",17),n(3,"ul",18)(4,"li",83)(5,"a",84),p(6,"lucide-angular",85),n(7,"span",23),c(8,"Cerca Ristoranti"),o()()(),n(9,"li",20)(10,"a",86),p(11,"lucide-angular",87),n(12,"span",23),c(13,"Home"),o()()(),n(14,"li",20)(15,"a",88),p(16,"lucide-angular",57),n(17,"span",23),c(18,"Lista Ristoranti"),o()()(),n(19,"li",83)(20,"a",89),p(21,"lucide-angular",90),n(22,"span",23),c(23,"Le mie Prenotazioni"),o()()(),n(24,"li",20)(25,"a",91),p(26,"lucide-angular",92),n(27,"span",23),c(28,"Le mie Promozioni"),o()()(),n(29,"li",83)(30,"a",93),p(31,"lucide-angular",94),n(32,"span",23),c(33,"I miei Ordini"),o()()(),n(34,"li",83)(35,"a",95),p(36,"lucide-angular",96),n(37,"span",23),c(38,"Le mie Recensioni"),o()()()()()),t&2){let e=d(2);a(),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(3),v("title",e.isSidebarCollapsed?"Cerca Ristoranti":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Home":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Lista Ristoranti":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Le mie Prenotazioni":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Le mie Promozioni":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"I miei Ordini":null),a(),s("size",e.iconSize),a(4),v("title",e.isSidebarCollapsed?"Le mie Recensioni":null),a(),s("size",e.iconSize)}}function Rr(t,i){t&1&&(n(0,"div",40),c(1,"Account"),o())}function Lr(t,i){t&1&&p(0,"div",41)}function Dr(t,i){if(t&1&&(n(0,"span",100),c(1),o()),t&2){let e=i.ngIf;M("hidden",e===0),a(),F(" ",e," ")}}function Ur(t,i){if(t&1&&(n(0,"li",20)(1,"a",97),p(2,"lucide-angular",98),n(3,"span",23),c(4,"Chat"),o(),u(5,Dr,2,3,"span",99),A(6,"async"),o()()),t&2){let e=d(2);a(),v("title",e.isSidebarCollapsed?"Chat":null),a(),s("size",e.iconSize),a(3),s("ngIf",z(6,3,e.totalUnread$))}}function Fr(t,i){if(t&1&&(n(0,"li",20)(1,"a",101),p(2,"lucide-angular",102),n(3,"span",23),c(4,"Profilo"),o()()()),t&2){let e=d(2);a(),v("title",e.isSidebarCollapsed?"Profilo":null),a(),s("size",e.iconSize)}}function Vr(t,i){if(t&1&&(n(0,"li",20)(1,"a",103),p(2,"lucide-angular",104),n(3,"span",23),c(4,"Impostazioni"),o()()()),t&2){let e=d(2);a(),v("title",e.isSidebarCollapsed?"Impostazioni":null),a(),s("size",e.iconSize)}}function Nr(t,i){if(t&1&&(n(0,"li",20)(1,"a",105),p(2,"lucide-angular",102),n(3,"span",23),c(4,"Account"),o()()()),t&2){let e=d(2);a(),v("title",e.isSidebarCollapsed?"Account":null),a(),s("size",e.iconSize)}}function jr(t,i){if(t&1&&(n(0,"li",20)(1,"a",106),p(2,"lucide-angular",104),n(3,"span",23),c(4,"Impostazioni"),o()()()),t&2){let e=d(2);a(),v("title",e.isSidebarCollapsed?"Impostazioni Cliente":null),a(),s("size",e.iconSize)}}function Br(t,i){if(t&1&&(n(0,"div",107),p(1,"app-context-selector",108),o()),t&2){let e=d(2);a(),s("largeText",e.isLargeText)}}function $r(t,i){if(t&1&&(n(0,"div",113),c(1),o()),t&2){let e=d(3);a(),F(" ",e.getRestaurantName()," ")}}function Gr(t,i){if(t&1&&(n(0,"div",113),c(1),o()),t&2){let e=d(3);a(),F(" ",e.getSupplierCompanyName()," ")}}function Hr(t,i){if(t&1&&(n(0,"div",109)(1,"div",110)(2,"span",111),c(3),o()(),u(4,$r,2,1,"div",112)(5,Gr,2,1,"div",112),o()),t&2){let e=d(2);a(3),H(e.getUserDisplayName()),a(),s("ngIf",e.currentRestaurant&&e.isRestaurantUser()),a(),s("ngIf",e.supplierProfile&&e.isSupplierUser())}}function Wr(t,i){if(t&1){let e=S();n(0,"aside",6),x("click",function(l){f(e);let m=d();return b(m.onSidebarNavClick(l))}),n(1,"div",7),u(2,qa,5,0,"div",8),n(3,"div",9)(4,"button",10),x("click",function(l){return f(e),d().toggleSize(),b(l.stopPropagation())}),p(5,"lucide-angular",11),o(),n(6,"button",12),x("click",function(l){return f(e),d().toggleSidebar(),b(l.stopPropagation())}),p(7,"lucide-angular",11),o()()(),n(8,"nav",13),u(9,er,8,6,"div",14)(10,or,7,5,"div",14)(11,mr,8,6,"div",14)(12,br,7,5,"div",14)(13,Pr,6,4,"div",14)(14,Mr,19,8,"div",14)(15,Ar,14,6,"div",14)(16,Er,39,16,"div",14),n(17,"div",15),u(18,Rr,2,0,"div",16)(19,Lr,1,0,"div",17),n(20,"ul",18),u(21,Ur,7,5,"li",19)(22,Fr,5,2,"li",19)(23,Vr,5,2,"li",19)(24,Nr,5,2,"li",19)(25,jr,5,2,"li",19),n(26,"li",20)(27,"button",21),x("click",function(){f(e);let l=d();return b(l.logout())}),p(28,"lucide-angular",22),n(29,"span",23),c(30,"Logout"),o()()()()()(),n(31,"div",24),u(32,Br,2,1,"div",25),n(33,"div",26)(34,"div",27),u(35,Hr,6,3,"div",28),o(),n(36,"label",29)(37,"input",30),A(38,"async"),x("change",function(){f(e);let l=d();return b(l.themeService.toggleTheme())}),o(),n(39,"span",31),p(40,"lucide-angular",32)(41,"lucide-angular",33),o()(),n(42,"label",34),p(43,"lucide-angular",35),o()()()()}if(t&2){let e=d();M("sidebar--collapsed",e.isSidebarCollapsed)("text-large",e.isLargeText)("sidebar--tutorial-active",e.tutorialService.isVisible()),a(2),s("ngIf",!e.isSidebarCollapsed),a(3),s("name",e.isLargeText?"minus":"plus"),a(2),s("name",e.isSidebarCollapsed?"menu":"chevron-left"),a(),M("text-large",e.isLargeText),a(),s("ngIf",e.isRestaurantUser()),a(),s("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_reservations")||e.authService.hasPermission("take_orders"))),a(),s("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_menu")||e.authService.hasPermission("view_kitchen_display"))),a(),s("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_inventory")||e.authService.hasPermission("view_expenses"))),a(),s("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("view_reports")),a(),s("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("view_reports")),a(),s("ngIf",e.isSupplierUser()),a(),s("ngIf",e.isCustomerUser()),a(2),s("ngIf",!e.isSidebarCollapsed),a(),s("ngIf",e.isSidebarCollapsed),a(2),s("ngIf",e.isRestaurantUser()),a(),s("ngIf",e.isRestaurantUser()),a(),s("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("manage_restaurant_settings")),a(),s("ngIf",e.isCustomerUser()),a(),s("ngIf",e.isCustomerUser()),a(3),s("size",e.iconSize),a(4),s("ngIf",e.shouldShowContextSelector()),a(3),s("ngIf",!e.isSidebarCollapsed),a(2),s("checked",z(38,37,e.themeService.currentTheme$)==="dark"),a(3),s("size",16),a(),s("size",16),a(2),ue("role-icon ",e.getRoleClass(),""),s("name",e.getRoleIcon())("size",e.iconSize)}}function qr(t,i){if(t&1){let e=S();n(0,"app-header",114),A(1,"async"),A(2,"async"),A(3,"async"),x("toggleMenu",function(){f(e);let l=d();return b(l.toggleSidebar())}),o()}if(t&2){let e=d();s("title",z(1,3,e.pageTitle$)||"Platea")("icon",z(2,5,e.pageIcon$)||"layout-dashboard")("showToggle",z(3,7,e.showMobileToggle$)===!0)}}function Kr(t,i){t&1&&p(0,"app-footer")}var we=class t{constructor(i,e,r,l){this.breakpointObserver=i;this.activatedRoute=e;this.router=r;this.cdr=l;this.currentUser$=this.authService.currentUser$,this.currentRestaurant$=this.authService.currentRestaurant$,this.initHeaderObservables(),this.hideGlobalHeader$=this.router.events.pipe(N(m=>m instanceof re),Te(null),T(()=>{let m=this.activatedRoute;for(;m.firstChild;)m=m.firstChild;return m.snapshot.data.hideGlobalHeader===!0})),ge(()=>{let m=this.tutorialService.isVisible();m&&this.previousSidebarState===null?(this.previousSidebarState=this.authService.getSidebarCollapsed(),this.previousSidebarState||this.authService.setSidebarCollapsed(!0)):!m&&this.previousSidebarState!==null&&(this.authService.getSidebarCollapsed()!==this.previousSidebarState&&this.authService.setSidebarCollapsed(this.previousSidebarState),this.previousSidebarState=null)})}authService=g(y);supplierAuthService=g(Xn);loadingService=g(_e);themeService=g(fe);tutorialService=g($);sidebarCollapsedSubject=new je(!0);previousSidebarState=null;isSidebarCollapsed$=this.sidebarCollapsedSubject.asObservable();isSidebarCollapsed=!0;chatService=g(Zn);totalUnread$=this.chatService.totalUnread$.pipe($e(i=>{console.log("\u{1F514} totalUnread aggiornato:",i),this.cdr.markForCheck()}));restaurantSubscription=new J;pageTitle$;pageIcon$;isMobile$;showMobileToggle$;hideGlobalHeader$;sidebarSubscription;loading=!1;isLargeText=!1;loadingSubscription;currentUser$;currentRestaurant$;currentUser=null;currentRestaurant=null;supplierProfile=null;userSubscription=new J;supplierSubscription=new J;contextSubscription=new J;ngOnInit(){return w(this,null,function*(){this.themeService.initializeTheme(),this.loadingSubscription=this.loadingService.loading$.subscribe(i=>{this.loading=i}),this.contextSubscription=this.authService.currentContext$.subscribe(()=>{}),this.userSubscription=this.authService.currentUser$.subscribe(i=>{this.currentUser=i,i?(this.authService.loadPermissions(),this.tutorialService.checkAndStart(),this.printDebugInfo()):(this.currentRestaurant=null,this.supplierProfile=null),this.cdr.markForCheck()}),this.currentRestaurant$.subscribe(i=>{this.currentRestaurant=i,this.cdr.markForCheck()}),this.supplierSubscription=this.supplierAuthService.supplierProfile$.subscribe(i=>{this.supplierProfile=i,this.cdr.markForCheck()}),this.sidebarSubscription=this.authService.sidebarCollapsed$.subscribe(i=>{console.log("AppComponent: sidebar collapsed changed to",i),this.isSidebarCollapsed=i,this.cdr.markForCheck()}),this.restaurantSubscription.add(this.currentRestaurant$.subscribe(i=>{i&&this.chatService.loadConversations()}))})}ngOnDestroy(){this.userSubscription.unsubscribe(),this.supplierSubscription.unsubscribe(),this.loadingSubscription.unsubscribe(),this.contextSubscription.unsubscribe(),this.sidebarSubscription.unsubscribe(),this.restaurantSubscription.unsubscribe()}printDebugInfo(){console.log("\u{1F50D} DEBUG - App Component State:"),console.log("  - Current Context:",this.authService.getCurrentContext()),console.log("  - isRestaurantUser():",this.isRestaurantUser()),console.log("  - isCustomerUser():",this.isCustomerUser()),console.log("  - isSupplierUser():",this.isSupplierUser()),console.log("  - Current Staff:",this.authService.getCurrentStaff()),console.log("  - Current Restaurant:",this.currentRestaurant),console.log("  - Available Contexts:",this.authService.getAvailableContexts()),console.log("  - Can Be Staff:",this.authService.canBeStaff()),console.log("  - Is Owner:",this.authService.isOwner()),console.log("  - User Role:",this.authService.getUserRole())}initHeaderObservables(){let i=this.router.events.pipe(N(e=>e instanceof re),Te(null),T(()=>{let e=this.activatedRoute;for(;e.firstChild;)e=e.firstChild;return e.snapshot.data}),Be((e,r)=>e.title===r.title));this.pageTitle$=i.pipe(T(e=>e.title||"Platea")),this.pageIcon$=i.pipe(T(e=>e.icon||"layout-dashboard")),this.isMobile$=this.breakpointObserver.observe([Re.Handset,Re.TabletPortrait]).pipe(T(e=>e.matches)),this.showMobileToggle$=ce([this.isMobile$,this.authService.sidebarCollapsed$]).pipe(T(([e,r])=>e&&r))}isRestaurantUser(){return this.authService.isRestaurantUser()}isCustomerUser(){return this.authService.isCustomerUser()}isSupplierUser(){return this.authService.isSupplierUser()}canBeStaff(){return this.authService.canBeStaff()}getUserDisplayName(){let i=this.currentUser;if(!i)return"";let e=i.first_name||"",r=i.last_name||"";return e&&r?`${e} ${r}`:e||r||i.email||"Utente"}getUserInitial(){let i=this.currentUser;if(!i)return"";let e=i.first_name||"",r=i.last_name||"";return e&&r?`${e.charAt(0)}${r.charAt(0)}`.toUpperCase():e?e.charAt(0).toUpperCase():r?r.charAt(0).toUpperCase():i.email?.charAt(0).toUpperCase()||"U"}getRestaurantName(){return this.currentRestaurant?.name||"Ristorante"}getSupplierCompanyName(){return this.supplierProfile&&this.supplierProfile.company_name||"Fornitore"}logout(){return w(this,null,function*(){yield this.authService.logout(),this.authService.setSidebarCollapsed(!0)})}toggleSidebar(){this.tutorialService.isVisible()||this.authService.toggleSidebar()}onSidebarNavClick(i){if(window.innerWidth>768)return;i.target.closest(".nav-link")&&this.authService.setSidebarCollapsed(!0)}onDocumentClick(i){let e=i.target;if(window.innerWidth<=768){if(e.closest(".mobile-sidebar-toggle")||e.closest(".mobile-toggle"))return;this.isSidebarCollapsed||!e.closest(".sidebar")&&!e.closest(".sidebar-toggle")&&this.authService.setSidebarCollapsed(!0)}}getRoleClass(){return`role-${this.authService.getStaffRole()||"guest"}`}getRoleLabel(){switch(this.authService.getStaffRole()||"guest"){case"owner":return"admin_panel_settings";case"manager":return"supervisor_account";case"chef":return"restaurant";case"waiter":return"room_service";case"kitchen_staff":return"kitchen";default:return"person"}}getRoleDisplayName(){let i=this.authService.getStaffRole()||"guest";return{owner:"Proprietario",manager:"Responsabile",chef:"Chef",waiter:"Cameriere",kitchen_staff:"Staff Cucina",guest:"Ospite"}[i]||i}isAuthenticated(){return this.authService.isAuthenticated()}getSettingsRoute(){return this.isRestaurantUser()&&this.authService.hasPermission("manage_restaurant_settings")?"/restaurant/settings":this.isSupplierUser()?"/supplier/settings":"/customer"}navigateBasedOnRole(){this.isRestaurantUser()?this.router.navigate(["/restaurant/dashboard"]):this.isSupplierUser()?this.router.navigate(["/supplier/dashboard"]):this.isCustomerUser()?this.router.navigate(["/customer"]):this.router.navigate(["/login"])}getAvailableContexts(){return this.authService.getAvailableContexts()}shouldShowContextSelector(){return this.authService.getAvailableContexts().length>1}setTheme(i){this.themeService.setTheme(i)}toggleSize(){this.tutorialService.isVisible()||(this.isLargeText=!this.isLargeText)}getRoleIcon(){return this.isRestaurantUser()?"store":this.isSupplierUser()?"truck":this.isCustomerUser()?"user":"circle"}get iconSize(){let i=this.isSidebarCollapsed?32:24;return this.isLargeText?Math.round(i*1.5):i}isAuthenticated$=this.authService.currentUser$.pipe(T(i=>!!i));static \u0275fac=function(e){return new(e||t)(te(qn),te(ot),te(P),te(it))};static \u0275cmp=R({type:t,selectors:[["app-root"]],hostBindings:function(e,r){e&1&&x("click",function(m){return r.onDocumentClick(m)},!1,Ze)},decls:10,vars:10,consts:[[1,"app-container"],["class","sidebar",3,"sidebar--collapsed","text-large","sidebar--tutorial-active","click",4,"ngIf"],[3,"isLoading"],[1,"main-content"],[3,"title","icon","showToggle","toggleMenu",4,"ngIf"],[4,"ngIf"],[1,"sidebar",3,"click"],[1,"sidebar-header"],["class","sidebar-brand",4,"ngIf"],[1,"flex","gap-sm","flex-wrap","p-sm1"],[1,"icon-button","bottonetesto","p-mini",3,"click"],[1,"nav-icon",3,"name"],["aria-label","Apri/Chiudi sidebar",1,"icon-button","aprichiudisidebar",3,"click"],[1,"sidebar-nav"],["class","nav-section",4,"ngIf"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["class","section-divider elegant",4,"ngIf"],[1,"nav-menu"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-label","Logout",1,"icon-button","largo",3,"click"],["name","log-out",1,"nav-icon",3,"size"],[1,"nav-text"],[1,"sidebar_footer"],["class","context-selector-container",4,"ngIf"],[1,"sidebar-user"],[1,"user-main-info"],["class","user-details",4,"ngIf"],[1,"theme-switch"],["type","checkbox",3,"change","checked"],[1,"theme-switch-slider"],["name","sun",1,"theme-icon","sun-icon",3,"size"],["name","moon",1,"theme-icon","moon-icon",3,"size"],[1,"role-icon"],[3,"name","size"],[1,"sidebar-brand"],[1,"logo"],["src","logoristoapp.png",1,"logopiccolo"],[1,"gradient-text","platea"],[1,"nav-section-title"],[1,"section-divider","elegant"],["routerLink","/restaurant/dashboard","routerLinkActive","nav-link--active","data-tutorial","dashboard","data-label","Dashboard",1,"nav-link"],["name","layout-dashboard",1,"nav-icon",3,"size"],["routerLink","/restaurant/floor-plan","routerLinkActive","nav-link--active","data-tutorial","floor-plan","data-label","Layout Sala",1,"nav-link"],["name","table-2",1,"nav-icon",3,"size"],["routerLink","/restaurant/marketing-management","routerLinkActive","nav-link--active","data-label","Gestione Marketing",1,"nav-link"],["name","megaphone",1,"nav-icon",3,"size"],["routerLink","/restaurant/staff-management","routerLinkActive","nav-link--active","data-tutorial","staff","data-label","Staff",1,"nav-link"],["name","users",1,"nav-icon",3,"size"],["routerLink","/restaurant/table-map","routerLinkActive","nav-link--active","data-tutorial","table-map","data-label","Ordini",1,"nav-link"],["name","utensils-crossed",1,"nav-icon",3,"size"],["routerLink","/restaurant/calendar-view","routerLinkActive","nav-link--active","data-tutorial","calendar","data-label","Calendario",1,"nav-link"],["name","calendar",1,"nav-icon",3,"size"],["routerLink","/restaurant/reservation-manager","routerLinkActive","nav-link--active","data-tutorial","reservation-list","data-label","Lista Prenotazioni",1,"nav-link"],["name","notebook-text",1,"nav-icon",3,"size"],["routerLink","/restaurant/menu","routerLinkActive","nav-link--active","data-tutorial","menu","data-label","Men\xF9 & Piatti",1,"nav-link"],["name","utensils",1,"nav-icon",3,"size"],["routerLink","/restaurant/recipe","routerLinkActive","nav-link--active","data-tutorial","recipe","data-label","Ricette",1,"nav-link"],["name","scroll-text",1,"nav-icon",3,"size"],["routerLink","/food-cost","routerLinkActive","nav-link--active","data-label","Food Cost","data-tutorial","food-cost",1,"nav-link"],["name","piggy-bank",1,"nav-icon",3,"size"],["routerLink","/restaurant/kitchen-display","routerLinkActive","nav-link--active","data-tutorial","kitchen-display","data-label","Pannello Cucina",1,"nav-link"],["name","chef-hat",1,"nav-icon",3,"size"],["routerLink","/restaurant/inventory","routerLinkActive","nav-link--active","data-tutorial","inventory","data-label","Inventario",1,"nav-link"],["name","package",1,"nav-icon",3,"size"],["routerLink","/restaurant/alcoholic-beverages","routerLinkActive","nav-link--active","data-tutorial","beverages","data-label","Bevande",1,"nav-link"],["name","glass-water",1,"nav-icon",3,"size"],["routerLink","/restaurant/suppliers","routerLinkActive","nav-link--active","data-label","Fornitori",1,"nav-link"],["name","truck",1,"nav-icon",3,"size"],["routerLink","/restaurant/expense-management","routerLinkActive","nav-link--active","data-label","Gestione Spese",1,"nav-link"],["name","credit-card",1,"nav-icon",3,"size"],["routerLink","/restaurant/financial-report","routerLinkActive","nav-link--active","data-label","Report Finanziario",1,"nav-link"],["name","bar-chart-3",1,"nav-icon",3,"size"],["routerLink","/restaurant/web-site","routerLinkActive","nav-link--active","data-label","Crea il tuo sito web",1,"nav-link"],["name","globe",1,"nav-icon",3,"size"],["routerLink","/restaurant/contabile-fiscale","routerLinkActive","nav-link--active","data-label","Gestione Fiscale",1,"nav-link"],["name","landmark",1,"nav-icon",3,"size"],["routerLink","/restaurant/marketing","routerLinkActive","nav-link--active","data-label","Promuovi il ristorante",1,"nav-link"],["name","trending-up",1,"nav-icon",3,"size"],["routerLink","/supplier/dashboard","routerLinkActive","nav-link--active","data-label","Dashboard",1,"nav-link"],["routerLink","/supplier/products","routerLinkActive","nav-link--active","data-label","Catalogo Prodotti",1,"nav-link"],["name","package-search",1,"nav-icon",3,"size"],[1,"nav-item",2,"display","none"],["routerLink","/customer/search","routerLinkActive","nav-link--active","data-label","Cerca Ristoranti",1,"nav-link"],["name","search",1,"nav-icon",3,"size"],["routerLink","/customer/menu-display","routerLinkActive","nav-link--active","data-label","Home",1,"nav-link"],["name","home",1,"nav-icon",3,"size"],["routerLink","/customer/restaurant/restaurant-list","routerLinkActive","nav-link--active","data-tutorial","discover","data-label","Lista Ristoranti",1,"nav-link"],["routerLink","/customer/reservations","routerLinkActive","nav-link--active","data-label","Le mie Prenotazioni",1,"nav-link"],["name","calendar-check",1,"nav-icon",3,"size"],["routerLink","/customer/user-promotions","routerLinkActive","nav-link--active","data-label","Le mie Promozioni",1,"nav-link"],["name","tag",1,"nav-icon",3,"size"],["routerLink","/customer/orders","routerLinkActive","nav-link--active","data-tutorial","order","data-label","I miei Ordini",1,"nav-link"],["name","shopping-bag",1,"nav-icon",3,"size"],["routerLink","/customer/reviews","routerLinkActive","nav-link--active","data-label","Le mie Recensioni",1,"nav-link"],["name","star",1,"nav-icon",3,"size"],["routerLink","/restaurant/chat-window","routerLinkActive","nav-link--active","data-tutorial","chat-window",1,"nav-link"],["name","messages-square",1,"nav-icon",3,"size"],["class","chip warning",3,"hidden",4,"ngIf"],[1,"chip","warning"],["routerLink","/restaurant/profile","routerLinkActive","nav-link--active","data-label","Profilo",1,"nav-link"],["name","user",1,"nav-icon",3,"size"],["routerLink","/restaurant/settings","routerLinkActive","nav-link--active","data-tutorial","restaurant-settings","data-label","Impostazioni",1,"nav-link"],["name","settings",1,"nav-icon",3,"size"],["routerLink","/customer/profile-user","routerLinkActive","nav-link--active","data-tutorial","profile","data-label","Account",1,"nav-link"],["routerLink","/customer/settings","routerLinkActive","nav-link--active","data-label","Impostazioni Cliente",1,"nav-link"],[1,"context-selector-container"],[3,"largeText"],[1,"user-details"],[1,"user-info"],[1,"user-name"],["class","restaurant-info",4,"ngIf"],[1,"restaurant-info"],[3,"toggleMenu","title","icon","showToggle"]],template:function(e,r){e&1&&(n(0,"div",0),u(1,Wr,44,39,"aside",1),p(2,"app-loader",2),n(3,"main",3),u(4,qr,4,9,"app-header",4),A(5,"async"),p(6,"router-outlet"),u(7,Kr,1,0,"app-footer",5),o(),p(8,"app-tutorial-modal")(9,"app-tutorial-tooltip"),o()),e&2&&(a(),s("ngIf",r.isAuthenticated()),a(),s("isLoading",r.loading),a(),M("main-content--expanded",r.isSidebarCollapsed&&r.isAuthenticated())("main-content--full",!r.isAuthenticated()),a(),s("ngIf",r.isAuthenticated()&&z(5,8,r.hideGlobalHeader$)===!1),a(3),s("ngIf",!r.loading))},dependencies:[L,Z,ve,st,ut,lt,ct,Kn,Ce,B,X,Wn,ke,Pe,ye],styles:['[_ngcontent-%COMP%]:root{--transition-timing: cubic-bezier(.34, 1.56, .64, 1);--transition-duration: .4s;--transition-duration-slow: .65s}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}.app-container[_ngcontent-%COMP%]{display:flex;min-height:100dvh;background:var(--background);color:var(--text-color)}.sidebar[_ngcontent-%COMP%]{position:fixed;inset:0 auto 0 0;width:var(--sidebar-width);height:100dvh;backdrop-filter:blur(25px);background:linear-gradient(110deg,var(--background),var(--shadow-1));display:flex;flex-direction:column;z-index:1100;transition:transform var(--transition-duration) var(--transition-timing),width var(--transition-duration-slow) var(--transition-timing),box-shadow var(--transition-duration) ease-out,opacity .35s ease;overflow:hidden;box-shadow:0 5px 20px var(--smoke-1);will-change:transform,width,opacity,box-shadow}.sidebar--collapsed[_ngcontent-%COMP%]{width:var(--sidebar--collapsed-width)}.sidebar_footer[_ngcontent-%COMP%]{padding:var(--gap-sm);box-shadow:0 -2px 15px var(--shadow-1)}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap-md);transition:padding var(--transition-duration) var(--transition-timing)}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:var(--gap-sm);justify-content:center}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);font-weight:800;color:var(--primary);padding:var(--gap-sm);border-radius:14px}.platea[_ngcontent-%COMP%]{font-size:var(--fs-md);display:flex}.nav-section-title[_ngcontent-%COMP%]{margin-bottom:var(--gap-sm);color:var(--secondary);font-weight:800;font-size:calc(var(--fs-sm) * 1.2)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%]{font-size:var(--fs-md);line-height:1.1}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:var(--gap-sm);display:flex;flex-direction:column;gap:var(--gap-lg);transition:padding var(--transition-duration) var(--transition-timing)}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{padding:var(--gap-sm);gap:0}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{align-items:center;display:flex;padding:var(--gap-sm);position:relative}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{align-items:center;flex-direction:column;display:flex;gap:0}.sidebar--collapsed[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--gap-sm) / 1.8)}.largo[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:var(--gap-sm);display:flex;gap:var(--gap-sm);border-radius:14px;font-weight:500}.largo[_ngcontent-%COMP%]:hover{transform:translate(4px)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:2.2!important}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-md);padding:var(--gap-sm);color:var(--text-color);border-radius:14px;text-decoration:none;transition:all .3s ease;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background:var(--smoke-1);transform:translate(6px) scale(1.02);transition:all .25s ease}.nav-link--active[_ngcontent-%COMP%]{background:var(--shadow-1);color:var(--tertiary);font-weight:800;box-shadow:0 3px 10px var(--shadow-1)}.nav-link--active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:80%;background:var(--gradiente);border-radius:0 4px 4px 0}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link--active[_ngcontent-%COMP%]:before{display:none}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .context-selector-container[_ngcontent-%COMP%]{opacity:0;width:0;overflow:hidden;pointer-events:none;display:none}.nav-text[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600}.nav-text.text-large[_ngcontent-%COMP%]{font-size:var(--fs-md)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar-nav.text-large[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md);line-height:1.1}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{gap:var(--gap-sm)}.sidebar--collapsed[_ngcontent-%COMP%]   .icon-button.largo[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;padding:calc(var(--gap-sm) / 2);gap:0;height:auto;position:relative}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar_footer[_ngcontent-%COMP%]{padding:0;align-items:center;display:flex;flex-direction:column}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{padding:var(--gap-sm);gap:var(--gap-sm);display:flex;flex-direction:column}.sidebar-user[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap-sm);border-top:2px solid var(--shadow-1);padding:var(--gap-sm) 0 0 0}.user-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);flex:1}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm)}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:var(--fs-sm);line-height:1.2}.role-badge[_ngcontent-%COMP%]{padding:var(--gap-md);border-radius:12px;font-size:calc(var(--fs-sm) / 2);font-weight:600;background:var(--smoke-1);border:1px solid var(--smoke-1);line-height:1}.sidebar--collapsed[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:none}.restaurant-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.main-content[_ngcontent-%COMP%]{margin-left:var(--sidebar-width);flex:1;min-height:100dvh;transition:margin-left var(--transition-duration-slow) var(--transition-timing),filter .5s ease;overflow-y:auto;overflow-x:hidden;background:linear-gradient(135deg,var(--background),var(--background2));position:relative;z-index:1}.main-content[_ngcontent-%COMP%]:has(.modal-overlay){z-index:10001}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:6px;left:6px;z-index:1200;width:48px;height:48px;border-radius:16px;background:transparent;border:1px solid var(--shadow-1);box-shadow:0 4px 15px var(--shadow-1);backdrop-filter:blur(10px);color:var(--text-color);align-items:center;justify-content:center}.mobile-sidebar-toggle.mobile-hidden[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.sidebar--collapsed[_ngcontent-%COMP%] ~ .main-content[_ngcontent-%COMP%], .main-content--expanded[_ngcontent-%COMP%]{margin-left:0!important}.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:100%;z-index:1000}.largo[_ngcontent-%COMP%]{padding:var(--gap-lg)}.largo[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg)}.sidebar-brand[_ngcontent-%COMP%]{font-size:var(--fs-lg);padding:var(--gap-md)}.platea[_ngcontent-%COMP%]{font-size:var(--fs-lg)}.sidebar-header[_ngcontent-%COMP%]{padding:var(--gap-md);margin-bottom:var(--gap-lg);box-shadow:0 1px 8px var(--shadow-1)}.nav-section-title[_ngcontent-%COMP%]{margin-left:var(--gap-lg)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%]{font-size:var(--fs-lg);line-height:1.1}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{gap:var(--gap-md)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar-nav.text-large[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg);line-height:1.1}.sidebar-user[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed){transform:translate(0)}.main-content[_ngcontent-%COMP%]{margin-left:0!important}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:flex}.mobile-sidebar-toggle[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed) ~ .main-content[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:#00000080;z-index:999;pointer-events:auto}.role-icon[_ngcontent-%COMP%]{width:calc(var(--fs-lg) * 2)!important;height:calc(var(--fs-lg) * 2)!important;justify-content:center;align-items:center;display:flex}.role-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg)!important}}.theme-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:52px;height:28px;cursor:pointer;border-radius:34px;background-color:#e0e0e0;transition:background-color .3s ease;box-shadow:inset 0 1px 3px #0000001a}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0;position:absolute}.theme-switch-slider[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;width:24px;height:24px;border-radius:50%;background-color:var(--background2);transition:transform .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003}.theme-icon[_ngcontent-%COMP%]{position:absolute;transition:opacity .2s ease}.sun-icon[_ngcontent-%COMP%]{opacity:1;color:#f39c12}.moon-icon[_ngcontent-%COMP%]{opacity:0;color:#f1c40f}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]{transform:translate(24px)}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]   .sun-icon[_ngcontent-%COMP%]{opacity:0}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]   .moon-icon[_ngcontent-%COMP%]{opacity:1}.theme-switch[_ngcontent-%COMP%]:has(input:checked){background-color:var(--shadow-2)}.theme-switch.dark-bg[_ngcontent-%COMP%]{background-color:#2c3e50}.sidebar--collapsed[_ngcontent-%COMP%] ~ .main-content[_ngcontent-%COMP%], .main-content--expanded[_ngcontent-%COMP%]{margin-left:var(--sidebar--collapsed-width);transition:margin-left var(--transition-duration-slow) var(--transition-timing),filter var(--transition-duration) var(--transition-timing)}.main-content--full[_ngcontent-%COMP%]{margin-left:0!important}.role-icon[_ngcontent-%COMP%]{font-size:var(--fs-sm);padding:var(--gap-sm);border-radius:50%;background:var(--smoke-1);transition:all .3s ease}.role-owner[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#ff6b35;background:color-mix(in srgb,#ff6b35 15%,transparent)}.role-manager[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#4a90e2;background:color-mix(in srgb,#4a90e2 15%,transparent)}.role-chef[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#e74c3c;background:color-mix(in srgb,#e74c3c 15%,transparent)}.role-waiter[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#27ae60;background:color-mix(in srgb,#27ae60 15%,transparent)}.role-kitchen_staff[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#9b59b6;background:color-mix(in srgb,#9b59b6 15%,transparent)}.role-guest[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:var(--text-muted);background:var(--smoke-1)}.sidebar--collapsed[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .bottonetesto[_ngcontent-%COMP%]{display:none}.sidebar--collapsed[_ngcontent-%COMP%]   .section-divider[_ngcontent-%COMP%]{display:block}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed)   .section-divider[_ngcontent-%COMP%]{display:none}.section-divider.elegant[_ngcontent-%COMP%]{width:100%;height:3px;background:linear-gradient(90deg,transparent,var(--secondary),transparent);margin:0;border-radius:50%;transition:all .3s ease}.sidebar--tutorial-active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .sidebar--tutorial-active[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%], .sidebar--tutorial-active[_ngcontent-%COMP%]   .context-selector-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}']})};"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>{console.log("Service worker registrato")}).catch(t=>{console.error("Errore registrazione SW:",t)});at(we,ea).catch(t=>console.error(t));
