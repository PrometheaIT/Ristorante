import{a as K}from"./chunk-NFORIBAQ.js";import{a as q,b as R}from"./chunk-IBXDNXCO.js";import"./chunk-NY2YDINH.js";import{Ab as Q,zb as J}from"./chunk-N3VPFYDE.js";import{a as X}from"./chunk-H4E5DJY3.js";import{A as G}from"./chunk-45CSFDAZ.js";import{d as Y}from"./chunk-TB7INTC7.js";import{c as W,e as Z}from"./chunk-Q3EITIAW.js";import"./chunk-RC3HHTXM.js";import{k as P,l as T,p as B,t as H,v as M}from"./chunk-MPTEMNWF.js";import{Hb as A,Ia as b,Ib as s,Jb as I,Kb as f,La as r,Lb as k,Va as S,Vb as C,Wb as N,Xb as E,Zb as U,_a as m,ca as w,gb as l,hb as j,ib as h,la as _,ma as p,qb as n,rb as a,s as V,sa as F,sb as x,t as z,tb as L,ub as $,vb as g,yb as u,zb as d}from"./chunk-5BU4UD4M.js";import{g as y}from"./chunk-RA2WU32H.js";function re(t,i){if(t&1){let e=g();n(0,"img",9),u("error",function(c){_(e);let v=d();return p(v.onImageError(c))})("click",function(){_(e);let c=d();return p(c.onImageClick(c.previousIndex))}),a()}if(t&2){let e=d();l("src",e.images[e.previousIndex],b)("alt","Immagine "+(e.previousIndex+1))}}function oe(t,i){if(t&1){let e=g();n(0,"img",9),u("error",function(c){_(e);let v=d();return p(v.onImageError(c))})("click",function(){_(e);let c=d();return p(c.onImageClick(c.currentIndex))}),a()}if(t&2){let e=d();l("src",e.images[e.currentIndex],b)("alt","Immagine "+(e.currentIndex+1))}}function se(t,i){if(t&1){let e=g();n(0,"button",10),u("click",function(){_(e);let c=d();return p(c.prev())}),n(1,"span",11),s(2,"chevron_left"),a()()}}function le(t,i){if(t&1){let e=g();n(0,"button",12),u("click",function(){_(e);let c=d();return p(c.next())}),n(1,"span",11),s(2,"chevron_right"),a()()}}function ce(t,i){if(t&1){let e=g();n(0,"span",15),u("click",function(){let c=_(e).index,v=d(2);return p(v.goTo(c))}),a()}if(t&2){let e=i.index,o=d(2);h("active",e===o.currentIndex)}}function de(t,i){if(t&1&&(n(0,"div",13),m(1,ce,1,2,"span",14),a()),t&2){let e=d();r(),l("ngForOf",e.images)}}function me(t,i){t&1&&(n(0,"div",16)(1,"span",11),s(2,"photo_library"),a(),n(3,"p"),s(4,"Nessuna immagine disponibile"),a()())}var D=class t{images=[];autoPlay=!0;interval=3e3;transitionDuration=600;imageClicked=new F;currentIndex=0;previousIndex=0;isTransitioning=!1;direction="next";timer;ngOnInit(){this.autoPlay&&this.images.length>0&&this.startAutoPlay()}ngOnDestroy(){this.stopAutoPlay()}startAutoPlay(){this.timer&&clearInterval(this.timer),this.images.length>0&&this.autoPlay&&(this.timer=setInterval(()=>{this.next()},this.interval))}stopAutoPlay(){this.timer&&(clearInterval(this.timer),this.timer=null)}next(){this.images.length===0||this.isTransitioning||(this.direction="next",this.previousIndex=this.currentIndex,this.currentIndex=(this.currentIndex+1)%this.images.length,this.startTransition())}prev(){this.images.length===0||this.isTransitioning||(this.direction="prev",this.previousIndex=this.currentIndex,this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.startTransition())}goTo(i){this.images.length===0||this.isTransitioning||i===this.currentIndex||(this.direction=i>this.currentIndex?"next":"prev",this.previousIndex=this.currentIndex,this.currentIndex=i,this.startTransition())}startTransition(){this.isTransitioning=!0,setTimeout(()=>{this.isTransitioning=!1},this.transitionDuration)}onImageError(i){let e=i.target;console.error("Errore caricamento immagine:",e.src),e.style.display="none";let o=this.images.indexOf(e.src);if(o>-1&&this.images.splice(o,1),this.images.length===0){this.stopAutoPlay();return}this.currentIndex>=this.images.length&&(this.currentIndex=0)}onImageClick(i){console.log("Cliccata immagine n\xB0",i),this.imageClicked.emit(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-image-slideshow"]],inputs:{images:"images",autoPlay:"autoPlay",interval:"interval",transitionDuration:"transitionDuration"},outputs:{imageClicked:"imageClicked"},decls:10,vars:18,consts:[[1,"slideshow-container",3,"mouseenter","mouseleave"],[1,"slides-wrapper"],[1,"slide","previous"],["class","slide-image",3,"src","alt","error","click",4,"ngIf"],[1,"slide","current"],["class","nav-button prev",3,"click",4,"ngIf"],["class","nav-button next",3,"click",4,"ngIf"],["class","indicators",4,"ngIf"],["class","slideshow-placeholder",4,"ngIf"],[1,"slide-image",3,"error","click","src","alt"],[1,"nav-button","prev",3,"click"],[1,"material-icons"],[1,"nav-button","next",3,"click"],[1,"indicators"],["class","indicator",3,"active","click",4,"ngFor","ngForOf"],[1,"indicator",3,"click"],[1,"slideshow-placeholder"]],template:function(e,o){e&1&&(n(0,"div",0),u("mouseenter",function(){return o.stopAutoPlay()})("mouseleave",function(){return o.startAutoPlay()}),n(1,"div",1)(2,"div",2),m(3,re,1,2,"img",3),a(),n(4,"div",4),m(5,oe,1,2,"img",3),a()(),m(6,se,3,0,"button",5)(7,le,3,0,"button",6)(8,de,2,1,"div",7),a(),m(9,me,5,0,"div",8)),e&2&&(r(2),h("exiting",o.isTransitioning)("slide-out-next",o.direction==="next"&&o.isTransitioning)("slide-out-prev",o.direction==="prev"&&o.isTransitioning),r(),l("ngIf",o.images[o.previousIndex]),r(),h("entering",o.isTransitioning)("slide-in-next",o.direction==="next"&&o.isTransitioning)("slide-in-prev",o.direction==="prev"&&o.isTransitioning),r(),l("ngIf",o.images[o.currentIndex]),r(),l("ngIf",o.images.length>1),r(),l("ngIf",o.images.length>1),r(),l("ngIf",o.images.length>1),r(),l("ngIf",o.images.length===0))},dependencies:[M,P,T],styles:[".slideshow-container[_ngcontent-%COMP%]{position:relative;width:100%;height:clamp(250px,50vh,400px);border-radius:clamp(12px,2vw,20px);overflow:hidden;background:var(--smoke-1);box-shadow:0 4px 20px #00000014;margin:0 auto;cursor:pointer}.slides-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.slide[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;transition:transform .6s cubic-bezier(.4,0,.2,1),opacity .6s cubic-bezier(.4,0,.2,1)}.slide.current[_ngcontent-%COMP%]{z-index:2;opacity:1;transform:translate(0)}.slide.previous[_ngcontent-%COMP%]{z-index:1;opacity:0;transform:translate(0)}.slide.previous.slide-out-next[_ngcontent-%COMP%]{opacity:0;transform:translate(-100%)}.slide.previous.slide-out-prev[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.slide.current.slide-in-next[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromRight .6s cubic-bezier(.4,0,.2,1) forwards}.slide.current.slide-in-prev[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .6s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.slide-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;object-position:center;border-radius:clamp(8px,1.5vw,12px)}.fade-transition[_ngcontent-%COMP%]   .slide.previous[_ngcontent-%COMP%]{opacity:0}.fade-transition[_ngcontent-%COMP%]   .slide.current[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.nav-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#0009;backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);color:#fff;width:clamp(40px,6vw,48px);height:clamp(40px,6vw,48px);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:10;font-size:clamp(18px,3vw,24px);box-shadow:0 4px 12px #0003}.nav-button[_ngcontent-%COMP%]:hover, .nav-button[_ngcontent-%COMP%]:active{background:var(--primary);transform:translateY(-50%) scale(1.1);box-shadow:0 6px 20px rgba(var(--primary-rgb, 0, 0, 0),.3)}.nav-button.prev[_ngcontent-%COMP%]{left:clamp(8px,2vw,16px)}.nav-button.next[_ngcontent-%COMP%]{right:clamp(8px,2vw,16px)}.indicators[_ngcontent-%COMP%]{position:absolute;bottom:clamp(12px,3vh,20px);left:50%;transform:translate(-50%);display:flex;gap:clamp(6px,1.5vw,10px);z-index:10;padding:clamp(6px,1.5vw,10px);background:#0006;backdrop-filter:blur(8px);border-radius:100px}.indicator[_ngcontent-%COMP%]{width:clamp(8px,2vw,12px);height:clamp(8px,2vw,12px);border-radius:50%;background:#fff9;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid rgba(255,255,255,.2)}.indicator.active[_ngcontent-%COMP%]{background:var(--primary);transform:scale(1.3);box-shadow:0 0 8px rgba(var(--primary-rgb, 0, 0, 0),.4)}.slideshow-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;color:var(--smoke-3);background:linear-gradient(135deg,var(--smoke-1) 0%,var(--smoke-2) 100%);padding:clamp(20px,5vw,40px);text-align:center}.slideshow-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:clamp(48px,10vw,64px);margin-bottom:clamp(12px,3vw,20px);opacity:.6}@media (hover: none) and (pointer: coarse){.slideshow-container[_ngcontent-%COMP%]{height:clamp(200px,40vh,350px)}.nav-button[_ngcontent-%COMP%]{background:#000000b3;width:clamp(44px,8vw,52px);height:clamp(44px,8vw,52px)}.indicators[_ngcontent-%COMP%]{padding:clamp(8px,2vw,12px)}}"]})};function _e(t,i){if(t&1){let e=g();n(0,"button",10),u("click",function(){_(e);let c=d();return p(c.authService.toggleSidebar())}),x(1,"lucide-icon",11),a()}}function pe(t,i){if(t&1){let e=g();n(0,"img",12),u("error",function(c){_(e);let v=d();return p(v.onLogoError(c))}),a()}if(t&2){let e=d();l("src",e.restaurant==null?null:e.restaurant.logo_url,b)("alt",e.restaurant==null?null:e.restaurant.name)}}function ue(t,i){t&1&&(n(0,"span",13),s(1,"restaurant"),a())}function ge(t,i){if(t&1&&(n(0,"span",21),s(1),a()),t&2){let e=d(2);r(),k(" ",e.followerCount," ",(e.followerCount===1,"follower")," ")}}function ve(t,i){t&1&&(n(0,"div",22)(1,"span",23),s(2,"restaurant"),a(),n(3,"h2",24),s(4,"Ristorante non trovato"),a(),n(5,"p",25),s(6,"Il ristorante che stai cercando non esiste o non \xE8 disponibile."),a(),n(7,"button",26)(8,"span",13),s(9,"arrow_back"),a(),s(10," Torna alla ricerca "),a()())}function xe(t,i){if(t&1){let e=g();n(0,"app-image-slideshow",47),u("imageClicked",function(c){_(e);let v=d(3);return p(v.openLightbox(c))}),a()}if(t&2){let e=d(3);l("images",e.restaurantImages)}}function fe(t,i){if(t&1){let e=g();n(0,"div",48),u("click",function(){_(e);let c=d(3);return p(c.closeLightbox())}),n(1,"div",49),u("click",function(c){return _(e),p(c.stopPropagation())}),n(2,"button",50),u("click",function(c){_(e);let v=d(3);return p(v.prevImage(c))}),s(3," \u2190 "),a(),x(4,"img",51),n(5,"button",52),u("click",function(c){_(e);let v=d(3);return p(v.nextImage(c))}),s(6," \u2192 "),a(),n(7,"button",53),u("click",function(){_(e);let c=d(3);return p(c.closeLightbox())}),s(8,"\xD7"),a(),n(9,"div",54),s(10),a()()()}if(t&2){let e=d(3);r(4),l("src",e.restaurantImages[e.lightboxIndex],b),r(6),k(" ",e.lightboxIndex+1," / ",e.restaurantImages.length," ")}}function he(t,i){t&1&&(n(0,"div",55)(1,"div",56)(2,"span",23),s(3,"photo_library"),a(),n(4,"p",25),s(5,"Nessuna immagine disponibile per questo ristorante"),a()()())}function be(t,i){if(t&1&&(n(0,"div",38)(1,"h3",39),s(2,"Descrizione"),a(),n(3,"p"),s(4),a()()),t&2){let e=d(3);r(4),I(e.restaurant.description)}}function we(t,i){if(t&1&&(n(0,"div",57)(1,"span",13),s(2,"place"),a(),n(3,"span"),s(4),a()()),t&2){let e=d(3);r(4),I(e.restaurant.address)}}function Ie(t,i){if(t&1&&(n(0,"div",57)(1,"span",13),s(2,"phone"),a(),n(3,"a",58),s(4),a()()),t&2){let e=d(3);r(3),l("href","tel:"+e.restaurant.phone,b),r(),I(e.restaurant.phone)}}function ye(t,i){if(t&1&&(n(0,"div",57),x(1,"lucide-angular",59),n(2,"a",58),s(3),a()()),t&2){let e=d(3);r(),l("size",20),r(),l("href","mailto:"+e.restaurant.email,b),r(),I(e.restaurant.email)}}function Ce(t,i){t&1&&(n(0,"div",57)(1,"span",60),s(2,"delivery_dining"),a(),n(3,"div")(4,"strong"),s(5,"Consegna a domicilio"),a(),n(6,"p",25),s(7,"Ordina online con consegna a casa"),a()()())}function Se(t,i){t&1&&(n(0,"div",57)(1,"span",60),s(2,"takeout_dining"),a(),n(3,"div")(4,"strong"),s(5,"Asporto"),a(),n(6,"p",25),s(7,"Ritira il tuo ordine in ristorante"),a()()())}function ke(t,i){t&1&&(n(0,"div",57)(1,"span",60),s(2,"event_available"),a(),n(3,"div")(4,"strong"),s(5,"Prenotazione tavolo"),a(),n(6,"p",25),s(7,"Prenota il tuo tavolo online"),a()()())}function Ee(t,i){if(t&1&&(n(0,"span",69),s(1),a()),t&2){let e=d().$implicit,o=d(6);r(),f(" ",o.getDayName(e)," ")}}function Pe(t,i){if(t&1&&(L(0),m(1,Ee,2,1,"span",68),$()),t&2){let e=i.$implicit,o=d(6);r(),l("ngIf",o.getDayName(e))}}function Te(t,i){if(t&1&&(n(0,"div",66),m(1,Pe,2,1,"ng-container",67),a()),t&2){let e=d().$implicit;r(),l("ngForOf",e.days_of_week)}}function Me(t,i){if(t&1&&(n(0,"div",62)(1,"div",63)(2,"h3",39),s(3),a(),n(4,"span",64),s(5),a()(),m(6,Te,2,1,"div",65),a()),t&2){let e=i.$implicit,o=d(4);r(3),I(e.name),r(2),k(" ",o.formatTime(e.start_time)," - ",o.formatTime(e.end_time)," "),r(),l("ngIf",e.days_of_week&&e.days_of_week.length>0)}}function De(t,i){if(t&1&&(n(0,"div",32)(1,"div",33)(2,"span",13),s(3,"schedule"),a(),n(4,"h2",35),s(5,"Orari di apertura"),a()(),n(6,"div",36),m(7,Me,7,4,"div",61),a()()),t&2){let e=d(3);r(7),l("ngForOf",e.shifts)}}function Oe(t,i){t&1&&x(0,"lucide-icon",84),t&2&&l("size",14)}function Ve(t,i){if(t&1){let e=g();n(0,"button",80),u("click",function(){let c=_(e).$implicit,v=d(5);return p(v.selectMenu(c.id))}),m(1,Oe,1,1,"lucide-icon",83),s(2),a()}if(t&2){let e=i.$implicit,o=d(5);h("active",o.selectedMenuId===e.id),r(),l("ngIf",e.is_default),r(),f(" ",e.name," ")}}function Re(t,i){if(t&1){let e=g();n(0,"div",38)(1,"span",79),s(2,"Seleziona menu"),a(),n(3,"div",66)(4,"button",80),u("click",function(){_(e);let c=d(4);return p(c.selectMenu(null))}),x(5,"lucide-icon",81),s(6," Tutti "),a(),m(7,Ve,3,4,"button",82),a()()}if(t&2){let e=d(4);r(4),h("active",e.selectedMenuId===null),r(),l("size",14),r(2),l("ngForOf",e.menus)}}function ze(t,i){if(t&1){let e=g();n(0,"button",80),u("click",function(){let c=_(e).$implicit,v=d(5);return p(v.selectCategory(c.id))}),s(1),a()}if(t&2){let e=i.$implicit,o=d(5);h("active",o.selectedCategory===e.id),r(),f(" ",e.name," ")}}function Fe(t,i){if(t&1){let e=g();n(0,"div",38)(1,"span",79),s(2,"Categoria"),a(),n(3,"div",66)(4,"button",80),u("click",function(){_(e);let c=d(4);return p(c.selectCategory(null))}),s(5," Tutto "),a(),m(6,ze,2,3,"button",82),a()()}if(t&2){let e=d(4);r(4),h("active",e.selectedCategory===null),r(2),l("ngForOf",e.categories)}}function je(t,i){if(t&1){let e=g();n(0,"img",105),u("error",function(c){_(e);let v=d().$implicit,O=d(5);return p(O.onDishImageError(c,v))}),a()}if(t&2){let e=d().$implicit;l("src",e.image_url,b)("alt",e.name)}}function Le(t,i){t&1&&(n(0,"div",106),x(1,"lucide-icon",107),a()),t&2&&(r(),l("size",28))}function $e(t,i){if(t&1&&(n(0,"span",108),s(1),a()),t&2){let e=d().$implicit;r(),f(" ",e.category_name," ")}}function Ae(t,i){if(t&1&&(n(0,"p",109),s(1),a()),t&2){let e=d().$implicit;r(),f(" ",e.description," ")}}function Ne(t,i){if(t&1&&(n(0,"span",112),x(1,"lucide-icon",113),s(2),C(3,"currency"),a()),t&2){let e=d(2).$implicit;r(),l("size",12),r(),f(" ",E(3,2,e.delivery_price,"EUR")," ")}}function Ue(t,i){if(t&1&&(n(0,"span",112),x(1,"lucide-icon",114),s(2),C(3,"currency"),a()),t&2){let e=d(2).$implicit;r(),l("size",12),r(),f(" ",E(3,2,e.takeaway_price,"EUR")," ")}}function Be(t,i){if(t&1&&(n(0,"div",110),m(1,Ne,4,5,"span",111)(2,Ue,4,5,"span",111),a()),t&2){let e=d().$implicit;r(),l("ngIf",e.delivery_price),r(),l("ngIf",e.takeaway_price)}}function He(t,i){if(t&1){let e=g();n(0,"div",89)(1,"div",90),m(2,je,1,2,"img",91)(3,Le,2,1,"div",92),n(4,"span",93),s(5),C(6,"currency"),a(),m(7,$e,2,1,"span",94),a(),n(8,"div",95)(9,"div",96)(10,"h3",97),s(11),a(),m(12,Ae,2,1,"p",98),a(),m(13,Be,3,2,"div",99),n(14,"div",100)(15,"button",101),u("click",function(){let c=_(e).$implicit,v=d(5);return p(v.addToCart(c))}),x(16,"lucide-icon",102),s(17," Aggiungi "),a(),n(18,"button",103),x(19,"lucide-icon",104),a()()()()}if(t&2){let e=i.$implicit;r(2),l("ngIf",e.image_url),r(),l("ngIf",!e.image_url),r(2),f(" ",E(6,9,e.base_price,"EUR")," "),r(2),l("ngIf",e.category_name),r(4),f(" ",e.name," "),r(),l("ngIf",e.description),r(),l("ngIf",e.delivery_price||e.takeaway_price),r(3),l("size",16),r(3),l("size",16)}}function We(t,i){if(t&1){let e=g();n(0,"div",115)(1,"span",21),s(2),a(),n(3,"button",116),u("click",function(){_(e);let c=d(5);return p(c.viewFullMenu())}),x(4,"lucide-icon",117),s(5," Vedi tutti "),a()()}if(t&2){let e=d(5);r(2),f("+",e.filteredDishes.length-6," altri piatti"),r(2),l("size",16)}}function Ze(t,i){if(t&1&&(n(0,"div",85)(1,"div",86),m(2,He,20,12,"div",87),a(),m(3,We,6,2,"div",88),a()),t&2){let e=d(4);r(2),l("ngForOf",e.filteredDishes.slice(0,6)),r(),l("ngIf",e.filteredDishes.length>6)}}function Ye(t,i){if(t&1){let e=g();n(0,"div",118),x(1,"lucide-icon",119),n(2,"p",39),s(3,"Nessun piatto trovato"),a(),n(4,"button",116),u("click",function(){_(e);let c=d(4);return p(c.selectMenu(null))}),x(5,"lucide-icon",120),s(6," Mostra tutti "),a()()}t&2&&(r(),l("size",36),r(4),l("size",16))}function Ge(t,i){if(t&1){let e=g();n(0,"div",70)(1,"div",71)(2,"div",72)(3,"div",4),x(4,"lucide-icon",73),a(),n(5,"div")(6,"h2",74),s(7,"Il Nostro Menu"),a(),n(8,"p",21),s(9),a()()(),n(10,"button",75),u("click",function(){_(e);let c=d(3);return p(c.viewFullMenu())}),x(11,"lucide-icon",76),s(12," Menu completo "),a()(),m(13,Re,8,4,"div",37)(14,Fe,7,3,"div",37)(15,Ze,4,2,"div",77)(16,Ye,7,2,"div",78),a()}if(t&2){let e=d(3);r(9),f("",e.filteredDishes.length," piatti disponibili"),r(4),l("ngIf",e.menus.length>0),r(),l("ngIf",!e.isMenuView&&e.categories.length>0),r(),l("ngIf",e.filteredDishes.length>0),r(),l("ngIf",e.filteredDishes.length===0)}}function Je(t,i){if(t&1){let e=g();n(0,"button",75),u("click",function(){_(e);let c=d(3);return p(c.viewFullMenu())}),n(1,"span",13),s(2,"restaurant_menu"),a(),s(3," Vedi Menu Completo "),a()}}function Qe(t,i){if(t&1){let e=g();n(0,"button",116),u("click",function(){_(e);let c=d(3);return p(c.viewInteractiveMenu())}),n(1,"span",13),s(2,"shopping_cart"),a(),s(3," Ordina Ora "),a()}}function Xe(t,i){if(t&1){let e=g();n(0,"div",27),m(1,xe,1,1,"app-image-slideshow",28)(2,fe,11,3,"div",29)(3,he,6,0,"div",30),n(4,"div",31)(5,"div",32)(6,"div",33),x(7,"lucide-angular",34),n(8,"h2",35),s(9,"Informazioni"),a()(),n(10,"div",36),m(11,be,5,1,"div",37),n(12,"div",38)(13,"h3",39),s(14,"Contatti"),a(),n(15,"div",38),m(16,we,5,1,"div",40)(17,Ie,5,2,"div",40)(18,ye,4,3,"div",40),a()()()(),n(19,"div",32)(20,"div",33)(21,"span",13),s(22,"room_service"),a(),n(23,"h2",35),s(24,"Servizi"),a()(),n(25,"div",36),m(26,Ce,8,0,"div",40)(27,Se,8,0,"div",40)(28,ke,8,0,"div",40),a()()(),m(29,De,8,1,"div",41)(30,Ge,17,5,"div",42),n(31,"div",43)(32,"button",44),u("click",function(){_(e);let c=d(2);return p(c.viewRestaurantMap())}),n(33,"span",13),s(34,"map"),a(),s(35," Visualizza Mappa "),a(),m(36,Je,4,0,"button",45)(37,Qe,4,0,"button",46),a()()}if(t&2){let e=d(2);r(),l("ngIf",e.restaurantImages.length>0),r(),l("ngIf",e.lightboxVisible),r(),l("ngIf",e.restaurant&&e.restaurantImages.length===0),r(8),l("ngIf",e.restaurant.description),r(5),l("ngIf",e.restaurant.address),r(),l("ngIf",e.restaurant.phone),r(),l("ngIf",e.restaurant.email),r(8),l("ngIf",e.restaurant.accepts_delivery),r(),l("ngIf",e.restaurant.accepts_takeaway),r(),l("ngIf",e.restaurant.allow_table_selection),r(),l("ngIf",e.shifts.length>0),r(),l("ngIf",e.dishes.length>0||e.menus.length>0),r(6),l("ngIf",e.restaurant),r(),l("ngIf",e.restaurant.accepts_delivery||e.restaurant.accepts_takeaway)}}function qe(t,i){if(t&1){let e=g();n(0,"div",14)(1,"div",15),m(2,ge,2,2,"span",16),n(3,"button",17),u("click",function(){_(e);let c=d();return p(c.toggleFollow())}),x(4,"lucide-angular",18),s(5),a()(),m(6,ve,11,0,"div",19)(7,Xe,38,14,"div",20),a()}if(t&2){let e=d();r(2),l("ngIf",e.followerCount>0),r(),h("ghost",!e.isFollowing)("active",e.isFollowing),l("disabled",e.isFollowLoading),r(),h("text-danger",e.isFollowing),l("name",(e.isFollowing,"heart"))("size",18),r(),f(" ",e.isFollowLoading?"...":e.isFollowing?"Segui gi\xE0":"Segui"," "),r(),l("ngIf",!e.restaurant),r(),l("ngIf",e.restaurant)}}function Ke(t,i){t&1&&(n(0,"div",14)(1,"div",22)(2,"span",121),s(3,"sync"),a(),n(4,"p"),s(5,"Caricamento informazioni ristorante..."),a()()())}var ee=class t{restaurantPublicService=w(X);router=w(Z);route=w(W);breakpointObserver=w(q);authService=w(Y);followerService=w(K);lightboxVisible=!1;lightboxIndex=0;isFollowing=!1;followerCount=0;isFollowLoading=!1;restaurant=null;shifts=[];dishes=[];filteredDishes=[];selectedCategory=null;loading=!0;categories=[];restaurantImages=[];menus=[];selectedMenuId=null;isMenuView=!1;weekDays=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"];isMobile$=this.breakpointObserver.observe([R.Handset,R.TabletPortrait]).pipe(V(i=>i.matches));showToggle$=z([this.isMobile$,this.authService.sidebarCollapsed$]).pipe(V(([i,e])=>i&&e));ngOnInit(){return y(this,null,function*(){let i=this.route.snapshot.paramMap.get("id");i?(yield this.loadRestaurantData(i),yield this.loadFollowState(i)):this.router.navigate(["/customer/search"])})}extractCategories(i){this.categories=i||[]}selectMenu(i){return y(this,null,function*(){this.selectedMenuId=i,this.isMenuView=i!==null,this.selectedCategory=null,i?this.filteredDishes=yield this.restaurantPublicService.loadMenuDishes(i):this.filteredDishes=[...this.dishes]})}selectCategory(i){this.selectedCategory=i,this.selectedMenuId=null,this.isMenuView=!1,i?this.filteredDishes=this.dishes.filter(e=>e.category_id===i):this.filteredDishes=[...this.dishes]}formatTime(i){return i?i.substring(0,5):""}getDayName(i){return this.weekDays[i]||""}truncateText(i,e){return i?i.length<=e?i:i.substring(0,e)+"...":""}viewRestaurantMap(){this.restaurant&&this.router.navigate(["/customer/restaurant",this.restaurant.id,"map"])}viewInteractiveMenu(){this.restaurant&&this.router.navigate(["/customer/menu",this.restaurant.id])}onLogoError(i){let e=i.target;e.style.display="none"}onDishImageError(i,e){let o=i.target;o.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Tm8gaW1hZ2U8L3RleHQ+PC9zdmc+",o.onerror=null}loadRestaurantData(i){return y(this,null,function*(){try{this.loading=!0;let[e,o,c,v,O,te]=yield Promise.all([this.restaurantPublicService.loadRestaurantById(i),this.restaurantPublicService.loadRestaurantShifts(i),this.restaurantPublicService.loadRestaurantDishes(i,{onlyActive:!0}),this.restaurantPublicService.loadRestaurantCategories(i),this.restaurantPublicService.loadRestaurantPhotos(i),this.restaurantPublicService.loadRestaurantMenus(i)]);this.restaurant=e,this.shifts=o,this.dishes=c,this.filteredDishes=[...c],this.restaurantImages=O,this.menus=te,this.extractCategories(v),console.log("\u2705 Dati caricati:",{ristorante:this.restaurant?.name,piatti:this.dishes.length,turni:this.shifts.length,foto:this.restaurantImages.length,menu:this.menus.length})}catch(e){console.error("Error loading restaurant data:",e)}finally{this.loading=!1}})}viewFullMenu(){this.restaurant&&this.router.navigate(["/customer/menu",this.restaurant.id])}addToCart(i){console.log("Aggiunto al carrello:",i)}openLightbox(i){this.lightboxIndex=i,this.lightboxVisible=!0,document.body.style.overflow="hidden"}closeLightbox(){this.lightboxVisible=!1,document.body.style.overflow=""}prevImage(i){i.stopPropagation(),this.lightboxIndex=(this.lightboxIndex-1+this.restaurantImages.length)%this.restaurantImages.length}nextImage(i){i.stopPropagation(),this.lightboxIndex=(this.lightboxIndex+1)%this.restaurantImages.length}loadFollowState(i){return y(this,null,function*(){let[e,o]=yield Promise.all([this.followerService.isFollowing(i),this.followerService.getFollowerCount(i)]);this.isFollowing=e,this.followerCount=o})}toggleFollow(){return y(this,null,function*(){if(!this.authService.currentUserValue){this.router.navigate(["/login"]);return}if(this.restaurant){this.isFollowLoading=!0;try{this.isFollowing=yield this.followerService.toggleFollow(this.restaurant.id),this.followerCount+=this.isFollowing?1:-1}finally{this.isFollowLoading=!1}}})}get isAuthenticated(){return!!this.authService.currentUserValue}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-restaurant-detail"]],decls:13,vars:10,consts:[["loadingTemplate",""],[1,"section-header"],[1,"flex","items-center","gap-md","w-100"],["class","icon-button mobile-toggle",3,"click",4,"ngIf"],[1,"header-icon"],["class","logo-image rounded-full",3,"src","alt","error",4,"ngIf"],["class","material-icons",4,"ngIf"],[1,"section-titles"],[1,"section-title"],["class","page-container",4,"ngIf","ngIfElse"],[1,"icon-button","mobile-toggle",3,"click"],["name","menu"],[1,"logo-image","rounded-full",3,"error","src","alt"],[1,"material-icons"],[1,"page-container"],[1,"flex","items-center","gap-sm","mt-lg","p-sm","w-100",2,"justify-content","right"],["class","text-muted text-mini",4,"ngIf"],[1,"promethea-button",3,"click","disabled"],[3,"name","size"],["class","flex flex-col items-center justify-center p-xl gap-md",4,"ngIf"],["class","flex flex-col gap-md mt-lg",4,"ngIf"],[1,"text-muted","text-mini"],[1,"flex","flex-col","items-center","justify-center","p-xl","gap-md"],[1,"material-icons","fs-lg"],[1,"text-lg","font-bold"],[1,"text-muted"],["routerLink","/customer/search",1,"promethea-button"],[1,"flex","flex-col","gap-md","mt-lg"],["class","mb-lg",3,"images","imageClicked",4,"ngIf"],["class","lightbox-overlay",3,"click",4,"ngIf"],["class","image-placeholder card mb-lg",4,"ngIf"],[1,"grid-form"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],["name","info"],[1,"text-md","font-semibold","m-0"],[1,"flex","flex-col","gap-md"],["class","flex flex-col gap-sm",4,"ngIf"],[1,"flex","flex-col","gap-sm"],[1,"font-semibold"],["class","flex items-center gap-sm",4,"ngIf"],["class","card",4,"ngIf"],["class","card gap-lg",4,"ngIf"],[1,"modal-footer","p-sm"],[1,"promethea-button",3,"click"],["class","promethea-button primary",3,"click",4,"ngIf"],["class","promethea-button ghost",3,"click",4,"ngIf"],[1,"mb-lg",3,"imageClicked","images"],[1,"lightbox-overlay",3,"click"],[1,"lightbox-content","modal-lg",3,"click"],[1,"nav-arrow","prev",3,"click"],["alt","Foto ingrandita",1,"lightbox-image",3,"src"],[1,"nav-arrow","next",3,"click"],[1,"close-btn",3,"click"],[1,"counter"],[1,"image-placeholder","card","mb-lg"],[1,"flex","flex-col","items-center","justify-center","p-xl","gap-sm"],[1,"flex","items-center","gap-sm"],[1,"link",3,"href"],["name","mail",1,"nav-icon",3,"size"],[1,"material-icons","text-primary"],["class","shift-section",4,"ngFor","ngForOf"],[1,"shift-section"],[1,"flex","justify-between","items-center","mb-sm"],[1,"chip"],["class","flex flex-wrap gap-sm",4,"ngIf"],[1,"flex","flex-wrap","gap-sm"],[4,"ngFor","ngForOf"],["class","chip active",4,"ngIf"],[1,"chip","active"],[1,"card","gap-lg"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-md"],["name","book-open"],[1,"section-title","m-0",2,"font-size","var(--fs-md)"],[1,"promethea-button","primary",3,"click"],["name","arrow-right"],["class","dishes-preview",4,"ngIf"],["class","flex flex-col items-center justify-center gap-md p-lg",4,"ngIf"],[1,"text-mini","text-muted","font-semibold",2,"letter-spacing","0.08em","text-transform","uppercase"],[1,"chip",3,"click"],["name","layers",3,"size"],["class","chip",3,"active","click",4,"ngFor","ngForOf"],["name","star",3,"size",4,"ngIf"],["name","star",3,"size"],[1,"dishes-preview"],[1,"grid-cards"],["class","dish-card-modern flex flex-col",4,"ngFor","ngForOf"],["class","flex items-center justify-center gap-md mt-lg","style","border-top: 1px solid var(--smoke-1); padding-top: var(--gap-lg)",4,"ngIf"],[1,"dish-card-modern","flex","flex-col"],[1,"dish-img-wrap"],["class","dish-img",3,"src","alt","error",4,"ngIf"],["class","dish-img-placeholder",4,"ngIf"],[1,"dish-price-badge","chip","bg-gradient"],["class","dish-category-badge text-mini",4,"ngIf"],[1,"flex","flex-col","gap-sm","p-md","flex-1"],[1,"flex-1"],[1,"card-title",2,"font-size","var(--fs-sm)","margin-bottom","var(--gap-mini)"],["class","text-muted text-mini line-clamp-2",4,"ngIf"],["class","flex gap-sm flex-wrap",4,"ngIf"],[1,"flex","gap-sm","card-footer",2,"padding-top","var(--gap-sm)"],[1,"promethea-button","primary","flex-1",3,"click"],["name","plus",3,"size"],["title","Dettagli",1,"icon-button"],["name","info",3,"size"],[1,"dish-img",3,"error","src","alt"],[1,"dish-img-placeholder"],["name","utensils",3,"size"],[1,"dish-category-badge","text-mini"],[1,"text-muted","text-mini","line-clamp-2"],[1,"flex","gap-sm","flex-wrap"],["class","chip text-mini",4,"ngIf"],[1,"chip","text-mini"],["name","bike",3,"size"],["name","shopping-bag",3,"size"],[1,"flex","items-center","justify-center","gap-md","mt-lg",2,"border-top","1px solid var(--smoke-1)","padding-top","var(--gap-lg)"],[1,"promethea-button","ghost",3,"click"],["name","arrow-right",3,"size"],[1,"flex","flex-col","items-center","justify-center","gap-md","p-lg"],["name","search-x",2,"color","var(--text-muted)",3,"size"],["name","rotate-ccw",3,"size"],[1,"material-icons","animate-spin"]],template:function(e,o){if(e&1&&(n(0,"div",1)(1,"div",2),m(2,_e,2,0,"button",3),C(3,"async"),n(4,"div",4),m(5,pe,1,2,"img",5)(6,ue,2,0,"span",6),a(),n(7,"div",7)(8,"h1",8),s(9),a()()()(),m(10,qe,8,13,"div",9)(11,Ke,6,0,"ng-template",null,0,U)),e&2){let c=A(12);j("background",o.restaurant!=null&&o.restaurant.cover_image_url?"url("+(o.restaurant==null?null:o.restaurant.cover_image_url)+")":"var(--vetro)"),r(2),l("ngIf",N(3,8,o.showToggle$)),r(3),l("ngIf",o.restaurant==null?null:o.restaurant.logo_url),r(),l("ngIf",!(o.restaurant!=null&&o.restaurant.logo_url)),r(3),I(o.restaurant==null?null:o.restaurant.name),r(),l("ngIf",!o.loading)("ngIfElse",c)}},dependencies:[M,P,T,B,H,G,D,Q,J],styles:[".logo-image[_ngcontent-%COMP%]{max-width:var(--fs-xl);max-height:var(--fs-xl);width:auto;height:auto;object-fit:contain;padding:var(--gap-sm);background:var(--smoke-1)}.dish-image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:var(--gap-md);margin-bottom:var(--gap-sm)}.dish-image[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;display:block;transition:transform .3s cubic-bezier(.2,.9,.2,1)}.card[_ngcontent-%COMP%]:hover   .dish-image[_ngcontent-%COMP%]{transform:scale(1.05)}.dish-badges[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.dish-badges[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{color:var(--text-color);border:none;background:var(--gradiente)}.text-normal[_ngcontent-%COMP%]{color:var(--text-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.flex-1[_ngcontent-%COMP%]{flex:1}.hover-lift[_ngcontent-%COMP%]{padding:0}@media (max-width: 768px){.dish-image[_ngcontent-%COMP%]{height:150px}}.lightbox-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:color-mix(in srgb,var(--text-color) 90%,transparent);backdrop-filter:blur(10px);z-index:9999999!important;display:flex;align-items:center;justify-content:center}.lightbox-content[_ngcontent-%COMP%]{height:100%}.lightbox-image[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:contain}.nav-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:var(--gradiente);border:none;font-size:var(--fs-md);padding:var(--gap-sm) var(--gap-md);cursor:pointer;border-radius:50%;z-index:10}.prev[_ngcontent-%COMP%]{left:10%}.next[_ngcontent-%COMP%]{right:10%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:20px;right:30px;background:none;border:none;color:var(--background);font-size:var(--fs-lg);cursor:pointer;z-index:10}.counter[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:#fff;background:#0009;padding:8px 16px;border-radius:20px;font-size:1.1rem}.dish-card-modern[_ngcontent-%COMP%]{border-radius:var(--gap-sm);overflow:hidden;background:var(--vetro);border:1px solid color-mix(in srgb,var(--primary) 20%,transparent);transition:transform .25s cubic-bezier(.34,1.56,.64,1),box-shadow .25s ease}.dish-card-modern[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 8px 32px var(--shadow-1)}.dish-img-wrap[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:4/3;overflow:hidden;background:var(--background2)}.dish-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.dish-card-modern[_ngcontent-%COMP%]:hover   .dish-img[_ngcontent-%COMP%]{transform:scale(1.05)}.dish-img-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--text-muted)}.dish-price-badge[_ngcontent-%COMP%]{position:absolute;top:var(--gap-sm);right:var(--gap-sm);font-weight:700;font-size:var(--fs-mini);backdrop-filter:blur(8px)}.dish-category-badge[_ngcontent-%COMP%]{position:absolute;bottom:var(--gap-sm);left:var(--gap-sm);background:color-mix(in srgb,var(--background) 70%,transparent);backdrop-filter:blur(8px);padding:2px 10px;border-radius:999px;color:var(--text-muted);border:1px solid var(--smoke-1)}"]})};export{ee as RestaurantDetail};
