import{a as Z}from"./chunk-MVDMN4LR.js";import"./chunk-ZLVV5NVO.js";import"./chunk-DHGR3C5D.js";import{a as j,b as N,d as q,h as R,j as G,q as Y,r as H,s as J,t as K,u as Q,v as U,x as X}from"./chunk-T5BKZD3Y.js";import"./chunk-KCQE4MF2.js";import{c as L,d as D,l as z}from"./chunk-VGLLKVAA.js";import{Ab as a,Ba as c,Bb as x,Cb as p,Db as A,Gb as _,Hb as h,Ib as b,Ra as O,V as T,Wa as y,_ as I,cb as v,da as m,db as n,ea as g,eb as o,fb as F,g as M,lb as w,ob as u,qb as d,t as P,u as V,wb as C,xb as k,zb as W}from"./chunk-QECS2EDN.js";import{a as S,b as E,j as f}from"./chunk-4ZZIO3ZI.js";var te=[{value:"vino_rosso",label:"Vino Rosso",icon:"wine_bar",color:"#8B0000"},{value:"vino_bianco",label:"Vino Bianco",icon:"wine_bar",color:"#F5DEB3"},{value:"vino_rosato",label:"Vino Rosato",icon:"wine_bar",color:"#FFB6C1"},{value:"spumante",label:"Spumante",icon:"celebration",color:"#FFFACD"},{value:"prosecco",label:"Prosecco",icon:"celebration",color:"#FFF8DC"},{value:"champagne",label:"Champagne",icon:"celebration",color:"#FFD700"},{value:"birra",label:"Birra",icon:"sports_bar",color:"#D2691E"},{value:"birra_chiara",label:"Birra Chiara",icon:"sports_bar",color:"#FFD700"},{value:"birra_scura",label:"Birra Scura",icon:"sports_bar",color:"#8B4513"},{value:"birra_artigianale",label:"Birra Artigianale",icon:"brewery",color:"#CD853F"},{value:"whisky",label:"Whisky",icon:"liquor",color:"#8B4513"},{value:"vodka",label:"Vodka",icon:"liquor",color:"#F0FFFF"},{value:"gin",label:"Gin",icon:"liquor",color:"#98FB98"},{value:"rum",label:"Rum",icon:"liquor",color:"#DAA520"},{value:"tequila",label:"Tequila",icon:"liquor",color:"#FFD700"},{value:"brandy",label:"Brandy",icon:"liquor",color:"#8B0000"},{value:"cognac",label:"Cognac",icon:"liquor",color:"#A0522D"},{value:"cocktail",label:"Cocktail",icon:"local_cafe",color:"#FF6347"},{value:"aperitivo",label:"Aperitivo",icon:"local_bar",color:"#FF4500"},{value:"digestivo",label:"Digestivo",icon:"local_bar",color:"#4B0082"},{value:"amaro",label:"Amaro",icon:"local_bar",color:"#8B0000"},{value:"vermut",label:"Vermut",icon:"wine_bar",color:"#800000"},{value:"analcolico",label:"Analcolico",icon:"water_drop",color:"#4682B4"},{value:"succo",label:"Succo",icon:"water_drop",color:"#FF6347"},{value:"bibita",label:"Bibita",icon:"local_drink",color:"#32CD32"},{value:"acqua",label:"Acqua",icon:"water_drop",color:"#1E90FF"},{value:"caffe",label:"Caff\xE8",icon:"coffee",color:"#8B4513"},{value:"te",label:"T\xE8",icon:"coffee",color:"#228B22"},{value:"altro",label:"Altro",icon:"local_bar",color:"#6B7280"}],B=class s extends Z{statsSubject=new M({total:0,active:0,inventoryValue:0,averagePrice:0,lowStockCount:0});stats$=this.statsSubject.asObservable();categoriesSubject=new M(te);categories$=this.categoriesSubject.asObservable();beveragesWithCategories$=V([this.data$,this.categories$]).pipe(P(([r,e])=>{this.calculateStats(r);let t=e.map(i=>E(S({},i),{count:r.filter(l=>l.category===i.value).length}));return{beverages:r,categories:t}}));getTableName(){return"beverages"}constructor(){super(),this.data$.subscribe(r=>{this.updateCategoryCounts(r)})}updateCategoryCounts(r){let t=this.categoriesSubject.value.map(i=>E(S({},i),{count:r.filter(l=>l.category===i.value).length}));this.categoriesSubject.next(t)}getCategories(){return this.categoriesSubject.value}getCategoryByValue(r){return this.categoriesSubject.value.find(e=>e.value===r)||{value:"altro",label:"Altro",icon:"local_bar",color:"#6B7280"}}filterBeverages(r={}){let e=this.data;if(r.category&&(e=e.filter(t=>t.category===r.category)),r.search){let t=r.search.toLowerCase();e=e.filter(i=>i.name.toLowerCase().includes(t)||i.producer?.toLowerCase().includes(t)||i.region?.toLowerCase().includes(t)||i.description?.toLowerCase().includes(t))}return r.minPrice!==void 0&&(e=e.filter(t=>t.price>=r.minPrice)),r.maxPrice!==void 0&&(e=e.filter(t=>t.price<=r.maxPrice)),r.inStock!==void 0&&(e=e.filter(t=>r.inStock?t.current_stock>0:t.current_stock===0)),e}sortBeverages(r,e){let t=[...r];switch(e){case"name":return t.sort((i,l)=>i.name.localeCompare(l.name));case"price_asc":return t.sort((i,l)=>i.price-l.price);case"price_desc":return t.sort((i,l)=>l.price-i.price);case"stock":return t.sort((i,l)=>l.current_stock-i.current_stock);default:return t}}updateStock(r,e){return f(this,null,function*(){let t=this.data.find(l=>l.id===r);if(!t)return!1;let i=Math.max(0,t.current_stock+e);return yield this.update(r,{current_stock:i,is_available:i>0,to_buy:i<=t.minimum_stock,updated_at:new Date().toISOString()})})}createBeverage(r){return f(this,null,function*(){return r.category?this.categoriesSubject.value.find(t=>t.value===r.category)||(console.error("\u274C Categoria non valida:",r.category),r.category="altro"):r.category="altro",yield this.create(r)})}updateBeverage(r,e){return f(this,null,function*(){return e.category&&(this.categoriesSubject.value.find(i=>i.value===e.category)||(console.error("\u274C Categoria non valida:",e.category),e.category="altro")),yield this.update(r,e)})}calculateStats(r){let e={total:r.length,active:r.filter(t=>t.is_active).length,inventoryValue:r.reduce((t,i)=>t+i.cost_per_unit*i.current_stock,0),averagePrice:r.length>0?r.reduce((t,i)=>t+i.price,0)/r.length:0,lowStockCount:r.filter(t=>t.current_stock<=t.minimum_stock).length};this.statsSubject.next(e)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"})};function ie(s,r){if(s&1&&(n(0,"option",37),a(1),o()),s&2){let e=r.$implicit;v("value",e.value),c(),A(" ",e.label," (",e.count,") ")}}function re(s,r){s&1&&(n(0,"tr")(1,"td",38)(2,"div",39)(3,"span",40),a(4,"refresh"),o(),n(5,"span"),a(6,"Caricamento bevande..."),o()()()())}function ne(s,r){if(s&1&&(n(0,"div",64),a(1),o()),s&2){let e=d().$implicit;c(),p(" ",e.description," ")}}function oe(s,r){if(s&1&&(n(0,"div",65),a(1),o()),s&2){let e=d().$implicit,t=d();c(),p(" Costo: \u20AC",t.formatPrice(e.cost_per_unit)," ")}}function ae(s,r){if(s&1){let e=w();n(0,"tr",41)(1,"td")(2,"div",42)(3,"div",43)(4,"span",44),a(5),o()(),n(6,"div")(7,"strong"),a(8),o(),y(9,ne,2,1,"div",45),o()()(),n(10,"td")(11,"span",46)(12,"span",47),a(13),o(),a(14),o()(),n(15,"td")(16,"span",5),a(17),o()(),n(18,"td")(19,"span",5),a(20),o()(),n(21,"td")(22,"span",5),a(23),o()(),n(24,"td")(25,"div")(26,"strong",48),a(27),o(),y(28,oe,2,1,"div",49),o()(),n(29,"td")(30,"div",50)(31,"div",51)(32,"div",52)(33,"div",53),F(34,"div",54),o()(),n(35,"span"),a(36),o()(),n(37,"div",55),a(38),o()()(),n(39,"td")(40,"span",56),a(41),o()(),n(42,"td")(43,"div",57)(44,"div",58)(45,"button",59),u("click",function(){let i=m(e).$implicit,l=d();return g(l.updateStock(i.id,-1))}),n(46,"span",44),a(47,"remove"),o()(),n(48,"span",60),a(49),o(),n(50,"button",61),u("click",function(){let i=m(e).$implicit,l=d();return g(l.updateStock(i.id,1))}),n(51,"span",44),a(52,"add"),o()()(),n(53,"button",62),u("click",function(){let i=m(e).$implicit,l=d();return g(l.editBeverage(i))}),n(54,"span",44),a(55,"edit"),o()(),n(56,"button",63),u("click",function(){let i=m(e).$implicit,l=d();return g(l.deleteBeverage(i.id))}),n(57,"span",44),a(58,"delete"),o()()()()()}if(s&2){let e=r.$implicit,t=d();k("bg-red-50",e.current_stock<=e.minimum_stock)("bg-green-50",e.current_stock>e.minimum_stock*2),c(3),C("background-color",t.getCategoryColor(e.category)+"20"),c(),C("color",t.getCategoryColor(e.category)),c(),p(" ",t.getCategoryIcon(e.category)," "),c(3),x(e.name),c(),v("ngIf",e.description),c(2),C("background-color",t.getCategoryColor(e.category)),c(2),p(" ",t.getCategoryIcon(e.category)," "),c(),p(" ",t.getCategoryLabel(e.category)," "),c(3),x(e.producer||"N/D"),c(3),x(e.region||"N/D"),c(3),x(e.vintage||"-"),c(4),p("\u20AC",t.formatPrice(e.price)),c(),v("ngIf",e.cost_per_unit>0),c(6),C("width",t.getStockPercentage(e)+"%")("background-color",t.getStockColor(e)),c(),k("text-red-500",e.current_stock<=e.minimum_stock)("font-bold",e.current_stock<=e.minimum_stock),c(),p(" ",e.current_stock," "),c(2),A(" ",e.bottle_format||"pz"," / min: ",e.minimum_stock," "),c(2),W(t.getStockStatus(e).class),c(),p(" ",t.getStockStatus(e).text," "),c(4),v("disabled",e.current_stock<=0),c(4),x(e.current_stock)}}function le(s,r){s&1&&(n(0,"p",5),a(1," Prova a modificare i filtri di ricerca "),o())}function ce(s,r){if(s&1){let e=w();n(0,"p",5)(1,"button",70),u("click",function(){m(e);let i=d(2);return g(i.showAddModal=!0)}),n(2,"span",17),a(3,"add"),o(),a(4," Aggiungi la prima bevanda "),o()()}}function se(s,r){if(s&1&&(n(0,"tr")(1,"td",66)(2,"div",67)(3,"span",68),a(4,"wine_bar"),o(),n(5,"h3"),a(6,"Nessuna bevanda trovata"),o(),y(7,le,2,0,"p",69)(8,ce,5,0,"p",69),o()()()),s&2){let e=d();c(7),v("ngIf",e.searchTerm||e.selectedCategory||e.showLowStockOnly||e.showAvailableOnly),c(),v("ngIf",!e.searchTerm&&!e.selectedCategory&&!e.showLowStockOnly&&!e.showAvailableOnly)}}function de(s,r){if(s&1&&(n(0,"option",37),a(1),o()),s&2){let e=r.$implicit;v("value",e.value),c(),p(" ",e.label," ")}}function me(s,r){if(s&1){let e=w();n(0,"div",71),u("click",function(){m(e);let i=d();return g(i.closeBeverageModal())}),n(1,"div",72),u("click",function(i){return m(e),g(i.stopPropagation())}),n(2,"div",73)(3,"div",74)(4,"div",75)(5,"span",17),a(6),o()(),n(7,"div")(8,"h1",4),a(9),o()()(),n(10,"button",76),u("click",function(){m(e);let i=d();return g(i.closeBeverageModal())}),n(11,"span",17),a(12,"close"),o()()(),n(13,"div",77)(14,"div",78)(15,"div",79)(16,"label",16),a(17,"Nome Bevanda *"),o(),n(18,"input",80),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.name,i)||(l.beverageForm.name=i),g(i)}),o()(),n(19,"div",79)(20,"label",16),a(21,"Categoria *"),o(),n(22,"select",81),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.category,i)||(l.beverageForm.category=i),g(i)}),n(23,"option",20),a(24,"Seleziona categoria"),o(),y(25,de,2,2,"option",21),o()()(),n(26,"div",82)(27,"div",79)(28,"label",16),a(29,"Produttore"),o(),n(30,"input",83),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.producer,i)||(l.beverageForm.producer=i),g(i)}),o()(),n(31,"div",79)(32,"label",16),a(33,"Regione/Paese"),o(),n(34,"input",84),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.region,i)||(l.beverageForm.region=i),g(i)}),o()()(),n(35,"div",82)(36,"div",79)(37,"label",16),a(38,"Prezzo di vendita (\u20AC) *"),o(),n(39,"input",85),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.price,i)||(l.beverageForm.price=i),g(i)}),o()(),n(40,"div",79)(41,"label",16),a(42,"Costo unitario (\u20AC)"),o(),n(43,"input",86),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.cost_per_unit,i)||(l.beverageForm.cost_per_unit=i),g(i)}),o()()(),n(44,"div",82)(45,"div",79)(46,"label",16),a(47,"Stock attuale"),o(),n(48,"input",87),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.current_stock,i)||(l.beverageForm.current_stock=i),g(i)}),o()(),n(49,"div",79)(50,"label",16),a(51,"Stock minimo"),o(),n(52,"input",87),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.minimum_stock,i)||(l.beverageForm.minimum_stock=i),g(i)}),o()()(),n(53,"div",88)(54,"div",79)(55,"label",16),a(56,"Annata"),o(),n(57,"input",89),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.vintage,i)||(l.beverageForm.vintage=i),g(i)}),o()(),n(58,"div",79)(59,"label",16),a(60,"Gradazione (%)"),o(),n(61,"input",90),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.alcohol_percentage,i)||(l.beverageForm.alcohol_percentage=i),g(i)}),o()(),n(62,"div",79)(63,"label",16),a(64,"Formato"),o(),n(65,"input",91),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.bottle_format,i)||(l.beverageForm.bottle_format=i),g(i)}),o()()(),n(66,"div",92)(67,"label",16),a(68,"Descrizione"),o(),n(69,"textarea",93),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.description,i)||(l.beverageForm.description=i),g(i)}),o()(),n(70,"div",88)(71,"label",94)(72,"input",95),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.is_active,i)||(l.beverageForm.is_active=i),g(i)}),o(),n(73,"span"),a(74,"Attivo"),o()(),n(75,"label",94)(76,"input",95),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.is_available,i)||(l.beverageForm.is_available=i),g(i)}),o(),n(77,"span"),a(78,"Disponibile"),o()(),n(79,"label",94)(80,"input",95),b("ngModelChange",function(i){m(e);let l=d();return h(l.beverageForm.display_in_menu,i)||(l.beverageForm.display_in_menu=i),g(i)}),o(),n(81,"span"),a(82,"In menu"),o()()()(),n(83,"div",96)(84,"button",97),u("click",function(){m(e);let i=d();return g(i.closeBeverageModal())}),a(85," Annulla "),o(),n(86,"button",98),u("click",function(){m(e);let i=d();return g(i.showEditModal?i.updateBeverage():i.addBeverage())}),n(87,"span",17),a(88,"check"),o(),a(89),o()()()()}if(s&2){let e=d();c(6),x(e.showEditModal?"edit":"add_circle"),c(3),p("",e.showEditModal?"Modifica":"Nuova"," Bevanda"),c(9),_("ngModel",e.beverageForm.name),c(4),_("ngModel",e.beverageForm.category),c(3),v("ngForOf",e.categories),c(5),_("ngModel",e.beverageForm.producer),c(4),_("ngModel",e.beverageForm.region),c(5),_("ngModel",e.beverageForm.price),c(4),_("ngModel",e.beverageForm.cost_per_unit),c(5),_("ngModel",e.beverageForm.current_stock),c(4),_("ngModel",e.beverageForm.minimum_stock),c(5),_("ngModel",e.beverageForm.vintage),v("max",e.currentYear),c(4),_("ngModel",e.beverageForm.alcohol_percentage),c(4),_("ngModel",e.beverageForm.bottle_format),c(4),_("ngModel",e.beverageForm.description),c(3),_("ngModel",e.beverageForm.is_active),c(4),_("ngModel",e.beverageForm.is_available),c(4),_("ngModel",e.beverageForm.display_in_menu),c(9),p(" ",e.showEditModal?"Aggiorna":"Crea"," Bevanda ")}}function ge(s,r){if(s&1){let e=w();n(0,"div",71),u("click",function(){m(e);let i=d();return g(i.showConfirmModal=!1)}),n(1,"div",99),u("click",function(i){return m(e),g(i.stopPropagation())}),n(2,"div",100)(3,"span",101),a(4,"warning"),o(),n(5,"h3",102),a(6,"Conferma eliminazione"),o(),n(7,"p",103),a(8,"Sei sicuro di voler eliminare questa bevanda?"),F(9,"br"),a(10,"L'azione non pu\xF2 essere annullata."),o()(),n(11,"div",96)(12,"button",97),u("click",function(){m(e);let i=d();return g(i.showConfirmModal=!1)}),a(13," Annulla "),o(),n(14,"button",104),u("click",function(){m(e);let i=d();return g(i.confirmDelete())}),n(15,"span",17),a(16,"delete"),o(),a(17," Elimina "),o()()()()}}var $=class s{beverageService=I(B);subscriptions=[];allBeverages=[];filteredBeverages=[];categories=[];totalProducts=0;activeProducts=0;inventoryValue=0;averagePrice=0;lowStockCount=0;categoriesCount=0;searchTerm="";selectedCategory="";sortBy="name";showAvailableOnly=!1;showLowStockOnly=!1;isLoading=!0;showAddModal=!1;showEditModal=!1;showConfirmModal=!1;beverageForm=this.getEmptyBeverageForm();currentYear=new Date().getFullYear();beverageToDeleteId=null;editingBeverage=null;ngOnInit(){this.loadData(),this.subscribeToData()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}subscribeToData(){let r=this.beverageService.beveragesWithCategories$.subscribe(({beverages:t,categories:i})=>{this.allBeverages=t,this.categories=i,this.categoriesCount=i.length,console.log("\u{1F4CB} Categorie caricate:",this.categories.length),console.log("\u{1F37A} Bevande caricate:",this.allBeverages.length),this.updateStatistics(),this.applyFilters(),this.isLoading=!1},t=>{console.error("Error loading beverages:",t),this.isLoading=!1}),e=this.beverageService.stats$.subscribe(t=>{t&&(this.totalProducts=t.total,this.activeProducts=t.active,this.inventoryValue=t.inventoryValue,this.averagePrice=t.averagePrice,this.lowStockCount=t.lowStockCount)});this.subscriptions.push(r,e)}loadData(){this.isLoading=!0,this.beverageService.loadData()}onSearchChange(r){this.searchTerm=r,this.applyFilters()}onCategoryFilterChange(r){this.selectedCategory=r,this.applyFilters()}onSortChange(r){this.sortBy=r,this.applyFilters()}toggleAvailableFilter(){this.showAvailableOnly=!this.showAvailableOnly,this.applyFilters()}toggleLowStockFilter(){this.showLowStockOnly=!this.showLowStockOnly,this.applyFilters()}applyFilters(){let r=[...this.allBeverages];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();r=r.filter(t=>t.name.toLowerCase().includes(e)||t.producer?.toLowerCase().includes(e)||t.region?.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}this.selectedCategory&&(r=r.filter(e=>e.category===this.selectedCategory)),this.showAvailableOnly&&(r=r.filter(e=>e.is_available&&e.current_stock>0)),this.showLowStockOnly&&(r=r.filter(e=>e.current_stock<=e.minimum_stock)),this.filteredBeverages=this.beverageService.sortBeverages(r,this.sortBy)}getEmptyBeverageForm(){return{name:"",category:this.categories[0]?.value||"vino_rosso",price:0,cost_per_unit:0,current_stock:0,minimum_stock:10,alcohol_percentage:13,bottle_format:"750ml",is_active:!0,is_available:!0,display_in_menu:!0,alert_enabled:!0,to_buy:!1,menu_position:0}}addBeverage(){return f(this,null,function*(){if(this.validateBeverageForm())try{(yield this.beverageService.createBeverage(this.beverageForm))?(this.showAddModal=!1,this.resetBeverageForm()):alert("Errore nella creazione della bevanda")}catch(r){console.error("Error adding beverage:",r),alert("Errore nella creazione della bevanda")}})}editBeverage(r){this.editingBeverage=r,this.beverageForm=S({},r),this.showEditModal=!0}updateBeverage(){return f(this,null,function*(){if(!(!this.validateBeverageForm()||!this.editingBeverage))try{(yield this.beverageService.updateBeverage(this.editingBeverage.id,this.beverageForm))?(this.showEditModal=!1,this.resetBeverageForm()):alert("Errore nell'aggiornamento della bevanda")}catch(r){console.error("Error updating beverage:",r),alert("Errore nell'aggiornamento della bevanda")}})}deleteBeverage(r){this.beverageToDeleteId=r,this.showConfirmModal=!0}confirmDelete(){return f(this,null,function*(){if(this.beverageToDeleteId)try{(yield this.beverageService.delete(this.beverageToDeleteId))?(this.showConfirmModal=!1,this.beverageToDeleteId=null):alert("Errore nell'eliminazione della bevanda")}catch(r){console.error("Error deleting beverage:",r),alert("Errore nell'eliminazione della bevanda")}})}updateStock(r,e){return f(this,null,function*(){try{yield this.beverageService.updateStock(r,e)}catch(t){console.error("Error updating stock:",t),alert("Errore nell'aggiornamento dello stock")}})}validateBeverageForm(){return this.beverageForm.name?.trim()?this.beverageForm.category?!this.beverageForm.price||this.beverageForm.price<=0?(alert("Inserisci un prezzo valido"),!1):!0:(alert("Seleziona una categoria"),!1):(alert("Il nome della bevanda \xE8 obbligatorio"),!1)}resetBeverageForm(){this.beverageForm=this.getEmptyBeverageForm(),this.editingBeverage=null}closeBeverageModal(){this.showAddModal=!1,this.showEditModal=!1,this.resetBeverageForm()}getCategoryLabel(r){return this.categories.find(t=>t.value===r)?.label||r}getCategoryIcon(r){return this.categories.find(t=>t.value===r)?.icon||"local_bar"}getCategoryColor(r){return this.categories.find(t=>t.value===r)?.color||"#6B7280"}getStockColor(r){return r.current_stock===0?"#FF6B6B":r.current_stock<=r.minimum_stock?"#FFA726":"#4CAF50"}getStockPercentage(r){let e=Math.max(r.current_stock,r.minimum_stock*2);return Math.min(r.current_stock/e*100,100)}getStockStatus(r){return r.current_stock===0?{class:"chip-error",text:"Esaurito"}:r.current_stock<=r.minimum_stock?{class:"chip-warning",text:"Scorta bassa"}:{class:"chip-success",text:"Disponibile"}}formatPrice(r){return r.toFixed(2).replace(".",",")}formatNumber(r){return r.toFixed(2).replace(".",",")}updateStatistics(){this.totalProducts=this.allBeverages.length,this.activeProducts=this.allBeverages.filter(r=>r.is_active).length,this.inventoryValue=this.allBeverages.reduce((r,e)=>r+e.cost_per_unit*e.current_stock,0),this.averagePrice=this.allBeverages.length>0?this.allBeverages.reduce((r,e)=>r+e.price,0)/this.allBeverages.length:0,this.lowStockCount=this.allBeverages.filter(r=>r.current_stock<=r.minimum_stock).length}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=O({type:s,selectors:[["app-alcoholic-beverages"]],decls:124,vars:20,consts:[[1,"page-container"],[1,"section-header"],[1,"flex","gap-sm","items-center"],[1,"material-icons","fs-lg"],[1,"section-title"],[1,"text-muted"],[1,"grid-cards"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"card-title"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"card-footer","text-muted"],[1,"form-card","mt-lg"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","gap-md"],[1,"form-group","flex-1"],[1,"standard-label"],[1,"material-icons"],["type","text","placeholder","Cerca per nome, produttore, regione...",1,"form-input",3,"input","value"],[1,"form-input",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","name"],["value","price_asc"],["value","price_desc"],["value","stock"],[1,"flex","gap-sm","items-end"],["title","Mostra solo disponibili",1,"promethea-button","ghost",3,"click"],["title","Mostra solo scorte basse",1,"promethea-button","ghost",3,"click"],[1,"flex","justify-end","mt-md"],[1,"promethea-button",3,"click"],[1,"mt-lg","bg-body","border","rounded-lg","overflow-hidden","shadow-card","backdrop-blur"],[1,"table-section"],[1,"crm-table"],[4,"ngIf"],["class","beverage-row",3,"bg-red-50","bg-green-50",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],["colspan","9",1,"text-center","p-xl"],[1,"flex","flex-col","items-center","justify-center","gap-md"],[1,"material-icons","animate-spin"],[1,"beverage-row"],[1,"flex","items-center","gap-sm"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center"],[1,"material-icons","text-sm"],["class","text-xs text-muted truncate max-w-xs",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",2,"color","white"],[1,"material-icons","text-xs","mr-1"],[1,"text-primary"],["class","text-xs text-muted",4,"ngIf"],[1,"flex","flex-col"],[1,"flex","items-center","gap-2"],[1,"w-20"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all"],[1,"text-xs","text-muted","mt-1"],[1,"chip"],[1,"flex","gap-1"],[1,"flex","items-center","border","rounded-lg","overflow-hidden"],["title","Diminuisci stock",1,"p-1","hover:bg-gray-100","disabled:opacity-50",3,"click","disabled"],[1,"px-2","text-xs"],["title","Aumenta stock",1,"p-1","hover:bg-gray-100",3,"click"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small","danger",3,"click"],[1,"text-xs","text-muted","truncate","max-w-xs"],[1,"text-xs","text-muted"],["colspan","9",1,"empty-state-row"],[1,"empty-state","mb-lg"],[1,"material-icons","text-4xl","text-gray-300","mb-4"],["class","text-muted",4,"ngIf"],[1,"promethea-button","primary","mt-sm",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"modal-header"],[1,"flex"],[1,"header-icon"],[1,"icon-button",3,"click"],[1,"form-card"],[1,"grid","grid-cols-2","gap-md"],[1,"form-group"],["type","text","placeholder","Es: Chianti Classico","required","",1,"form-input",3,"ngModelChange","ngModel"],["required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-md","mt-sm"],["type","text","placeholder","Nome produttore",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Es: Toscana, Italia",1,"form-input",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-3","gap-md","mt-sm"],["type","number","min","1900",1,"form-input",3,"ngModelChange","ngModel","max"],["type","number","step","0.1","min","0","max","100",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Es: 750ml, 1L",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-group","mt-sm"],["rows","2","placeholder","Note di degustazione, abbinamenti...",1,"form-input",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"promethea-button","ghost","flex-1",3,"click"],[1,"promethea-button","primary","flex-1",3,"click"],[1,"modal-container","modal-xs",3,"click"],[1,"modal-body","text-center"],[1,"material-icons","text-4xl","text-red-500","mb-sm"],[1,"text-md","font-bold","mb-sm"],[1,"text-muted","mb-md"],[1,"promethea-button","danger","flex-1",3,"click"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"wine_bar"),o(),n(5,"h1",4),a(6,"Alcolici"),o()(),n(7,"p",5),a(8,"Gestisci la tua selezione di vini, birre e bevande speciali"),o()(),n(9,"div",6)(10,"div",7)(11,"div",8)(12,"span",9),a(13,"inventory"),o(),n(14,"h3",10),a(15,"Prodotti Totali"),o()(),n(16,"div",11),a(17),o(),n(18,"div",12),a(19),o()(),n(20,"div",7)(21,"div",8)(22,"span",9),a(23,"euro"),o(),n(24,"h3",10),a(25,"Valore Inventario"),o()(),n(26,"div",11),a(27),o(),n(28,"div",12),a(29),o()(),n(30,"div",7)(31,"div",8)(32,"span",9),a(33,"category"),o(),n(34,"h3",10),a(35,"Categorie"),o()(),n(36,"div",11),a(37),o(),n(38,"div",12),a(39,"Categorie disponibili"),o()(),n(40,"div",7)(41,"div",8)(42,"span",9),a(43,"warning"),o(),n(44,"h3",10),a(45,"Scorte Basse"),o()(),n(46,"div",11),a(47),o(),n(48,"div",12),a(49),o()()(),n(50,"div",13)(51,"div",14)(52,"div",15)(53,"label",16)(54,"span",17),a(55,"search"),o(),a(56," Cerca Prodotto "),o(),n(57,"input",18),u("input",function(l){return t.onSearchChange(l.target.value)}),o()(),n(58,"div",15)(59,"label",16)(60,"span",17),a(61,"category"),o(),a(62," Categoria "),o(),n(63,"select",19),u("change",function(l){return t.onCategoryFilterChange(l.target.value)}),n(64,"option",20),a(65,"Tutte le categorie"),o(),y(66,ie,2,3,"option",21),o()(),n(67,"div",15)(68,"label",16)(69,"span",17),a(70,"sort"),o(),a(71," Ordina per "),o(),n(72,"select",19),u("change",function(l){return t.onSortChange(l.target.value)}),n(73,"option",22),a(74,"Nome"),o(),n(75,"option",23),a(76,"Prezzo crescente"),o(),n(77,"option",24),a(78,"Prezzo decrescente"),o(),n(79,"option",25),a(80,"Disponibilit\xE0"),o()()(),n(81,"div",26)(82,"button",27),u("click",function(){return t.toggleAvailableFilter()}),n(83,"span",17),a(84,"check_circle"),o(),a(85," Disponibili "),o(),n(86,"button",28),u("click",function(){return t.toggleLowStockFilter()}),n(87,"span",17),a(88,"warning"),o(),a(89," Scorte basse "),o()()(),n(90,"div",29)(91,"button",30),u("click",function(){return t.showAddModal=!0}),n(92,"span",17),a(93,"add"),o(),a(94," Nuova Bevanda "),o()()(),n(95,"div",31)(96,"div",32)(97,"table",33)(98,"thead")(99,"tr")(100,"th"),a(101,"Prodotto"),o(),n(102,"th"),a(103,"Categoria"),o(),n(104,"th"),a(105,"Produttore"),o(),n(106,"th"),a(107,"Regione"),o(),n(108,"th"),a(109,"Annata"),o(),n(110,"th"),a(111,"Prezzo"),o(),n(112,"th"),a(113,"Stock"),o(),n(114,"th"),a(115,"Stato"),o(),n(116,"th"),a(117,"Azioni"),o()()(),n(118,"tbody"),y(119,re,7,0,"tr",34)(120,ae,59,36,"tr",35)(121,se,9,2,"tr",34),o()()()()(),y(122,me,90,20,"div",36)(123,ge,18,0,"div",36)),e&2&&(c(17),x(t.totalProducts),c(2),p("",t.activeProducts," attivi"),c(8),p("\u20AC",t.formatNumber(t.inventoryValue)),c(2),p("Costo medio: \u20AC",t.formatNumber(t.averagePrice)),c(8),x(t.categoriesCount),c(10),x(t.lowStockCount),c(2),p(" ",t.lowStockCount>0?"Riordina presto":"Tutto ok"," "),c(8),v("value",t.searchTerm),c(6),v("value",t.selectedCategory||""),c(3),v("ngForOf",t.categories),c(6),v("value",t.sortBy),c(10),k("active",t.showAvailableOnly),c(4),k("active",t.showLowStockOnly),c(33),v("ngIf",t.isLoading),c(),v("ngForOf",t.filteredBeverages),c(),v("ngIf",!t.isLoading&&t.filteredBeverages.length===0),c(),v("ngIf",t.showAddModal||t.showEditModal),c(),v("ngIf",t.showConfirmModal))},dependencies:[z,L,D,X,H,J,N,G,j,Y,q,U,Q,K,R],styles:[".icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;max-height:200px;overflow-y:auto;padding:8px;background:var(--smoke-0);border-radius:8px}.icon-grid-button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border:2px solid transparent;border-radius:6px;background:transparent;cursor:pointer;transition:all .2s}.icon-grid-button[_ngcontent-%COMP%]:hover{background:var(--smoke-1);transform:translateY(-2px)}.icon-grid-button.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:var(--primary-light)}.color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:6px;max-height:120px;overflow-y:auto;padding:8px;background:var(--smoke-0);border-radius:8px}.color-grid-button[_ngcontent-%COMP%]{width:30px;height:30px;border:2px solid transparent;border-radius:50%;cursor:pointer;transition:all .2s}.color-grid-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.color-grid-button.selected[_ngcontent-%COMP%]{border-color:var(--dark);transform:scale(1.1);box-shadow:0 2px 8px #0003}.chip.warning[_ngcontent-%COMP%]{background:#ffa726;color:#fff;font-size:12px;padding:4px 8px;border-radius:12px;display:inline-flex;align-items:center;gap:4px}.icon-button.danger[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.icon-button.danger[_ngcontent-%COMP%]:hover{background:#ff5252}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:8px;border-radius:6px;transition:background .2s}.checkbox-label[_ngcontent-%COMP%]:hover{background:var(--smoke-0)}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;border-radius:4px;border:2px solid var(--gray-3);cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--primary);border-color:var(--primary)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:var(--smoke-0);border-radius:12px;border:2px dashed var(--gray-3)}@media (max-width: 768px){.modal-container.modal-md[_ngcontent-%COMP%]{width:95%;margin:20px auto}.icon-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.color-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}"]})};export{$ as AlcoholicBeverages};
