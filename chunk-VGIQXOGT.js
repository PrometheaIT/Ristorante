import{a as de}from"./chunk-JA4P7KVP.js";import{a as ue}from"./chunk-A3NX6F26.js";import{a as _e}from"./chunk-S2P7I77R.js";import{a as pe}from"./chunk-GKNZLVDN.js";import{a as me}from"./chunk-UCL3U7HJ.js";import{b as X,d as Z,e as ee,g as te,h as ie,i as ne,o as re,p as ae,q as oe,t as se,v as le}from"./chunk-Y4TUQNZC.js";import{a as ce}from"./chunk-7V5YPNIB.js";import{a as K}from"./chunk-KNL3CWA3.js";import{d as L,e as U,f as Q,h as j,i as G,j as H,k as Y,t as J}from"./chunk-DCWKKS33.js";import{$b as M,Db as p,Eb as d,La as l,Lb as D,Mb as B,Nb as N,Pb as k,Qb as o,Rb as w,Sb as v,Tb as R,Ub as V,Vb as f,Wb as x,Xb as S,_b as I,a as F,ab as W,b as z,bc as C,cc as $,ea as O,f as g,fb as h,g as q,ja as u,ka as m,qb as _,rb as n,sb as a,tb as P,zb as T}from"./chunk-K5RDB55Y.js";var ve=()=>[1,2,3,4,5,6,7,8,9,10];function be(c,t){if(c&1&&(n(0,"option",43),o(1),a()),c&2){let e=t.$implicit;_("ngValue",e),l(),w(e.name)}}function he(c,t){if(c&1&&(n(0,"div",51)(1,"small"),o(2),a()()),c&2){let e=d().$implicit;l(2),v("Pren: ",e.currentReservation.customer_name)}}function fe(c,t){if(c&1&&(n(0,"div",51)(1,"small"),o(2),a()()),c&2){let e=d().$implicit;l(2),v("Ord: ",e.currentOrder.order_items==null?null:e.currentOrder.order_items.length," piatti")}}function xe(c,t){if(c&1){let e=T();n(0,"div",44),p("click",function(){let r=u(e).$implicit,s=d();return m(s.onTableClick(r))}),n(1,"div",45)(2,"div",46),o(3),a(),n(4,"div",47)(5,"div",48),o(6),a(),n(7,"div",49),o(8),a()(),h(9,he,3,1,"div",50)(10,fe,3,1,"div",50),a()()}if(c&2){let e=t.$implicit,i=d();k(i.getTableClass(e)),_("ngStyle",i.getTableStyle(e.table)),l(3),w(e.table.table_number),l(3),v("",e.table.capacity," p"),l(),k(i.getStatusColorClass(e.status)),l(),v(" ",i.getStatusText(e.status)," "),l(),_("ngIf",e.currentReservation),l(),_("ngIf",e.currentOrder)}}function Se(c,t){c&1&&(n(0,"div",52)(1,"span",5),o(2,"search_off"),a(),n(3,"h3"),o(4,"Nessun tavolo trovato"),a(),n(5,"p",6),o(6,"Modifica i filtri di ricerca"),a()())}function Te(c,t){if(c&1){let e=T();n(0,"div",65)(1,"button",26),p("click",function(){u(e);let r=d(2);return m(r.openManualReservationModal())}),n(2,"span",5),o(3,"event"),a(),o(4," Crea Prenotazione "),a(),n(5,"button",66),p("click",function(){u(e);let r=d(2);return m(r.openCreateOrderModal())}),n(6,"span",5),o(7,"restaurant"),a(),o(8," Crea Ordine "),a()()}}function we(c,t){if(c&1){let e=T();n(0,"div",65)(1,"button",26),p("click",function(){u(e);let r=d(2);return m(r.openEditReservationModal())}),n(2,"span",5),o(3,"edit"),a(),o(4," Modifica Prenotazione "),a(),n(5,"button",66),p("click",function(){u(e);let r=d(2);return m(r.openCreateOrderModal())}),n(6,"span",5),o(7,"check"),a(),o(8," Conferma Arrivo "),a()()}}function ye(c,t){if(c&1){let e=T();n(0,"div",65)(1,"button",26),p("click",function(){u(e);let r=d(2);return m(r.openCreateOrderModal())}),n(2,"span",5),o(3,"add"),a(),o(4," Aggiungi Piatti "),a(),n(5,"button",42),p("click",function(){u(e);let r=d(2);return m(r.openOrderDetails())}),n(6,"span",5),o(7,"receipt"),a(),o(8," Dettagli Ordine "),a(),n(9,"button",67),p("click",function(){u(e);let r=d(2);return m(r.closeOrderAndCreateBill())}),n(10,"span",5),o(11,"receipt_long"),a(),o(12," Chiudi Conto "),a()()}}function Oe(c,t){if(c&1){let e=T();n(0,"div",68)(1,"button",69),p("click",function(){u(e);let r=d(2);return m(r.freeTableManually())}),n(2,"span",5),o(3,"lock_open"),a(),o(4," Libera Tavolo "),a()()}}function Me(c,t){if(c&1){let e=T();n(0,"div",53),p("click",function(){u(e);let r=d();return m(r.deselectTable())}),n(1,"div",54),p("click",function(r){return u(e),m(r.stopPropagation())}),n(2,"div",55)(3,"h2",56),o(4),a(),n(5,"button",57),p("click",function(){u(e);let r=d();return m(r.deselectTable())}),n(6,"span",5),o(7,"close"),a()()(),n(8,"div",58)(9,"div",59)(10,"div",60)(11,"span",61),o(12),a()(),n(13,"div",62),h(14,Te,9,0,"div",63)(15,we,9,0,"div",63)(16,ye,13,0,"div",63)(17,Oe,5,0,"div",64),a()()()()()}if(c&2){let e=d();l(4),v("Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number),l(7),k(e.getStatusColorClass((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")),l(),v(" ",e.getStatusText((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")," "),l(2),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="free"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="reserved"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="occupied"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)!=="free")}}function Ce(c,t){if(c&1&&(n(0,"option",87),o(1),a()),c&2){let e=t.$implicit,i=d(2);_("value",e)("disabled",i.selectedTable&&e>i.selectedTable.capacity),l(),V(" ",e," ",e===1?"persona":"persone"," ",i.selectedTable&&e>i.selectedTable.capacity?" (Troppe persone)":""," ")}}function Ee(c,t){if(c&1){let e=T();n(0,"div",70),p("click",function(){u(e);let r=d();return m(r.closeManualReservationModal())}),n(1,"div",71),p("click",function(r){return u(e),m(r.stopPropagation())}),n(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"event"),a(),o(6),a(),n(7,"button",57),p("click",function(){u(e);let r=d();return m(r.closeManualReservationModal())}),n(8,"span",5),o(9,"close"),a()()(),n(10,"div",58)(11,"form",72,0),p("ngSubmit",function(){u(e);let r=d();return m(r.createManualReservation())}),n(13,"div",73)(14,"label",16),o(15,"Nome Cliente *"),a(),n(16,"input",74),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.customer_name,r)||(s.manualReservationData.customer_name=r),m(r)}),a()(),n(17,"div",73)(18,"label",16),o(19,"Telefono *"),a(),n(20,"input",75),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.customer_phone,r)||(s.manualReservationData.customer_phone=r),m(r)}),a()(),n(21,"div",76)(22,"div",73)(23,"label",16),o(24,"Data *"),a(),n(25,"input",77),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.reservation_date,r)||(s.manualReservationData.reservation_date=r),m(r)}),a()(),n(26,"div",73)(27,"label",16),o(28,"Orario *"),a(),n(29,"input",78),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.reservation_time,r)||(s.manualReservationData.reservation_time=r),m(r)}),a()()(),n(30,"div",73)(31,"label",16),o(32,"Numero Persone *"),a(),n(33,"select",79),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.party_size,r)||(s.manualReservationData.party_size=r),m(r)}),h(34,Ce,2,5,"option",80),a(),n(35,"div",81),o(36),a()(),n(37,"div",73)(38,"label",16),o(39,"Note Speciali"),a(),n(40,"textarea",82),S("ngModelChange",function(r){u(e);let s=d();return x(s.manualReservationData.special_requests,r)||(s.manualReservationData.special_requests=r),m(r)}),a()()()(),n(41,"div",83)(42,"div",25)(43,"div",84)(44,"button",85),p("click",function(){u(e);let r=d();return m(r.closeManualReservationModal())}),o(45," Annulla "),a(),n(46,"button",86),p("click",function(){u(e);let r=d();return m(r.createManualReservation())}),n(47,"span",5),o(48,"add"),a(),o(49," Crea Prenotazione "),a()()()()()()}if(c&2){let e=D(12),i=d();l(6),v(" Nuova Prenotazione - Tavolo ",i.selectedTable==null?null:i.selectedTable.table_number," "),l(10),f("ngModel",i.manualReservationData.customer_name),l(4),f("ngModel",i.manualReservationData.customer_phone),l(5),f("ngModel",i.manualReservationData.reservation_date),l(4),f("ngModel",i.manualReservationData.reservation_time),l(4),f("ngModel",i.manualReservationData.party_size),l(),_("ngForOf",I(10,ve)),l(2),v(" Capacit\xE0 massima tavolo: ",(i.selectedTable==null?null:i.selectedTable.capacity)||0," persone "),l(4),f("ngModel",i.manualReservationData.special_requests),l(6),_("disabled",!e.valid)}}function Pe(c,t){if(c&1&&(n(0,"option",87),o(1),a()),c&2){let e=t.$implicit,i=d(2);_("value",e)("disabled",i.selectedTable&&e>i.selectedTable.capacity),l(),V(" ",e," ",e===1?"persona":"persone"," ",i.selectedTable&&e>i.selectedTable.capacity?" (Troppe persone)":""," ")}}function ke(c,t){if(c&1){let e=T();n(0,"button",89),p("click",function(){u(e);let r=d(2);return m(r.deleteReservation())}),n(1,"span",5),o(2,"delete"),a(),o(3," Elimina Prenotazione "),a()}}function Re(c,t){if(c&1){let e=T();n(0,"div",70),p("click",function(){u(e);let r=d();return m(r.closeEditReservationModal())}),n(1,"div",71),p("click",function(r){return u(e),m(r.stopPropagation())}),n(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"edit"),a(),o(6),a(),n(7,"button",57),p("click",function(){u(e);let r=d();return m(r.closeEditReservationModal())}),n(8,"span",5),o(9,"close"),a()()(),n(10,"div",58)(11,"form",72,0),p("ngSubmit",function(){u(e);let r=d();return m(r.updateReservation())}),n(13,"div",73)(14,"label",16),o(15,"Nome Cliente *"),a(),n(16,"input",74),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.customer_name,r)||(s.editingReservation.customer_name=r),m(r)}),a()(),n(17,"div",73)(18,"label",16),o(19,"Telefono *"),a(),n(20,"input",75),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.customer_phone,r)||(s.editingReservation.customer_phone=r),m(r)}),a()(),n(21,"div",76)(22,"div",73)(23,"label",16),o(24,"Data *"),a(),n(25,"input",77),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.reservation_date,r)||(s.editingReservation.reservation_date=r),m(r)}),a()(),n(26,"div",73)(27,"label",16),o(28,"Orario *"),a(),n(29,"input",78),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.reservation_time,r)||(s.editingReservation.reservation_time=r),m(r)}),a()()(),n(30,"div",73)(31,"label",16),o(32,"Numero Persone *"),a(),n(33,"select",79),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.party_size,r)||(s.editingReservation.party_size=r),m(r)}),h(34,Pe,2,5,"option",80),a(),n(35,"div",81),o(36),a()(),n(37,"div",73)(38,"label",16),o(39,"Note Speciali"),a(),n(40,"textarea",82),S("ngModelChange",function(r){u(e);let s=d();return x(s.editingReservation.special_requests,r)||(s.editingReservation.special_requests=r),m(r)}),a()()()(),n(41,"div",83)(42,"div",25),h(43,ke,4,0,"button",88),n(44,"button",85),p("click",function(){u(e);let r=d();return m(r.closeEditReservationModal())}),o(45," Annulla "),a(),n(46,"button",86),p("click",function(){u(e);let r=d();return m(r.updateReservation())}),n(47,"span",5),o(48,"save"),a(),o(49," Salva Modifiche "),a()()()()()}if(c&2){let e=D(12),i=d();l(6),v(" Modifica Prenotazione - Tavolo ",i.selectedTable==null?null:i.selectedTable.table_number," "),l(10),f("ngModel",i.editingReservation.customer_name),l(4),f("ngModel",i.editingReservation.customer_phone),l(5),f("ngModel",i.editingReservation.reservation_date),l(4),f("ngModel",i.editingReservation.reservation_time),l(4),f("ngModel",i.editingReservation.party_size),l(),_("ngForOf",I(11,ve)),l(2),v(" Capacit\xE0 massima tavolo: ",(i.selectedTable==null?null:i.selectedTable.capacity)||0," persone "),l(4),f("ngModel",i.editingReservation.special_requests),l(3),_("ngIf",i.isReservationDeletable(i.editingReservation)),l(3),_("disabled",!e.valid)}}function Fe(c,t){if(c&1&&(n(0,"div",108),o(1),M(2,"slice"),a()),c&2){let e=d().$implicit;l(),R(" ",$(2,2,e.description,0,80),"",e.description.length>80?"...":""," ")}}function De(c,t){if(c&1){let e=T();n(0,"div",104),p("click",function(){let r=u(e).$implicit,s=d(2);return m(s.addDishAndContinue(r))}),n(1,"div",105)(2,"strong"),o(3),a(),n(4,"span",106),o(5),M(6,"number"),a()(),h(7,Fe,3,6,"div",107),a()}if(c&2){let e=t.$implicit;l(3),w(e.name),l(2),v("\u20AC",C(6,3,e.base_price,"1.2-2")),l(2),_("ngIf",e.description)}}function Ve(c,t){if(c&1&&(n(0,"div",109)(1,"div",110)(2,"span",5),o(3,"event"),a(),n(4,"div",111)(5,"span",112),o(6,"Prenotazione:"),a(),n(7,"span",113),o(8),a()()()()),c&2){let e=d(2);l(8),R(" ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.customer_name," - ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.party_size," persone ")}}function Ie(c,t){if(c&1){let e=T();n(0,"div",116)(1,"div",105)(2,"strong"),o(3),a(),n(4,"span",117),o(5),M(6,"number"),a()(),n(7,"div",118)(8,"button",119),p("click",function(){let r=u(e).$implicit,s=d(3);return m(s.updateOrderItemQuantity(r,-1))}),o(9,"-"),a(),n(10,"span",120),o(11),a(),n(12,"button",119),p("click",function(){let r=u(e).$implicit,s=d(3);return m(s.updateOrderItemQuantity(r,1))}),o(13,"+"),a(),n(14,"button",121),p("click",function(){let r=u(e).index,s=d(3);return m(s.removeOrderItem(r))}),n(15,"span",5),o(16,"delete"),a()()()()}if(c&2){let e=t.$implicit;l(3),w(e.dish_name),l(2),v("\u20AC",C(6,3,e.total_price,"1.2-2")),l(6),w(e.quantity)}}function Ae(c,t){if(c&1&&(n(0,"div",114),h(1,Ie,17,6,"div",115),a()),c&2){let e=d(2);l(),_("ngForOf",e.newOrderData.items)}}function ze(c,t){c&1&&(n(0,"div",122)(1,"p",6),o(2,"Nessun piatto aggiunto"),a(),n(3,"p",123),o(4,"Clicca sui piatti dal menu per aggiungerli"),a()())}function qe(c,t){if(c&1&&(n(0,"div",124)(1,"strong"),o(2),M(3,"number"),a()()),c&2){let e=d(2);l(2),v("Totale: \u20AC",C(3,1,e.orderTotal,"1.2-2"))}}function We(c,t){c&1&&(n(0,"div",125)(1,"p",123)(2,"span",5),o(3,"info"),a(),o(4," Clicca sui piatti dal menu per aggiungerli all'ordine "),a()())}function Be(c,t){if(c&1){let e=T();n(0,"div",70),p("click",function(){u(e);let r=d();return m(r.closeCreateOrderModal())}),n(1,"div",90),p("click",function(r){return u(e),m(r.stopPropagation())}),n(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"restaurant"),a(),o(6),a(),n(7,"button",57),p("click",function(){u(e);let r=d();return m(r.closeCreateOrderModal())}),n(8,"span",5),o(9,"close"),a()()(),n(10,"div",58)(11,"div",91)(12,"div",92)(13,"h4",93)(14,"span",5),o(15,"restaurant_menu"),a(),o(16," Menu Disponibile "),a(),n(17,"div",94),h(18,De,8,6,"div",95),a()(),n(19,"div",96)(20,"h4",93)(21,"span",5),o(22,"receipt"),a(),o(23," Riepilogo Ordine "),a(),h(24,Ve,9,2,"div",97)(25,Ae,2,1,"div",98)(26,ze,5,0,"div",99)(27,qe,4,4,"div",100),n(28,"div",101)(29,"button",102),p("click",function(){u(e);let r=d();return m(r.addDishesToOrder())}),n(30,"span",5),o(31,"add"),a(),o(32," Aggiungi "),a(),n(33,"button",26),p("click",function(){u(e);let r=d();return m(r.closeCreateOrderModal())}),n(34,"span",5),o(35,"check"),a(),o(36," Chiudi "),a()(),h(37,We,5,0,"div",103),a()()()()()}if(c&2){let e=d();l(6),R(" ",e.editingOrder?e.isAddingToExistingOrder?"Aggiungi all'Ordine":"Modifica Ordine":"Nuovo Ordine"," - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number," "),l(12),_("ngForOf",e.dishes),l(6),_("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation),l(),_("ngIf",e.newOrderData.items.length>0),l(),_("ngIf",e.newOrderData.items.length===0),l(),_("ngIf",e.newOrderData.items.length>0),l(2),_("disabled",e.newOrderData.items.length===0),l(8),_("ngIf",e.newOrderData.items.length===0)}}function Ne(c,t){if(c&1&&(n(0,"div",131)(1,"span",132),o(2),a(),n(3,"span",133),o(4),a(),n(5,"span",117),o(6),M(7,"number"),a()()),c&2){let e=t.$implicit;l(2),w(e.dish_name||"Piatto"),l(2),v("x",e.quantity),l(2),v("\u20AC",C(7,3,e.total_price,"1.2-2"))}}function $e(c,t){if(c&1&&(n(0,"div")(1,"div",128)(2,"div",110)(3,"span",5),o(4,"info"),a(),n(5,"div",111)(6,"span",112),o(7,"Stato:"),a(),n(8,"span",113),o(9),a()()(),n(10,"div",110)(11,"span",5),o(12,"schedule"),a(),n(13,"div",111)(14,"span",112),o(15,"Creato il:"),a(),n(16,"span",113),o(17),M(18,"date"),a()()()(),n(19,"div",129)(20,"h4",93)(21,"span",5),o(22,"restaurant_menu"),a(),o(23," Piatti Ordinati "),a(),h(24,Ne,8,6,"div",130),a(),n(25,"div",124)(26,"strong"),o(27),M(28,"number"),a()()()),c&2){let e=t.ngIf,i=d(2);l(9),w(e.status),l(8),w(C(18,4,e.created_at,"dd/MM/yyyy HH:mm")),l(7),_("ngForOf",e.order_items),l(3),v("Totale: \u20AC",C(28,7,i.getCurrentOrderTotal(),"1.2-2"))}}function Le(c,t){if(c&1){let e=T();n(0,"div",70),p("click",function(){u(e);let r=d();return m(r.closeOrderDetailsModal())}),n(1,"div",71),p("click",function(r){return u(e),m(r.stopPropagation())}),n(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"receipt_long"),a(),o(6),a(),n(7,"button",57),p("click",function(){u(e);let r=d();return m(r.closeOrderDetailsModal())}),n(8,"span",5),o(9,"close"),a()()(),n(10,"div",58),h(11,$e,29,10,"div",126),a(),n(12,"div",83)(13,"button",66),p("click",function(){u(e);let r=d();return m(r.closeOrderAndCreateBill())}),n(14,"span",5),o(15,"receipt"),a(),o(16," Chiudi Conto e Stampa Ricevuta "),a(),n(17,"button",127),p("click",function(){u(e);let r=d();return m(r.freeTableManually())}),n(18,"span",5),o(19,"clear"),a(),o(20," Libera Tavolo (Senza Chiudere) "),a()()()()}if(c&2){let e=d();l(6),v(" Dettagli Ordine - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number," "),l(5),_("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)}}var ge=class c{floorPlanService=O(de);tableService=O(ue);reservationService=O(me);orderService=O(_e);dishService=O(ce);authService=O(K);router=O(J);shiftService=O(pe);floorPlans=[];currentFloorPlan=null;tables=[];tableStatuses=[];reservations=[];activeOrders=[];dishes=[];editingOrder=null;showEditReservationModal=!1;editingReservation=null;isFullscreen=!1;get freeTablesCount(){return this.tableStatuses.filter(t=>t.status==="free").length}get reservedTablesCount(){return this.tableStatuses.filter(t=>t.status==="reserved").length}get occupiedTablesCount(){return this.tableStatuses.filter(t=>t.status==="occupied").length}get totalTablesCount(){return this.tableStatuses.length}get orderTotal(){return this.newOrderData.items.reduce((t,e)=>t+e.total_price,0)}selectedTable=null;selectedTableStatus=null;showManualReservationModal=!1;showCreateOrderModal=!1;showOrderDetailsModal=!1;showQuickActionsModal=!1;manualReservationData={customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",party_size:2,special_requests:""};newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]};searchTerm="";statusFilter="all";isAddingToExistingOrder=!1;subscriptions=new q;ngOnInit(){return g(this,null,function*(){console.log("\u{1F3C1} TableMap initialized"),yield this.loadData(),this.setupSubscriptions(),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this))})}handleFullscreenChange(){this.isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}ngOnDestroy(){this.subscriptions.unsubscribe(),document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this))}loadData(){return g(this,null,function*(){if(!(yield this.checkAuth())){alert("Errore di autenticazione. Per favore, effettua il login nuovamente.");return}try{console.log("\u{1F504} Loading all data..."),yield Promise.all([this.floorPlanService.loadFloorPlans(),this.tableService.loadTables(),this.dishService.loadDishes(),this.loadReservations(),this.loadActiveOrders()]),yield this.checkAndUpdateExpiredReservations(),this.updateTableStatuses(),console.log("\u2705 All data loaded successfully"),this.debugCurrentState()}catch(e){console.error("\u{1F4A5} Error loading data:",e)}})}debugCurrentState(){if(console.log("=== DEBUG CURRENT STATE ==="),console.log("Selected Table:",this.selectedTable?.table_number),console.log("Selected Table Status:",this.selectedTableStatus),console.log("Editing Order:",this.editingOrder),console.log("Active Orders:",this.activeOrders.length),console.log("Table Statuses:",this.tableStatuses.length),this.selectedTable){let t=this.activeOrders.filter(e=>e.table_id===this.selectedTable?.id);console.log("Orders for this table:",t)}console.log("==========================")}setupSubscriptions(){this.subscriptions.add(this.floorPlanService.floorPlans$.subscribe(t=>{this.floorPlans=t,t.length>0&&!this.currentFloorPlan&&(this.currentFloorPlan=t[0],this.loadTablesForFloorPlan())})),this.subscriptions.add(this.tableService.tables$.subscribe(()=>{this.loadTablesForFloorPlan()})),this.subscriptions.add(this.dishService.dishes$.subscribe(t=>{this.dishes=t.filter(e=>e.status==="available")}))}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[],this.tableStatuses=[];return}this.tables=this.tableService.getTablesByFloorPlan(this.currentFloorPlan.id),this.updateTableStatuses()}loadReservations(){return g(this,null,function*(){try{let t=new Date().toISOString().split("T")[0],{data:e,error:i}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",t).in("status",["pending","confirmed"]);if(i)throw i;this.reservations=e||[]}catch(t){console.error("\u274C Error loading reservations:",t)}})}updateTableStatuses(){console.log("\u{1F504} Updating table statuses..."),this.tableStatuses=this.tables.map(i=>{let r=this.reservations.find(y=>y.table_id===i.id&&this.isReservationActive(y)),s=this.activeOrders.find(y=>y.table_id===i.id&&this.isOrderActive(y)),b="free";return s?(b="occupied",console.log(`\u{1F534} Table ${i.table_number} is OCCUPIED by order ${s.id} (Status: ${s.status})`)):r?(b="reserved",console.log(`\u{1F7E1} Table ${i.table_number} is RESERVED`)):console.log(`\u{1F7E2} Table ${i.table_number} is FREE`),{table:i,status:b,currentOrder:s,currentReservation:r}}),console.log("\u2705 Table statuses updated");let t=this.tableStatuses.filter(i=>i.status==="free").length,e=this.tableStatuses.filter(i=>i.status==="occupied").length;console.log(`\u{1F4CA} Final state - Free: ${t}, Occupied: ${e}`)}freeTableManually(){return g(this,null,function*(){if(!(!this.selectedTable||!confirm(`Sei sicuro di voler liberare manualmente il tavolo ${this.selectedTable.table_number}?`)))try{if(this.selectedTableStatus?.currentOrder&&confirm("Il tavolo ha un ordine attivo. Vuoi chiuderlo prima di liberare il tavolo?")){yield this.closeOrderAndCreateBill();return}console.log("\u{1F504} Freeing table manually:",this.selectedTable.table_number),this.closeOrderDetailsModal(),this.closeCreateOrderModal(),this.closeManualReservationModal(),this.deselectTable(),yield this.loadActiveOrders(),yield this.loadReservations(),this.updateTableStatuses(),console.log("\u2705 Table freed manually"),alert(`\u2705 Tavolo ${this.selectedTable.table_number} liberato manualmente!`)}catch(e){console.error("\u274C Error freeing table manually:",e),alert("Errore durante la liberazione del tavolo")}})}isOrderActive(t){if(!t||!t.status)return!1;let i=["pending","confirmed","in_progress","preparing","ready","active","open"].includes(t.status);return console.log(`\u{1F50D} Order ${t.id} status: "${t.status}" - Active: ${i}`),i}isReservationActive(t){let e=new Date,i=new Date(`${t.reservation_date}T${t.reservation_time}`),r=new Date(i.getTime()+10800*1e3);return["pending","confirmed"].includes(t.status)&&e>=i&&e<=r}checkAndUpdateExpiredReservations(){return g(this,null,function*(){try{let t=new Date().toISOString().split("T")[0],{data:e,error:i}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",t).in("status",["pending","confirmed"]);if(i)throw i;for(let r of e||[])if(!this.isReservationActive(r)){let{error:s}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",r.id);s&&console.error("Error updating expired reservation:",s)}}catch(t){console.error("\u274C Error checking expired reservations:",t)}})}onTableClick(t){this.selectedTable=t.table,this.selectedTableStatus=t,this.showQuickActionsModal=!0}deselectTable(){this.selectedTable=null,this.selectedTableStatus=null,this.showQuickActionsModal=!1}openManualReservationModal(){if(!this.selectedTable)return;let t=new Date;this.manualReservationData={customer_name:"",customer_phone:"",reservation_date:t.toISOString().split("T")[0],reservation_time:t.toTimeString().split(" ")[0].substring(0,5),party_size:this.selectedTable.capacity||2,special_requests:""},this.showQuickActionsModal=!1,this.showManualReservationModal=!0}closeManualReservationModal(){this.showManualReservationModal=!1}createManualReservation(){return g(this,null,function*(){if(this.selectedTable){if(this.manualReservationData.party_size>this.selectedTable.capacity){alert(`Il tavolo pu\xF2 ospitare al massimo ${this.selectedTable.capacity} persone.`);return}try{let t={restaurant_id:this.selectedTable.restaurant_id,table_id:this.selectedTable.id,reservation_date:this.manualReservationData.reservation_date,reservation_time:this.manualReservationData.reservation_time,party_size:this.manualReservationData.party_size,special_requests:this.manualReservationData.special_requests,status:"confirmed",customer_id:null,customer_name:this.manualReservationData.customer_name,customer_phone:this.manualReservationData.customer_phone};console.log("\u{1F4DD} Creating manual reservation:",t);let{data:e,error:i}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").insert(t).select().single();if(i)throw console.error("\u274C Error creating manual reservation:",i),i;console.log("\u2705 Manual reservation created:",e),this.closeManualReservationModal(),yield this.loadReservations(),this.updateTableStatuses(),alert("Prenotazione creata con successo!")}catch(t){console.error("\u274C Error creating manual reservation:",t),alert("Errore durante la creazione della prenotazione: "+t.message)}}})}closeCreateOrderModal(){if(this.newOrderData.items.length>0&&!this.editingOrder&&confirm("Ci sono piatti non salvati. Vuoi salvarli prima di chiudere?")){this.addDishesToOrder();return}this.showCreateOrderModal=!1,this.editingOrder=null,this.newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]},this.loadActiveOrders(),this.updateTableStatuses()}openCreateOrderModal(){this.selectedTable&&(this.selectedTableStatus?.currentOrder?(this.editingOrder=this.selectedTableStatus.currentOrder,this.newOrderData={customer_name:"",customer_phone:"",order_type:this.editingOrder.order_type||"dine_in",notes:this.editingOrder.customer_notes||"",items:[]}):(this.editingOrder=null,this.newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]}),this.showQuickActionsModal=!1,this.showCreateOrderModal=!0)}addDishToOrder(t){let e=this.newOrderData.items.find(i=>i.dish_id===t.id);e?(e.quantity+=1,e.total_price=e.quantity*e.unit_price):this.newOrderData.items.push({dish_id:t.id,dish_name:t.name,quantity:1,unit_price:t.base_price,total_price:t.base_price,notes:""})}removeOrderItem(t){this.newOrderData.items.splice(t,1)}updateOrderItemQuantity(t,e){t.quantity=Math.max(1,t.quantity+e),t.total_price=t.quantity*t.unit_price}createOrder(){return g(this,null,function*(){if(!(!this.selectedTable||this.newOrderData.items.length===0))try{let t={restaurant_id:this.selectedTable.restaurant_id,customer_id:this.authService.currentUserValue?.id||"00000000-0000-0000-0000-000000000000",order_number:this.orderService.generateOrderNumber(),order_type:this.newOrderData.order_type,status:"pending",customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,total_amount:this.orderTotal,table_id:this.selectedTable.id,reservation_id:this.selectedTableStatus?.currentReservation?.id||null},e;if(this.editingOrder){if(e=this.editingOrder.id,!(yield this.orderService.updateOrder(e,{customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,total_amount:this.orderTotal})))throw new Error("Failed to update order");if(!(yield this.orderService.deleteOrderItems(e)))throw new Error("Failed to delete order items")}else{let s=yield this.orderService.createOrder(t);if(!s)throw new Error("Failed to create order with any status");e=s.id,console.log("\u2705 Order created with status:",s.status)}let i=this.newOrderData.items.map(s=>({order_id:e,dish_id:s.dish_id,quantity:s.quantity,unit_price:s.unit_price,total_price:s.total_price,item_notes:s.notes,dish_name:s.dish_name}));if(!(yield this.orderService.createOrderItems(i)))throw new Error("Failed to create order items");console.log("\u2705 Order saved successfully"),this.closeCreateOrderModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),this.isAddingToExistingOrder?alert("Piatti aggiunti all'ordine con successo!"):this.showOrderDetailsModal=!0}catch(t){console.error("\u274C Error saving order:",t),alert("Errore durante il salvataggio dell'ordine: "+t.message)}})}addDishAndContinue(t){this.addDishToOrder(t)}loadActiveOrders(){return g(this,null,function*(){try{console.log("\u{1F504} Loading active orders...");let t=yield this.orderService.forceRefreshActiveOrders();Array.isArray(t)?(this.activeOrders=t,console.log("\u2705 Active orders loaded:",this.activeOrders.length),this.activeOrders.forEach(e=>{let i=this.isOrderActive(e);console.log(`\u{1F4CA} Order ${e.id} - Status: ${e.status} - Table: ${e.table_id} - Active: ${i}`)})):this.activeOrders=[]}catch(t){console.error("\u274C Error loading active orders:",t),this.activeOrders=[]}})}verifyTableFreed(t){return g(this,null,function*(){if(console.log("\u{1F50D} Verifying table status after order closure..."),!t){console.log("\u274C No table ID provided for verification");return}try{yield new Promise(i=>setTimeout(i,1e3)),yield this.loadActiveOrders();let e=this.activeOrders.filter(i=>i.table_id===t&&this.isOrderActive(i));console.log(`\u{1F4CA} Orders still on table ${t}:`,e.length),e.length===0?(console.log("\u2705 Table successfully freed!"),this.updateTableStatuses()):(console.log("\u274C Table still has active orders:",e),console.log("Orders details:",e.map(i=>({id:i.id,status:i.status}))),yield this.forceFreeTableSpecific(t))}catch(e){console.error("\u274C Error verifying table freedom:",e)}})}openOrderDetails(){this.selectedTableStatus?.currentOrder&&(this.showQuickActionsModal=!1,this.showOrderDetailsModal=!0)}closeOrderDetailsModal(){this.showOrderDetailsModal=!1}closeOrder(){return g(this,null,function*(){yield this.closeOrderAndCreateBill()})}updateInventoryFromOrder(t){return g(this,null,function*(){try{console.log("\u{1F4E6} Updating inventory from order:",t.id);for(let e of t.order_items){let i=yield this.dishService.getDishById(e.dish_id);if(i&&i.ingredients_composition)for(let r of i.ingredients_composition)yield this.updateIngredientStock(r.ingredient_id,-r.quantity*e.quantity)}console.log("\u2705 Inventory updated successfully")}catch(e){console.error("\u274C Error updating inventory:",e)}})}updateIngredientStock(t,e){return g(this,null,function*(){try{let{data:i,error:r}=yield this.orderService.supabaseService.getSupabaseClient().from("ingredients").select("current_stock").eq("id",t).single();if(r)throw r;let s=Math.max(0,(i.current_stock||0)+e),{error:b}=yield this.orderService.supabaseService.getSupabaseClient().from("ingredients").update({current_stock:s,updated_at:new Date().toISOString()}).eq("id",t);if(b)throw b;console.log(`\u{1F4CA} Updated ingredient ${t} stock: ${s}`)}catch(i){throw console.error(`\u274C Error updating ingredient ${t}:`,i),i}})}getTableClass(t){let e=["table-element",`shape-${t.table.shape}`];return e.push(t.status),this.selectedTable?.id===t.table.id&&e.push("selected"),e.join(" ")}getTableStyle(t){let e=t.shape==="rectangle"||t.shape==="square"?"8px":"50%";return{left:t.position_x+"px",top:t.position_y+"px",width:t.width+"px",height:t.height+"px","border-radius":e,transform:`rotate(${t.rotation}deg)`}}getStatusText(t){return{free:"Libero",reserved:"Prenotato",occupied:"Occupato",needs_attention:"Da controllare"}[t]||t}getFilteredTables(){let t=this.tableStatuses;return this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.searchTerm&&(t=t.filter(e=>e.table.table_number.toLowerCase().includes(this.searchTerm.toLowerCase())||e.table.table_name.toLowerCase().includes(this.searchTerm.toLowerCase()))),t}onFloorPlanSelect(t){this.currentFloorPlan=t,this.loadTablesForFloorPlan(),this.deselectTable()}formatTime(t){return t?t.substring(0,5):""}getCurrentOrderTotal(){return this.selectedTableStatus?.currentOrder?.order_items?this.selectedTableStatus.currentOrder.order_items.reduce((t,e)=>t+e.total_price,0):0}getStatusColorClass(t){return`status-${t}`}createNewOrder(){return g(this,null,function*(){if(!(!this.selectedTable||this.newOrderData.items.length===0))try{let t={restaurant_id:this.selectedTable.restaurant_id,customer_id:this.authService.currentUserValue?.id||"00000000-0000-0000-0000-000000000000",order_number:this.orderService.generateOrderNumber(),order_type:"dine_in",status:"pending",customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,tax_amount:0,discount_amount:0,total_amount:this.orderTotal,table_id:this.selectedTable.id,reservation_id:this.selectedTableStatus?.currentReservation?.id||null};console.log("\u{1F4DD} Creating new order:",t);let e=yield this.orderService.createOrder(t);if(!e)throw new Error("Failed to create order");let i=this.newOrderData.items.map(s=>({order_id:e.id,dish_id:s.dish_id,quantity:s.quantity,unit_price:s.unit_price,item_notes:s.notes}));if(!(yield this.orderService.createOrderItems(i)))throw new Error("Failed to create order items");console.log("\u2705 New order created successfully"),this.closeCreateOrderModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),alert("Ordine creato con successo!")}catch(t){console.error("\u274C Error creating new order:",t),alert("Errore durante la creazione dell'ordine: "+t.message)}})}addToExistingOrder(){return g(this,null,function*(){if(!(!this.editingOrder||this.newOrderData.items.length===0))try{let t=this.editingOrder.id,e=this.editingOrder.total_amount||0,i=this.newOrderData.items.reduce((E,A)=>E+A.unit_price*A.quantity,0),r=e+i,s=this.newOrderData.items.map(E=>({order_id:t,dish_id:E.dish_id,quantity:E.quantity,unit_price:E.unit_price,item_notes:E.notes}));if(!(yield this.orderService.createOrderItems(s)))throw new Error("Failed to add order items");if(!(yield this.orderService.updateOrder(t,{subtotal:r,total_amount:r,updated_at:new Date().toISOString()})))throw new Error("Failed to update order total");console.log("\u2705 Items added to existing order"),this.closeCreateOrderModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),alert("Piatti aggiunti all'ordine con successo!")}catch(t){console.error("\u274C Error adding to existing order:",t),alert("Errore durante l'aggiunta dei piatti: "+t.message)}})}updateOrder(){return g(this,null,function*(){if(!(!this.editingOrder||this.newOrderData.items.length===0))try{let t=this.editingOrder.id;if(!(yield this.orderService.deleteOrderItems(t)))throw new Error("Failed to delete existing order items");let i=this.newOrderData.items.map(b=>({order_id:t,dish_id:b.dish_id,quantity:b.quantity,unit_price:b.unit_price,item_notes:b.notes}));if(!(yield this.orderService.createOrderItems(i)))throw new Error("Failed to create new order items");if(!(yield this.orderService.updateOrder(t,{customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,total_amount:this.orderTotal,updated_at:new Date().toISOString()})))throw new Error("Failed to update order");console.log("\u2705 Order updated successfully"),this.closeCreateOrderModal(),yield this.loadActiveOrders(),this.updateTableStatuses(),alert("Ordine aggiornato con successo!")}catch(t){console.error("\u274C Error updating order:",t),alert("Errore durante l'aggiornamento dell'ordine: "+t.message)}})}continueAddingDishes(){this.newOrderData.items=[],console.log("\u{1F504} Continua ad aggiungere piatti - modal rimane aperto")}closeOrderAndCreateBill(){return g(this,null,function*(){if(!this.selectedTableStatus?.currentOrder)return;let t=this.selectedTableStatus.currentOrder.id,e=this.selectedTable?.id;if(!e){console.error("\u274C Table ID is undefined, cannot refresh table status");return}this.debugOrderFlow(t);try{if(console.log(`\u{1F9FE} Closing order ${t} for table ${this.selectedTable?.table_number}`),!(yield this.orderService.completeOrder(t)))throw new Error("Failed to complete order");console.log("\u2705 Order closed successfully");let r=yield this.getOrderWithDetails(t);if(!r)throw new Error("Failed to fetch order details for bill");let s=this.prepareBillData(r);this.showBillToUser(s),yield this.updateInventoryFromOrder(r),yield this.forceRefreshTableStatus(e),this.closeOrderDetailsModal(),this.closeCreateOrderModal(),this.deselectTable(),setTimeout(()=>{this.verifyTableFreed(e)},1500)}catch(i){console.error("\u274C Error closing order and creating bill:",i),alert("Errore durante la chiusura del conto: "+i.message)}})}forceFreeTable(){return g(this,null,function*(){try{console.log("\u{1F504} Force freeing table..."),yield new Promise(t=>setTimeout(t,500)),yield this.loadActiveOrders(),yield this.loadReservations(),this.updateTableStatuses(),this.tableStatuses=[...this.tableStatuses],console.log("\u2705 Table force-freed successfully")}catch(t){console.error("\u274C Error force freeing table:",t)}})}forceRefreshTableStatus(t){return g(this,null,function*(){console.log(`\u{1F504} Force refreshing table ${t} status...`);try{yield this.loadActiveOrders(),yield this.loadReservations(),this.updateTableStatuses(),this.tableStatuses=[...this.tableStatuses];let e=this.tableStatuses.find(i=>i.table.id===t);e&&(console.log(`\u{1F4CA} Table ${e.table.table_number} status after refresh: ${e.status}`),e.status==="free"?console.log("\u2705 Table successfully freed!"):(console.log("\u274C Table still occupied - forcing manual free"),yield this.forceFreeTableSpecific(t)))}catch(e){console.error("\u274C Error force refreshing table status:",e)}})}forceFreeTableSpecific(t){return g(this,null,function*(){console.log(`\u{1F513} Force freeing table ${t}...`);try{this.activeOrders=this.activeOrders.filter(i=>i.table_id!==t||!this.isOrderActive(i));let e=this.tableStatuses.findIndex(i=>i.table.id===t);e!==-1&&(this.tableStatuses[e]=z(F({},this.tableStatuses[e]),{status:"free",currentOrder:null})),this.tableStatuses=[...this.tableStatuses],console.log("\u2705 Table force-freed successfully")}catch(e){console.error("\u274C Error force freeing specific table:",e)}})}getOrderWithDetails(t){return g(this,null,function*(){try{let{data:e,error:i}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").select(`
          *,
          order_items (
            *,
            dishes (
              name,
              base_price,
              description
            )
          )
        `).eq("id",t).single();if(i)throw i;return e}catch(e){return console.error("\u274C Error fetching order details:",e),null}})}prepareBillData(t){if(!t)return null;let e=t.order_items.map(i=>({name:i.dishes?.name||"Piatto",quantity:i.quantity,unitPrice:i.unit_price,totalPrice:i.total_price}));return{orderNumber:t.order_number,tableNumber:this.selectedTable?.table_number,customerName:this.selectedTableStatus?.currentReservation?.customer_name||"Cliente",items:e,subtotal:t.subtotal,taxAmount:t.tax_amount||0,discountAmount:t.discount_amount||0,totalAmount:t.total_amount,createdAt:t.created_at,closedAt:new Date().toISOString()}}showBillToUser(t){if(!t)return;let e=`CONTO TAVOLO ${t.tableNumber}
`;e+=`========================
`,e+=`Ordine: ${t.orderNumber}
`,e+=`Cliente: ${t.customerName}
`,e+=`Data: ${new Date(t.closedAt).toLocaleString("it-IT")}

`,e+=`PIATTI:
`,t.items.forEach((i,r)=>{e+=`${r+1}. ${i.name} x${i.quantity}
`,e+=`   \u20AC${i.unitPrice} x ${i.quantity} = \u20AC${i.totalPrice.toFixed(2)}
`}),e+=`
`,e+=`Subtotale: \u20AC${t.subtotal.toFixed(2)}
`,t.taxAmount>0&&(e+=`IVA: \u20AC${t.taxAmount.toFixed(2)}
`),t.discountAmount>0&&(e+=`Sconto: -\u20AC${t.discountAmount.toFixed(2)}
`),e+=`TOTALE: \u20AC${t.totalAmount.toFixed(2)}
`,e+=`========================
`,e+="Grazie e arrivederci!",alert(e),this.printBill(e)}printBill(t){let e=window.open("","_blank");e&&(e.document.write(`
        <html>
          <head>
            <title>Conto Tavolo ${this.selectedTable?.table_number}</title>
            <style>
              body { font-family: monospace; font-size: 14px; padding: 20px; }
              .bill-header { text-align: center; margin-bottom: 20px; }
              .bill-items { margin: 20px 0; }
              .bill-total { border-top: 2px solid #000; padding-top: 10px; margin-top: 20px; }
            </style>
          </head>
          <body>
            <pre>${t}</pre>
          </body>
        </html>
      `),e.document.close(),e.print())}addDishesToOrder(){return g(this,null,function*(){if(!this.selectedTable||this.newOrderData.items.length===0){alert("Aggiungi almeno un piatto prima di salvare.");return}try{let t,e=!1;if(this.editingOrder)t=this.editingOrder.id;else{let s=this.shiftService.getCurrentShift(),b={restaurant_id:this.selectedTable.restaurant_id,customer_id:this.authService.currentUserValue?.id||"00000000-0000-0000-0000-000000000000",order_number:this.orderService.generateOrderNumber(),order_type:"dine_in",status:"pending",customer_notes:this.newOrderData.notes,subtotal:this.orderTotal,tax_amount:0,discount_amount:0,total_amount:this.orderTotal,table_id:this.selectedTable.id,reservation_id:this.selectedTableStatus?.currentReservation?.id||null,shift_id:s?.id},y=yield this.orderService.createOrder(b);if(!y)throw new Error("Failed to create order");t=y.id,this.editingOrder=y,e=!0}let i=this.newOrderData.items.map(s=>({order_id:t,dish_id:s.dish_id,quantity:s.quantity,unit_price:s.unit_price,item_notes:s.notes}));if(console.log("\u{1F4E6} Inserting order items:",i),!(yield this.orderService.createOrderItems(i)))throw new Error("Failed to create order items");if(this.newOrderData.items=[],yield this.loadActiveOrders(),this.updateTableStatuses(),!e){let s=this.activeOrders.find(b=>b.id===t);s&&(this.editingOrder=s)}alert(e?"Ordine creato con successo! I piatti sono stati aggiunti.":"Piatti aggiunti all'ordine con successo!")}catch(t){console.error("\u274C Error adding dishes to order:",t),alert("Errore durante l'aggiunta dei piatti: "+t.message)}})}confirmAndCloseOrder(){return g(this,null,function*(){this.newOrderData.items.length>0&&confirm("Ci sono piatti non salvati nell'ordine. Vuoi salvarli prima di chiudere?")&&(yield this.addDishesToOrder()),this.closeCreateOrderModal()})}debugTableState(t){console.log("=== DEBUG TABLE STATE ===");let e=this.tableStatuses.find(s=>s.table.id===t);console.log("Table Status:",e);let i=this.activeOrders.filter(s=>s.table_id===t);console.log("Table Orders:",i);let r=this.reservations.filter(s=>s.table_id===t);console.log("Table Reservations:",r),console.log("========================")}checkAuth(){return g(this,null,function*(){try{let t=this.authService.currentUserValue;return t?(console.log("\u2705 User authenticated:",t.id),!0):(console.error("\u274C No authenticated user"),!1)}catch(t){return console.error("\u274C Auth check failed:",t),!1}})}debugOrderFlow(t){console.log("=== DEBUG ORDER FLOW ===");let e=this.activeOrders.find(r=>r.id===t);console.log("Order before close:",e);let i=this.tableStatuses.find(r=>r.currentOrder?.id===t);console.log("Table status before:",i),console.log("All active orders count:",this.activeOrders.length),console.log("All table statuses:",this.tableStatuses),console.log("========================")}openEditReservationModal(){this.selectedTableStatus?.currentReservation&&(this.editingReservation=F({},this.selectedTableStatus.currentReservation),this.showQuickActionsModal=!1,this.showEditReservationModal=!0)}closeEditReservationModal(){this.showEditReservationModal=!1,this.editingReservation=null}isReservationDeletable(t){if(!t)return!1;let e=!t.customer_id||t.customer_id==="00000000-0000-0000-0000-000000000000"||t.customer_id===this.authService.currentUserValue?.id;return console.log("\u{1F50D} Reservation deletable check:",{reservationId:t.id,customerId:t.customer_id,currentUserId:this.authService.currentUserValue?.id,isDeletable:e}),e}deleteReservation(){return g(this,null,function*(){if(!(!this.editingReservation||!confirm(`Sei sicuro di voler cancellare la prenotazione di ${this.editingReservation.customer_name}?

Tavolo: ${this.selectedTable?.table_number}
Data: ${this.editingReservation.reservation_date} alle ${this.editingReservation.reservation_time}

Questa azione non pu\xF2 essere annullata.`)))try{let{data:e,error:i}=yield this.reservationService.supabaseService.getSupabaseClient().from("orders").select("id, order_number").eq("reservation_id",this.editingReservation.id);if(i)throw i;if(e&&e.length>0){console.log(`\u{1F504} Scollegando ${e.length} ordini dalla prenotazione...`);let{error:s}=yield this.reservationService.supabaseService.getSupabaseClient().from("orders").update({reservation_id:null}).eq("reservation_id",this.editingReservation.id);if(s)throw s;console.log("\u2705 Ordini scollegati dalla prenotazione")}if(yield this.reservationService.deleteReservation(this.editingReservation.id))console.log("\u2705 Reservation deleted successfully"),this.closeEditReservationModal(),yield this.loadReservations(),this.updateTableStatuses(),alert("Prenotazione eliminata con successo!");else throw new Error("Failed to delete reservation")}catch(e){console.error("\u274C Error deleting reservation:",e),alert("Errore durante l'eliminazione della prenotazione: "+e.message)}})}updateReservation(){return g(this,null,function*(){if(!this.editingReservation||!this.selectedTable){console.error("\u274C Missing editing reservation or selected table");return}if(this.editingReservation.party_size>this.selectedTable.capacity){alert(`Il tavolo pu\xF2 ospitare al massimo ${this.selectedTable.capacity} persone.`);return}try{let t={reservation_date:this.editingReservation.reservation_date,reservation_time:this.editingReservation.reservation_time,party_size:this.editingReservation.party_size,special_requests:this.editingReservation.special_requests,updated_at:new Date().toISOString()};(yield this.reservationService.updateReservation(this.editingReservation.id,t))&&(console.log("\u2705 Reservation updated successfully"),this.closeEditReservationModal(),yield this.loadReservations(),this.updateTableStatuses(),alert("Prenotazione aggiornata con successo!"))}catch(t){console.error("\u274C Error updating reservation:",t),alert("Errore durante l'aggiornamento della prenotazione")}})}toggleFullscreen(){let t=document.querySelector(".canvas-container");document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=W({type:c,selectors:[["app-table-map"]],decls:112,vars:24,consts:[["reservationForm","ngForm"],[1,"table-map-container","page-container"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"material-icons"],[1,"text-muted"],[1,"grid-cards"],[1,"card"],[1,"card-content"],[1,"card-header"],[1,"card-title"],[1,"card-number"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[1,"form-input",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-input",3,"ngModelChange","ngModel"],["value","all"],["value","free"],["value","reserved"],["value","occupied"],["type","text","placeholder","Numero o nome tavolo...",1,"form-input",3,"ngModelChange","ngModel"],[1,"actions-container"],[1,"promethea-button","primary",3,"click"],[1,"map-section"],[1,"map-legend"],[1,"legend-item"],[1,"legend-color","free"],[1,"legend-color","reserved"],[1,"legend-color","occupied"],[1,"fullscreen-btn",3,"click"],[1,"canvas-container"],[1,"floor-plan-canvas"],[1,"grid-overlay"],["class","table-element",3,"class","ngStyle","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay quick-actions",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"fullscreen-controls"],[1,"promethea-button","secondary",3,"click"],[3,"ngValue"],[1,"table-element",3,"click","ngStyle"],[1,"table-content"],[1,"table-number"],[1,"table-details"],[1,"table-capacity"],[1,"table-status-badge"],["class","table-info",4,"ngIf"],[1,"table-info"],[1,"empty-state"],[1,"modal-overlay","quick-actions",3,"click"],[1,"modal-container","quick-actions",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"quick-actions-content"],[1,"status-info"],[1,"chip"],[1,"action-buttons"],["class","multiple-actions",4,"ngIf"],["class","emergency-actions",4,"ngIf"],[1,"multiple-actions"],[1,"promethea-button","success",3,"click"],[1,"promethea-button",3,"click"],[1,"emergency-actions"],[1,"promethea-button","ghost",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-md",3,"click"],[1,"generic-form",3,"ngSubmit"],[1,"form-group"],["type","text","name","customer_name","required","","placeholder","Inserisci il nome del cliente",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","customer_phone","required","","placeholder","Inserisci il telefono",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date","name","reservation_date","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","time","name","reservation_time","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","party_size","required","",1,"form-input",3,"ngModelChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"form-text"],["name","special_requests","rows","3","placeholder","Note o richieste speciali...",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"right-actions"],["type","button",1,"promethea-button","secondary",3,"click"],["type","submit",1,"promethea-button","primary",3,"click","disabled"],[3,"value","disabled"],["type","button","class","promethea-button danger",3,"click",4,"ngIf"],["type","button",1,"promethea-button","danger",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"order-creation-layout"],[1,"menu-section"],[1,"subsection-title"],[1,"dishes-grid"],["class","dish-card",3,"click",4,"ngFor","ngForOf"],[1,"order-summary-section"],["class","reservation-info",4,"ngIf"],["class","order-items",4,"ngIf"],["class","empty-order",4,"ngIf"],["class","order-total",4,"ngIf"],[1,"order-actions"],[1,"promethea-button","success",3,"click","disabled"],["class","instructions",4,"ngIf"],[1,"dish-card",3,"click"],[1,"item-info"],[1,"dish-price"],["class","dish-description text-muted",4,"ngIf"],[1,"dish-description","text-muted"],[1,"reservation-info"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"item-price"],[1,"item-controls"],[1,"quantity-btn",3,"click"],[1,"quantity"],[1,"remove-btn",3,"click"],[1,"empty-order"],[1,"text-muted","small"],[1,"order-total"],[1,"instructions"],[4,"ngIf"],[1,"promethea-button","warning",3,"click"],[1,"order-info"],[1,"order-items-list"],["class","order-item-detail",4,"ngFor","ngForOf"],[1,"order-item-detail"],[1,"item-name"],[1,"item-quantity"]],template:function(e,i){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4)(4,"span",5),o(5,"map"),a(),o(6," Mappa Tavoli - Gestione Ristorante "),a(),n(7,"p",6),o(8,"Gestisci prenotazioni e ordini in tempo reale"),a()()(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"span",5),o(14,"event_available"),a(),n(15,"div",11),o(16,"Tavoli Liberi"),a()(),n(17,"div",12),o(18),a()()(),n(19,"div",8)(20,"div",9)(21,"div",10)(22,"span",5),o(23,"event"),a(),n(24,"div",11),o(25,"Prenotati"),a()(),n(26,"div",12),o(27),a()()(),n(28,"div",8)(29,"div",9)(30,"div",10)(31,"span",5),o(32,"restaurant"),a(),n(33,"div",11),o(34,"Occupati"),a()(),n(35,"div",12),o(36),a()()(),n(37,"div",8)(38,"div",9)(39,"div",10)(40,"span",5),o(41,"table_restaurant"),a(),n(42,"div",11),o(43,"Tavoli Totali"),a()(),n(44,"div",12),o(45),a()()()(),n(46,"div",13)(47,"div",14)(48,"div",15)(49,"label",16),o(50,"Mappa:"),a(),n(51,"select",17),S("ngModelChange",function(s){return x(i.currentFloorPlan,s)||(i.currentFloorPlan=s),s}),p("change",function(){return i.onFloorPlanSelect(i.currentFloorPlan)}),h(52,be,2,2,"option",18),a()(),n(53,"div",15)(54,"label",16),o(55,"Stato:"),a(),n(56,"select",19),S("ngModelChange",function(s){return x(i.statusFilter,s)||(i.statusFilter=s),s}),n(57,"option",20),o(58,"Tutti gli stati"),a(),n(59,"option",21),o(60,"Libero"),a(),n(61,"option",22),o(62,"Prenotato"),a(),n(63,"option",23),o(64,"Occupato"),a()()(),n(65,"div",15)(66,"label",16),o(67,"Cerca:"),a(),n(68,"input",24),S("ngModelChange",function(s){return x(i.searchTerm,s)||(i.searchTerm=s),s}),a()()(),n(69,"div",25)(70,"button",26),p("click",function(){return i.loadData()}),n(71,"span",5),o(72,"refresh"),a(),o(73," Aggiorna "),a()()(),n(74,"div",27)(75,"div",8)(76,"div",10)(77,"h2",11),o(78),a(),n(79,"div",28)(80,"div",29),P(81,"div",30),n(82,"span"),o(83,"Libero"),a()(),n(84,"div",29),P(85,"div",31),n(86,"span"),o(87,"Prenotato"),a()(),n(88,"div",29),P(89,"div",32),n(90,"span"),o(91,"Occupato"),a()()(),n(92,"button",33),p("click",function(){return i.toggleFullscreen()}),n(93,"span",5),o(94),a(),o(95),a()(),n(96,"div",9)(97,"div",34)(98,"div",35),P(99,"div",36),h(100,xe,11,10,"div",37)(101,Se,7,0,"div",38),a()()()()(),h(102,Me,18,8,"div",39)(103,Ee,50,11,"div",40)(104,Re,50,12,"div",40)(105,Be,38,9,"div",40)(106,Le,21,2,"div",40),n(107,"div",41)(108,"button",42),p("click",function(){return i.exitFullscreen()}),n(109,"span",5),o(110,"fullscreen_exit"),a(),o(111," Esci da schermo intero "),a()()()),e&2&&(l(18),w(i.freeTablesCount),l(9),w(i.reservedTablesCount),l(9),w(i.occupiedTablesCount),l(9),w(i.totalTablesCount),l(6),f("ngModel",i.currentFloorPlan),l(),_("ngForOf",i.floorPlans),l(4),f("ngModel",i.statusFilter),l(12),f("ngModel",i.searchTerm),l(10),w((i.currentFloorPlan==null?null:i.currentFloorPlan.name)||"Mappa"),l(14),N("active",i.isFullscreen),l(2),v(" ",i.isFullscreen?"fullscreen_exit":"fullscreen"," "),l(),v(" ",i.isFullscreen?"Esci":"Schermo intero"," "),l(3),B("width",(i.currentFloorPlan==null?null:i.currentFloorPlan.width)||1e3,"px")("height",(i.currentFloorPlan==null?null:i.currentFloorPlan.height)||800,"px"),l(2),_("ngForOf",i.getFilteredTables()),l(),_("ngIf",i.getFilteredTables().length===0),l(),_("ngIf",i.showQuickActionsModal),l(),_("ngIf",i.showManualReservationModal),l(),_("ngIf",i.showEditReservationModal),l(),_("ngIf",i.showCreateOrderModal),l(),_("ngIf",i.showOrderDetailsModal))},dependencies:[Y,L,U,Q,le,ne,ae,oe,X,re,Z,ee,se,ie,te,H,G,j],styles:[".table-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg)}.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--gutter-md)}.stat-card.card[_ngcontent-%COMP%]{flex-direction:row;align-items:center;padding:var(--gutter-md);gap:var(--gutter-md);min-height:100px}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon.free[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 15%,transparent)}.stat-icon.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent)}.stat-icon.occupied[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 15%,transparent)}.stat-icon.total[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--text-color) 15%,transparent)}.stat-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--text-color)}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:var(--fs-md);line-height:1}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-sm)}.map-section[_ngcontent-%COMP%]{width:100%;height:70vh;min-height:600px;display:flex;flex-direction:column}.canvas-container[_ngcontent-%COMP%]{border:1px solid var(--smoke-color-1);border-radius:12px;background:var(--background);overflow:auto;max-height:70vh}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:color-mix(in srgb,var(--background) 98%,white);min-width:min-content;min-height:min-content;margin:var(--gutter-md)}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:40px 40px;opacity:.3;pointer-events:none}.table-element[_ngcontent-%COMP%]{position:absolute;border:2px solid;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.2,.9,.2,1);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px var(--shadow);min-width:80px;min-height:80px}.table-element[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 8px 20px var(--shadow2)}.table-element.free[_ngcontent-%COMP%]{border-color:#10b981;background:color-mix(in srgb,#10b981 8%,transparent)}.table-element.reserved[_ngcontent-%COMP%]{border-color:#f59e0b;background:color-mix(in srgb,#f59e0b 8%,transparent)}.table-element.occupied[_ngcontent-%COMP%]{border-color:#ef4444;background:color-mix(in srgb,#ef4444 8%,transparent)}.table-element.selected[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 20%,transparent),0 8px 25px var(--shadow2);z-index:100}.table-content[_ngcontent-%COMP%]{text-align:center;padding:8px 4px;width:100%;display:flex;flex-direction:column;gap:2px}.table-number[_ngcontent-%COMP%]{font-weight:800;font-size:14px;color:var(--text-color);line-height:1;margin-bottom:2px}.table-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:4px;padding:0 4px;margin-bottom:2px}.table-capacity[_ngcontent-%COMP%]{font-size:10px;color:var(--text-muted);font-weight:600;line-height:1}.table-status-badge[_ngcontent-%COMP%]{font-size:9px;font-weight:700;text-transform:uppercase;line-height:1;padding:2px 4px;border-radius:4px}.status-free[_ngcontent-%COMP%]{color:#10b981;background:color-mix(in srgb,#10b981 15%,transparent)}.status-reserved[_ngcontent-%COMP%]{color:#f59e0b;background:color-mix(in srgb,#f59e0b 15%,transparent)}.status-occupied[_ngcontent-%COMP%]{color:#ef4444;background:color-mix(in srgb,#ef4444 15%,transparent)}.status-needs-attention[_ngcontent-%COMP%]{color:#8b5cf6;background:color-mix(in srgb,#8b5cf6 15%,transparent)}.table-info[_ngcontent-%COMP%]{font-size:8px;color:var(--text-muted);line-height:1.1;padding:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md);flex-wrap:wrap;align-items:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px;border-radius:6px;background:var(--smoke-color-1)}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:2px solid;flex-shrink:0}.legend-color.free[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 15%,transparent);border-color:#10b981}.legend-color.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent);border-color:#f59e0b}.legend-color.occupied[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 15%,transparent);border-color:#ef4444}.legend-color.selected[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.quick-actions-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md)}.quick-actions-content[_ngcontent-%COMP%]   .multiple-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.quick-actions-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md)}.emergency-actions[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding-top:var(--gutter-md);margin-top:var(--gutter-sm)}.order-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}@media (max-width: 768px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.stat-card.card[_ngcontent-%COMP%]{min-height:80px;padding:var(--gutter-sm)}.stat-icon[_ngcontent-%COMP%]{width:44px;height:44px}.map-legend[_ngcontent-%COMP%]{justify-content:center}.table-details[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.table-content[_ngcontent-%COMP%]{padding:6px 3px;gap:1px}.table-number[_ngcontent-%COMP%]{font-size:12px}.table-capacity[_ngcontent-%COMP%], .table-status-badge[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 480px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.table-element[_ngcontent-%COMP%]{min-width:70px;min-height:70px}}.fullscreen-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px;margin-right:12px;border-radius:8px;display:flex;align-items:center;transition:.2s}.fullscreen-btn[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1)}[_ngcontent-%COMP%]:fullscreen   .modal[_ngcontent-%COMP%]{position:fixed;z-index:999999}.table-element.small-table[_ngcontent-%COMP%]{min-width:60px;min-height:60px}.table-element.small-table[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%]{padding:4px 2px;gap:1px}.table-element.small-table[_ngcontent-%COMP%]   .table-number[_ngcontent-%COMP%]{font-size:11px}.table-element.small-table[_ngcontent-%COMP%]   .table-capacity[_ngcontent-%COMP%], .table-element.small-table[_ngcontent-%COMP%]   .table-status-badge[_ngcontent-%COMP%]{font-size:7px}.table-element.small-table[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{font-size:6px}@media (max-width: 480px){.table-info[_ngcontent-%COMP%]{display:none}}.canvas-container[_ngcontent-%COMP%]:fullscreen{width:100vw;height:100vh;background:var(--background);display:flex;align-items:center;justify-content:center;padding:20px}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{margin:0;border:2px solid var(--smoke-color-1);border-radius:12px;box-shadow:0 8px 32px var(--shadow2);max-width:95%;max-height:95%}[_ngcontent-%COMP%]:fullscreen   .fullscreen-controls[_ngcontent-%COMP%]{z-index:10001!important}.fullscreen-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:var(--background);border:1px solid var(--smoke-color-1);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .3s ease;font-size:var(--fs-sm);font-weight:500}.fullscreen-btn[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);border-color:var(--primary);color:var(--primary)}.fullscreen-btn.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:var(--primary)}.fullscreen-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.fullscreen-controls[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:10010;display:none}.canvas-container[_ngcontent-%COMP%]:fullscreen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-webkit-full-screen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-moz-full-screen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-ms-fullscreen ~ .fullscreen-controls[_ngcontent-%COMP%]{display:block}[_ngcontent-%COMP%]:fullscreen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-webkit-full-screen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-moz-full-screen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-ms-fullscreen   .modal-overlay[_ngcontent-%COMP%]{z-index:10020!important}.canvas-container[_ngcontent-%COMP%]:fullscreen{background:var(--background)}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{max-width:95%;max-height:95%}.card-title[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.fullscreen-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:.8rem}.fullscreen-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{max-width:98%;max-height:98%}}.canvas-container[_ngcontent-%COMP%]:-webkit-full-screen{width:100vw;height:100vh;background:var(--background)}.canvas-container[_ngcontent-%COMP%]:-moz-full-screen{width:100vw;height:100vh;background:var(--background)}.canvas-container[_ngcontent-%COMP%]:-ms-fullscreen{width:100vw;height:100vh;background:var(--background)}.card-number[_ngcontent-%COMP%]{text-align:center}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--gutter-sm);align-items:center;padding:var(--gutter-sm)}.dish-description[_ngcontent-%COMP%]{padding:0 var(--gutter-sm)}"]})};export{ge as TableMap};
