import{a as Kt}from"./chunk-T2RV5N22.js";import{a as Xt}from"./chunk-O6ZHDLH7.js";import{a as qt}from"./chunk-ICWZR6RK.js";import{a as Nt}from"./chunk-NHK6PDNW.js";import"./chunk-JEAJURYA.js";import"./chunk-OBFXHBEQ.js";import"./chunk-IAV7ZZI4.js";import"./chunk-BVUE2CSR.js";import"./chunk-7FT2VBWG.js";import"./chunk-PESVHT2V.js";import{a as Vt}from"./chunk-HQMYKHVT.js";import{a as Wt,b as V}from"./chunk-5YRSER4B.js";import"./chunk-ZQHNSJM3.js";import"./chunk-RWHEAJGO.js";import{a as me}from"./chunk-MEGBB4Y7.js";import{$ as mt,A as $e,Aa as $t,B as Be,Ba as Bt,C as He,Ca as Ht,D as je,Da as jt,E as Ne,Ea as D,F as Ve,G as We,H as qe,I as Xe,J as Ke,K as Ye,L as Je,M as Qe,N as Ze,O as et,P as tt,Q as it,R as nt,S as at,T as rt,U as ot,V as st,W as lt,X as ct,Y as pt,Z as dt,_ as ut,a as ve,aa as vt,b as ge,ba as gt,c as he,ca as ht,d as _e,da as _t,e as fe,ea as ft,f as be,fa as bt,g as Ce,ga as Ct,h as xe,ha as xt,i as Se,ia as St,j as Pe,ja as Pt,k as ke,ka as kt,l as ye,la as yt,m as Ae,ma as At,n as Me,na as Mt,o as Oe,oa as Ot,p as we,pa as wt,q as ze,qa as zt,r as Ie,ra as It,s as Te,sa as Tt,t as Re,ta as Rt,u as Le,ua as Lt,v as Ee,va as Et,w as Ue,wa as Ut,x as Fe,xa as Ft,y as De,ya as Dt,z as Ge,za as Gt}from"./chunk-OFUIVTUT.js";import"./chunk-22BNR7AL.js";import{c as ue,d as b}from"./chunk-NPMWXJE4.js";import{a as ne,b as ae,c as N,d as re,e as oe,f,g as se,h as le,i as ce,j as pe,k as de}from"./chunk-6GCWWUP3.js";import{j as te,k as U,m as ie,s as F}from"./chunk-N5RTTLWI.js";import{D as H,Fb as M,Ga as Y,Ha as n,Hb as J,Ib as l,Jb as Q,K as X,Kb as T,Rb as Z,S as j,Sa as z,Wb as O,Xa as E,Xb as w,Z as k,a as L,ab as u,ca as v,ea as K,g as W,gc as ee,hb as d,ia as x,ib as r,ja as S,jb as a,kb as o,lb as s,rb as I,u as y,ub as C,v as q,wb as p}from"./chunk-R56C6QW6.js";import{j as _}from"./chunk-4ZZIO3ZI.js";var P=class t{authService=v(b);router=v(f);canActivate(){return _(this,null,function*(){console.log("\u{1F6E1}\uFE0F AuthGuard: checking authentication");try{(yield Promise.race([this.authService.waitForAuthInit(),new Promise(c=>setTimeout(()=>c(!1),5e3))]))||console.warn("\u{1F6E1}\uFE0F AuthGuard - Auth init timeout, checking current state");let e=this.authService.isAuthenticated();return console.log("\u{1F6E1}\uFE0F AuthGuard - User authenticated:",e),e?(console.log("\u{1F6E1}\uFE0F AuthGuard - Access granted"),!0):(console.log("\u{1F6E1}\uFE0F AuthGuard - Redirecting to login"),this.router.navigate(["/login"]),!1)}catch(i){return console.error("\u{1F6E1}\uFE0F AuthGuard - Error:",i),this.router.navigate(["/login"]),!1}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var m=class t{authService=v(b);permissionService=v(ue);router=v(f);canActivate(i){return _(this,null,function*(){if(console.log("\u{1F510} RoleGuard: Checking route:",i.routeConfig?.path),yield this.authService.waitForAuthInit(),!this.authService.currentUserValue)return this.router.navigate(["/login"]),!1;if(this.authService.isRestaurantUser()&&!this.authService.hasAnyPermissions())return i.routeConfig?.path==="no-permission"?(console.log("\u{1F510} RoleGuard - Already on no-permission, allowing access"),!0):(console.log("\u{1F510} RoleGuard - User has no permissions, redirecting to no-permission"),this.router.navigate(["/no-permission"]),!1);let c=i.data.permissions;return!c||c.length===0?(console.log("\u{1F510} RoleGuard - No permissions required, access granted"),!0):this.permissionService.hasAnyPermission(c)?(console.log("\u{1F510} RoleGuard - Access granted"),!0):(console.log("\u{1F510} Permission denied, redirecting to dashboard"),this.redirectToAppropriateDashboard(),!1)})}redirectToAppropriateDashboard(){switch(this.authService.getCurrentContext()){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer"]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var A=class t{authService=v(b);router=v(f);canActivate(){return _(this,null,function*(){if(yield this.authService.waitForAuthInit(),!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=this.authService.getCurrentContext(),e=this.authService.canBeStaff();return console.log("\u{1F468}\u200D\u{1F4BC} StaffGuard Debug:",{currentContext:i,canBeStaff:e,staffRole:this.authService.getStaffRole()}),i==="staff"||this.authService.isOwner()||e?(i!=="staff"&&(console.log("\u{1F504} Setting context to staff for staff area access"),this.authService.setContext("staff")),!0):(this.redirectToAppropriateDashboard(),!1)})}redirectToAppropriateDashboard(){switch(this.authService.getCurrentContext()){case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer/menu-display"]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var G=class t{authService=v(b);router=v(f);canActivate(){return _(this,null,function*(){if(yield this.authService.waitForAuthInit(),!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=this.authService.getCurrentContext(),e=this.authService.canBeSupplier();console.log("\u{1F69A} SupplierGuard Debug:",{currentContext:i,canBeSupplier:e,availableContexts:this.authService.getAvailableContexts()});let c=i==="supplier"||e;return console.log("\u{1F510} SupplierGuard - Can access supplier area:",c),c?(i!=="supplier"&&(console.log("\u{1F504} Setting context to supplier for supplier area access"),this.authService.setContext("supplier")),!0):(console.log("\u{1F6AB} User cannot access supplier area, redirecting to customer"),this.authService.setContext("customer"),this.router.navigate(["/customer/menu-display"]),!1)})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var Yt=[{path:"login",loadComponent:()=>import("./chunk-MCWJ6SUN.js").then(t=>t.Login)},{path:"policy",loadComponent:()=>import("./chunk-OMC43HNK.js").then(t=>t.Policy),data:{title:"Privacy Policy",icon:"file-text"}},{path:"register",children:[{path:"",loadComponent:()=>import("./chunk-JGNQLMRO.js").then(t=>t.Register),data:{hideGlobalHeader:!0}},{path:":role",loadComponent:()=>import("./chunk-JGNQLMRO.js").then(t=>t.Register),data:{hideGlobalHeader:!0}}]},{path:"no-permission",loadComponent:()=>import("./chunk-PSRYXC5E.js").then(t=>t.NoPermission),canActivate:[m],data:{title:"Accesso Negato",icon:"shield-alert"}},{path:"customer/restaurant/restaurant-list",loadComponent:()=>import("./chunk-33RLSZVM.js").then(t=>t.RestaurantList),data:{title:"Cerca Ristoranti",icon:"utensils"}},{path:"customer/restaurant/:restaurantId/map",loadComponent:()=>import("./chunk-OPHYQIRA.js").then(t=>t.RestaurantMapViewer),data:{hideGlobalHeader:!0}},{path:"restaurant",canActivate:[P,A],children:[{path:"dashboard",loadComponent:()=>import("./chunk-YLSJNOGL.js").then(t=>t.Dashboard),canActivate:[m],data:{permissions:["view_dashboard"],title:"Dashboard",icon:"layout-dashboard"}},{path:"menu",loadComponent:()=>import("./chunk-P357Z34Y.js").then(t=>t.MenuBuilder),canActivate:[m],data:{permissions:["manage_menu"],title:"Men\xF9 & Piatti",icon:"utensils"}},{path:"alcoholic-beverages",loadComponent:()=>import("./chunk-S2KQ5GET.js").then(t=>t.AlcoholicBeverages),canActivate:[m],data:{permissions:["manage_menu"],title:"Alcolici",icon:"wine"}},{path:"orders",loadComponent:()=>import("./chunk-5KGHQ3IV.js").then(t=>t.LiveOrders),canActivate:[m],data:{permissions:["manage_orders"],title:"Ordini",icon:"shopping-cart"}},{path:"kitchen-display",loadComponent:()=>import("./chunk-6ZLYQXJZ.js").then(t=>t.KitchenDisplay),canActivate:[m],data:{permissions:["view_kitchen_display"],title:"Pannello Cucina",icon:"chef-hat"}},{path:"recipe",loadComponent:()=>import("./chunk-KEYBMPBX.js").then(t=>t.Recipe),canActivate:[m],data:{permissions:["view_ingredients"],title:"Ricette",icon:"scroll-text"}},{path:"expense-management",loadComponent:()=>import("./chunk-R7MMEN2I.js").then(t=>t.ExpenseManagement),canActivate:[m],data:{permissions:["view_reports"],title:"Gestione Spese",icon:"credit-card"}},{path:"financial-report",loadComponent:()=>import("./chunk-3X52CJTF.js").then(t=>t.FinancialReport),canActivate:[m],data:{permissions:["view_reports"],title:"Report Finanziario",icon:"bar-chart-3"}},{path:"reservation-manager",loadComponent:()=>import("./chunk-APJRCYXU.js").then(t=>t.ReservationManager),canActivate:[m],data:{permissions:["manage_reservations"],title:"Lista Prenotazioni",icon:"notebook-text"}},{path:"table-map",loadComponent:()=>import("./chunk-XEJVKNBL.js").then(t=>t.TableMap),canActivate:[m],data:{permissions:["take_orders"],title:"Prenotazioni Tavoli",icon:"utensils-crossed"}},{path:"floor-plan",loadComponent:()=>import("./chunk-UQFVRWDB.js").then(t=>t.FloorPlanEditor),canActivate:[m],data:{permissions:["view_table_map"],title:"Mappa Ristorante",icon:"table-2"}},{path:"calendar-view",loadComponent:()=>import("./chunk-YECIHU6X.js").then(t=>t.RestaurantCalendar),canActivate:[m],data:{permissions:["manage_reservations"],title:"Calendario",icon:"calendar"}},{path:"inventory",loadComponent:()=>import("./chunk-Z6CXC7IO.js").then(t=>t.Inventory),canActivate:[m],data:{permissions:["manage_inventory"],title:"Inventario",icon:"package"}},{path:"suppliers",loadComponent:()=>import("./chunk-OBLMB6RY.js").then(t=>t.SupplierManager),canActivate:[m],data:{permissions:["manage_inventory"],title:"Fornitori",icon:"truck"}},{path:"tables",loadComponent:()=>import("./chunk-5LQVS54F.js").then(t=>t.TablemapView),canActivate:[m],data:{permissions:["take_orders"],title:"Tavoli",icon:"table-2"}},{path:"staff-management",loadComponent:()=>import("./chunk-UMGEKKGO.js").then(t=>t.StaffManagement),canActivate:[m],data:{permissions:["manage_staff"],title:"Staff",icon:"users"}},{path:"web-site",loadComponent:()=>import("./chunk-FLZNAR66.js").then(t=>t.WebSite),canActivate:[m],data:{permissions:["manage_staff"],title:"Crea il tuo sito web",icon:"globe"}},{path:"marketing",loadComponent:()=>import("./chunk-E2MSAKB6.js").then(t=>t.Marketing),canActivate:[m],data:{permissions:["manage_staff"],title:"Promuovi il ristorante",icon:"megaphone"}},{path:"contabile-fiscale",loadComponent:()=>import("./chunk-YOPCDCSY.js").then(t=>t.ContabileFiscale),canActivate:[m],data:{permissions:["manage_staff"],title:"Gestione Fiscale",icon:"landmark"}},{path:"profile",loadComponent:()=>import("./chunk-DVP7RV3U.js").then(t=>t.Profile),canActivate:[m],data:{permissions:["manage_staff"],title:"Profilo",icon:"user"}},{path:"settings",loadComponent:()=>import("./chunk-V4ETKJA5.js").then(t=>t.RestaurantSettings),canActivate:[m],data:{permissions:["manage_restaurant_settings"],title:"Impostazioni",icon:"settings"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"supplier",canActivate:[P,G],data:{roles:["supplier"],context:"supplier"},children:[{path:"dashboard",loadComponent:()=>import("./chunk-XUVTQ6HK.js").then(t=>t.SupplierDashboard),data:{title:"Dashboard",icon:"layout-dashboard"}},{path:"settings",loadComponent:()=>import("./chunk-R7T76QC7.js").then(t=>t.SupplierSettings),data:{title:"Impostazioni Fornitore",icon:"settings"}},{path:"restaurants",loadComponent:()=>import("./chunk-2YUNNSD6.js").then(t=>t.SupplierRestaurants),data:{title:"Cerca Ristoranti",icon:"store"}},{path:"products",loadComponent:()=>import("./chunk-56MFU3JO.js").then(t=>t.SupplierIngredients),data:{title:"Catalogo Prodotti",icon:"package-search"}},{path:"ingredients",loadComponent:()=>import("./chunk-56MFU3JO.js").then(t=>t.SupplierIngredients),data:{title:"Ingredienti",icon:"package"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"customer",canActivate:[P,m],data:{roles:["customer"],context:"customer"},children:[{path:"home",loadComponent:()=>import("./chunk-K4SALWEF.js").then(t=>t.Home),data:{title:"Home",icon:"home"}},{path:"search",loadComponent:()=>import("./chunk-ANY5OHXZ.js").then(t=>t.RestaurantSearch),data:{title:"Cerca Ristoranti",icon:"search"}},{path:"menu/:id",loadComponent:()=>import("./chunk-DKS5AHX7.js").then(t=>t.MenuDisplay),data:{hideGlobalHeader:!0}},{path:"restaurant/:restaurantId/reservation",loadComponent:()=>import("./chunk-QYRQF6VO.js").then(t=>t.ReservationWizard),data:{title:"Prenotazione Tavolo",icon:"calendar-check"}},{path:"orders",loadComponent:()=>import("./chunk-HMN5IWF6.js").then(t=>t.OrderTracker),data:{title:"I miei Ordini",icon:"shopping-bag"}},{path:"reviews",loadComponent:()=>import("./chunk-WKNO54LD.js").then(t=>t.ReviewSystem),data:{title:"Le mie Recensioni",icon:"star"}},{path:"restaurant/:id",loadComponent:()=>import("./chunk-2NNMGMMF.js").then(t=>t.RestaurantDetail),data:{hideGlobalHeader:!0}},{path:"settings",loadComponent:()=>import("./chunk-DDEV3P37.js").then(t=>t.SettingsCustomer),data:{title:"Impostazioni",icon:"settings"}},{path:"profile-user",loadComponent:()=>import("./chunk-XB4M4BOC.js").then(t=>t.ProfileUser),data:{title:"Account",icon:"user"}},{path:"",redirectTo:"home",pathMatch:"full"}]},{path:"food-cost",loadComponent:()=>import("./chunk-S4VBDQ6O.js").then(t=>t.FoodCostCalculator),canActivate:[P,A],data:{permissions:["view_ingredients"],title:"Food Cost",icon:"piggy-bank"}},{path:"food-cost-calculator/:id",component:Nt,canActivate:[P,A],data:{permissions:["view_ingredients"],title:"Modifica Piatto",icon:"piggy-bank"}},{path:"food-cost/ingredient/new",loadComponent:()=>import("./chunk-S4VBDQ6O.js").then(t=>t.FoodCostCalculator),canActivate:[P,A],data:{permissions:["view_ingredients"],title:"Crea Ingrediente",icon:"package-plus"}},{path:"",pathMatch:"full",redirectTo:"customer/home"},{path:"**",redirectTo:"customer/home"}];var Jt={providers:[ae(),ce(Yt,pe()),K(D.pick({Home:Ne,Search:_t,User:Et,Menu:it,Smartphone:xt,Calendars:xe,Sparkles:St,UtensilsCrossed:Ft,CalendarClock:be,BellRing:ge,TicketPercent:zt,History:je,Camera:Se,Palette:pt,Target:wt,PenTool:dt,Info:Ve,ListX:Ke,Calendar:Ce,CalendarCheck:fe,CheckCircle:Oe,LayoutDashboard:qe,Pencil:ut,Calculator:_e,Tags:Ot,AlertTriangle:Tt,Fish:Ge,GripVertical:He,ArrowUpDown:ve,Save:gt,List:Ye,Check:ye,PlusCircle:ze,X:Ht,CircleDot:we,Egg:Le,Sprout:Pt,Milk:nt,Shell:bt,Nut:st,Euro:Ee,FileText:De,BarChart:ke,Leaf:Xe,Droplet:Re,Flower:$e,Circle:Ie,Wind:$t,Timer:It,Wheat:Gt,Table2:Mt,Users:Ut,UsersRound:Lt,Building2:he,NotebookText:ot,Utensils:Dt,ScrollText:ht,PiggyBank:mt,ChefHat:Ae,Package:ct,Wine:Bt,Truck:Rt,CreditCard:Te,BarChart3:Pe,PackageSearch:lt,ShoppingBag:Ct,Star:kt,Globe:Be,Megaphone:tt,Settings:ft,LogOut:Ze,Sun:At,Moon:rt,Minus:at,Plus:vt,Mail:et,Eye:Fe,EyeOff:Ue,LogIn:Qe,Store:yt,Landmark:We,Lock:Je,ChevronLeft:Me}))]};function ei(t,i){if(t&1&&(a(0,"option",5),l(1),o()),t&2){let e=i.$implicit,c=p(2);r("value",e),n(),T(" ",c.getContextLabel(e)," ")}}function ti(t,i){if(t&1){let e=I();a(0,"div",1)(1,"label",2),l(2,"Visualizzazione:"),o(),a(3,"select",3),C("change",function(g){x(e);let h=p();return S(h.onContextChange(g))}),u(4,ei,2,2,"option",4),o()()}if(t&2){let e=p();M("text-large",e.largeText),n(3),r("value",e.currentContext)("title",e.getContextTitle(e.currentContext)),n(),r("ngForOf",e.availableContexts)}}var $=class t{authService=v(b);router=v(f);largeText=!1;availableContexts=[];currentContext="customer";ngOnInit(){console.log("\u{1F50D} ContextSelector - Auth State:",{currentUser:this.authService.currentUserValue,currentStaff:this.authService.getCurrentStaff(),currentRestaurantId:this.authService.getCurrentRestaurantId(),isOwner:this.authService.isOwner(),canBeStaff:this.authService.canBeStaff(),availableContexts:this.authService.getAvailableContexts(),hasAnyPermissions:this.authService.hasAnyPermissions()}),this.updateContexts(),this.authService.currentContext$.subscribe(i=>{console.log("\u{1F50D} Context changed to:",i),this.currentContext=i,this.updateContexts()})}updateContexts(){this.availableContexts=this.authService.getAvailableContexts()}onContextChange(i){let c=i.target.value;this.switchContext(c)}switchContext(i){return _(this,null,function*(){if(yield this.authService.switchContext(i))switch(i){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":this.router.navigate(["/customer/menu-display"]);break}})}getContextLabel(i){switch(i){case"staff":return"Ristorante";case"supplier":return"Fornitore";case"customer":return"Cliente";default:return i}}getContextTitle(i){return`Visualizza come ${this.getContextLabel(i).toLowerCase()}`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-context-selector"]],inputs:{largeText:"largeText"},decls:1,vars:1,consts:[["class","context-selector",3,"text-large",4,"ngIf"],[1,"context-selector"],[1,"context-visualizzazione"],[1,"tipovisualizzazione","p-mini",3,"change","value","title"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,c){e&1&&u(0,ti,5,5,"div",0),e&2&&r("ngIf",c.availableContexts.length>1)},dependencies:[F,te,U],styles:[".context-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);padding:0 0 var(--gap-sm) 0;border-radius:4px}.context-visualizzazione[_ngcontent-%COMP%]{font-size:var(--fs-mini);color:var(--text-muted)}.tipovisualizzazione[_ngcontent-%COMP%]{border:1px solid var(--smoke-1);border-radius:8px;background-color:var(--background2);cursor:pointer}.context-selector.text-large[_ngcontent-%COMP%]   .context-visualizzazione[_ngcontent-%COMP%], .context-selector.text-large[_ngcontent-%COMP%]   .tipovisualizzazione[_ngcontent-%COMP%]{font-size:var(--fs-md)}.tipovisualizzazione[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--background2)}"]})};function ii(t,i){t&1&&(a(0,"div",35)(1,"div",36),s(2,"img",37),o(),a(3,"div",38),l(4,"Platea"),o()())}function ni(t,i){t&1&&(a(0,"div",39),l(1,"Gestione Ristorante"),o())}function ai(t,i){t&1&&s(0,"div",40)}function ri(t,i){if(t&1&&(a(0,"li",19)(1,"a",41),s(2,"lucide-angular",42),a(3,"span",22),l(4,"Dashboard"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Dashboard":null),n(),r("size",e.iconSize)}}function oi(t,i){if(t&1&&(a(0,"li",19)(1,"a",43),s(2,"lucide-angular",44),a(3,"span",22),l(4,"Mappa Ristorante"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Layout Sala":null),n(),r("size",e.iconSize)}}function si(t,i){if(t&1&&(a(0,"li",19)(1,"a",45),s(2,"lucide-angular",46),a(3,"span",22),l(4,"Staff"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Staff":null),n(),r("size",e.iconSize)}}function li(t,i){if(t&1&&(a(0,"div",14),u(1,ni,2,0,"div",15)(2,ai,1,0,"div",16),a(3,"ul",17),u(4,ri,5,2,"li",18)(5,oi,5,2,"li",18)(6,si,5,2,"li",18),o()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.authService.hasPermission("view_dashboard")),n(),r("ngIf",e.authService.hasPermission("view_table_map")),n(),r("ngIf",e.authService.hasPermission("manage_staff"))}}function ci(t,i){t&1&&(a(0,"div",39),l(1,"Prenotazioni Tavoli"),o())}function pi(t,i){t&1&&s(0,"div",40)}function di(t,i){if(t&1&&(a(0,"li",19)(1,"a",47),s(2,"lucide-angular",48),a(3,"span",22),l(4,"Prenotazioni Tavoli"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Prenotazioni":null),n(),r("size",e.iconSize)}}function ui(t,i){if(t&1&&(a(0,"li",19)(1,"a",49),s(2,"lucide-angular",50),a(3,"span",22),l(4,"Calendario"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Calendario":null),n(),r("size",e.iconSize)}}function mi(t,i){if(t&1&&(a(0,"li",19)(1,"a",51),s(2,"lucide-angular",52),a(3,"span",22),l(4,"Lista Prenotazioni"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Lista Prenotazioni":null),n(),r("size",e.iconSize)}}function vi(t,i){if(t&1&&(a(0,"div",14),u(1,ci,2,0,"div",15)(2,pi,1,0,"div",16),a(3,"ul",17),u(4,di,5,2,"li",18)(5,ui,5,2,"li",18)(6,mi,5,2,"li",18),o()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.authService.hasPermission("manage_reservations")),n(),r("ngIf",e.authService.hasPermission("manage_reservations")),n(),r("ngIf",e.authService.hasPermission("manage_reservations"))}}function gi(t,i){t&1&&(a(0,"div",39),l(1,"Menu & Cucina"),o())}function hi(t,i){t&1&&s(0,"div",40)}function _i(t,i){if(t&1&&(a(0,"li",19)(1,"a",53),s(2,"lucide-angular",54),a(3,"span",22),l(4,"Men\xF9 & Piatti"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Men\xF9 & Piatti":null),n(),r("size",e.iconSize)}}function fi(t,i){if(t&1&&(a(0,"li",19)(1,"a",55),s(2,"lucide-angular",56),a(3,"span",22),l(4,"Ricette"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Ricette":null),n(),r("size",e.iconSize)}}function bi(t,i){if(t&1&&(a(0,"li",19)(1,"a",57),s(2,"lucide-angular",58),a(3,"span",22),l(4,"Food Cost"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Food Cost":null),n(),r("size",e.iconSize)}}function Ci(t,i){if(t&1&&(a(0,"li",19)(1,"a",59),s(2,"lucide-angular",60),a(3,"span",22),l(4,"Pannello Cucina"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Pannello Cucina":null),n(),r("size",e.iconSize)}}function xi(t,i){if(t&1&&(a(0,"div",14),u(1,gi,2,0,"div",15)(2,hi,1,0,"div",16),a(3,"ul",17),u(4,_i,5,2,"li",18)(5,fi,5,2,"li",18)(6,bi,5,2,"li",18)(7,Ci,5,2,"li",18),o()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.authService.hasPermission("manage_menu")),n(),r("ngIf",e.authService.hasPermission("manage_inventory")),n(),r("ngIf",e.authService.hasPermission("manage_inventory")),n(),r("ngIf",e.authService.hasPermission("view_kitchen_display"))}}function Si(t,i){t&1&&(a(0,"div",39),l(1,"Magazzino & Acquisti"),o())}function Pi(t,i){t&1&&s(0,"div",40)}function ki(t,i){if(t&1&&(a(0,"li",19)(1,"a",61),s(2,"lucide-angular",62),a(3,"span",22),l(4,"Inventario"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Inventario":null),n(),r("size",e.iconSize)}}function yi(t,i){if(t&1&&(a(0,"li",19)(1,"a",63),s(2,"lucide-angular",64),a(3,"span",22),l(4,"Alcolici"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Alcolici":null),n(),r("size",e.iconSize)}}function Ai(t,i){if(t&1&&(a(0,"li",19)(1,"a",65),s(2,"lucide-angular",66),a(3,"span",22),l(4,"Fornitori"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Fornitori":null),n(),r("size",e.iconSize)}}function Mi(t,i){if(t&1&&(a(0,"div",14),u(1,Si,2,0,"div",15)(2,Pi,1,0,"div",16),a(3,"ul",17),u(4,ki,5,2,"li",18)(5,yi,5,2,"li",18)(6,Ai,5,2,"li",18),o()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.authService.hasPermission("manage_inventory")),n(),r("ngIf",e.authService.hasPermission("manage_inventory")),n(),r("ngIf",e.authService.hasPermission("manage_inventory"))}}function Oi(t,i){t&1&&(a(0,"div",39),l(1,"Finanze"),o())}function wi(t,i){t&1&&s(0,"div",40)}function zi(t,i){if(t&1&&(a(0,"li",19)(1,"a",67),s(2,"lucide-angular",68),a(3,"span",22),l(4,"Gestione Spese"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Gestione Spese":null),n(),r("size",e.iconSize)}}function Ii(t,i){if(t&1&&(a(0,"li",19)(1,"a",69),s(2,"lucide-angular",70),a(3,"span",22),l(4,"Report Finanziario"),o()()()),t&2){let e=p(3);n(),d("title",e.isSidebarCollapsed?"Report Finanziario":null),n(),r("size",e.iconSize)}}function Ti(t,i){if(t&1&&(a(0,"div",14),u(1,Oi,2,0,"div",15)(2,wi,1,0,"div",16),a(3,"ul",17),u(4,zi,5,2,"li",18)(5,Ii,5,2,"li",18),o()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.authService.hasPermission("view_expenses")),n(),r("ngIf",e.authService.hasPermission("view_reports"))}}function Ri(t,i){t&1&&(a(0,"div",39),l(1,"Promethea"),o())}function Li(t,i){t&1&&s(0,"div",40)}function Ei(t,i){if(t&1&&(a(0,"div",14),u(1,Ri,2,0,"div",15)(2,Li,1,0,"div",16),a(3,"ul",17)(4,"li",19)(5,"a",71),s(6,"lucide-angular",72),a(7,"span",22),l(8,"Crea il tuo sito web"),o()()(),a(9,"li",19)(10,"a",73),s(11,"lucide-angular",74),a(12,"span",22),l(13,"Gestione Fiscale"),o()()(),a(14,"li",19)(15,"a",75),s(16,"lucide-angular",76),a(17,"span",22),l(18,"Promuovi il ristorante"),o()()()()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(3),d("title",e.isSidebarCollapsed?"Crea il tuo sito web":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Gestione Fiscale":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Promuovi il ristorante":null),n(),r("size",e.iconSize)}}function Ui(t,i){t&1&&(a(0,"div",39),l(1,"Gestione Fornitore"),o())}function Fi(t,i){t&1&&s(0,"div",40)}function Di(t,i){if(t&1&&(a(0,"div",14),u(1,Ui,2,0,"div",15)(2,Fi,1,0,"div",16),a(3,"ul",17)(4,"li",19)(5,"a",77),s(6,"lucide-angular",42),a(7,"span",22),l(8,"Dashboard"),o()()(),a(9,"li",19)(10,"a",78),s(11,"lucide-angular",79),a(12,"span",22),l(13,"Catalogo Prodotti"),o()()()()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(3),d("title",e.isSidebarCollapsed?"Dashboard":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Catalogo Prodotti":null),n(),r("size",e.iconSize)}}function Gi(t,i){t&1&&(a(0,"div",39),l(1,"Cliente"),o())}function $i(t,i){t&1&&s(0,"div",40)}function Bi(t,i){if(t&1&&(a(0,"div",14),u(1,Gi,2,0,"div",15)(2,$i,1,0,"div",16),a(3,"ul",17)(4,"li",80)(5,"a",81),s(6,"lucide-angular",82),a(7,"span",22),l(8,"Cerca Ristoranti"),o()()(),a(9,"li",19)(10,"a",83),s(11,"lucide-angular",84),a(12,"span",22),l(13,"Home"),o()()(),a(14,"li",19)(15,"a",85),s(16,"lucide-angular",54),a(17,"span",22),l(18,"Lista Ristoranti"),o()()(),a(19,"li",80)(20,"a",86),s(21,"lucide-angular",87),a(22,"span",22),l(23,"Le mie Prenotazioni"),o()()(),a(24,"li",80)(25,"a",88),s(26,"lucide-angular",89),a(27,"span",22),l(28,"I miei Ordini"),o()()(),a(29,"li",80)(30,"a",90),s(31,"lucide-angular",91),a(32,"span",22),l(33,"Le mie Recensioni"),o()()()()()),t&2){let e=p(2);n(),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(3),d("title",e.isSidebarCollapsed?"Cerca Ristoranti":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Home":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Lista Ristoranti":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Le mie Prenotazioni":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"I miei Ordini":null),n(),r("size",e.iconSize),n(4),d("title",e.isSidebarCollapsed?"Le mie Recensioni":null),n(),r("size",e.iconSize)}}function Hi(t,i){t&1&&(a(0,"div",39),l(1,"Account"),o())}function ji(t,i){t&1&&s(0,"div",40)}function Ni(t,i){if(t&1&&(a(0,"li",19)(1,"a",92),s(2,"lucide-angular",93),a(3,"span",22),l(4,"Profilo"),o()()()),t&2){let e=p(2);n(),d("title",e.isSidebarCollapsed?"Profilo":null),n(),r("size",e.iconSize)}}function Vi(t,i){if(t&1&&(a(0,"li",19)(1,"a",94),s(2,"lucide-angular",95),a(3,"span",22),l(4,"Impostazioni"),o()()()),t&2){let e=p(2);n(),d("title",e.isSidebarCollapsed?"Impostazioni":null),n(),r("size",e.iconSize)}}function Wi(t,i){if(t&1&&(a(0,"li",19)(1,"a",96),s(2,"lucide-angular",93),a(3,"span",22),l(4,"Account"),o()()()),t&2){let e=p(2);n(),d("title",e.isSidebarCollapsed?"Account":null),n(),r("size",e.iconSize)}}function qi(t,i){if(t&1&&(a(0,"li",19)(1,"a",97),s(2,"lucide-angular",95),a(3,"span",22),l(4,"Impostazioni"),o()()()),t&2){let e=p(2);n(),d("title",e.isSidebarCollapsed?"Impostazioni Cliente":null),n(),r("size",e.iconSize)}}function Xi(t,i){if(t&1&&(a(0,"div",98),s(1,"app-context-selector",99),o()),t&2){let e=p(2);n(),r("largeText",e.isLargeText)}}function Ki(t,i){if(t&1&&(a(0,"div",104),l(1),o()),t&2){let e=p(3);n(),T(" ",e.getRestaurantName()," ")}}function Yi(t,i){if(t&1&&(a(0,"div",104),l(1),o()),t&2){let e=p(3);n(),T(" ",e.getSupplierCompanyName()," ")}}function Ji(t,i){if(t&1&&(a(0,"div",100)(1,"div",101)(2,"span",102),l(3),o()(),u(4,Ki,2,1,"div",103)(5,Yi,2,1,"div",103),o()),t&2){let e=p(2);n(3),Q(e.getUserDisplayName()),n(),r("ngIf",e.currentRestaurant&&e.isRestaurantUser()),n(),r("ngIf",e.supplierProfile&&e.isSupplierUser())}}function Qi(t,i){if(t&1){let e=I();a(0,"aside",5),C("click",function(g){x(e);let h=p();return S(h.onSidebarNavClick(g))}),a(1,"div",6),u(2,ii,5,0,"div",7),a(3,"div",8)(4,"button",9),C("click",function(g){return x(e),p().toggleSize(),S(g.stopPropagation())}),s(5,"lucide-angular",10),o(),a(6,"button",11),C("click",function(g){return x(e),p().toggleSidebar(),S(g.stopPropagation())}),s(7,"lucide-angular",10),o()()(),a(8,"nav",12),u(9,li,7,5,"div",13)(10,vi,7,5,"div",13)(11,xi,8,6,"div",13)(12,Mi,7,5,"div",13)(13,Ti,6,4,"div",13)(14,Ei,19,8,"div",13)(15,Di,14,6,"div",13)(16,Bi,34,14,"div",13),a(17,"div",14),u(18,Hi,2,0,"div",15)(19,ji,1,0,"div",16),a(20,"ul",17),u(21,Ni,5,2,"li",18)(22,Vi,5,2,"li",18)(23,Wi,5,2,"li",18)(24,qi,5,2,"li",18),a(25,"li",19)(26,"button",20),C("click",function(){x(e);let g=p();return S(g.logout())}),s(27,"lucide-angular",21),a(28,"span",22),l(29,"Logout"),o()()()()()(),a(30,"div",23),u(31,Xi,2,1,"div",24),a(32,"div",25)(33,"div",26),u(34,Ji,6,3,"div",27),o(),a(35,"label",28)(36,"input",29),O(37,"async"),C("change",function(){x(e);let g=p();return S(g.themeService.toggleTheme())}),o(),a(38,"span",30),s(39,"lucide-angular",31)(40,"lucide-angular",32),o()(),a(41,"label",33),s(42,"lucide-angular",34),o()()()()}if(t&2){let e=p();M("sidebar--collapsed",e.isSidebarCollapsed)("text-large",e.isLargeText),n(2),r("ngIf",!e.isSidebarCollapsed),n(3),r("name",e.isLargeText?"minus":"plus"),n(2),r("name",e.isSidebarCollapsed?"menu":"chevron-left"),n(),M("text-large",e.isLargeText),n(),r("ngIf",e.isRestaurantUser()),n(),r("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_reservations")||e.authService.hasPermission("take_orders"))),n(),r("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_menu")||e.authService.hasPermission("view_kitchen_display"))),n(),r("ngIf",e.isRestaurantUser()&&(e.authService.hasPermission("manage_inventory")||e.authService.hasPermission("view_expenses"))),n(),r("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("view_reports")),n(),r("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("view_reports")),n(),r("ngIf",e.isSupplierUser()),n(),r("ngIf",e.isCustomerUser()),n(2),r("ngIf",!e.isSidebarCollapsed),n(),r("ngIf",e.isSidebarCollapsed),n(2),r("ngIf",e.isRestaurantUser()),n(),r("ngIf",e.isRestaurantUser()&&e.authService.hasPermission("manage_restaurant_settings")),n(),r("ngIf",e.isCustomerUser()),n(),r("ngIf",e.isCustomerUser()),n(3),r("size",e.iconSize),n(4),r("ngIf",e.shouldShowContextSelector()),n(3),r("ngIf",!e.isSidebarCollapsed),n(2),r("checked",w(37,34,e.themeService.currentTheme$)==="dark"),n(3),r("size",16),n(),r("size",16),n(2),J(Z("role-icon ",e.getRoleClass())),r("name",e.getRoleIcon())("size",e.iconSize)}}function Zi(t,i){if(t&1){let e=I();a(0,"app-header",105),O(1,"async"),O(2,"async"),O(3,"async"),C("toggleMenu",function(){x(e);let g=p();return S(g.toggleSidebar())}),o()}if(t&2){let e=p();r("title",w(1,3,e.pageTitle$)||"Platea")("icon",w(2,5,e.pageIcon$)||"layout-dashboard")("showToggle",w(3,7,e.showMobileToggle$)===!0)}}var B=class t{constructor(i,e,c,g){this.breakpointObserver=i;this.activatedRoute=e;this.router=c;this.cdr=g;this.currentUser$=this.authService.currentUser$,this.currentRestaurant$=this.authService.currentRestaurant$,this.initHeaderObservables(),this.hideGlobalHeader$=this.router.events.pipe(H(h=>h instanceof N),j(null),y(()=>{let h=this.activatedRoute;for(;h.firstChild;)h=h.firstChild;return h.snapshot.data.hideGlobalHeader===!0}))}authService=v(b);supplierAuthService=v(Kt);loadingService=v(me);themeService=v(qt);sidebarCollapsedSubject=new W(!0);isSidebarCollapsed$=this.sidebarCollapsedSubject.asObservable();isSidebarCollapsed=!0;pageTitle$;pageIcon$;isMobile$;showMobileToggle$;hideGlobalHeader$;sidebarSubscription;loading=!1;isLargeText=!1;loadingSubscription;currentUser$;currentRestaurant$;currentUser=null;currentRestaurant=null;supplierProfile=null;userSubscription=new L;supplierSubscription=new L;contextSubscription=new L;ngOnInit(){return _(this,null,function*(){this.themeService.initializeTheme(),this.loadingSubscription=this.loadingService.loading$.subscribe(i=>{this.loading=i}),this.contextSubscription=this.authService.currentContext$.subscribe(()=>{}),this.userSubscription=this.authService.currentUser$.subscribe(i=>{this.currentUser=i,i?(this.authService.loadPermissions(),this.printDebugInfo()):(this.currentRestaurant=null,this.supplierProfile=null)}),this.currentRestaurant$.subscribe(i=>{this.currentRestaurant=i}),this.supplierSubscription=this.supplierAuthService.supplierProfile$.subscribe(i=>{this.supplierProfile=i}),this.sidebarSubscription=this.authService.sidebarCollapsed$.subscribe(i=>{console.log("AppComponent: sidebar collapsed changed to",i),this.isSidebarCollapsed=i,this.cdr.markForCheck()})})}ngOnDestroy(){this.userSubscription.unsubscribe(),this.supplierSubscription.unsubscribe(),this.loadingSubscription.unsubscribe(),this.contextSubscription.unsubscribe(),this.sidebarSubscription.unsubscribe()}printDebugInfo(){console.log("\u{1F50D} DEBUG - App Component State:"),console.log("  - Current Context:",this.authService.getCurrentContext()),console.log("  - isRestaurantUser():",this.isRestaurantUser()),console.log("  - isCustomerUser():",this.isCustomerUser()),console.log("  - isSupplierUser():",this.isSupplierUser()),console.log("  - Current Staff:",this.authService.getCurrentStaff()),console.log("  - Current Restaurant:",this.currentRestaurant),console.log("  - Available Contexts:",this.authService.getAvailableContexts()),console.log("  - Can Be Staff:",this.authService.canBeStaff()),console.log("  - Is Owner:",this.authService.isOwner()),console.log("  - User Role:",this.authService.getUserRole())}initHeaderObservables(){let i=this.router.events.pipe(H(e=>e instanceof N),j(null),y(()=>{let e=this.activatedRoute;for(;e.firstChild;)e=e.firstChild;return e.snapshot.data}),X((e,c)=>e.title===c.title));this.pageTitle$=i.pipe(y(e=>e.title||"Platea")),this.pageIcon$=i.pipe(y(e=>e.icon||"layout-dashboard")),this.isMobile$=this.breakpointObserver.observe([V.Handset,V.TabletPortrait]).pipe(y(e=>e.matches)),this.showMobileToggle$=q([this.isMobile$,this.authService.sidebarCollapsed$]).pipe(y(([e,c])=>e&&c))}isRestaurantUser(){return this.authService.isRestaurantUser()}isCustomerUser(){return this.authService.isCustomerUser()}isSupplierUser(){return this.authService.isSupplierUser()}canBeStaff(){return this.authService.canBeStaff()}getUserDisplayName(){let i=this.currentUser;if(!i)return"";let e=i.first_name||"",c=i.last_name||"";return e&&c?`${e} ${c}`:e||c||i.email||"Utente"}getUserInitial(){let i=this.currentUser;if(!i)return"";let e=i.first_name||"",c=i.last_name||"";return e&&c?`${e.charAt(0)}${c.charAt(0)}`.toUpperCase():e?e.charAt(0).toUpperCase():c?c.charAt(0).toUpperCase():i.email?.charAt(0).toUpperCase()||"U"}getRestaurantName(){return this.currentRestaurant?.name||"Ristorante"}getSupplierCompanyName(){return this.supplierProfile&&this.supplierProfile.company_name||"Fornitore"}logout(){return _(this,null,function*(){yield this.authService.logout(),this.authService.setSidebarCollapsed(!0)})}toggleSidebar(){this.authService.toggleSidebar()}onSidebarNavClick(i){if(window.innerWidth>768)return;i.target.closest(".nav-link")&&this.authService.setSidebarCollapsed(!0)}onDocumentClick(i){let e=i.target;if(window.innerWidth<=768){if(e.closest(".mobile-sidebar-toggle")||e.closest(".mobile-toggle"))return;this.isSidebarCollapsed||!e.closest(".sidebar")&&!e.closest(".sidebar-toggle")&&this.authService.setSidebarCollapsed(!0)}}getRoleClass(){return`role-${this.authService.getStaffRole()||"guest"}`}getRoleLabel(){switch(this.authService.getStaffRole()||"guest"){case"owner":return"admin_panel_settings";case"manager":return"supervisor_account";case"chef":return"restaurant";case"waiter":return"room_service";case"kitchen_staff":return"kitchen";default:return"person"}}getRoleDisplayName(){let i=this.authService.getStaffRole()||"guest";return{owner:"Proprietario",manager:"Responsabile",chef:"Chef",waiter:"Cameriere",kitchen_staff:"Staff Cucina",guest:"Ospite"}[i]||i}isAuthenticated(){return this.authService.isAuthenticated()}getSettingsRoute(){return this.isRestaurantUser()&&this.authService.hasPermission("manage_restaurant_settings")?"/restaurant/settings":this.isSupplierUser()?"/supplier/settings":"/customer"}navigateBasedOnRole(){this.isRestaurantUser()?this.router.navigate(["/restaurant/dashboard"]):this.isSupplierUser()?this.router.navigate(["/supplier/dashboard"]):this.isCustomerUser()?this.router.navigate(["/customer"]):this.router.navigate(["/login"])}getAvailableContexts(){return this.authService.getAvailableContexts()}shouldShowContextSelector(){return this.authService.getAvailableContexts().length>1}setTheme(i){this.themeService.setTheme(i)}toggleSize(){this.isLargeText=!this.isLargeText}getRoleIcon(){return this.isRestaurantUser()?"store":this.isSupplierUser()?"truck":this.isCustomerUser()?"user":"circle"}get iconSize(){let i=this.isSidebarCollapsed?32:24;return this.isLargeText?Math.round(i*1.5):i}static \u0275fac=function(e){return new(e||t)(z(Wt),z(re),z(f),z(ee))};static \u0275cmp=E({type:t,selectors:[["app-root"]],hostBindings:function(e,c){e&1&&C("click",function(h){return c.onDocumentClick(h)},Y)},decls:7,vars:9,consts:[[1,"app-container"],["class","sidebar",3,"sidebar--collapsed","text-large","click",4,"ngIf"],[3,"isLoading"],[1,"main-content"],[3,"title","icon","showToggle","toggleMenu",4,"ngIf"],[1,"sidebar",3,"click"],[1,"sidebar-header"],["class","sidebar-brand",4,"ngIf"],[1,"flex","gap-sm","flex-wrap","p-sm1"],[1,"icon-button","bottonetesto","p-mini",3,"click"],[1,"nav-icon",3,"name"],["aria-label","Apri/Chiudi sidebar",1,"icon-button","aprichiudisidebar",3,"click"],[1,"sidebar-nav"],["class","nav-section",4,"ngIf"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["class","section-divider elegant",4,"ngIf"],[1,"nav-menu"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-label","Logout",1,"icon-button","largo",3,"click"],["name","log-out",1,"nav-icon",3,"size"],[1,"nav-text"],[1,"sidebar_footer"],["class","context-selector-container",4,"ngIf"],[1,"sidebar-user"],[1,"user-main-info"],["class","user-details",4,"ngIf"],[1,"theme-switch"],["type","checkbox",3,"change","checked"],[1,"theme-switch-slider"],["name","sun",1,"theme-icon","sun-icon",3,"size"],["name","moon",1,"theme-icon","moon-icon",3,"size"],[1,"role-icon"],[3,"name","size"],[1,"sidebar-brand"],[1,"logo"],["src","logoristoapp.png",1,"logopiccolo"],[1,"gradient-text","platea"],[1,"nav-section-title"],[1,"section-divider","elegant"],["routerLink","/restaurant/dashboard","routerLinkActive","nav-link--active","data-label","Dashboard",1,"nav-link"],["name","layout-dashboard",1,"nav-icon",3,"size"],["routerLink","/restaurant/floor-plan","routerLinkActive","nav-link--active","data-label","Layout Sala",1,"nav-link"],["name","table-2",1,"nav-icon",3,"size"],["routerLink","/restaurant/staff-management","routerLinkActive","nav-link--active","data-label","Staff",1,"nav-link"],["name","users",1,"nav-icon",3,"size"],["routerLink","/restaurant/table-map","routerLinkActive","nav-link--active","data-label","Prenotazioni",1,"nav-link"],["name","utensils-crossed",1,"nav-icon",3,"size"],["routerLink","/restaurant/calendar-view","routerLinkActive","nav-link--active","data-label","Calendario",1,"nav-link"],["name","calendar",1,"nav-icon",3,"size"],["routerLink","/restaurant/reservation-manager","routerLinkActive","nav-link--active","data-label","Lista Prenotazioni",1,"nav-link"],["name","notebook-text",1,"nav-icon",3,"size"],["routerLink","/restaurant/menu","routerLinkActive","nav-link--active","data-label","Men\xF9 & Piatti",1,"nav-link"],["name","utensils",1,"nav-icon",3,"size"],["routerLink","/restaurant/recipe","routerLinkActive","nav-link--active","data-label","Ricette",1,"nav-link"],["name","scroll-text",1,"nav-icon",3,"size"],["routerLink","/food-cost","routerLinkActive","nav-link--active","data-label","Food Cost",1,"nav-link"],["name","piggy-bank",1,"nav-icon",3,"size"],["routerLink","/restaurant/kitchen-display","routerLinkActive","nav-link--active","data-label","Pannello Cucina",1,"nav-link"],["name","chef-hat",1,"nav-icon",3,"size"],["routerLink","/restaurant/inventory","routerLinkActive","nav-link--active","data-label","Inventario",1,"nav-link"],["name","package",1,"nav-icon",3,"size"],["routerLink","/restaurant/alcoholic-beverages","routerLinkActive","nav-link--active","data-label","Alcolici",1,"nav-link"],["name","wine",1,"nav-icon",3,"size"],["routerLink","/restaurant/suppliers","routerLinkActive","nav-link--active","data-label","Fornitori",1,"nav-link"],["name","truck",1,"nav-icon",3,"size"],["routerLink","/restaurant/expense-management","routerLinkActive","nav-link--active","data-label","Gestione Spese",1,"nav-link"],["name","credit-card",1,"nav-icon",3,"size"],["routerLink","/restaurant/financial-report","routerLinkActive","nav-link--active","data-label","Report Finanziario",1,"nav-link"],["name","bar-chart-3",1,"nav-icon",3,"size"],["routerLink","/restaurant/web-site","routerLinkActive","nav-link--active","data-label","Crea il tuo sito web",1,"nav-link"],["name","globe",1,"nav-icon",3,"size"],["routerLink","/restaurant/contabile-fiscale","routerLinkActive","nav-link--active","data-label","Gestione Fiscale",1,"nav-link"],["name","landmark",1,"nav-icon",3,"size"],["routerLink","/restaurant/marketing","routerLinkActive","nav-link--active","data-label","Promuovi il ristorante",1,"nav-link"],["name","megaphone",1,"nav-icon",3,"size"],["routerLink","/supplier/dashboard","routerLinkActive","nav-link--active","data-label","Dashboard",1,"nav-link"],["routerLink","/supplier/products","routerLinkActive","nav-link--active","data-label","Catalogo Prodotti",1,"nav-link"],["name","package-search",1,"nav-icon",3,"size"],[1,"nav-item",2,"display","none"],["routerLink","/customer/search","routerLinkActive","nav-link--active","data-label","Cerca Ristoranti",1,"nav-link"],["name","search",1,"nav-icon",3,"size"],["routerLink","/customer/menu-display","routerLinkActive","nav-link--active","data-label","Home",1,"nav-link"],["name","home",1,"nav-icon",3,"size"],["routerLink","/customer/restaurant/restaurant-list","routerLinkActive","nav-link--active","data-label","Lista Ristoranti",1,"nav-link"],["routerLink","/customer/reservations","routerLinkActive","nav-link--active","data-label","Le mie Prenotazioni",1,"nav-link"],["name","calendar-check",1,"nav-icon",3,"size"],["routerLink","/customer/orders","routerLinkActive","nav-link--active","data-label","I miei Ordini",1,"nav-link"],["name","shopping-bag",1,"nav-icon",3,"size"],["routerLink","/customer/reviews","routerLinkActive","nav-link--active","data-label","Le mie Recensioni",1,"nav-link"],["name","star",1,"nav-icon",3,"size"],["routerLink","/restaurant/profile","routerLinkActive","nav-link--active","data-label","Profilo",1,"nav-link"],["name","user",1,"nav-icon",3,"size"],["routerLink","/restaurant/settings","routerLinkActive","nav-link--active","data-label","Impostazioni",1,"nav-link"],["name","settings",1,"nav-icon",3,"size"],["routerLink","/customer/profile-user","routerLinkActive","nav-link--active","data-label","Account",1,"nav-link"],["routerLink","/customer/settings","routerLinkActive","nav-link--active","data-label","Impostazioni Cliente",1,"nav-link"],[1,"context-selector-container"],[3,"largeText"],[1,"user-details"],[1,"user-info"],[1,"user-name"],["class","restaurant-info",4,"ngIf"],[1,"restaurant-info"],[3,"toggleMenu","title","icon","showToggle"]],template:function(e,c){e&1&&(a(0,"div",0),u(1,Qi,43,36,"aside",1),s(2,"app-loader",2),a(3,"main",3),u(4,Zi,4,9,"app-header",4),O(5,"async"),s(6,"router-outlet"),o()()),e&2&&(n(),r("ngIf",c.isAuthenticated()),n(),r("isLoading",c.loading),n(),M("main-content--expanded",c.isSidebarCollapsed&&c.isAuthenticated())("main-content--full",!c.isAuthenticated()),n(),r("ngIf",c.isAuthenticated()&&w(5,7,c.hideGlobalHeader$)===!1))},dependencies:[F,U,oe,de,se,le,Xt,$,D,jt,Vt,ie],styles:['[_ngcontent-%COMP%]:root{--transition-timing: cubic-bezier(.34, 1.56, .64, 1);--transition-duration: .4s;--transition-duration-slow: .65s}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}.app-container[_ngcontent-%COMP%]{display:flex;min-height:100dvh;background:var(--background);color:var(--text-color)}.sidebar[_ngcontent-%COMP%]{position:fixed;inset:0 auto 0 0;width:var(--sidebar-width);height:100dvh;-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background:linear-gradient(110deg,var(--background),var(--shadow-1));display:flex;flex-direction:column;z-index:1100;transition:transform var(--transition-duration) var(--transition-timing),width var(--transition-duration-slow) var(--transition-timing),box-shadow var(--transition-duration) ease-out,opacity .35s ease;overflow:hidden;box-shadow:0 5px 20px var(--smoke-1);will-change:transform,width,opacity,box-shadow}.sidebar--collapsed[_ngcontent-%COMP%]{width:var(--sidebar--collapsed-width)}.sidebar_footer[_ngcontent-%COMP%]{padding:var(--gap-sm);box-shadow:0 -2px 15px var(--shadow-1)}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap-md);transition:padding var(--transition-duration) var(--transition-timing)}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:var(--gap-sm);justify-content:center}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);font-weight:800;color:var(--primary);padding:var(--gap-sm);border-radius:14px}.platea[_ngcontent-%COMP%]{font-size:var(--fs-md);display:flex}.nav-section-title[_ngcontent-%COMP%]{margin-bottom:var(--gap-sm);color:var(--secondary);font-weight:800;font-size:calc(var(--fs-sm) * 1.2)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%]{font-size:var(--fs-md);line-height:1.1}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:var(--gap-sm);display:flex;flex-direction:column;gap:var(--gap-lg);transition:padding var(--transition-duration) var(--transition-timing)}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{padding:var(--gap-sm);gap:0}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{align-items:center;display:flex;padding:var(--gap-sm);position:relative}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{align-items:center;flex-direction:column;display:flex;gap:0}.sidebar--collapsed[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.nav-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--gap-sm) / 1.8)}.largo[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:var(--gap-sm);display:flex;gap:var(--gap-sm);border-radius:14px;font-weight:500}.largo[_ngcontent-%COMP%]:hover{transform:translate(4px)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:2.2!important}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-md);padding:var(--gap-sm);color:var(--text-color);border-radius:14px;text-decoration:none;transition:all .3s ease;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background:var(--smoke-1);transform:translate(6px) scale(1.02);transition:all .25s ease}.nav-link--active[_ngcontent-%COMP%]{background:var(--shadow-1);color:var(--tertiary);font-weight:800;box-shadow:0 3px 10px var(--shadow-1)}.nav-link--active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:80%;background:var(--gradiente);border-radius:0 4px 4px 0}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link--active[_ngcontent-%COMP%]:before{display:none}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .context-selector-container[_ngcontent-%COMP%]{opacity:0;width:0;overflow:hidden;pointer-events:none;display:none}.nav-text[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600}.nav-text.text-large[_ngcontent-%COMP%]{font-size:var(--fs-md)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar-nav.text-large[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md);line-height:1.1}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{gap:var(--gap-sm)}.sidebar--collapsed[_ngcontent-%COMP%]   .icon-button.largo[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;padding:calc(var(--gap-sm) / 2);gap:0;height:auto;position:relative}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar_footer[_ngcontent-%COMP%]{padding:0;align-items:center;display:flex;flex-direction:column}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{padding:var(--gap-sm);gap:var(--gap-sm);display:flex;flex-direction:column}.sidebar-user[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap-sm);border-top:2px solid var(--shadow-1);padding:var(--gap-sm) 0 0 0}.user-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm);flex:1}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gap-sm)}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:var(--fs-sm);line-height:1.2}.role-badge[_ngcontent-%COMP%]{padding:var(--gap-md);border-radius:12px;font-size:calc(var(--fs-sm) / 2);font-weight:600;background:var(--smoke-1);border:1px solid var(--smoke-1);line-height:1}.sidebar--collapsed[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:none}.restaurant-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.main-content[_ngcontent-%COMP%]{margin-left:var(--sidebar-width);flex:1;min-height:100dvh;transition:margin-left var(--transition-duration-slow) var(--transition-timing),filter .5s ease;overflow-y:auto;overflow-x:hidden;background:linear-gradient(135deg,var(--background),var(--background2));position:relative;z-index:1}.main-content[_ngcontent-%COMP%]:has(.modal-overlay){z-index:10001}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:6px;left:6px;z-index:1200;width:48px;height:48px;border-radius:16px;background:transparent;border:1px solid var(--shadow-1);box-shadow:0 4px 15px var(--shadow-1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:var(--text-color);align-items:center;justify-content:center}.mobile-sidebar-toggle.mobile-hidden[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.sidebar--collapsed[_ngcontent-%COMP%] ~ .main-content[_ngcontent-%COMP%], .main-content--expanded[_ngcontent-%COMP%]{margin-left:0!important}.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:100%;z-index:1000}.largo[_ngcontent-%COMP%]{padding:var(--gap-lg)}.largo[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg)}.sidebar-brand[_ngcontent-%COMP%]{font-size:var(--fs-lg);padding:var(--gap-md)}.platea[_ngcontent-%COMP%]{font-size:var(--fs-lg)}.sidebar-header[_ngcontent-%COMP%]{padding:var(--gap-md);margin-bottom:var(--gap-lg);box-shadow:0 1px 8px var(--shadow-1)}.nav-section-title[_ngcontent-%COMP%]{margin-left:var(--gap-lg)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%]{font-size:var(--fs-lg);line-height:1.1}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{gap:var(--gap-md)}.sidebar-nav.text-large[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar-nav.text-large[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg);line-height:1.1}.sidebar-user[_ngcontent-%COMP%]{padding:var(--gap-sm)}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed){transform:translate(0)}.main-content[_ngcontent-%COMP%]{margin-left:0!important}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:flex}.mobile-sidebar-toggle[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md)}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed) ~ .main-content[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:#00000080;z-index:999;pointer-events:auto}.role-icon[_ngcontent-%COMP%]{width:calc(var(--fs-lg) * 2)!important;height:calc(var(--fs-lg) * 2)!important;justify-content:center;align-items:center;display:flex}.role-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-lg)!important}}.theme-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:52px;height:28px;cursor:pointer;border-radius:34px;background-color:#e0e0e0;transition:background-color .3s ease;box-shadow:inset 0 1px 3px #0000001a}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0;position:absolute}.theme-switch-slider[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;width:24px;height:24px;border-radius:50%;background-color:var(--background2);transition:transform .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003}.theme-icon[_ngcontent-%COMP%]{position:absolute;transition:opacity .2s ease}.sun-icon[_ngcontent-%COMP%]{opacity:1;color:#f39c12}.moon-icon[_ngcontent-%COMP%]{opacity:0;color:#f1c40f}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]{transform:translate(24px)}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]   .sun-icon[_ngcontent-%COMP%]{opacity:0}.theme-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .theme-switch-slider[_ngcontent-%COMP%]   .moon-icon[_ngcontent-%COMP%]{opacity:1}.theme-switch[_ngcontent-%COMP%]:has(input:checked){background-color:var(--shadow-2)}.theme-switch.dark-bg[_ngcontent-%COMP%]{background-color:#2c3e50}.sidebar--collapsed[_ngcontent-%COMP%] ~ .main-content[_ngcontent-%COMP%], .main-content--expanded[_ngcontent-%COMP%]{margin-left:var(--sidebar--collapsed-width);transition:margin-left var(--transition-duration-slow) var(--transition-timing),filter var(--transition-duration) var(--transition-timing)}.main-content--full[_ngcontent-%COMP%]{margin-left:0!important}.role-icon[_ngcontent-%COMP%]{font-size:var(--fs-sm);padding:var(--gap-sm);border-radius:50%;background:var(--smoke-1);transition:all .3s ease}.role-owner[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#ff6b35;background:color-mix(in srgb,#ff6b35 15%,transparent)}.role-manager[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#4a90e2;background:color-mix(in srgb,#4a90e2 15%,transparent)}.role-chef[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#e74c3c;background:color-mix(in srgb,#e74c3c 15%,transparent)}.role-waiter[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#27ae60;background:color-mix(in srgb,#27ae60 15%,transparent)}.role-kitchen_staff[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#9b59b6;background:color-mix(in srgb,#9b59b6 15%,transparent)}.role-guest[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:var(--text-muted);background:var(--smoke-1)}.sidebar--collapsed[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .bottonetesto[_ngcontent-%COMP%]{display:none}.sidebar--collapsed[_ngcontent-%COMP%]   .section-divider[_ngcontent-%COMP%]{display:block}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed)   .section-divider[_ngcontent-%COMP%]{display:none}.section-divider.elegant[_ngcontent-%COMP%]{width:100%;height:3px;background:linear-gradient(90deg,transparent,var(--secondary),transparent);margin:0;border-radius:50%;transition:all .3s ease}']})};ne(B,Jt).catch(t=>console.error(t));
