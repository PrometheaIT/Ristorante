import{a as X}from"./chunk-LV23W6TA.js";import{a as H}from"./chunk-HLPUWHUI.js";import{a as de,b as ce,d as me,e as pe,g as ge,h as ue,i as _e,j as be,p as he,q as ve,r as fe,s as xe,t as we,w as Pe}from"./chunk-HTWH3NPU.js";import"./chunk-XJU7QOT3.js";import{B as A,D as se,d as ae,e as re,l as le}from"./chunk-KBL2L3GY.js";import{Cb as P,Gb as g,Hb as c,Lb as $,Mb as ee,Na as s,Nb as te,Pb as W,Qb as E,Rb as ie,Sb as q,Tb as r,Ub as S,Vb as M,Wb as I,Xa as J,Xb as ne,Yb as v,Zb as f,_b as x,a as U,ac as oe,b as Y,ba as Q,cb as K,f as h,g as G,ga as y,hb as w,la as m,ma as p,ob as Z,tb as u,ub as o,vb as a,wb as z}from"./chunk-UE7YVF6I.js";var j=class d{supabaseService=y(A);mergeTables(t,e,n,i){return h(this,null,function*(){try{let l=t.map(F=>F.id),_={restaurant_id:i,floor_plan_id:n,table_name:e.table_name,table_number:e.table_number,capacity:e.capacity,shape:"rectangle",position_x:e.position_x,position_y:e.position_y,width:e.width,height:e.height,rotation:0,is_active:!0,is_online_bookable:!0,is_merged:!1,parent_table_id:null,merged_tables_ids:l},{data:b,error:O}=yield this.supabaseService.getSupabaseClient().from("tables").insert(_).select().single();if(O)throw O;for(let F of t){let k={is_online_bookable:!1,is_merged:!0,parent_table_id:b.id},{error:T}=yield this.supabaseService.getSupabaseClient().from("tables").update(k).eq("id",F.id);if(T)throw T}return b}catch(l){return console.error("\u274C Error merging tables:",l),null}})}splitMergedTable(t){return h(this,null,function*(){try{console.log("\u{1F50D} Cerco tavoli figli per:",t.id);let{data:e,error:n}=yield this.supabaseService.getSupabaseClient().from("tables").select("*").eq("parent_table_id",t.id);if(n)throw console.error("\u274C Errore nel fetch dei tavoli figli:",n),n;console.log("\u{1F4CB} Tavoli figli trovati:",e?.length);for(let l of e||[]){let _={is_online_bookable:!0,is_merged:!1,parent_table_id:null};console.log("\u{1F504} Ripristino tavolo:",l.table_number);let{error:b}=yield this.supabaseService.getSupabaseClient().from("tables").update(_).eq("id",l.id);if(b)throw console.error("\u274C Errore nell'aggiornamento del tavolo:",b),b}console.log("\u{1F5D1}\uFE0F Elimino tavolo unito principale:",t.id);let{error:i}=yield this.supabaseService.getSupabaseClient().from("tables").delete().eq("id",t.id);if(i)throw console.error("\u274C Errore nell'eliminazione del tavolo unito:",i),i;return console.log("\u2705 Separazione completata con successo"),!0}catch(e){return console.error("\u274C Error splitting merged table:",e),!1}})}getMergedTableChildren(t){return h(this,null,function*(){try{let{data:e,error:n}=yield this.supabaseService.getSupabaseClient().from("tables").select("*").eq("parent_table_id",t);if(n)throw n;return e||[]}catch(e){return console.error("\u274C Error fetching merged table children:",e),[]}})}static \u0275fac=function(e){return new(e||d)};static \u0275prov=Q({token:d,factory:d.\u0275fac,providedIn:"root"})};var Se=["floorPlanCanvas"];function Fe(d,t){if(d&1&&(o(0,"option",49),r(1),a()),d&2){let e=t.$implicit;u("ngValue",e),s(),S(e.name)}}function ke(d,t){if(d&1){let e=P();o(0,"div",50)(1,"button",51),g("click",function(i){m(e);let l=c();return p(l.startEditFloorPlan(l.currentFloorPlan,i))}),o(2,"span",5),r(3,"edit"),a()(),o(4,"button",52),g("click",function(i){m(e);let l=c();return p(l.onDeleteFloorPlan(l.currentFloorPlan,i))}),o(5,"span",5),r(6,"delete"),a()()()}if(d&2){let e=c();s(),u("disabled",!e.currentFloorPlan),s(3),u("disabled",!e.currentFloorPlan)}}function Oe(d,t){if(d&1){let e=P();o(0,"div",53)(1,"input",54),x("ngModelChange",function(i){m(e);let l=c();return f(l.editedFloorPlanName,i)||(l.editedFloorPlanName=i),p(i)}),g("keyup.enter",function(){m(e);let i=c();return p(i.saveFloorPlanName())})("keyup.escape",function(){m(e);let i=c();return p(i.cancelEditFloorPlan())}),a(),o(2,"button",55),g("click",function(){m(e);let i=c();return p(i.saveFloorPlanName())}),o(3,"span",5),r(4,"check"),a()(),o(5,"button",56),g("click",function(){m(e);let i=c();return p(i.cancelEditFloorPlan())}),o(6,"span",5),r(7,"close"),a()()()}if(d&2){let e=c();s(),v("ngModel",e.editedFloorPlanName)}}function Ve(d,t){d&1&&(o(0,"span",63),r(1," (Tavolo Unito) "),a())}function Ie(d,t){if(d&1){let e=P();o(0,"button",64),g("click",function(){m(e);let i=c(2);return p(i.onSplitTable(i.selectedTable))}),o(1,"span",5),r(2,"call_split"),a(),r(3," Separa "),a()}}function Ne(d,t){if(d&1){let e=P();o(0,"div",57)(1,"div",58)(2,"label",59),r(3,"Tavolo Selezionato"),a(),o(4,"span",8),r(5),w(6,Ve,2,0,"span",60),a()(),o(7,"div",61)(8,"button",27),g("click",function(){m(e);let i=c();return p(i.openEditTableModal(i.selectedTable))}),o(9,"span",5),r(10,"edit"),a(),r(11," Modifica "),a(),w(12,Ie,4,0,"button",62),o(13,"button",29),g("click",function(){m(e);let i=c();return p(i.deselectAll())}),o(14,"span",5),r(15,"close"),a(),r(16," Deseleziona "),a()()()}if(d&2){let e=c();s(5),I(" Tavolo ",e.selectedTable.table_number," - ",e.selectedTable.capacity," persone "),s(),u("ngIf",e.selectedTable.merged_tables_ids&&e.selectedTable.merged_tables_ids.length>0),s(6),u("ngIf",e.selectedTable.merged_tables_ids&&e.selectedTable.merged_tables_ids.length>0)}}function De(d,t){d&1&&(o(0,"div",73)(1,"span",5),r(2,"warning"),a(),o(3,"span"),r(4,"Alcuni tavoli selezionati non sono vicini tra loro. Seleziona solo tavoli che si toccano."),a()())}function ze(d,t){if(d&1){let e=P();o(0,"div",79)(1,"span",80),r(2),a(),o(3,"span",81),r(4),a(),o(5,"button",82),g("click",function(){let i=m(e).$implicit,l=c(3);return p(l.toggleTableSelection(i))}),o(6,"span",5),r(7,"close"),a()()()}if(d&2){let e=t.$implicit;s(2),M("Tavolo ",e.table_number),s(2),M("",e.capacity," p")}}function We(d,t){if(d&1&&(o(0,"div",83)(1,"small",8)(2,"span",5),r(3),a(),r(4),a()()),d&2){let e=c(3);s(),E("success",e.areSelectedTablesAdjacent())("warning",!e.areSelectedTablesAdjacent()),s(2),S(e.areSelectedTablesAdjacent()?"check_circle":"info"),s(),M(" ",e.areSelectedTablesAdjacent()?"Tutti i tavoli sono collegati":"Verifica che i tavoli si tocchino"," ")}}function Ae(d,t){if(d&1&&(o(0,"div",74)(1,"div",75),r(2,"Tavoli Selezionati:"),a(),o(3,"div",76),w(4,ze,8,2,"div",77),a(),w(5,We,5,6,"div",78),a()),d&2){let e=c(2);s(4),u("ngForOf",e.selectedTables),s(),u("ngIf",e.selectedTables.length>=2)}}function je(d,t){if(d&1){let e=P();o(0,"div",65)(1,"div",10)(2,"div",66)(3,"div",67)(4,"span",5),r(5,"merge"),a(),o(6,"h4"),r(7,"Modalit\xE0 Unione Tavoli"),a(),o(8,"span",8),r(9,"Seleziona 2-4 tavoli adiacenti da unire"),a()(),o(10,"div",68)(11,"span",69),r(12),a(),o(13,"button",70),g("click",function(){m(e);let i=c();return p(i.openMergeModal())}),o(14,"span",5),r(15,"merge"),a(),r(16," Unisci Tavoli "),a(),o(17,"button",29),g("click",function(){m(e);let i=c();return p(i.toggleMergeMode())}),o(18,"span",5),r(19,"close"),a(),r(20," Annulla "),a()()(),w(21,De,5,0,"div",71)(22,Ae,6,2,"div",72),a()()}if(d&2){let e=c();s(12),M("Selezionati: ",e.selectedTables.length,"/4"),s(),u("disabled",!e.canMergeTables()),s(8),u("ngIf",e.selectedTables.length>=2&&!e.areSelectedTablesAdjacent()),s(),u("ngIf",e.selectedTables.length>0)}}function Le(d,t){d&1&&z(0,"div",84)}function Re(d,t){if(d&1&&(o(0,"div",85)(1,"div",86)(2,"div",80),r(3),a(),o(4,"div",81),r(5),a()()()),d&2){let e=t.$implicit,n=c();ie(n.getTableStyle(e)),q(n.getTableClass(e)),Z("data-table-id",e.id),s(3),S(e.table_number),s(2),M("",e.capacity," p")}}function Be(d,t){d&1&&(o(0,"div",87)(1,"div",88)(2,"span",5),r(3,"touch_app"),a(),o(4,"h4"),r(5,"Clicca per aggiungere un tavolo"),a(),o(6,"p"),r(7,"Clicca su qualsiasi punto della mappa per aprire il menu di creazione tavolo"),a()()())}function Ue(d,t){if(d&1){let e=P();o(0,"div",89)(1,"span",5),r(2,"table_restaurant"),a(),o(3,"h3"),r(4,"Nessun tavolo configurato"),a(),o(5,"p"),r(6,'Usa la modalit\xE0 "Aggiungi Tavoli" per iniziare a creare la tua mappa'),a(),o(7,"button",90),g("click",function(){m(e);let i=c();return p(i.toggleDrawingMode())}),o(8,"span",5),r(9,"add"),a(),r(10," Inizia ad Aggiungere Tavoli "),a()()}}function qe(d,t){if(d&1){let e=P();o(0,"div",111)(1,"h4"),r(2,"Tavolo Unit"),a(),o(3,"p",8),r(4,"Questo tavolo \xE8 composto da pi\xF9 tavoli uniti insieme"),a(),o(5,"button",113),g("click",function(){m(e);let i=c(2);return p(i.onSplitTable(i.selectedTable))}),o(6,"span",5),r(7,"call_split"),a(),r(8," Separa Tavolo "),a()()}}function He(d,t){if(d&1){let e=P();o(0,"div",91),g("click",function(){m(e);let i=c();return p(i.deselectAll())}),o(1,"div",92),g("click",function(i){return m(e),p(i.stopPropagation())}),o(2,"div",93)(3,"div",94)(4,"div",95)(5,"span",5),r(6,"edit"),a(),o(7,"h3",96),r(8),a()(),o(9,"button",97),g("click",function(){m(e);let i=c();return p(i.deselectAll())}),o(10,"span",5),r(11,"close"),a()()(),o(12,"div",10)(13,"form",98)(14,"div",13)(15,"label",99),r(16,"Nome Tavolo"),a(),o(17,"input",100),x("ngModelChange",function(i){m(e);let l=c();return f(l.selectedTable.table_name,i)||(l.selectedTable.table_name=i),p(i)}),a()(),o(18,"div",25)(19,"div",13)(20,"label",101),r(21,"Numero"),a(),o(22,"input",102),x("ngModelChange",function(i){m(e);let l=c();return f(l.selectedTable.table_number,i)||(l.selectedTable.table_number=i),p(i)}),a()(),o(23,"div",13)(24,"label",103),r(25,"Capacit\xE0"),a(),o(26,"input",104),x("ngModelChange",function(i){m(e);let l=c();return f(l.selectedTable.capacity,i)||(l.selectedTable.capacity=i),p(i)}),a()()(),o(27,"div",13)(28,"label",105)(29,"input",106),x("ngModelChange",function(i){m(e);let l=c();return f(l.selectedTable.is_online_bookable,i)||(l.selectedTable.is_online_bookable=i),p(i)}),a(),z(30,"span",23),r(31," Prenotabile online dagli utenti "),a(),o(32,"small",8),r(33," Se deselezionato, questo tavolo pu\xF2 essere prenotato solo dal personale "),a()(),w(34,qe,9,0,"div",107),o(35,"div",108)(36,"button",109),g("click",function(){m(e);let i=c();return p(i.deselectAll())}),r(37," Annulla "),a(),o(38,"button",110),g("click",function(){m(e);let i=c();return p(i.onUpdateTable())}),o(39,"span",5),r(40,"save"),a(),r(41," Aggiorna "),a()()(),o(42,"div",111)(43,"button",112),g("click",function(){m(e);let i=c();return p(i.onDeleteTable())}),o(44,"span",5),r(45,"delete"),a(),r(46," Elimina Tavolo "),a()()()()()()}if(d&2){let e=c();s(8),M("Modifica Tavolo ",e.selectedTable.table_number),s(9),v("ngModel",e.selectedTable.table_name),s(5),v("ngModel",e.selectedTable.table_number),s(4),v("ngModel",e.selectedTable.capacity),s(3),v("ngModel",e.selectedTable.is_online_bookable),s(5),u("ngIf",e.selectedTable.is_merged)}}function Xe(d,t){if(d&1){let e=P();o(0,"div",129),g("click",function(){let i=m(e).$implicit,l=c(2);return p(l.onShapeSelect(i))}),o(1,"div",130)(2,"span",5),r(3),a()(),o(4,"span",131),r(5),a()()}if(d&2){let e=t.$implicit,n=c(2);E("selected",n.tableForm.shape===e.type),s(),q("shape-"+e.type),s(2),S(e.icon),s(2),S(e.name)}}function Ye(d,t){if(d&1){let e=P();o(0,"div",13)(1,"label",132),r(2,"Angoli Arrotondati"),a(),o(3,"select",133),x("ngModelChange",function(i){m(e);let l=c(2);return f(l.tableForm.borderRadius,i)||(l.tableForm.borderRadius=i),p(i)}),o(4,"option",134),r(5,"Nessuno"),a(),o(6,"option",135),r(7,"Leggero"),a(),o(8,"option",136),r(9,"Medio"),a(),o(10,"option",137),r(11,"Alto"),a(),o(12,"option",138),r(13,"Massimo"),a()()()}if(d&2){let e=c(2);s(3),v("ngModel",e.tableForm.borderRadius)}}function Ge(d,t){if(d&1){let e=P();o(0,"div",91),g("click",function(){m(e);let i=c();return p(i.onCancelCreateTable())}),o(1,"div",92),g("click",function(i){return m(e),p(i.stopPropagation())}),o(2,"div",93)(3,"div",94)(4,"div",95)(5,"span",5),r(6,"add_circle"),a(),o(7,"h3",96),r(8,"Crea Nuovo Tavolo"),a()(),o(9,"button",97),g("click",function(){m(e);let i=c();return p(i.onCancelCreateTable())}),o(10,"span",5),r(11,"close"),a()()(),o(12,"div",10)(13,"form",98)(14,"div",13)(15,"label",14),r(16,"Forma del Tavolo"),a(),o(17,"div",114),w(18,Xe,6,6,"div",115),a()(),o(19,"div",25)(20,"div",13)(21,"label",116),r(22,"Larghezza (quadrati)"),a(),o(23,"input",117),x("ngModelChange",function(i){m(e);let l=c();return f(l.tableForm.gridWidth,i)||(l.tableForm.gridWidth=i),p(i)}),a(),o(24,"small",8),r(25),a()(),o(26,"div",13)(27,"label",118),r(28,"Altezza (quadrati)"),a(),o(29,"input",119),x("ngModelChange",function(i){m(e);let l=c();return f(l.tableForm.gridHeight,i)||(l.tableForm.gridHeight=i),p(i)}),a(),o(30,"small",8),r(31),a()()(),o(32,"div",120)(33,"h4"),r(34,"Dimensioni Reali"),a(),o(35,"p"),r(36),a()(),w(37,Ye,14,1,"div",121),o(38,"div",25)(39,"div",13)(40,"label",101),r(41,"Numero Tavolo"),a(),o(42,"input",122),x("ngModelChange",function(i){m(e);let l=c();return f(l.tableForm.tableNumber,i)||(l.tableForm.tableNumber=i),p(i)}),a()(),o(43,"div",13)(44,"label",99),r(45,"Nome Tavolo (opzionale)"),a(),o(46,"input",123),x("ngModelChange",function(i){m(e);let l=c();return f(l.tableForm.tableName,i)||(l.tableForm.tableName=i),p(i)}),a()()(),o(47,"div",13)(48,"label",124),r(49,"Capacit\xE0 (persone)"),a(),o(50,"input",125),x("ngModelChange",function(i){m(e);let l=c();return f(l.tableForm.capacity,i)||(l.tableForm.capacity=i),p(i)}),a()(),o(51,"div",126)(52,"h4"),r(53,"Anteprima"),a(),o(54,"div",127)(55,"div",128)(56,"span",80),r(57),a(),o(58,"span",81),r(59),a()()()(),o(60,"div",108)(61,"button",109),g("click",function(){m(e);let i=c();return p(i.onCancelCreateTable())}),r(62," Annulla "),a(),o(63,"button",110),g("click",function(){m(e);let i=c();return p(i.onCreateTable())}),o(64,"span",5),r(65,"add"),a(),r(66," Crea Tavolo "),a()()()()()()()}if(d&2){let e=c();s(18),u("ngForOf",e.tableShapes),s(5),v("ngModel",e.tableForm.gridWidth),u("disabled",e.tableForm.shape==="circle"),s(2),M("1 quadrato = ",e.gridSize,"px"),s(4),v("ngModel",e.tableForm.gridHeight),u("disabled",e.tableForm.shape==="circle"||e.tableForm.shape==="square"),s(2),M("1 quadrato = ",e.gridSize,"px"),s(5),I("",e.tableForm.gridWidth*e.gridSize," \xD7 ",e.tableForm.gridHeight*e.gridSize," px"),s(),u("ngIf",e.tableForm.shape==="rectangle"||e.tableForm.shape==="square"),s(5),v("ngModel",e.tableForm.tableNumber),s(4),v("ngModel",e.tableForm.tableName),s(4),v("ngModel",e.tableForm.capacity),s(4),W("width",e.tableForm.gridWidth*20,"px")("height",e.tableForm.gridHeight*20,"px")("border-radius",e.tableForm.borderRadius,"px"),E("shape-circle",e.tableForm.shape==="circle"),s(3),S(e.tableForm.tableNumber||"1"),s(2),M("",e.tableForm.capacity," p")}}function Qe(d,t){if(d&1){let e=P();o(0,"div",91),g("click",function(){m(e);let i=c();return p(i.onCancelDimensionsModal())}),o(1,"div",92),g("click",function(i){return m(e),p(i.stopPropagation())}),o(2,"div",93)(3,"div",94)(4,"div",95)(5,"span",5),r(6,"aspect_ratio"),a(),o(7,"h3",96),r(8,"Dimensioni Sala"),a()(),o(9,"button",97),g("click",function(){m(e);let i=c();return p(i.onCancelDimensionsModal())}),o(10,"span",5),r(11,"close"),a()()(),o(12,"div",10)(13,"form",98)(14,"div",25)(15,"div",13)(16,"label",139),r(17,"Larghezza (px)"),a(),o(18,"input",140),x("ngModelChange",function(i){m(e);let l=c();return f(l.dimensionsForm.width,i)||(l.dimensionsForm.width=i),p(i)}),a(),o(19,"small",8),r(20,"Min: 500px, Max: 5000px"),a()(),o(21,"div",13)(22,"label",141),r(23,"Altezza (px)"),a(),o(24,"input",142),x("ngModelChange",function(i){m(e);let l=c();return f(l.dimensionsForm.height,i)||(l.dimensionsForm.height=i),p(i)}),a(),o(25,"small",8),r(26,"Min: 500px, Max: 5000px"),a()()(),o(27,"div",13)(28,"label",14),r(29,"Dimensioni Predefinite"),a(),o(30,"div",143)(31,"button",144),g("click",function(){m(e);let i=c();return p(i.setDimensions(1e3,800))}),r(32," Piccola (1000\xD7800) "),a(),o(33,"button",144),g("click",function(){m(e);let i=c();return p(i.setDimensions(1500,1200))}),r(34," Media (1500\xD71200) "),a(),o(35,"button",144),g("click",function(){m(e);let i=c();return p(i.setDimensions(2e3,1600))}),r(36," Grande (2000\xD71600) "),a()()(),o(37,"div",126)(38,"h4"),r(39,"Anteprima Dimensioni"),a(),o(40,"div",145)(41,"div",146)(42,"div",147),r(43),a()()()(),o(44,"div",108)(45,"button",109),g("click",function(){m(e);let i=c();return p(i.onCancelDimensionsModal())}),r(46," Annulla "),a(),o(47,"button",110),g("click",function(){m(e);let i=c();return p(i.onSaveDimensions())}),o(48,"span",5),r(49,"save"),a(),r(50," Salva Dimensioni "),a()()()()()()()}if(d&2){let e=c();s(18),v("ngModel",e.dimensionsForm.width),s(6),v("ngModel",e.dimensionsForm.height),s(17),W("width",e.dimensionsForm.width*.1,"px")("height",e.dimensionsForm.height*.1,"px"),s(2),I(" ",e.dimensionsForm.width," \xD7 ",e.dimensionsForm.height," px ")}}function Je(d,t){if(d&1&&(o(0,"div",157)(1,"span",5),r(2,"table_restaurant"),a(),o(3,"div",158)(4,"strong"),r(5),a(),o(6,"span"),r(7),a()()()),d&2){let e=t.$implicit;s(5),M("Tavolo ",e.table_number),s(2),M("",e.capacity," persone")}}function Ke(d,t){if(d&1){let e=P();o(0,"div",91),g("click",function(){m(e);let i=c();return p(i.showMergeModal=!1)}),o(1,"div",92),g("click",function(i){return m(e),p(i.stopPropagation())}),o(2,"div",93)(3,"div",94)(4,"div",95)(5,"span",5),r(6,"merge"),a(),o(7,"h3",96),r(8,"Unisci Tavoli"),a()(),o(9,"button",97),g("click",function(){m(e);let i=c();return p(i.showMergeModal=!1)}),o(10,"span",5),r(11,"close"),a()()(),o(12,"div",10)(13,"form",98)(14,"div",13)(15,"label",14),r(16,"Tavoli da unire"),a(),o(17,"div",148),w(18,Je,8,2,"div",149),a()(),o(19,"div",25)(20,"div",13)(21,"label",150),r(22,"Numero Nuovo Tavolo"),a(),o(23,"input",151),x("ngModelChange",function(i){m(e);let l=c();return f(l.mergeForm.tableNumber,i)||(l.mergeForm.tableNumber=i),p(i)}),a()(),o(24,"div",13)(25,"label",152),r(26,"Capacit\xE0 Totale"),a(),o(27,"input",153),x("ngModelChange",function(i){m(e);let l=c();return f(l.mergeForm.capacity,i)||(l.mergeForm.capacity=i),p(i)}),a()()(),o(28,"div",13)(29,"label",154),r(30,"Nome Tavolo Unito"),a(),o(31,"input",155),x("ngModelChange",function(i){m(e);let l=c();return f(l.mergeForm.tableName,i)||(l.mergeForm.tableName=i),p(i)}),a()(),o(32,"div",156)(33,"h4"),r(34,"Riepilogo Capacit\xE0"),a(),o(35,"p"),r(36),a(),o(37,"p"),r(38),a()(),o(39,"div",108)(40,"button",109),g("click",function(){m(e);let i=c();return p(i.showMergeModal=!1)}),r(41," Annulla "),a(),o(42,"button",110),g("click",function(){m(e);let i=c();return p(i.onMergeTables())}),o(43,"span",5),r(44,"merge"),a(),r(45," Crea Tavolo Unito "),a()()()()()()()}if(d&2){let e=c();s(18),u("ngForOf",e.selectedTables),s(5),v("ngModel",e.mergeForm.tableNumber),s(4),v("ngModel",e.mergeForm.capacity),s(4),v("ngModel",e.mergeForm.tableName),s(5),M("Capacit\xE0 originale totale: ",e.getTotalCapacity()," persone"),s(2),M("Nuova capacit\xE0: ",e.mergeForm.capacity," persone")}}var Me=class d{floorPlanService=y(X);tableService=y(H);tableMergeService=y(j);authService=y(se);supabaseService=y(A);renderer=y(J);showEditTableModal=!1;canvasRef;floorPlans=[];currentFloorPlan=null;tables=[];tableShapes=[];selectedTable=null;isDrawing=!1;showTableModal=!1;gridSize=20;snapToGrid=!0;currentRestaurantId=null;modalPosition={x:0,y:0};showDimensionsModal=!1;dimensionsForm={width:1e3,height:800};tableForm={shape:"rectangle",gridWidth:6,gridHeight:4,capacity:4,borderRadius:0,tableName:"",tableNumber:""};editingFloorPlan=null;editedFloorPlanName="";selectedTables=[];showMergeModal=!1;mergeForm={tableName:"",tableNumber:"",capacity:4};isMergeMode=!1;subscriptions=new G;mouseMoveListener;mouseUpListener;pointerMoveListener;pointerUpListener;ngOnInit(){return h(this,null,function*(){console.log("\u{1F3C1} FloorPlanEditor ngOnInit"),this.tableShapes=this.floorPlanService.getTableShapes(),yield this.loadInitialData(),this.subscriptions.add(this.floorPlanService.floorPlans$.subscribe(t=>{this.floorPlans=t,t.length>0&&!this.currentFloorPlan?(this.currentFloorPlan=t[0],this.loadTablesForFloorPlan()):t.length===0&&this.createDefaultFloorPlan()})),this.subscriptions.add(this.tableService.data$.subscribe(()=>{this.loadTablesForFloorPlan()}))})}loadInitialData(){return h(this,null,function*(){try{let t=this.authService.currentUserValue;if(t){let{data:e,error:n}=yield this.supabaseService.getSupabaseClient().from("restaurants").select("id").eq("owner_id",t.id).limit(1);if(n){console.error("\u274C Error loading restaurants:",n);return}e&&e.length>0&&(this.currentRestaurantId=e[0].id)}yield this.floorPlanService.loadFloorPlans(),yield this.tableService.loadData()}catch(t){console.error("\u{1F4A5} Error in loadInitialData:",t)}})}ngAfterViewInit(){this.setupCanvasInteractions()}ngOnDestroy(){this.mouseMoveListener&&this.mouseMoveListener(),this.mouseUpListener&&this.mouseUpListener(),this.pointerMoveListener&&document.removeEventListener("pointermove",this.pointerMoveListener),this.pointerUpListener&&document.removeEventListener("pointerup",this.pointerUpListener),this.subscriptions.unsubscribe()}setupCanvasInteractions(){let t=this.canvasRef.nativeElement;this.renderer.listen(t,"click",e=>this.onCanvasClick(e)),this.renderer.listen(t,"pointerdown",e=>this.onCanvasPointerDown(e))}onCanvasClick(t){if(!this.isDrawing||!this.currentFloorPlan||!this.currentRestaurantId)return;let e=this.canvasRef.nativeElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,l=this.snapToGrid?Math.round(n/this.gridSize)*this.gridSize:n,_=this.snapToGrid?Math.round(i/this.gridSize)*this.gridSize:i;this.modalPosition={x:l,y:_},this.showTableModal=!0,this.resetTableForm(),t.stopPropagation()}onCanvasPointerDown(t){if(this.isDrawing)return;let n=t.target.closest(".table-element");if(n){let i=n.getAttribute("data-table-id"),l=this.tables.find(_=>_.id===i);l&&(this.selectTable(l),this.startDrag(l,t,n))}else this.deselectAll();t.preventDefault(),t.stopPropagation()}startDrag(t,e,n){let i=this.canvasRef.nativeElement.getBoundingClientRect();if(!n)return;try{n.style.touchAction="none"}catch{}let l=e.pointerId;try{n.setPointerCapture(l)}catch{}let _=e.clientX,b=e.clientY,O=t.position_x,F=t.position_y,k=C=>{if(C.preventDefault(),!this.currentFloorPlan)return;let N=C.clientX-_,D=C.clientY-b,V=O+N,L=F+D;this.snapToGrid&&(V=Math.round(V/this.gridSize)*this.gridSize,L=Math.round(L/this.gridSize)*this.gridSize);let Te=this.currentFloorPlan.width-t.width,Ce=this.currentFloorPlan.height-t.height,R=Math.max(0,Math.min(V,Te)),B=Math.max(0,Math.min(L,Ce)),ye=Y(U({},t),{position_x:R,position_y:B});this.tableService.checkTableOverlap(ye,t.id)||(t.position_x=R,t.position_y=B,n.style.left=R+"px",n.style.top=B+"px")},T=C=>h(this,null,function*(){let N=C;try{n.releasePointerCapture(l)}catch{}document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",T),this.selectedTable&&(yield this.saveTablePosition(this.selectedTable))});document.addEventListener("pointermove",k),document.addEventListener("pointerup",T),this.pointerMoveListener=k,this.pointerUpListener=T}saveTablePosition(t){return h(this,null,function*(){try{let e={position_x:t.position_x,position_y:t.position_y};yield this.tableService.updateTable(t.id,e)}catch(e){console.error("\u274C Error saving table position:",e)}})}getTableElement(t){return this.canvasRef.nativeElement.querySelector(`[data-table-id="${t.id}"]`)}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[];return}this.tables=this.tableService.getVisibleTablesByFloorPlan(this.currentFloorPlan.id)}onFloorPlanSelect(t){this.currentFloorPlan=t,this.loadTablesForFloorPlan(),this.deselectAll(),this.cancelEditFloorPlan()}resetTableForm(){this.tableForm={shape:"rectangle",gridWidth:6,gridHeight:4,capacity:4,borderRadius:0,tableName:"",tableNumber:this.generateNextTableNumber().toString(),isOnlineBookable:!0}}onShapeSelect(t){this.tableForm.shape=t.type,this.tableForm.gridWidth=Math.round(t.default_width/this.gridSize),this.tableForm.gridHeight=Math.round(t.default_height/this.gridSize),(t.type==="circle"||t.type==="square")&&(this.tableForm.gridHeight=this.tableForm.gridWidth)}onCreateTable(){return h(this,null,function*(){if(!this.currentFloorPlan||!this.currentRestaurantId){console.error("\u274C Missing required data");return}try{let t=this.tableForm.gridWidth*this.gridSize,e=this.tableForm.gridHeight*this.gridSize,n={restaurant_id:this.currentRestaurantId,floor_plan_id:this.currentFloorPlan.id,table_name:this.tableForm.tableName||`Tavolo ${this.tableForm.tableNumber}`,table_number:this.tableForm.tableNumber,capacity:this.tableForm.capacity,shape:this.tableForm.shape,position_x:this.modalPosition.x,position_y:this.modalPosition.y,width:t,height:e,rotation:0,is_active:!0,is_online_bookable:!0,is_merged:!1,parent_table_id:null,merged_tables_ids:[]};if(this.tableService.checkTableOverlap(n)){alert("Il tavolo si sovrappone a un altro tavolo. Scegli una posizione diversa.");return}console.log("\u{1F4DD} Creating table:",n),(yield this.tableService.createTable(n))?(console.log("\u2705 Table created successfully"),this.showTableModal=!1,this.isDrawing=!1):console.error("\u274C Table creation failed")}catch(t){console.error("\u{1F4A5} Error creating table:",t)}})}onCancelCreateTable(){this.showTableModal=!1,this.isDrawing=!1}selectTable(t){if(this.isMergeMode){this.toggleTableSelection(t);return}this.deselectAll(),this.selectedTable=t,t.merged_tables_ids&&t.merged_tables_ids.length>0&&(console.log("\u{1F3AF} Tavolo unito selezionato:"),this.debugTableState(t))}openEditTableModal(t){this.selectedTable=t,this.showEditTableModal=!0}deselectAll(){this.selectedTable=null,this.showEditTableModal=!1}onUpdateTable(){return h(this,null,function*(){if(this.selectedTable)try{let t=U({},this.selectedTable);(yield this.tableService.updateTable(this.selectedTable.id,t))&&this.deselectAll()}catch(t){console.error("\u274C Error updating table:",t)}})}onDeleteTable(){return h(this,null,function*(){if(this.selectedTable&&confirm("Sei sicuro di voler eliminare questo tavolo?"))try{(yield this.tableService.deleteTable(this.selectedTable.id))&&this.deselectAll()}catch(t){console.error("\u274C Error deleting table:",t)}})}createNewFloorPlan(){return h(this,null,function*(){if(this.currentRestaurantId)try{let t=window.innerWidth<768,e=t?800:1e3,n=t?600:800,i={restaurant_id:this.currentRestaurantId,name:`Mappa ${this.floorPlans.length+1}`,width:e,height:n,is_active:!0},l=yield this.floorPlanService.createFloorPlan(i);l&&(this.currentFloorPlan=l,setTimeout(()=>this.openDimensionsModal(),100))}catch(t){console.error("\u{1F4A5} Error creating floor plan:",t)}})}onDeleteFloorPlan(t,e){return h(this,null,function*(){if(e.stopPropagation(),!!confirm(`Sei sicuro di voler eliminare la mappa "${t.name}"?`))try{(yield this.floorPlanService.deleteFloorPlan(t.id))&&this.currentFloorPlan?.id===t.id&&(this.currentFloorPlan=this.floorPlans.find(i=>i.id!==t.id)||null,this.loadTablesForFloorPlan())}catch(n){console.error("\u{1F4A5} Error deleting floor plan:",n)}})}startEditFloorPlan(t,e){e.stopPropagation(),t&&(this.editingFloorPlan=t,this.editedFloorPlanName=t.name)}saveFloorPlanName(){return h(this,null,function*(){if(!(!this.editingFloorPlan||!this.editedFloorPlanName.trim()))try{(yield this.floorPlanService.updateFloorPlan(this.editingFloorPlan.id,{name:this.editedFloorPlanName}))&&(this.currentFloorPlan?.id===this.editingFloorPlan.id&&(this.currentFloorPlan.name=this.editedFloorPlanName),yield this.floorPlanService.loadFloorPlans(),this.editingFloorPlan=null,this.editedFloorPlanName="")}catch(t){console.error("\u274C Error saving floor plan name:",t)}})}cancelEditFloorPlan(){this.editingFloorPlan=null}toggleDrawingMode(){this.isDrawing=!this.isDrawing,this.isDrawing||this.deselectAll()}generateNextTableNumber(){let t=this.tables.map(e=>parseInt(e.table_number)).filter(e=>!isNaN(e));return t.length>0?Math.max(...t)+1:1}getTableStyle(t){let e=t.shape==="rectangle"||t.shape==="square"?"8px":"50%",n={left:t.position_x+"px",top:t.position_y+"px",width:t.width+"px",height:t.height+"px","border-radius":e,transform:`rotate(${t.rotation}deg)`};return t.is_merged&&(n.border="3px dashed #ff6b35",n.background="rgba(255, 107, 53, 0.1)"),t.is_online_bookable||(n.background="repeating-linear-gradient(45deg, #f0f0f0, #f0f0f0 10px, #e0e0e0 10px, #e0e0e0 20px)"),n}getTableClass(t){let e=["table-element",`shape-${t.shape}`];return this.selectedTable?.id===t.id&&e.push("selected"),this.selectedTables.some(n=>n.id===t.id)&&e.push("merge-selected"),t.is_merged&&t.parent_table_id?e.push("merged-child","hidden-table"):t.merged_tables_ids&&t.merged_tables_ids.length>0&&e.push("merged-parent"),t.is_online_bookable||e.push("not-online-bookable"),this.isMergeMode&&this.selectedTables.length>0&&this.getAdjacentTablesToSelection().some(i=>i.id===t.id)&&e.push("adjacent-table"),e.join(" ")}testCreateTable(){if(!this.currentFloorPlan||!this.currentRestaurantId)return;let t={restaurant_id:this.currentRestaurantId,floor_plan_id:this.currentFloorPlan.id,table_name:"Tavolo Test",table_number:"999",capacity:4,shape:"rectangle",position_x:100,position_y:100,width:120,height:80,rotation:0,is_active:!0,is_online_bookable:!0,is_merged:!1,parent_table_id:null,merged_tables_ids:[]};this.tableService.createTable(t)}createDefaultFloorPlan(){return h(this,null,function*(){if(this.currentRestaurantId)try{let t={restaurant_id:this.currentRestaurantId,name:"Mappa Principale",width:1e3,height:800,is_active:!0},e=yield this.floorPlanService.createFloorPlan(t);e&&(this.currentFloorPlan=e)}catch(t){console.error("\u{1F4A5} Error creating default floor plan:",t)}})}openDimensionsModal(){this.currentFloorPlan&&(this.dimensionsForm={width:this.currentFloorPlan.width,height:this.currentFloorPlan.height},this.showDimensionsModal=!0)}onCancelDimensionsModal(){this.showDimensionsModal=!1}onSaveDimensions(){return h(this,null,function*(){if(this.currentFloorPlan)try{let t=this.tables.filter(n=>n.position_x+n.width>this.dimensionsForm.width||n.position_y+n.height>this.dimensionsForm.height);if(t.length>0){if(!confirm(`${t.length} tavolo(i) escono dai nuovi bordi della mappa. Vuoi continuare? I tavoli verranno spostati automaticamente.`))return;for(let i of t)i.position_x=Math.min(i.position_x,this.dimensionsForm.width-i.width),i.position_y=Math.min(i.position_y,this.dimensionsForm.height-i.height),yield this.saveTablePosition(i)}(yield this.floorPlanService.updateFloorPlan(this.currentFloorPlan.id,{width:this.dimensionsForm.width,height:this.dimensionsForm.height}))&&(this.currentFloorPlan.width=this.dimensionsForm.width,this.currentFloorPlan.height=this.dimensionsForm.height,this.showDimensionsModal=!1)}catch(t){console.error("\u274C Error updating floor plan dimensions:",t)}})}setDimensions(t,e){this.dimensionsForm.width=t,this.dimensionsForm.height=e}get isMobileView(){return window.innerWidth<768}toggleTableSelection(t){if(!this.isMergeMode||t.is_merged)return;let e=this.selectedTables.findIndex(n=>n.id===t.id);e>-1?this.selectedTables.splice(e,1):this.selectedTables.length===0||this.selectedTables.some(n=>this.areTablesAdjacent(n,t))?this.selectedTables.length<4&&this.selectedTables.push(t):this.showAdjacencyWarning(t)}toggleMergeMode(){this.isMergeMode=!this.isMergeMode,this.isMergeMode||(this.selectedTables=[]),this.deselectAll()}canMergeTables(){return this.selectedTables.length>=2&&this.selectedTables.length<=4&&this.selectedTables.every(e=>!e.is_merged)&&this.areSelectedTablesAdjacent()}openMergeModal(){if(!this.canMergeTables())return;let t=Math.min(...this.selectedTables.map(l=>l.position_x)),e=Math.min(...this.selectedTables.map(l=>l.position_y)),n=Math.max(...this.selectedTables.map(l=>l.position_x+l.width)),i=Math.max(...this.selectedTables.map(l=>l.position_y+l.height));this.mergeForm={tableName:this.getMergedTableName(),tableNumber:this.getMergedTableNumber(),capacity:this.getTotalCapacity()},this.showMergeModal=!0}onMergeTables(){return h(this,null,function*(){if(!(!this.currentFloorPlan||!this.currentRestaurantId||!this.canMergeTables()))try{let t=Math.min(...this.selectedTables.map(b=>b.position_x)),e=Math.min(...this.selectedTables.map(b=>b.position_y)),n=Math.max(...this.selectedTables.map(b=>b.position_x+b.width)),i=Math.max(...this.selectedTables.map(b=>b.position_y+b.height)),l={table_name:this.mergeForm.tableName,table_number:this.mergeForm.tableNumber,capacity:this.mergeForm.capacity,position_x:t,position_y:e,width:n-t,height:i-e};(yield this.tableMergeService.mergeTables(this.selectedTables,l,this.currentFloorPlan.id,this.currentRestaurantId))&&(this.showMergeModal=!1,this.isMergeMode=!1,this.selectedTables=[],yield this.tableService.loadData(),this.loadTablesForFloorPlan())}catch(t){console.error("\u274C Error merging tables:",t)}})}onSplitTable(t){return h(this,null,function*(){if(!t.merged_tables_ids||t.merged_tables_ids.length===0){console.log("\u274C Questo tavolo non \xE8 un tavolo unito");return}if(confirm("Sei sicuro di voler separare questo tavolo?"))try{console.log("\u{1F527} Separando tavolo unito:",t.table_number),(yield this.tableMergeService.splitMergedTable(t))?(console.log("\u2705 Tavolo separato con successo"),yield this.tableService.loadData(),this.loadTablesForFloorPlan(),this.deselectAll()):(console.error("\u274C Errore durante la separazione del tavolo"),alert("Errore durante la separazione del tavolo. Riprova."))}catch(e){console.error("\u274C Error splitting table:",e),alert("Errore durante la separazione del tavolo: "+e.message)}})}getTotalCapacity(){return this.selectedTables.reduce((t,e)=>t+e.capacity,0)}getSelectedTableNumbers(){return this.selectedTables.map(t=>t.table_number).join("-")}getMergedTableName(){return`Tavolo Unito ${this.getSelectedTableNumbers()}`}getMergedTableNumber(){return`U${this.selectedTables.map(t=>t.table_number).join("")}`}areTablesAdjacent(t,e,n=10){let i=t.position_x,l=t.position_x+t.width,_=t.position_y,b=t.position_y+t.height,O=e.position_x,F=e.position_x+e.width,k=e.position_y,T=e.position_y+e.height,C=i<=F+n&&l>=O-n,N=_<=T+n&&b>=k-n,D=Math.abs(l-O)<=n||Math.abs(i-F)<=n,V=Math.abs(b-k)<=n||Math.abs(_-T)<=n;return D&&N||V&&C}areSelectedTablesAdjacent(){if(this.selectedTables.length<2)return!0;let t=new Map;this.selectedTables.forEach(i=>{t.set(i.id,[])});for(let i=0;i<this.selectedTables.length;i++)for(let l=i+1;l<this.selectedTables.length;l++)this.areTablesAdjacent(this.selectedTables[i],this.selectedTables[l])&&(t.get(this.selectedTables[i].id).push(this.selectedTables[l].id),t.get(this.selectedTables[l].id).push(this.selectedTables[i].id));let e=new Set,n=[this.selectedTables[0].id];for(;n.length>0;){let i=n.shift();e.has(i)||(e.add(i),(t.get(i)||[]).forEach(_=>{e.has(_)||n.push(_)}))}return e.size===this.selectedTables.length}getAdjacentTablesToSelection(){if(this.selectedTables.length===0)return[];let t=[],e=this.selectedTables.map(n=>n.id);return this.tables.forEach(n=>{if(!(e.includes(n.id)||n.is_merged)){for(let i of this.selectedTables)if(this.areTablesAdjacent(n,i)){t.push(n);break}}}),t}showAdjacencyWarning(t){let e=`Il Tavolo ${t.table_number} non \xE8 vicino ai tavoli selezionati. 
Seleziona solo tavoli che si toccano tra loro.`;alert(e),this.highlightAdjacentTables()}highlightAdjacentTables(){this.getAdjacentTablesToSelection().forEach(e=>{let n=this.getTableElement(e);n&&(n.classList.add("adjacent-highlight"),setTimeout(()=>{n.classList.remove("adjacent-highlight")},2e3))})}debugTableState(t){console.log("\u{1F50D} Debug tavolo:",{id:t.id,table_number:t.table_number,is_merged:t.is_merged,parent_table_id:t.parent_table_id,merged_tables_ids:t.merged_tables_ids,merged_tables_ids_length:t.merged_tables_ids?.length})}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=K({type:d,selectors:[["app-floor-plan"]],viewQuery:function(e,n){if(e&1&&$(Se,5),e&2){let i;ee(i=te())&&(n.canvasRef=i.first)}},features:[oe([X,H])],decls:89,vars:41,consts:[["canvasContainer",""],["floorPlanCanvas",""],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"form-section","tools-bar"],[1,"modal-body"],[1,"tools-main-row"],[1,"map-section"],[1,"form-group"],[1,"form-label"],[1,"form-input","compact",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["class","map-actions",4,"ngIf"],["class","floor-plan-edit",4,"ngIf"],[1,"form-group","small"],[1,"checkbox-container","inline"],[1,"checkbox-label","small"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"center-section"],[1,"form-row"],[1,"action-buttons","compact"],[1,"promethea-button","primary","x-small",3,"click"],[1,"promethea-button","secondary","x-small",3,"click","disabled"],[1,"promethea-button","secondary","x-small",3,"click"],[1,"promethea-button","ghost","x-small",3,"click"],["class","selected-table-section",4,"ngIf"],[1,"status-section"],[1,"status-info"],[1,"mode-indicator"],[1,"mode-text"],[1,"canvas-stats"],["class","card tools-bar",4,"ngIf"],[1,"editor-main-area"],[1,"canvas-section"],[1,"canvas-controls"],[1,"canvas-info"],[1,"canvas-container"],[1,"floor-plan-canvas"],["class","grid-overlay",4,"ngIf"],["class","table-element",3,"class","style",4,"ngFor","ngForOf"],["class","canvas-instructions",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"ngValue"],[1,"map-actions"],["title","Modifica nome mappa",1,"icon-button","small",3,"click","disabled"],["title","Elimina mappa",1,"icon-button","small",3,"click","disabled"],[1,"floor-plan-edit"],["type","text","placeholder","Nome mappa",1,"form-input","x-small",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],["title","Salva",1,"icon-button","x-small","save-btn",3,"click"],["title","Annulla",1,"icon-button","x-small","cancel-btn",3,"click"],[1,"selected-table-section"],[1,"selected-table-header"],[2,"font-weight","600"],["class","merged-badge",4,"ngIf"],[1,"selected-table-actions"],["class","promethea-button warning x-small",3,"click",4,"ngIf"],[1,"merged-badge"],[1,"promethea-button","warning","x-small",3,"click"],[1,"card","tools-bar"],[1,"merge-mode-header"],[1,"merge-info"],[1,"merge-actions"],[1,"selected-count"],[1,"promethea-button","primary","x-small",3,"click","disabled"],["class","merge-warning",4,"ngIf"],["class","selected-tables-preview",4,"ngIf"],[1,"merge-warning"],[1,"selected-tables-preview"],[1,"preview-title"],[1,"tables-list"],["class","table-preview-item",4,"ngFor","ngForOf"],["class","connectivity-info",4,"ngIf"],[1,"table-preview-item"],[1,"table-number"],[1,"table-capacity"],[1,"icon-button","x-small",3,"click"],[1,"connectivity-info"],[1,"grid-overlay"],[1,"table-element"],[1,"table-content"],[1,"canvas-instructions"],[1,"instruction-card"],[1,"empty-state"],[1,"promethea-button","primary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-md",3,"click"],[1,""],[1,"modal-header"],[1,"modal-title"],[1,"card-title"],["title","Chiudi",1,"icon-button",3,"click"],[1,"generic-form"],["for","tableName",1,"form-label"],["id","tableName","type","text","name","tableName","placeholder","Nome tavolo",1,"form-input",3,"ngModelChange","ngModel"],["for","tableNumber",1,"form-label"],["id","tableNumber","type","text","name","tableNumber","placeholder","Numero",1,"form-input",3,"ngModelChange","ngModel"],["for","tableCapacity",1,"form-label"],["id","tableCapacity","type","number","name","tableCapacity","min","1","max","20",1,"form-input",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","isOnlineBookable",3,"ngModelChange","ngModel"],["class","danger-zone",4,"ngIf"],[1,"modal-footer"],["type","button",1,"promethea-button","secondary",3,"click"],["type","button",1,"promethea-button","primary",3,"click"],[1,"danger-zone"],[1,"promethea-button","danger","full-width",3,"click"],[1,"promethea-button","warning","full-width",3,"click"],[1,"shape-selection"],["class","shape-option",3,"selected","click",4,"ngFor","ngForOf"],["for","gridWidth",1,"form-label"],["id","gridWidth","type","number","name","gridWidth","min","2","max","20",1,"form-input",3,"ngModelChange","ngModel","disabled"],["for","gridHeight",1,"form-label"],["id","gridHeight","type","number","name","gridHeight","min","2","max","20",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"size-preview"],["class","form-group",4,"ngIf"],["id","tableNumber","type","text","name","tableNumber","placeholder","Es: 1",1,"form-input",3,"ngModelChange","ngModel"],["id","tableName","type","text","name","tableName","placeholder","Es: Tavolo VIP",1,"form-input",3,"ngModelChange","ngModel"],["for","capacity",1,"form-label"],["id","capacity","type","number","name","capacity","min","1","max","20",1,"form-input",3,"ngModelChange","ngModel"],[1,"preview-section"],[1,"table-preview"],[1,"preview-content"],[1,"shape-option",3,"click"],[1,"shape-preview"],[1,"shape-name"],["for","borderRadius",1,"form-label"],["id","borderRadius","name","borderRadius",1,"form-input",3,"ngModelChange","ngModel"],["value","0"],["value","5"],["value","10"],["value","15"],["value","20"],["for","floorPlanWidth",1,"form-label"],["id","floorPlanWidth","type","number","name","floorPlanWidth","min","500","max","5000","step","50",1,"form-input",3,"ngModelChange","ngModel"],["for","floorPlanHeight",1,"form-label"],["id","floorPlanHeight","type","number","name","floorPlanHeight","min","500","max","5000","step","50",1,"form-input",3,"ngModelChange","ngModel"],[1,"preset-buttons"],["type","button",1,"promethea-button","ghost","x-small",3,"click"],[1,"dimension-preview"],[1,"preview-canvas"],[1,"preview-label"],[1,"merged-tables-list"],["class","merged-table-item",4,"ngFor","ngForOf"],["for","mergedTableNumber",1,"form-label"],["id","mergedTableNumber","type","text","name","mergedTableNumber","placeholder","Es: U123",1,"form-input",3,"ngModelChange","ngModel"],["for","mergedTableCapacity",1,"form-label"],["id","mergedTableCapacity","type","number","name","mergedTableCapacity","min","2","max","50",1,"form-input",3,"ngModelChange","ngModel"],["for","mergedTableName",1,"form-label"],["id","mergedTableName","type","text","name","mergedTableName","placeholder","Es: Tavolo Unito per Gruppo",1,"form-input",3,"ngModelChange","ngModel"],[1,"capacity-summary"],[1,"merged-table-item"],[1,"table-info"]],template:function(e,n){if(e&1){let i=P();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),r(4,"map"),a()(),o(5,"div",6)(6,"h1",7),r(7,"Editor Mappa Ristorante"),a(),o(8,"p",8),r(9,"Crea e modifica la disposizione dei tavoli nel tuo ristorante"),a()()(),o(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"label",14),r(16,"Mappa"),a(),o(17,"select",15),x("ngModelChange",function(_){return m(i),f(n.currentFloorPlan,_)||(n.currentFloorPlan=_),p(_)}),g("change",function(){return m(i),p(n.onFloorPlanSelect(n.currentFloorPlan))}),w(18,Fe,2,2,"option",16),a()(),w(19,ke,7,2,"div",17)(20,Oe,8,1,"div",18),a(),o(21,"div",19)(22,"label",14),r(23,"Opzioni"),a(),o(24,"div",20)(25,"label",21)(26,"input",22),x("ngModelChange",function(_){return m(i),f(n.snapToGrid,_)||(n.snapToGrid=_),p(_)}),a(),z(27,"span",23),r(28),a()()()(),o(29,"div",24)(30,"div",25)(31,"div",13)(32,"label",14),r(33,"Azioni"),a(),o(34,"div",26)(35,"button",27),g("click",function(){return m(i),p(n.createNewFloorPlan())}),o(36,"span",5),r(37,"add"),a(),r(38," Nuova Mappa "),a(),o(39,"button",28),g("click",function(){return m(i),p(n.openDimensionsModal())}),o(40,"span",5),r(41,"aspect_ratio"),a(),r(42," Dimensioni "),a(),o(43,"button",29),g("click",function(){return m(i),p(n.toggleMergeMode())}),o(44,"span",5),r(45,"merge"),a(),r(46),a()()(),o(47,"div",13)(48,"label",14),r(49,"Modalit\xE0"),a(),o(50,"div",26)(51,"button",30),g("click",function(){return m(i),p(n.isDrawing=!1)}),o(52,"span",5),r(53,"open_with"),a(),r(54," Sposta "),a(),o(55,"button",30),g("click",function(){return m(i),p(n.toggleDrawingMode())}),o(56,"span",5),r(57,"add_circle"),a(),r(58," Aggiungi Tavoli "),a()()()()(),w(59,Ne,17,4,"div",31),o(60,"div",32)(61,"div",33)(62,"div",34)(63,"span",5),r(64),a(),o(65,"span",35),r(66),a()(),o(67,"div",36)(68,"span",8),r(69),a()()()()()(),w(70,je,23,4,"div",37),o(71,"div",38)(72,"div",39)(73,"div",40)(74,"div",41)(75,"span",8),r(76),a()()(),o(77,"div",42,0)(79,"div",43,1),w(81,Le,1,0,"div",44)(82,Re,6,7,"div",45)(83,Be,8,0,"div",46)(84,Ue,11,0,"div",47),a()()(),w(85,He,47,6,"div",48),a(),w(86,Ge,67,23,"div",48)(87,Qe,51,8,"div",48)(88,Ke,46,6,"div",48),a()}e&2&&(s(17),v("ngModel",n.currentFloorPlan),s(),u("ngForOf",n.floorPlans),s(),u("ngIf",!n.editingFloorPlan),s(),u("ngIf",n.editingFloorPlan&&(n.currentFloorPlan==null?null:n.currentFloorPlan.id)===n.editingFloorPlan.id),s(6),v("ngModel",n.snapToGrid),s(2),M(" Snap (",n.gridSize,"px) "),s(11),u("disabled",!n.currentFloorPlan),s(4),E("active",n.isMergeMode),s(3),M(" ",n.isMergeMode?"Annulla Unione":"Unisci Tavoli"," "),s(5),E("active",!n.isDrawing),s(4),E("active",n.isDrawing),s(4),u("ngIf",n.selectedTable&&!n.isDrawing),s(3),E("drawing-mode",n.isDrawing),s(2),S(n.isDrawing?"add_circle":"open_with"),s(2),S(n.isDrawing?"Modalit\xE0 Inserimento":"Modalit\xE0 Spostamento"),s(3),ne(" ",(n.currentFloorPlan==null?null:n.currentFloorPlan.width)||1e3,"\xD7",(n.currentFloorPlan==null?null:n.currentFloorPlan.height)||800," | Tavoli: ",n.tables.length," "),s(),u("ngIf",n.isMergeMode),s(6),I(" Mappa: ",n.currentFloorPlan==null?null:n.currentFloorPlan.name," | Tavoli: ",n.tables.length," "),s(3),W("width",(n.currentFloorPlan==null?null:n.currentFloorPlan.width)||1e3,"px")("height",(n.currentFloorPlan==null?null:n.currentFloorPlan.height)||800,"px"),E("drawing-mode",n.isDrawing)("mobile-view",n.isMobileView),s(2),u("ngIf",n.snapToGrid||n.isDrawing),s(),u("ngForOf",n.tables),s(),u("ngIf",n.isDrawing),s(),u("ngIf",n.tables.length===0&&!n.isDrawing),s(),u("ngIf",n.showEditTableModal&&n.selectedTable),s(),u("ngIf",n.showTableModal),s(),u("ngIf",n.showDimensionsModal),s(),u("ngIf",n.showMergeModal))},dependencies:[le,ae,re,Pe,_e,ve,fe,ce,be,de,he,me,pe,we,xe,ue,ge],styles:['.tools-bar[_ngcontent-%COMP%]{margin-bottom:0;padding:0}.tools-bar[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;gap:var(--gutter-md)}.tools-main-row[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);align-items:flex-start;flex-wrap:wrap}.map-section[_ngcontent-%COMP%]{flex:1;min-width:200px;display:flex;flex-direction:column;gap:var(--gutter-sm)}.map-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.map-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm)}.floor-plan-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.floor-plan-edit[_ngcontent-%COMP%]   .form-input.x-small[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;min-width:120px;flex:1}.center-section[_ngcontent-%COMP%]{flex:2;min-width:300px}.actions-row[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);align-items:flex-end;flex-wrap:wrap}.actions-row[_ngcontent-%COMP%]   .form-group.small[_ngcontent-%COMP%]{margin-bottom:0;min-width:0}.action-buttons.compact[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm)}.actions-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{padding:0}.actions-row[_ngcontent-%COMP%]   .checkbox-label.small[_ngcontent-%COMP%]{padding:4px 0;white-space:nowrap}.selected-table-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-md);padding:var(--gutter-sm);background:color-mix(in srgb,var(--primary) 5%,transparent);border:1px solid color-mix(in srgb,var(--primary) 20%,transparent);border-radius:8px;flex-wrap:wrap}.selected-table-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-md);flex:1;min-width:0}.selected-table-header[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap}.selected-table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);flex-shrink:0}.selected-table-actions[_ngcontent-%COMP%]   .promethea-button.x-small[_ngcontent-%COMP%]{padding:6px 12px;min-height:32px;font-size:var(--fs-sm)}.status-section[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);margin-top:var(--gutter-sm);padding-top:var(--gutter-sm)}.status-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-md);flex-wrap:wrap}.mode-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:8px 12px;background:color-mix(in srgb,#10b981 15%,transparent);color:#10b981;border-radius:8px;font-weight:600;font-size:var(--fs-sm);transition:all .3s ease}.mode-indicator.drawing-mode[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent);color:#f59e0b}.mode-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.canvas-stats[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-muted);white-space:nowrap}.editor-main-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg);flex:1;min-height:600px}.canvas-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--background);border-radius:16px;padding:0;box-shadow:var(--shadow-sm);height:100%}.canvas-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:var(--gutter-sm);background:var(--background);border-radius:12px}.canvas-container[_ngcontent-%COMP%]{flex:1;border:2px solid var(--smoke-color-1);border-radius:12px;overflow:auto;background:var(--background);position:relative;display:flex;align-items:center;justify-content:center;min-height:500px}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:var(--background);border-radius:8px;box-shadow:var(--shadow-md);cursor:default;margin:0;min-width:min(100%,1000px);min-height:min(100%,800px)}.floor-plan-canvas.drawing-mode[_ngcontent-%COMP%]{cursor:crosshair}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:20px 20px;pointer-events:none;opacity:.5;z-index:1}.table-element[_ngcontent-%COMP%]{position:absolute;border:2px solid var(--smoke-color-1);background:var(--gradiente-light);cursor:grab;display:flex;align-items:center;justify-content:center;transition:all .2s ease;-webkit-user-select:none;user-select:none;box-shadow:var(--shadow);z-index:10;border-radius:8px}.table-element[_ngcontent-%COMP%]:active{cursor:grabbing}.table-element[_ngcontent-%COMP%]:hover{border-color:var(--text-color);transform:scale(1.02);box-shadow:var(--shadow-md);z-index:20}.table-element.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 10%,transparent);z-index:30;box-shadow:var(--shadow-lg)}.table-element.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.table-content[_ngcontent-%COMP%]{text-align:center;pointer-events:none;padding:8px}.table-number[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:var(--text-color);margin-bottom:2px}.table-capacity[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted)}.canvas-instructions[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:5}.instruction-card[_ngcontent-%COMP%]{background:#fffffff2;padding:var(--gutter-lg);border-radius:16px;border:2px dashed var(--primary);text-align:center;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);max-width:300px}.empty-state[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:var(--text-muted);z-index:5}.preview-section[_ngcontent-%COMP%]{margin:var(--gutter-md) 0;padding:var(--gutter-md);background:var(--smoke-color-1);border-radius:8px;text-align:center}.table-preview[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background:var(--primary);color:#fff;border:2px solid var(--primary);margin-top:var(--gutter-sm);border-radius:8px}.table-preview.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.preview-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:8px}.shape-selection[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.shape-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border:2px solid var(--smoke-color-1);border-radius:8px;cursor:pointer;transition:all .2s ease}.shape-option[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.shape-option.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 10%,transparent)}.shape-preview[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--smoke-color-1);border-radius:4px}.shape-preview.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.shape-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:500}@media (max-width: 768px){.tools-main-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-md)}.map-section[_ngcontent-%COMP%], .center-section[_ngcontent-%COMP%]{min-width:100%}.actions-row[_ngcontent-%COMP%]{justify-content:space-between}.selected-table-section[_ngcontent-%COMP%], .selected-table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gutter-sm)}.status-info[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm);text-align:center}}.preset-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.preset-buttons[_ngcontent-%COMP%]   .promethea-button.ghost.x-small[_ngcontent-%COMP%]{padding:8px 12px;justify-content:flex-start}.dimension-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:var(--gutter-sm)}.preview-canvas[_ngcontent-%COMP%]{background:var(--smoke-color-1);border:2px dashed var(--primary);border-radius:8px;display:flex;align-items:center;justify-content:center;min-width:50px;min-height:50px;max-width:200px;max-height:200px}.preview-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);text-align:center;padding:var(--gutter-sm)}@media (max-width: 768px){.floor-plan-editor[_ngcontent-%COMP%]{padding:var(--gutter-sm);gap:var(--gutter-md)}.tools-bar[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.tools-main-row[_ngcontent-%COMP%], .center-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-md)}.action-buttons.compact[_ngcontent-%COMP%]{flex-direction:column}.action-buttons.compact[_ngcontent-%COMP%]   .promethea-button.x-small[_ngcontent-%COMP%]{justify-content:center}.canvas-container[_ngcontent-%COMP%]{min-height:400px;border-radius:8px}.floor-plan-canvas[_ngcontent-%COMP%]{min-width:100%!important;min-height:400px!important;margin:0}.selected-table-section[_ngcontent-%COMP%], .selected-table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gutter-sm)}.selected-table-actions[_ngcontent-%COMP%]{justify-content:stretch}.status-info[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm);text-align:center}.mode-indicator[_ngcontent-%COMP%]{justify-content:center}.table-element[_ngcontent-%COMP%]{min-width:60px;min-height:60px}.table-content[_ngcontent-%COMP%]{padding:6px}.table-number[_ngcontent-%COMP%]{font-size:12px}.table-capacity[_ngcontent-%COMP%]{font-size:10px}.instruction-card[_ngcontent-%COMP%]{padding:var(--gutter-md);margin:var(--gutter-sm);max-width:none}.empty-state[_ngcontent-%COMP%]{padding:var(--gutter-md)}.empty-state[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--gutter-sm)}.section-titles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--fs-md)}.map-section[_ngcontent-%COMP%]{min-width:100%}.map-actions[_ngcontent-%COMP%]{justify-content:center}.floor-plan-edit[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}.shape-selection[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.preset-buttons[_ngcontent-%COMP%]{flex-direction:column}.canvas-container[_ngcontent-%COMP%]{min-height:300px}.floor-plan-canvas[_ngcontent-%COMP%]{min-height:300px!important}.grid-overlay[_ngcontent-%COMP%]{background-size:30px 30px}}@media (hover: none) and (pointer: coarse){.table-element[_ngcontent-%COMP%]:hover{transform:none}.icon-button[_ngcontent-%COMP%], .promethea-button[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.canvas-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}}.table-element[_ngcontent-%COMP%]{touch-action:none;-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-user-drag:none}.merge-mode-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #e0e0e0;margin-bottom:15px}.merge-info[_ngcontent-%COMP%], .merge-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.selected-count[_ngcontent-%COMP%]{font-weight:500;color:#666}.selected-tables-preview[_ngcontent-%COMP%]{background:var(--background);border-radius:8px;padding:15px;margin-top:10px}.preview-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:10px;color:#333}.tables-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.table-preview-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:var(--background);padding:8px 12px;border-radius:6px;border:1px solid var(--background);font-size:14px}.merged-tables-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:15px}.merged-table-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px;background:transparent;border-radius:6px}.table-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.capacity-summary[_ngcontent-%COMP%]{background:#e8f4fd;padding:15px;border-radius:8px;margin:15px 0}.capacity-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#1976d2}.table-element.merge-selected[_ngcontent-%COMP%]{border:3px solid #ff6b35!important;box-shadow:0 0 0 2px #ff6b354d}.table-element.merged-table[_ngcontent-%COMP%]{border:2px dashed #ff6b35;background:#ff6b350d}.table-element.not-online-bookable[_ngcontent-%COMP%]{background:repeating-linear-gradient(45deg,#f8f9fa,#f8f9fa 10px,#e9ecef 10px 20px);opacity:.8}.table-element[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-2px;right:-2px;width:12px;height:12px;border-radius:50%;background:#6c757d;display:none}.table-element.not-online-bookable[_ngcontent-%COMP%]:after{display:block;background:#dc3545}.table-element.merged-table[_ngcontent-%COMP%]:after{display:block;background:#ff6b35}.merge-mode[_ngcontent-%COMP%]   .table-element[_ngcontent-%COMP%]:not(.merged-table):hover{cursor:pointer;border:2px dashed #007bff}.table-element.hidden-table[_ngcontent-%COMP%]{display:none!important}.table-element.merged-parent[_ngcontent-%COMP%]{border:2px dashed var(--smoke-color-1)}.table-element.merged-parent[_ngcontent-%COMP%]:hover{border-color:var(--text-color)}.table-element.merged-child[_ngcontent-%COMP%]{opacity:.3;pointer-events:none}.merged-badge[_ngcontent-%COMP%]{background:var(--primary);color:#fff;padding:var(--gutter-sm);border-radius:4px;margin-left:var(--gutter-sm)}.table-element.adjacent-table[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #4caf50;animation:_ngcontent-%COMP%_pulse-adjacent 2s infinite}.table-element.adjacent-highlight[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #ff9800;animation:_ngcontent-%COMP%_pulse-highlight 1s infinite}@keyframes _ngcontent-%COMP%_pulse-adjacent{0%{box-shadow:0 0 0 2px #4caf50b3}50%{box-shadow:0 0 0 4px #4caf504d}to{box-shadow:0 0 0 2px #4caf50b3}}@keyframes _ngcontent-%COMP%_pulse-highlight{0%{box-shadow:0 0 0 3px #ff9800b3}50%{box-shadow:0 0 0 6px #ff98004d}to{box-shadow:0 0 0 3px #ff9800b3}}.merge-mode[_ngcontent-%COMP%]   .table-element[_ngcontent-%COMP%]:not(.merged-table):not(.selected):hover{cursor:pointer;border:2px dashed #007bff;transform:scale(1.02);transition:all .2s ease}.selected-count[_ngcontent-%COMP%]{font-weight:600;color:#333;background:#e3f2fd;padding:4px 8px;border-radius:4px;border:1px solid #2196F3}.merge-warning[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;padding:8px 12px;margin:10px 0;color:#856404;font-size:.9em}.merge-warning[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#ffc107;margin-right:8px;font-size:1.1em}.connectivity-info[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#4caf50}.connectivity-info[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:#ff9800}.connectivity-info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1em;vertical-align:middle;margin-right:4px}.table-preview-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:var(--background);padding:8px 12px;border-radius:6px;border:1px solid #e0e0e0;font-size:14px;transition:all .2s ease}.table-preview-item[_ngcontent-%COMP%]:hover{border-color:#2196f3;background:var(--background)}']})};export{Me as FloorPlanEditor};
