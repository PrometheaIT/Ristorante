import{a as re}from"./chunk-JA4P7KVP.js";import{a as oe}from"./chunk-LRNIFXNB.js";import{a as ie}from"./chunk-THMILZHX.js";import{a as se}from"./chunk-UCL3U7HJ.js";import"./chunk-5BFIQ7BP.js";import{b as B,d as Q,e as G,g as H,h as Y,i as J,j as K,p as X,q as Z,r as $,s as ee,t as te,u as ae,w as ne}from"./chunk-77SKEQNN.js";import{a as j}from"./chunk-KNL3CWA3.js";import{d as A,e as N,k as W,r as L,t as U}from"./chunk-DCWKKS33.js";import{Db as g,Eb as c,Ia as P,Ib as O,Jb as V,Kb as E,La as l,Lb as k,Mb as D,Nb as S,Ob as I,Pb as z,Qb as i,Rb as _,Sb as b,Tb as F,Ub as q,Vb as x,Wb as h,Xb as y,ab as R,ea as w,f,fb as v,g as T,ja as p,ka as u,qb as d,rb as t,sb as a,tb as M,zb as C}from"./chunk-K5RDB55Y.js";var ce=["floorPlanCanvas"];function de(r,n){if(r&1&&(t(0,"div",33),M(1,"img",34),a()),r&2){let e=c(2);l(),d("src",e.restaurant.cover_image_url,P)("alt",e.restaurant.name)}}function me(r,n){if(r&1&&(t(0,"div",35),M(1,"img",34),a()),r&2){let e=c(2);l(),d("src",e.restaurant.logo_url,P)("alt",e.restaurant.name)}}function pe(r,n){if(r&1&&(t(0,"p",36),i(1),a()),r&2){let e=c(2);l(),_(e.restaurant.cuisine_type)}}function ue(r,n){if(r&1&&(t(0,"p",37),i(1),a()),r&2){let e=c(2);l(),_(e.restaurant.description)}}function ve(r,n){if(r&1&&(t(0,"span",38)(1,"span",39),i(2,"place"),a(),i(3),a()),r&2){let e=c(2);l(3),b(" ",e.restaurant.address," ")}}function ge(r,n){if(r&1&&(t(0,"span",38)(1,"span",39),i(2,"phone"),a(),i(3),a()),r&2){let e=c(2);l(3),b(" ",e.restaurant.phone," ")}}function _e(r,n){if(r&1&&(t(0,"div",22)(1,"div",23),v(2,de,2,2,"div",24),t(3,"div",25),v(4,me,2,2,"div",26),t(5,"div",27)(6,"h1",28),i(7),a(),v(8,pe,2,1,"p",29)(9,ue,2,1,"p",30),t(10,"div",31),v(11,ve,4,1,"span",32)(12,ge,4,1,"span",32),a()()()()()),r&2){let e=c();l(2),d("ngIf",e.restaurant.cover_image_url),l(2),d("ngIf",e.restaurant.logo_url),l(3),_(e.restaurant.name),l(),d("ngIf",e.restaurant.cuisine_type),l(),d("ngIf",e.restaurant.description),l(2),d("ngIf",e.restaurant.address),l(),d("ngIf",e.restaurant.phone)}}function fe(r,n){if(r&1){let e=C();t(0,"div",44),g("click",function(){let s=p(e).$implicit,m=c(2);return u(m.selectFloorPlan(s))}),t(1,"span",39),i(2,"map"),a(),t(3,"span",45),i(4),a()()}if(r&2){let e=n.$implicit,o=c(2);S("selected",(o.currentFloorPlan==null?null:o.currentFloorPlan.id)===e.id),l(4),_(e.name)}}function be(r,n){if(r&1&&(t(0,"div",40)(1,"div",6)(2,"div",14)(3,"h3",41),i(4,"Seleziona Area"),a(),t(5,"div",42),v(6,fe,5,3,"div",43),a()()()()),r&2){let e=c();l(6),d("ngForOf",e.floorPlans)}}function xe(r,n){r&1&&(t(0,"div",51)(1,"span",39),i(2,"event_busy"),a()())}function he(r,n){if(r&1){let e=C();t(0,"div",46),g("click",function(){let s=p(e).$implicit,m=c();return u(m.onTableClick(s))}),t(1,"div",47)(2,"div",48),i(3),a(),t(4,"div",49),i(5),a(),v(6,xe,3,0,"div",50),a()()}if(r&2){let e=n.$implicit,o=c();I(o.getTableStyle(e)),z(o.getTableClass(e)),d("title",o.getTableTooltip(e)),l(3),_(e.table_number),l(2),b("",e.capacity," p"),l(),d("ngIf",o.isTableReserved(e))}}function ye(r,n){r&1&&(t(0,"div",52)(1,"div",53)(2,"span",39),i(3,"table_restaurant"),a(),t(4,"h4"),i(5,"Nessun tavolo configurato"),a(),t(6,"p"),i(7,"Il ristorante non ha ancora configurato i tavoli per questa area"),a()()())}function we(r,n){r&1&&(t(0,"div",61)(1,"span",62),i(2,"info"),a(),t(3,"span"),i(4,"Questo tavolo \xE8 gi\xE0 prenotato per l'orario selezionato"),a()())}function Me(r,n){if(r&1){let e=C();t(0,"div",54)(1,"div",55)(2,"h3"),i(3),a(),t(4,"span",56),i(5),a()(),t(6,"div",57)(7,"button",58),g("click",function(){p(e);let s=c();return u(s.openReservationModal())}),t(8,"span",39),i(9,"event_available"),a(),i(10," Prenota Questo Tavolo "),a(),t(11,"button",59),g("click",function(){p(e);let s=c();return u(s.deselectTable())}),t(12,"span",39),i(13,"close"),a(),i(14," Annulla Selezione "),a()(),v(15,we,5,0,"div",60),a()}if(r&2){let e=c();l(3),b("Tavolo ",e.selectedTable.table_number," Selezionato"),l(2),b("",e.selectedTable.capacity," persone"),l(2),d("disabled",e.isTableReserved(e.selectedTable)),l(8),d("ngIf",e.isTableReserved(e.selectedTable))}}function Ce(r,n){if(r&1){let e=C();t(0,"div",69)(1,"h4",70),i(2,"Informazioni Personali"),a(),t(3,"div",71)(4,"div",72)(5,"label",89),i(6,"Nome"),a(),t(7,"input",90),y("ngModelChange",function(s){p(e);let m=c(2);return h(m.reservationData.customer_info.first_name,s)||(m.reservationData.customer_info.first_name=s),u(s)}),a()(),t(8,"div",72)(9,"label",91),i(10,"Cognome"),a(),t(11,"input",92),y("ngModelChange",function(s){p(e);let m=c(2);return h(m.reservationData.customer_info.last_name,s)||(m.reservationData.customer_info.last_name=s),u(s)}),a()()(),t(12,"div",71)(13,"div",72)(14,"label",93),i(15,"Email"),a(),t(16,"input",94),y("ngModelChange",function(s){p(e);let m=c(2);return h(m.reservationData.customer_info.email,s)||(m.reservationData.customer_info.email=s),u(s)}),a()(),t(17,"div",72)(18,"label",95),i(19,"Telefono"),a(),t(20,"input",96),y("ngModelChange",function(s){p(e);let m=c(2);return h(m.reservationData.customer_info.phone,s)||(m.reservationData.customer_info.phone=s),u(s)}),a()()()()}if(r&2){let e=c(2);l(7),x("ngModel",e.reservationData.customer_info.first_name),l(4),x("ngModel",e.reservationData.customer_info.last_name),l(5),x("ngModel",e.reservationData.customer_info.email),l(4),x("ngModel",e.reservationData.customer_info.phone)}}function Pe(r,n){if(r&1&&(t(0,"option",97),i(1),a()),r&2){let e=n.$implicit;d("value",e),l(),b(" ",e," ")}}function Se(r,n){if(r&1&&(t(0,"small",98),i(1),a()),r&2){let e=c(2);l(),b(" Capacit\xE0 massima: ",e.selectedTable.capacity," persone ")}}function Te(r,n){if(r&1&&(t(0,"div",99)(1,"div",100)(2,"span",39),i(3),a(),t(4,"span"),i(5),a()()()),r&2){let e=c(2);l(),S("available",e.isTableAvailable)("unavailable",!e.isTableAvailable),l(2),_(e.isTableAvailable?"check_circle":"cancel"),l(2),_(e.isTableAvailable?"Tavolo disponibile":"Tavolo non disponibile per questo orario")}}function Re(r,n){if(r&1&&(t(0,"div",101)(1,"h4",70),i(2,"Riepilogo Prenotazione"),a(),t(3,"div",102)(4,"div",103)(5,"span",104),i(6,"Tavolo:"),a(),t(7,"span",105),i(8),a()(),t(9,"div",103)(10,"span",104),i(11,"Data:"),a(),t(12,"span",105),i(13),a()(),t(14,"div",103)(15,"span",104),i(16,"Orario:"),a(),t(17,"span",105),i(18),a()(),t(19,"div",103)(20,"span",104),i(21,"Persone:"),a(),t(22,"span",105),i(23),a()()()()),r&2){let e=c(2);l(8),F("",e.selectedTable.table_number," - ",e.selectedTable.table_name),l(5),_(e.formatDate(e.reservationData.reservation_date)),l(5),_(e.reservationData.reservation_time),l(5),_(e.reservationData.party_size)}}function Oe(r,n){r&1&&(t(0,"span",39),i(1,"event_available"),a())}function Ve(r,n){r&1&&(t(0,"span",39),i(1,"hourglass_empty"),a())}function Ee(r,n){if(r&1){let e=C();t(0,"div",63),g("click",function(){p(e);let s=c();return u(s.closeReservationModal())}),t(1,"div",64),g("click",function(s){return p(e),u(s.stopPropagation())}),t(2,"div",6)(3,"div",7)(4,"div",65)(5,"span",39),i(6,"event_available"),a(),t(7,"h3",8),i(8),a()(),t(9,"button",66),g("click",function(){p(e);let s=c();return u(s.closeReservationModal())}),t(10,"span",39),i(11,"close"),a()()(),t(12,"div",14)(13,"form",67,1),v(15,Ce,21,4,"div",68),t(16,"div",69)(17,"h4",70),i(18,"Dettagli Prenotazione"),a(),t(19,"div",71)(20,"div",72)(21,"label",73),i(22,"Data"),a(),t(23,"input",74),y("ngModelChange",function(s){p(e);let m=c();return h(m.reservationData.reservation_date,s)||(m.reservationData.reservation_date=s),u(s)}),g("change",function(){p(e);let s=c();return u(s.onDateChange())}),a()(),t(24,"div",72)(25,"label",75),i(26,"Orario"),a(),t(27,"select",76),y("ngModelChange",function(s){p(e);let m=c();return h(m.reservationData.reservation_time,s)||(m.reservationData.reservation_time=s),u(s)}),g("change",function(){p(e);let s=c();return u(s.onTimeChange())}),t(28,"option",77),i(29,"Seleziona orario"),a(),v(30,Pe,2,2,"option",78),a()()(),t(31,"div",72)(32,"label",79),i(33,"Numero di Persone"),a(),t(34,"input",80),y("ngModelChange",function(s){p(e);let m=c();return h(m.reservationData.party_size,s)||(m.reservationData.party_size=s),u(s)}),a(),v(35,Se,2,1,"small",81),a(),v(36,Te,6,6,"div",82),a(),t(37,"div",69)(38,"h4",70),i(39,"Richieste Speciali (Opzionale)"),a(),t(40,"div",72)(41,"textarea",83),y("ngModelChange",function(s){p(e);let m=c();return h(m.reservationData.special_requests,s)||(m.reservationData.special_requests=s),u(s)}),a()()(),v(42,Re,24,5,"div",84),t(43,"div",85)(44,"button",86),g("click",function(){p(e);let s=c();return u(s.closeReservationModal())}),i(45," Annulla "),a(),t(46,"button",87),g("click",function(){p(e);let s=c();return u(s.createReservation())}),v(47,Oe,2,0,"span",88)(48,Ve,2,0,"span",88),i(49),a()()()()()()()}if(r&2){let e=k(14),o=c();l(8),b("Prenota Tavolo ",o.selectedTable==null?null:o.selectedTable.table_number),l(7),d("ngIf",!o.currentUser),l(8),x("ngModel",o.reservationData.reservation_date),d("min",o.minDate),l(4),x("ngModel",o.reservationData.reservation_time),l(3),d("ngForOf",o.availableTimes),l(4),x("ngModel",o.reservationData.party_size),d("max",(o.selectedTable==null?null:o.selectedTable.capacity)||10),l(),d("ngIf",o.selectedTable),l(),d("ngIf",o.availabilityChecked),l(5),x("ngModel",o.reservationData.special_requests),l(),d("ngIf",o.selectedTable),l(4),d("disabled",!e.form.valid||!o.isTableAvailable||o.creatingReservation),l(),d("ngIf",!o.creatingReservation),l(),d("ngIf",o.creatingReservation),l(),b(" ",o.creatingReservation?"Creando prenotazione...":"Conferma Prenotazione"," ")}}function ke(r,n){if(r&1){let e=C();t(0,"div",63),g("click",function(){p(e);let s=c();return u(s.closeConfirmationModal())}),t(1,"div",64),g("click",function(s){return p(e),u(s.stopPropagation())}),t(2,"div",6)(3,"div",106)(4,"div",107)(5,"span",108),i(6,"check_circle"),a()(),t(7,"h3",109),i(8,"Prenotazione Confermata!"),a(),t(9,"p",110),i(10),a(),t(11,"div",111)(12,"div",112)(13,"strong"),i(14,"Numero prenotazione:"),a(),i(15),a(),t(16,"div",112)(17,"strong"),i(18,"Stato:"),a(),t(19,"span",113),i(20),a()()(),t(21,"div",114)(22,"button",115),g("click",function(){p(e);let s=c();return u(s.closeConfirmationModal())}),t(23,"span",39),i(24,"done"),a(),i(25," Ok, Grazie "),a()()()()()()}if(r&2){let e=c();l(10),q(" La tua prenotazione per il tavolo ",e.lastReservation==null||e.lastReservation.tables==null?null:e.lastReservation.tables.table_number," \xE8 stata confermata per il ",e.formatDate(e.lastReservation==null?null:e.lastReservation.reservation_date)," alle ",e.lastReservation==null?null:e.lastReservation.reservation_time,". "),l(5),b(" ",e.lastReservation==null?null:e.lastReservation.id.slice(-8).toUpperCase()," "),l(5),_(e.lastReservation==null?null:e.lastReservation.status)}}var le=class r{route=w(L);router=w(U);floorPlanService=w(re);tableService=w(oe);reservationService=w(se);restaurantPublicService=w(ie);authService=w(j);canvasRef;restaurant=null;floorPlans=[];currentFloorPlan=null;tables=[];reservations=[];selectedTable=null;showReservationModal=!1;showConfirmationModal=!1;creatingReservation=!1;reservationData={restaurant_id:"",table_id:"",reservation_date:"",reservation_time:"",party_size:1,special_requests:"",customer_info:{first_name:"",last_name:"",email:"",phone:""}};availableTimes=[];isTableAvailable=!1;availabilityChecked=!1;currentUser=null;lastReservation=null;minDate;subscriptions=new T;restaurantId="";constructor(){let n=new Date;this.minDate=n.toISOString().split("T")[0],this.reservationData.reservation_date=this.minDate}ngOnInit(){return f(this,null,function*(){console.log("\u{1F504} RestaurantMapViewer initialized"),this.route.params.subscribe(n=>{console.log("\u{1F4CB} Route params:",n),this.restaurantId=n.restaurantId,console.log("\u{1F3EA} Restaurant ID from route:",this.restaurantId),this.restaurantId?this.loadRestaurantData():console.error("\u274C No restaurantId found in route params")}),this.subscriptions.add(this.authService.currentUser$.subscribe(n=>{this.currentUser=n,n&&(this.reservationData.customer_info={first_name:n.user_metadata?.first_name||"",last_name:n.user_metadata?.last_name||"",email:n.email||"",phone:n.user_metadata?.phone||""})}))})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadRestaurantData(){return f(this,null,function*(){if(console.log("\u{1F4E5} Loading restaurant data for ID:",this.restaurantId),this.restaurant=yield this.restaurantPublicService.loadRestaurant(this.restaurantId),console.log("\u{1F3EA} Restaurant loaded:",this.restaurant),!this.restaurant){console.error("\u274C Restaurant not found");return}this.reservationData.restaurant_id=this.restaurantId,yield this.loadFloorPlans(),yield this.loadTables(),yield this.loadExistingReservations()})}loadFloorPlans(){return f(this,null,function*(){try{let{data:n,error:e}=yield this.floorPlanService.supabaseService.getSupabaseClient().from("restaurant_floor_plans").select("*").eq("restaurant_id",this.restaurantId).eq("is_active",!0).order("created_at",{ascending:!0});if(e)throw e;this.floorPlans=n||[],this.floorPlans.length>0&&(this.currentFloorPlan=this.floorPlans[0],this.loadTablesForFloorPlan())}catch(n){console.error("\u274C Error loading floor plans:",n)}})}loadTables(){return f(this,null,function*(){try{let{data:n,error:e}=yield this.tableService.supabaseService.getSupabaseClient().from("tables").select("*").eq("restaurant_id",this.restaurantId).eq("is_active",!0);if(e)throw e;this.tables=n||[]}catch(n){console.error("\u274C Error loading tables:",n)}})}loadExistingReservations(){return f(this,null,function*(){try{let n=new Date().toISOString().split("T")[0],{data:e,error:o}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("restaurant_id",this.restaurantId).eq("reservation_date",n).in("status",["pending","confirmed"]);if(o)throw o;this.reservations=e||[]}catch(n){console.error("\u274C Error loading reservations:",n)}})}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[];return}this.tables=this.tables.filter(n=>n.floor_plan_id===this.currentFloorPlan?.id)}selectFloorPlan(n){this.currentFloorPlan=n,this.loadTablesForFloorPlan(),this.deselectTable()}onTableClick(n){this.selectedTable=n,this.reservationData.table_id=n.id,this.reservationData.party_size=Math.min(1,n.capacity),this.loadAvailableTimes()}deselectTable(){this.selectedTable=null,this.reservationData.table_id="",this.availabilityChecked=!1,this.isTableAvailable=!1}isTableReserved(n){return!this.reservationData.reservation_date||!this.reservationData.reservation_time?!1:this.reservations.some(e=>e.table_id===n.id&&e.reservation_date===this.reservationData.reservation_date&&e.reservation_time===this.reservationData.reservation_time)}getTableClass(n){let e=["table-element",`shape-${n.shape}`];return this.selectedTable?.id===n.id?e.push("selected"):this.isTableReserved(n)?e.push("reserved"):e.push("available"),e.join(" ")}getTableStyle(n){let e=n.shape==="rectangle"||n.shape==="square"?"8px":"50%";return{left:n.position_x+"px",top:n.position_y+"px",width:n.width+"px",height:n.height+"px","border-radius":e,transform:`rotate(${n.rotation}deg)`}}getTableTooltip(n){let e=`Tavolo ${n.table_number} - ${n.capacity} persone`;return this.isTableReserved(n)&&(e+=" (Prenotato)"),e}openReservationModal(){!this.selectedTable||this.isTableReserved(this.selectedTable)||(this.showReservationModal=!0,this.loadAvailableTimes())}closeReservationModal(){this.showReservationModal=!1,this.availabilityChecked=!1}onDateChange(){return f(this,null,function*(){this.availabilityChecked=!1,yield this.loadAvailableTimes()})}onTimeChange(){return f(this,null,function*(){this.reservationData.reservation_time&&(yield this.checkAvailability())})}loadAvailableTimes(){return f(this,null,function*(){!this.selectedTable||!this.reservationData.reservation_date||(this.availableTimes=yield this.reservationService.getAvailableTimes(this.selectedTable.id,this.reservationData.reservation_date),this.reservationData.reservation_time&&(yield this.checkAvailability()))})}checkAvailability(){return f(this,null,function*(){!this.selectedTable||!this.reservationData.reservation_date||!this.reservationData.reservation_time||(this.isTableAvailable=yield this.reservationService.checkTableAvailability(this.selectedTable.id,this.reservationData.reservation_date,this.reservationData.reservation_time),this.availabilityChecked=!0)})}createReservation(){return f(this,null,function*(){if(!(!this.selectedTable||!this.isTableAvailable||this.creatingReservation)){this.creatingReservation=!0;try{if(!this.currentUser&&(!this.reservationData.customer_info.first_name||!this.reservationData.customer_info.email)){alert("Per favore compila tutti i campi obbligatori"),this.creatingReservation=!1;return}let n={restaurant_id:this.reservationData.restaurant_id,table_id:this.reservationData.table_id,reservation_date:this.reservationData.reservation_date,reservation_time:this.reservationData.reservation_time,party_size:this.reservationData.party_size,special_requests:this.reservationData.special_requests,customer_info:this.currentUser?void 0:this.reservationData.customer_info},e=yield this.reservationService.createReservation(n);e?(this.lastReservation=e,this.showReservationModal=!1,this.showConfirmationModal=!0,yield this.loadExistingReservations(),this.deselectTable()):alert("Errore durante la creazione della prenotazione. Riprova.")}catch(n){console.error("\u274C Error creating reservation:",n),alert("Errore durante la creazione della prenotazione.")}finally{this.creatingReservation=!1}}})}closeConfirmationModal(){this.showConfirmationModal=!1,this.reservationData={restaurant_id:this.restaurantId,table_id:"",reservation_date:this.minDate,reservation_time:"",party_size:1,special_requests:"",customer_info:{first_name:this.currentUser?.user_metadata?.first_name||"",last_name:this.currentUser?.user_metadata?.last_name||"",email:this.currentUser?.email||"",phone:this.currentUser?.user_metadata?.phone||""}}}formatDate(n){return n?new Date(n).toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}goToRestaurantList(){this.router.navigate(["/restaurants"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=R({type:r,selectors:[["app-restaurant-map-viewer"]],viewQuery:function(e,o){if(e&1&&O(ce,5),e&2){let s;V(s=E())&&(o.canvasRef=s.first)}},decls:31,vars:11,consts:[["floorPlanCanvas",""],["reservationForm","ngForm"],[1,"restaurant-map-viewer"],["class","restaurant-header",4,"ngIf"],["class","map-selector-section",4,"ngIf"],[1,"map-section"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"map-legend"],[1,"legend-item"],[1,"legend-color","available"],[1,"legend-color","reserved"],[1,"legend-color","selected"],[1,"card-content"],[1,"canvas-container"],[1,"floor-plan-canvas"],[1,"grid-overlay"],["class","table-element",3,"class","style","title","click",4,"ngFor","ngForOf"],["class","canvas-instructions",4,"ngIf"],["class","selected-table-info",4,"ngIf"],["class","edit-table-modal-overlay",3,"click",4,"ngIf"],[1,"restaurant-header"],[1,"restaurant-hero"],["class","restaurant-cover",4,"ngIf"],[1,"restaurant-info"],["class","restaurant-logo",4,"ngIf"],[1,"restaurant-details"],[1,"restaurant-name"],["class","restaurant-cuisine",4,"ngIf"],["class","restaurant-description",4,"ngIf"],[1,"restaurant-meta"],["class","meta-item",4,"ngIf"],[1,"restaurant-cover"],[3,"src","alt"],[1,"restaurant-logo"],[1,"restaurant-cuisine"],[1,"restaurant-description"],[1,"meta-item"],[1,"material-icons"],[1,"map-selector-section"],[1,"section-title"],[1,"floor-plan-selector"],["class","floor-plan-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"floor-plan-option",3,"click"],[1,"plan-name"],[1,"table-element",3,"click","title"],[1,"table-content"],[1,"table-number"],[1,"table-capacity"],["class","table-status",4,"ngIf"],[1,"table-status"],[1,"canvas-instructions"],[1,"instruction-card"],[1,"selected-table-info"],[1,"selected-table-header"],[1,"table-capacity-badge"],[1,"selected-table-actions"],[1,"promethea-button","primary",3,"click","disabled"],[1,"promethea-button","secondary",3,"click"],["class","reservation-status",4,"ngIf"],[1,"reservation-status"],[1,"material-icons","warning"],[1,"edit-table-modal-overlay",3,"click"],[1,"edit-table-modal",3,"click"],[1,"modal-title"],["title","Chiudi",1,"icon-button",3,"click"],[1,"generic-form"],["class","form-section",4,"ngIf"],[1,"form-section"],[1,"subsection-title"],[1,"form-row"],[1,"form-group"],["for","reservationDate",1,"form-label"],["id","reservationDate","type","date","name","reservationDate","required","",1,"form-input",3,"ngModelChange","change","ngModel","min"],["for","reservationTime",1,"form-label"],["id","reservationTime","name","reservationTime","required","",1,"form-input",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","partySize",1,"form-label"],["id","partySize","type","number","name","partySize","min","1","required","",1,"form-input",3,"ngModelChange","ngModel","max"],["class","text-muted",4,"ngIf"],["class","availability-status",4,"ngIf"],["name","specialRequests","placeholder","Allergie, celebrazioni speciali, richieste particolari...","rows","4",1,"form-input",3,"ngModelChange","ngModel"],["class","reservation-summary",4,"ngIf"],[1,"form-actions"],["type","button",1,"promethea-button","secondary",3,"click"],["type","button",1,"promethea-button","primary",3,"click","disabled"],["class","material-icons",4,"ngIf"],["for","firstName",1,"form-label"],["id","firstName","type","text","name","firstName","placeholder","Il tuo nome","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","lastName",1,"form-label"],["id","lastName","type","text","name","lastName","placeholder","Il tuo cognome","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["id","email","type","email","name","email","placeholder","tua.email@example.com","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["id","phone","type","tel","name","phone","placeholder","Il tuo numero di telefono","required","",1,"form-input",3,"ngModelChange","ngModel"],[3,"value"],[1,"text-muted"],[1,"availability-status"],[1,"status-message"],[1,"reservation-summary"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"card-content","confirmation-content"],[1,"confirmation-icon"],[1,"material-icons","success"],[1,"confirmation-title"],[1,"confirmation-message"],[1,"confirmation-details"],[1,"detail-item"],[1,"status-badge","pending"],[1,"confirmation-actions"],[1,"promethea-button","primary",3,"click"]],template:function(e,o){e&1&&(t(0,"div",2),v(1,_e,13,7,"div",3)(2,be,7,1,"div",4),t(3,"div",5)(4,"div",6)(5,"div",7)(6,"h2",8),i(7,"Seleziona un Tavolo"),a(),t(8,"div",9)(9,"div",10),M(10,"div",11),t(11,"span"),i(12,"Disponibile"),a()(),t(13,"div",10),M(14,"div",12),t(15,"span"),i(16,"Prenotato"),a()(),t(17,"div",10),M(18,"div",13),t(19,"span"),i(20,"Selezionato"),a()()()(),t(21,"div",14)(22,"div",15)(23,"div",16,0),M(25,"div",17),v(26,he,7,8,"div",18)(27,ye,8,0,"div",19),a()(),v(28,Me,16,4,"div",20),a()()(),v(29,Ee,50,16,"div",21)(30,ke,26,5,"div",21),a()),e&2&&(l(),d("ngIf",o.restaurant),l(),d("ngIf",o.floorPlans.length>1),l(21),D("width",(o.currentFloorPlan==null?null:o.currentFloorPlan.width)||1e3,"px")("height",(o.currentFloorPlan==null?null:o.currentFloorPlan.height)||800,"px"),l(3),d("ngForOf",o.tables),l(),d("ngIf",o.tables.length===0),l(),d("ngIf",o.selectedTable),l(),d("ngIf",o.showReservationModal),l(),d("ngIf",o.showConfirmationModal))},dependencies:[W,A,N,ne,J,Z,$,B,K,X,Q,G,ae,te,ee,Y,H],styles:[".restaurant-map-viewer[_ngcontent-%COMP%]{min-height:100vh;background:var(--background)}.restaurant-header[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.restaurant-hero[_ngcontent-%COMP%]{position:relative;border-radius:0 0 16px 16px;overflow:hidden;background:linear-gradient(135deg,var(--primary),var(--secondary))}.restaurant-cover[_ngcontent-%COMP%]{height:200px;overflow:hidden}.restaurant-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:.7}.restaurant-info[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);padding:var(--gutter-lg);background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.restaurant-logo[_ngcontent-%COMP%]{flex-shrink:0}.restaurant-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:12px;object-fit:cover;border:3px solid var(--primary)}.restaurant-details[_ngcontent-%COMP%]{flex:1}.restaurant-name[_ngcontent-%COMP%]{font-size:var(--fs-lg);color:var(--text-color);margin:0 0 var(--gutter-sm) 0}.restaurant-cuisine[_ngcontent-%COMP%]{font-size:var(--fs-md);color:var(--primary);font-weight:600;margin:0 0 var(--gutter-sm) 0}.restaurant-description[_ngcontent-%COMP%]{color:var(--text-muted);margin:0 0 var(--gutter-md) 0;line-height:1.5}.restaurant-meta[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);color:var(--text-color);font-size:var(--fs-sm)}.meta-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;color:var(--primary)}.map-selector-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.floor-plan-selector[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);flex-wrap:wrap}.floor-plan-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-md);border:2px solid var(--smoke-color-1);border-radius:12px;cursor:pointer;transition:all .3s ease;min-width:160px}.floor-plan-option[_ngcontent-%COMP%]:hover{border-color:var(--primary);transform:translateY(-2px)}.floor-plan-option.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 8%,transparent)}.floor-plan-option[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.plan-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.map-section[_ngcontent-%COMP%]{margin-bottom:var(--gutter-xl)}.map-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);align-items:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);font-size:var(--fs-sm);color:var(--text-muted)}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:2px solid transparent}.legend-color.available[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 60%,transparent);border-color:#10b981}.legend-color.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 60%,transparent);border-color:#ef4444}.legend-color.selected[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 60%,transparent);border-color:var(--primary)}.canvas-container[_ngcontent-%COMP%]{border:2px solid var(--smoke-color-1);border-radius:12px;overflow:auto;background:#f8f9fa;position:relative;display:flex;align-items:center;justify-content:center;min-height:500px;margin-bottom:var(--gutter-lg)}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:var(--shadow-md);cursor:default;margin:auto;min-width:min(100%,1000px);min-height:min(100%,800px)}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:20px 20px;pointer-events:none;opacity:.3;z-index:1}.table-element[_ngcontent-%COMP%]{position:absolute;border:3px solid;background:var(--background);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;-webkit-user-select:none;user-select:none;box-shadow:var(--shadow-sm);z-index:10;border-radius:8px}.table-element.available[_ngcontent-%COMP%]{border-color:#10b981;background:color-mix(in srgb,#10b981 15%,transparent)}.table-element.available[_ngcontent-%COMP%]:hover{border-color:#059669;background:color-mix(in srgb,#10b981 25%,transparent);transform:scale(1.05);z-index:20;box-shadow:var(--shadow-md)}.table-element.reserved[_ngcontent-%COMP%]{border-color:#ef4444;background:color-mix(in srgb,#ef4444 15%,transparent);cursor:not-allowed;opacity:.7}.table-element.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 20%,transparent);transform:scale(1.08);z-index:30;box-shadow:var(--shadow-lg)}.table-element.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.table-content[_ngcontent-%COMP%]{text-align:center;pointer-events:none;padding:8px;position:relative}.table-number[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:var(--text-color);margin-bottom:2px}.table-capacity[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted)}.table-status[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;background:#ef4444;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.table-status[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:12px}.selected-table-info[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 5%,transparent);border:1px solid color-mix(in srgb,var(--primary) 20%,transparent);border-radius:12px;padding:var(--gutter-lg);margin-top:var(--gutter-lg)}.selected-table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--gutter-md)}.selected-table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-color)}.table-capacity-badge[_ngcontent-%COMP%]{background:var(--primary);color:#fff;padding:4px 12px;border-radius:20px;font-size:var(--fs-sm);font-weight:600}.selected-table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md);margin-bottom:var(--gutter-md)}.reservation-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);background:color-mix(in srgb,#f59e0b 10%,transparent);border:1px solid color-mix(in srgb,#f59e0b 30%,transparent);border-radius:8px;color:#f59e0b}.reservation-status[_ngcontent-%COMP%]   .material-icons.warning[_ngcontent-%COMP%]{color:#f59e0b}.availability-status[_ngcontent-%COMP%]{margin:var(--gutter-md) 0}.status-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-md);border-radius:8px;font-weight:600}.status-message.available[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 10%,transparent);border:1px solid color-mix(in srgb,#10b981 30%,transparent);color:#10b981}.status-message.unavailable[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 10%,transparent);border:1px solid color-mix(in srgb,#ef4444 30%,transparent);color:#ef4444}.reservation-summary[_ngcontent-%COMP%]{background:var(--smoke-color-1);border-radius:8px;padding:var(--gutter-lg);margin:var(--gutter-lg) 0}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--gutter-md)}.summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.summary-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-muted);font-weight:600}.summary-value[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-color);font-weight:500}.confirmation-content[_ngcontent-%COMP%]{text-align:center;padding:var(--gutter-xl)}.confirmation-icon[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.confirmation-icon[_ngcontent-%COMP%]   .material-icons.success[_ngcontent-%COMP%]{font-size:64px;color:#10b981}.confirmation-title[_ngcontent-%COMP%]{font-size:var(--fs-md);color:var(--text-color);margin:0 0 var(--gutter-md) 0}.confirmation-message[_ngcontent-%COMP%]{color:var(--text-muted);margin:0 0 var(--gutter-lg) 0;line-height:1.6}.confirmation-details[_ngcontent-%COMP%]{background:var(--smoke-color-1);border-radius:8px;padding:var(--gutter-lg);margin:var(--gutter-lg) 0;text-align:left}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--gutter-sm) 0;border-bottom:1px solid var(--smoke-color-1)}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:var(--fs-sm);font-weight:600;text-transform:capitalize}.status-badge.pending[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 20%,transparent);color:#f59e0b}.confirmation-actions[_ngcontent-%COMP%]{margin-top:var(--gutter-lg)}.canvas-instructions[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:5}.instruction-card[_ngcontent-%COMP%]{background:#fffffff2;padding:var(--gutter-lg);border-radius:16px;border:2px dashed var(--primary);text-align:center;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);max-width:300px}@media (max-width: 768px){.restaurant-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--gutter-md)}.restaurant-meta[_ngcontent-%COMP%]{justify-content:center}.floor-plan-selector[_ngcontent-%COMP%]{flex-direction:column}.floor-plan-option[_ngcontent-%COMP%]{min-width:auto;justify-content:center}.map-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.selected-table-actions[_ngcontent-%COMP%]{flex-direction:column}.canvas-container[_ngcontent-%COMP%]{min-height:400px}.floor-plan-canvas[_ngcontent-%COMP%]{min-width:100%!important;min-height:400px!important}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.restaurant-hero[_ngcontent-%COMP%]{border-radius:0}.restaurant-info[_ngcontent-%COMP%]{padding:var(--gutter-md)}.confirmation-content[_ngcontent-%COMP%]{padding:var(--gutter-lg)}}"]})};export{le as RestaurantMapViewer};
