import{a as he}from"./chunk-GT5KC7K7.js";import{a as ge}from"./chunk-ZKS76WUP.js";import"./chunk-KYBBWEXV.js";import{a as ve}from"./chunk-3GLMGDYZ.js";import"./chunk-PVAGMHPL.js";import"./chunk-X3VWO7FL.js";import"./chunk-HTWH3NPU.js";import"./chunk-VMXTU4N2.js";import"./chunk-XJU7QOT3.js";import{B as me,C as ue,D as h,d as X,e as P,g as Z,h as ee,l as y,m as D,n as te,o as ne,p as ie,q as re,r as ae,t as oe,u as v,v as se,w as le,x as ce,y as pe,z as de}from"./chunk-KBL2L3GY.js";import{$b as J,Cb as Y,Fa as V,Gb as b,Hb as m,Ma as q,Na as s,Qb as z,Sb as K,Tb as a,Ub as A,Vb as k,X as G,ba as x,cb as S,cc as R,dc as I,f as u,fa as $,g as w,ga as p,hb as c,i as j,la as B,m as F,ma as H,ob as W,pc as Q,t as N,tb as l,ub as i,vb as r,wb as C}from"./chunk-UE7YVF6I.js";var _=class e{authService=p(h);router=p(v);canActivate(){return u(this,null,function*(){console.log("\u{1F6E1}\uFE0F AuthGuard: checking authentication");try{(yield Promise.race([this.authService.waitForAuthInit(),new Promise(o=>setTimeout(()=>o(!1),5e3))]))||console.warn("\u{1F6E1}\uFE0F AuthGuard - Auth init timeout, checking current state");let n=this.authService.isAuthenticated();return console.log("\u{1F6E1}\uFE0F AuthGuard - User authenticated:",n),n?(console.log("\u{1F6E1}\uFE0F AuthGuard - Access granted"),!0):(console.log("\u{1F6E1}\uFE0F AuthGuard - Redirecting to login"),this.router.navigate(["/login"]),!1)}catch(t){return console.error("\u{1F6E1}\uFE0F AuthGuard - Error:",t),this.router.navigate(["/login"]),!1}})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};var d=class e{authService=p(h);permissionService=p(ue);router=p(v);canActivate(t){return u(this,null,function*(){if(console.log("\u{1F510} RoleGuard: Checking route:",t.routeConfig?.path),yield this.authService.waitForAuthInit(),!this.authService.currentUserValue)return console.log("\u{1F510} RoleGuard - No user, redirecting to login"),this.router.navigate(["/login"]),!1;let o=t.data.permissions;if(console.log("\u{1F510} RoleGuard - Detailed Debug:",{route:t.routeConfig?.path,requiredPermissions:o,userPermissions:this.permissionService.getCurrentPermissions(),userRole:this.authService.getUserRole(),staffRole:this.authService.getStaffRole(),context:this.authService.getCurrentContext(),isOwner:this.authService.isOwner(),isRestaurantUser:this.authService.isRestaurantUser(),currentRestaurantId:this.authService.getCurrentRestaurantId()}),!o||o.length===0)return console.log("\u{1F510} RoleGuard - No permissions required, access granted"),!0;let g=this.permissionService.hasAnyPermission(o);return console.log("\u{1F510} Permission check result:",{requiredPermissions:o,hasPermission:g,userHasPermissions:this.permissionService.getCurrentPermissions(),missingPermissions:o.filter(f=>!this.permissionService.hasPermission(f))}),g?(console.log("\u{1F510} RoleGuard - Access granted"),!0):(console.log("\u{1F510} Permission denied, redirecting to dashboard"),console.log("\u{1F510} Missing permissions:",o.filter(f=>!this.permissionService.hasPermission(f))),this.redirectToAppropriateDashboard(),!1)})}redirectToAppropriateDashboard(){switch(this.authService.getCurrentContext()){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer"]);break}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};var O=class e{authService=p(h);router=p(v);canActivate(){return u(this,null,function*(){if(yield this.authService.waitForAuthInit(),!this.authService.isAuthenticated())return!1;let t=this.authService.getCurrentContext(),n=this.authService.canBeStaff();console.log("\u{1F468}\u200D\u{1F4BC} StaffGuard Debug:",{currentContext:t,canBeStaff:n,staffRole:this.authService.getStaffRole(),availableContexts:this.authService.getAvailableContexts()});let o=t==="staff"||this.authService.isOwner()||n;return console.log("\u{1F510} StaffGuard - Can access staff area:",o),o?(t!=="staff"&&(console.log("\u{1F504} Setting context to staff for staff area access"),this.authService.setContext("staff")),!0):(console.log("\u{1F6AB} User cannot access staff area, redirecting to customer"),this.authService.setContext("customer"),this.router.navigate(["/customer/restaurant/restaurant-list"]),!1)})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};var fe=[{path:"login",loadComponent:()=>import("./chunk-AWLU4BES.js").then(e=>e.Login)},{path:"register",children:[{path:"",loadComponent:()=>import("./chunk-ALRU3XM6.js").then(e=>e.Register)},{path:":role",loadComponent:()=>import("./chunk-ALRU3XM6.js").then(e=>e.Register)}]},{path:"restaurant",canActivate:[_,O],children:[{path:"dashboard",loadComponent:()=>import("./chunk-KA2Y67Y4.js").then(e=>e.Dashboard),canActivate:[d],data:{permissions:["view_dashboard"]}},{path:"menu",loadComponent:()=>import("./chunk-PXUF3KAO.js").then(e=>e.MenuBuilder),canActivate:[d],data:{permissions:["manage_menu"]}},{path:"orders",loadComponent:()=>import("./chunk-BZ27ER4A.js").then(e=>e.LiveOrders),canActivate:[d],data:{permissions:["manage_orders"]}},{path:"kitchen-display",loadComponent:()=>import("./chunk-3KLJGY3B.js").then(e=>e.KitchenDisplay),canActivate:[d],data:{permissions:["view_kitchen_display"]}},{path:"recipe",loadComponent:()=>import("./chunk-NHSLIY33.js").then(e=>e.Recipe),canActivate:[d],data:{permissions:["view_ingredients"]}},{path:"expense-management",loadComponent:()=>import("./chunk-SOBVX3BR.js").then(e=>e.ExpenseManagement),canActivate:[d],data:{permissions:["view_reports"]}},{path:"financial-report",loadComponent:()=>import("./chunk-LAK7XRXK.js").then(e=>e.FinancialReport),canActivate:[d],data:{permissions:["view_reports"]}},{path:"reservations",loadComponent:()=>import("./chunk-KFTA45TE.js").then(e=>e.ReservationManager),canActivate:[d],data:{permissions:["manage_reservations"]}},{path:"table-map",loadComponent:()=>import("./chunk-D5FC4DLF.js").then(e=>e.TableMap),canActivate:[d],data:{permissions:["take_orders"]}},{path:"floor-plan",loadComponent:()=>import("./chunk-OMP65OWE.js").then(e=>e.FloorPlanEditor),canActivate:[d],data:{permissions:["view_table_map"]}},{path:"calendar-view",loadComponent:()=>import("./chunk-ZN7KNIBM.js").then(e=>e.CalendarView),canActivate:[d],data:{permissions:["manage_reservations"]}},{path:"inventory",loadComponent:()=>import("./chunk-2M2GUUGX.js").then(e=>e.Inventory),canActivate:[d],data:{permissions:["manage_inventory"]}},{path:"suppliers",loadComponent:()=>import("./chunk-4EOLYQ5U.js").then(e=>e.SupplierManager),canActivate:[d],data:{permissions:["manage_inventory"]}},{path:"tables",loadComponent:()=>import("./chunk-3OUK5OVU.js").then(e=>e.TablemapView),canActivate:[d],data:{permissions:["take_orders"]}},{path:"staff-management",loadComponent:()=>import("./chunk-G5TH7S46.js").then(e=>e.StaffManagement),canActivate:[d],data:{permissions:["manage_staff"]}},{path:"settings",loadComponent:()=>import("./chunk-OQJTF4UN.js").then(e=>e.RestaurantSettings),canActivate:[d],data:{permissions:["manage_restaurant_settings"]}},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"supplier",canActivate:[_,d],data:{roles:["supplier"],context:"supplier"},children:[{path:"dashboard",loadComponent:()=>import("./chunk-WYKREN45.js").then(e=>e.SupplierDashboard)},{path:"settings",loadComponent:()=>import("./chunk-AIRTRICI.js").then(e=>e.SupplierSettings)},{path:"restaurants",loadComponent:()=>import("./chunk-S7LOKWMV.js").then(e=>e.SupplierRestaurants)},{path:"products",loadComponent:()=>import("./chunk-CXPOGQPT.js").then(e=>e.SupplierIngredients)},{path:"ingredients",loadComponent:()=>import("./chunk-CXPOGQPT.js").then(e=>e.SupplierIngredients)},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"customer",canActivate:[_,d],data:{roles:["customer"],context:"customer"},children:[{path:"search",loadComponent:()=>import("./chunk-S7EEYYXL.js").then(e=>e.RestaurantSearch)},{path:"menu-display",loadComponent:()=>import("./chunk-2A5AC4NC.js").then(e=>e.MenuDisplay)},{path:"reservations",loadComponent:()=>import("./chunk-I42P762Q.js").then(e=>e.ReservationWizard)},{path:"orders",loadComponent:()=>import("./chunk-HZCAHZ55.js").then(e=>e.OrderTracker)},{path:"reviews",loadComponent:()=>import("./chunk-AHTGVK5G.js").then(e=>e.ReviewSystem)},{path:"restaurant/:id",loadComponent:()=>import("./chunk-CMJH4PMW.js").then(e=>e.RestaurantDetail)},{path:"settings",loadComponent:()=>import("./chunk-AGZTEQWI.js").then(e=>e.SettingsCustomer)},{path:"menu/:id",loadComponent:()=>import("./chunk-YR7GIZGF.js").then(e=>e.InteractiveMenu)},{path:"",redirectTo:"menu-display",pathMatch:"full"}]},{path:"food-cost",loadComponent:()=>import("./chunk-CE2NBWPB.js").then(e=>e.FoodCostCalculator),canActivate:[_,O],data:{permissions:["view_ingredients"]}},{path:"food-cost-calculator/:id",component:ge,canActivate:[_,O],data:{permissions:["view_ingredients"]}},{path:"",pathMatch:"full",redirectTo:"/customer/menu-display"},{path:"**",redirectTo:"/customer/menu-display"}];var be={providers:[ce(fe,pe())]};function Ce(e,t){e&1&&(i(0,"div",1)(1,"div",2),C(2,"div",3),i(3,"p"),a(4,"Caricamento..."),r()()())}var L=class e{isLoading=!1;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=S({type:e,selectors:[["app-loader"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[["class","loader-overlay",4,"ngIf"],[1,"loader-overlay"],[1,"loader-card","form-section"],[1,"spinner"]],template:function(n,o){n&1&&c(0,Ce,5,0,"div",0),n&2&&l("ngIf",o.isLoading)},dependencies:[y,P],styles:[".loader-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--background);display:flex;justify-content:center;align-items:center;z-index:9999}.loader-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem}.spinner[_ngcontent-%COMP%]{border:4px solid var(--smoke-color-1);border-top:4px solid var(--primary);border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function Se(e,t){if(e&1&&(i(0,"option",5),a(1),r()),e&2){let n=t.$implicit,o=m(2);l("value",n)("selected",n===o.currentContext),s(),k(" ",o.getContextLabel(n)," ")}}function ke(e,t){if(e&1){let n=Y();i(0,"div",1)(1,"label",2),a(2,"Modalit\xE0:"),r(),i(3,"select",3),b("change",function(g){B(n);let f=m();return H(f.onContextChange(g))}),c(4,Se,2,3,"option",4),r()()}if(e&2){let n=m();s(3),l("value",n.currentContext)("title","Modalit\xE0: "+n.getContextLabel(n.currentContext)),s(),l("ngForOf",n.availableContexts)}}var E=class e{authService=p(h);router=p(v);availableContexts=[];currentContext="customer";ngOnInit(){this.updateContexts(),this.authService.currentContext$.subscribe(()=>{console.log("\u{1F504} ContextSelector - Context changed, updating..."),this.updateContexts()}),this.authService.currentUser$.subscribe(()=>{console.log("\u{1F504} ContextSelector - User changed, updating contexts..."),setTimeout(()=>this.updateContexts(),100)})}updateContexts(){this.availableContexts=this.authService.getAvailableContexts(),this.currentContext=this.authService.getCurrentContext(),console.log("\u{1F4CB} ContextSelector updated:",{available:this.availableContexts,current:this.currentContext})}onContextChange(t){return u(this,null,function*(){let n=t.target.value;if(n!==this.currentContext){console.log("\u{1F504} ContextSelector: Switching to:",n);try{yield this.authService.switchContext(n),this.redirectToContextDashboard(n)}catch(o){console.error("\u274C Error switching context:",o)}}})}redirectToContextDashboard(t){switch(t){case"staff":this.router.navigate(["/restaurant/dashboard"]);break;case"supplier":this.router.navigate(["/supplier/dashboard"]);break;case"customer":default:this.router.navigate(["/customer/menu-display"]);break}}getContextLabel(t){return{customer:"Cliente",staff:"Ristorante",supplier:"Fornitore"}[t]||t}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=S({type:e,selectors:[["app-context-selector"]],decls:1,vars:1,consts:[["class","context-selector form-group ",4,"ngIf"],[1,"context-selector","form-group"],[1,"form-label"],[1,"form-control",3,"change","value","title"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(n,o){n&1&&c(0,ke,5,3,"div",0),n&2&&l("ngIf",o.availableContexts.length>1)},dependencies:[y,X,P],styles:[".context-selector[_ngcontent-%COMP%]{margin-bottom:0;padding:0 var(--gutter-sm) var(--gutter-sm) var(--gutter-sm);background:var(--shadow);border-radius:.5rem 0 0;box-shadow:0 -5px 15px var(--shadow);z-index:500;border-top:1px solid var(--shadow)}.context-selector[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:.25rem;font-style:italic}.context-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .5rem}"]})};var T=class e{constructor(t){this.platformId=t;this.loadInitialTheme()}currentThemeSubject=new F("light");currentTheme$=this.currentThemeSubject.asObservable();loadInitialTheme(){if(D(this.platformId)){let t=localStorage.getItem("app-theme");t?this.setTheme(t):this.setTheme("light")}}setTheme(t){this.currentThemeSubject.next(t),D(this.platformId)&&(localStorage.setItem("app-theme",t),t==="dark"?(document.documentElement.setAttribute("data-theme","dark"),document.body.classList.add("dark-theme")):(document.documentElement.removeAttribute("data-theme"),document.body.classList.remove("dark-theme")))}toggleTheme(){let t=this.currentThemeSubject.value==="light"?"dark":"light";this.setTheme(t)}getCurrentTheme(){return this.currentThemeSubject.value}static \u0275fac=function(n){return new(n||e)($(V))};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};function Pe(e,t){e&1&&(i(0,"div",31)(1,"span",5),a(2,"restaurant"),r(),i(3,"h2"),a(4,"Promethea"),r()())}function ye(e,t){e&1&&(i(0,"h3",32),a(1,"Gestione Ristorante"),r())}function Me(e,t){e&1&&(i(0,"li",15)(1,"a",33)(2,"span",5),a(3,"dashboard"),r(),i(4,"span",13),a(5,"Dashboard"),r()()())}function Oe(e,t){e&1&&(i(0,"li",15)(1,"a",34)(2,"span",5),a(3,"brunch_dining"),r(),i(4,"span",13),a(5,"Prenotazioni Tavoli"),r()()())}function we(e,t){e&1&&(i(0,"li",15)(1,"a",35)(2,"span",5),a(3,"kitchen"),r(),i(4,"span",13),a(5,"Pannello Cucina"),r()()())}function Ae(e,t){e&1&&(i(0,"li",15)(1,"a",36)(2,"span",5),a(3,"table_restaurant"),r(),i(4,"span",13),a(5,"Layout Sala"),r()()())}function Re(e,t){e&1&&(i(0,"li",15)(1,"a",37)(2,"span",5),a(3,"supervisor_account"),r(),i(4,"span",13),a(5,"Staff"),r()()())}function Ie(e,t){if(e&1&&(i(0,"div",7),c(1,ye,2,0,"h3",9),i(2,"ul",10),c(3,Me,6,0,"li",14)(4,Oe,6,0,"li",14)(5,we,6,0,"li",14)(6,Ae,6,0,"li",14)(7,Re,6,0,"li",14),r()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed),s(2),l("ngIf",n.authService.hasPermission("view_dashboard")),s(),l("ngIf",n.authService.hasPermission("manage_reservations")),s(),l("ngIf",n.authService.hasPermission("view_kitchen_display")),s(),l("ngIf",n.authService.hasPermission("view_table_map")),s(),l("ngIf",n.authService.hasPermission("manage_staff"))}}function Le(e,t){e&1&&(i(0,"h3",32),a(1,"Menu & Cucina"),r())}function Ee(e,t){e&1&&(i(0,"li",15)(1,"a",38)(2,"span",5),a(3,"restaurant_menu"),r(),i(4,"span",13),a(5,"Men\xF9 & Piatti"),r()()())}function Te(e,t){e&1&&(i(0,"li",15)(1,"a",39)(2,"span",5),a(3,"receipt_long"),r(),i(4,"span",13),a(5,"Ricette"),r()()())}function Ue(e,t){e&1&&(i(0,"li",15)(1,"a",40)(2,"span",5),a(3,"savings"),r(),i(4,"span",13),a(5,"Food Cost"),r()()())}function ze(e,t){if(e&1&&(i(0,"div",7),c(1,Le,2,0,"h3",9),i(2,"ul",10),c(3,Ee,6,0,"li",14)(4,Te,6,0,"li",14)(5,Ue,6,0,"li",14),r()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed),s(2),l("ngIf",n.authService.hasPermission("manage_menu")),s(),l("ngIf",n.authService.hasPermission("view_ingredients")),s(),l("ngIf",n.authService.hasPermission("view_ingredients"))}}function De(e,t){e&1&&(i(0,"h3",32),a(1,"Magazzino & Acquisti"),r())}function je(e,t){e&1&&(i(0,"li",15)(1,"a",41)(2,"span",5),a(3,"inventory_2"),r(),i(4,"span",13),a(5,"Inventario"),r()()())}function Fe(e,t){e&1&&(i(0,"li",15)(1,"a",42)(2,"span",5),a(3,"local_shipping"),r(),i(4,"span",13),a(5,"Fornitori"),r()()())}function Ne(e,t){if(e&1&&(i(0,"div",7),c(1,De,2,0,"h3",9),i(2,"ul",10),c(3,je,6,0,"li",14)(4,Fe,6,0,"li",14),r()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed),s(2),l("ngIf",n.authService.hasPermission("manage_inventory")),s(),l("ngIf",n.authService.hasPermission("manage_inventory"))}}function Ge(e,t){e&1&&(i(0,"h3",32),a(1,"Finanze"),r())}function $e(e,t){e&1&&(i(0,"li",15)(1,"a",43)(2,"span",5),a(3,"payments"),r(),i(4,"span",13),a(5,"Gestione Spese"),r()()())}function Be(e,t){e&1&&(i(0,"li",15)(1,"a",44)(2,"span",5),a(3,"bar_chart"),r(),i(4,"span",13),a(5,"Report Finanziario"),r()()())}function He(e,t){if(e&1&&(i(0,"div",7),c(1,Ge,2,0,"h3",9),i(2,"ul",10),c(3,$e,6,0,"li",14)(4,Be,6,0,"li",14),r()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed),s(2),l("ngIf",n.authService.hasPermission("view_reports")),s(),l("ngIf",n.authService.hasPermission("view_reports"))}}function Ve(e,t){e&1&&(i(0,"h3",32),a(1,"Gestione Fornitore"),r())}function qe(e,t){if(e&1&&(i(0,"div",7),c(1,Ve,2,0,"h3",9),i(2,"ul",10)(3,"li",15)(4,"a",45)(5,"span",5),a(6,"dashboard"),r(),i(7,"span",13),a(8,"Dashboard"),r()()(),i(9,"li",15)(10,"a",46)(11,"span",5),a(12,"storefront"),r(),i(13,"span",13),a(14,"Catalogo Prodotti"),r()()()()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed)}}function We(e,t){e&1&&(i(0,"h3",32),a(1,"Cliente"),r())}function Ye(e,t){if(e&1&&(i(0,"div",7),c(1,We,2,0,"h3",9),i(2,"ul",10)(3,"li",11)(4,"a",47)(5,"span",5),a(6,"search"),r(),i(7,"span",13),a(8,"Cerca Ristoranti"),r()()(),i(9,"li",15)(10,"a",48)(11,"span",5),a(12,"Home"),r(),i(13,"span",13),a(14,"Home"),r()()(),i(15,"li",11)(16,"a",49)(17,"span",5),a(18,"restaurant"),r(),i(19,"span",13),a(20,"Lista Ristoranti"),r()()(),i(21,"li",11)(22,"a",50)(23,"span",5),a(24,"book_online"),r(),i(25,"span",13),a(26,"Le mie Prenotazioni"),r()()(),i(27,"li",11)(28,"a",51)(29,"span",5),a(30,"shopping_bag"),r(),i(31,"span",13),a(32,"I miei Ordini"),r()()(),i(33,"li",11)(34,"a",52)(35,"span",5),a(36,"rate_review"),r(),i(37,"span",13),a(38,"Le mie Recensioni"),r()()()()()),e&2){let n=m();s(),l("ngIf",!n.isSidebarCollapsed)}}function Ke(e,t){e&1&&(i(0,"h3",32),a(1,"Account"),r())}function Je(e,t){e&1&&(i(0,"li",15)(1,"a",53)(2,"span",5),a(3,"settings"),r(),i(4,"span",13),a(5,"Impostazioni"),r()()())}function Qe(e,t){e&1&&(i(0,"li",15)(1,"a",54)(2,"span",5),a(3,"settings"),r(),i(4,"span",13),a(5,"Impostazioni"),r()()())}function Xe(e,t){e&1&&(i(0,"li",15)(1,"a",55)(2,"span",5),a(3,"settings"),r(),i(4,"span",13),a(5,"Impostazioni"),r()()())}function Ze(e,t){e&1&&(i(0,"div",56),C(1,"app-context-selector"),r())}function et(e,t){if(e&1&&(i(0,"div",61),a(1),r()),e&2){let n=m(2);s(),k(" ",n.getRestaurantName()," ")}}function tt(e,t){if(e&1&&(i(0,"div",61),a(1),r()),e&2){let n=m(2);s(),k(" ",n.getSupplierCompanyName()," ")}}function nt(e,t){if(e&1&&(i(0,"div",57)(1,"div",58)(2,"span",59),a(3),r(),i(4,"span"),a(5),r()(),c(6,et,2,1,"div",60)(7,tt,2,1,"div",60),r()),e&2){let n=m();s(3),A(n.getUserDisplayName()),s(),K(J("role-badge ",n.getRoleClass())),s(),A(n.getRoleLabel()),s(),l("ngIf",n.currentRestaurant&&n.isRestaurantUser()),s(),l("ngIf",n.supplierProfile&&n.isSupplierUser())}}var U=class e{authService=p(h);supabaseService=p(me);supplierAuthService=p(he);router=p(v);loadingService=p(ve);cdRef=p(Q);themeService=p(T);loading=!0;routerLoading=!1;initLoading=!0;isSidebarCollapsed=!1;currentUser$;currentRestaurant$;currentUser=null;currentRestaurant=null;supplierProfile=null;userSubscription=new w;supplierSubscription=new w;loadingSubscription=new w;contextSubscription=new w;constructor(){this.currentUser$=this.authService.currentUser$,this.currentRestaurant$=this.authService.currentUser$.pipe(G(t=>t&&this.isRestaurantUser()?new j(n=>{this.supabaseService.getCurrentUserRestaurant().then(o=>{n.next(o),n.complete()}).catch(o=>{console.error("Error loading restaurant:",o),n.next(null),n.complete()})}):N(null)))}ngOnInit(){return u(this,null,function*(){this.loadingSubscription=this.loadingService.loading$.subscribe(t=>{this.loading=t||this.routerLoading||this.initLoading}),this.router.events.subscribe(t=>{t instanceof ne?(this.routerLoading=!0,this.updateGlobalLoading()):(t instanceof ie||t instanceof re||t instanceof ae)&&(this.routerLoading=!1,this.updateGlobalLoading())}),this.contextSubscription=this.authService.currentContext$.subscribe(()=>{console.log("\u{1F504} App Component - Context changed, updating view..."),this.cdRef.detectChanges()}),this.userSubscription=this.authService.currentUser$.subscribe(t=>{this.currentUser=t,t?(this.authService.loadPermissions(),this.printDebugInfo()):(this.currentRestaurant=null,this.supplierProfile=null),this.initLoading=!1,this.updateGlobalLoading(),this.cdRef.detectChanges()}),this.currentRestaurant$.subscribe(t=>{this.currentRestaurant=t,this.cdRef.detectChanges()}),this.supplierSubscription=this.supplierAuthService.supplierProfile$.subscribe(t=>{this.supplierProfile=t})})}updateGlobalLoading(){this.loading=this.loadingService.isLoadingSync()||this.routerLoading||this.initLoading}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.supplierSubscription&&this.supplierSubscription.unsubscribe(),this.loadingSubscription&&this.loadingSubscription.unsubscribe(),this.contextSubscription&&this.contextSubscription.unsubscribe()}printDebugInfo(){console.log("\u{1F50D} DEBUG - App Component State:"),console.log("  - Current Context:",this.authService.getCurrentContext()),console.log("  - isRestaurantUser():",this.isRestaurantUser()),console.log("  - isCustomerUser():",this.isCustomerUser()),console.log("  - isSupplierUser():",this.isSupplierUser()),console.log("  - Current Staff:",this.authService.getCurrentStaff()),console.log("  - Current Restaurant:",this.currentRestaurant),console.log("  - Available Contexts:",this.authService.getAvailableContexts()),console.log("  - Can Be Staff:",this.authService.canBeStaff()),console.log("  - Is Owner:",this.authService.isOwner()),console.log("  - User Role:",this.authService.getUserRole())}refreshView(){this.cdRef.detectChanges()}loadUserRestaurant(){return u(this,null,function*(){if(this.isRestaurantUser())try{this.currentRestaurant=yield this.supabaseService.getCurrentUserRestaurant(),console.log("Restaurant loaded:",this.currentRestaurant)}catch(t){console.error("Error loading restaurant:",t),this.currentRestaurant=null}else this.currentRestaurant=null})}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}isRestaurantUser(){return this.authService.isRestaurantUser()}isCustomerUser(){return this.authService.isCustomerUser()}isSupplierUser(){return this.authService.isSupplierUser()}canBeStaff(){return this.authService.canBeStaff()}getUserDisplayName(){let t=this.currentUser;if(!t)return"";let n=t.user_metadata?.first_name,o=t.user_metadata?.last_name;return n&&o?`${n} ${o}`:n||o||t.email||"Utente"}getUserInitial(){let t=this.currentUser;if(!t)return"";let n=t.user_metadata?.first_name,o=t.user_metadata?.last_name;return n&&o?`${n.charAt(0)}${o.charAt(0)}`.toUpperCase():n?n.charAt(0).toUpperCase():o?o.charAt(0).toUpperCase():t.email?.charAt(0).toUpperCase()||"U"}getRestaurantName(){return this.currentRestaurant?.name||"Ristorante"}getSupplierCompanyName(){return this.supplierProfile?.company_name||"Fornitore"}logout(){return u(this,null,function*(){yield this.authService.logout()})}onSidebarNavClick(t){if(window.innerWidth>768)return;t.target.closest(".nav-link")&&(this.isSidebarCollapsed=!0)}onDocumentClick(t){let n=t.target;if(window.innerWidth<=768){if(n.closest(".mobile-sidebar-toggle"))return;this.isSidebarCollapsed||!n.closest(".sidebar")&&!n.closest(".sidebar-toggle")&&(this.isSidebarCollapsed=!0)}}getRoleClass(){let t=this.currentUser;return t?`role-${t.user_metadata?.role??t.role??"guest"}`:"role-guest"}getRoleLabel(){let t=this.currentUser;if(!t)return"Guest";let n=t.user_metadata?.role??t.role??"guest";switch(n){case"restaurant_owner":return"Proprietario";case"restaurant_manager":return"Manager";case"chef":return"Chef";case"waiter":return"Cameriere";case"customer":return"Cliente";case"supplier":return"Fornitore";case"super_admin":return"Super Admin";default:return n.charAt(0).toUpperCase()+n.slice(1)}}isAuthenticated(){return this.authService.isAuthenticated()}getSettingsRoute(){return this.isRestaurantUser()&&this.authService.hasPermission("manage_restaurant_settings")?"/restaurant/settings":this.isSupplierUser()?"/supplier/settings":"/customer"}navigateBasedOnRole(){this.isRestaurantUser()?this.router.navigate(["/restaurant/dashboard"]):this.isSupplierUser()?this.router.navigate(["/supplier/dashboard"]):this.isCustomerUser()?this.router.navigate(["/customer"]):this.router.navigate(["/login"])}getAvailableContexts(){return this.authService.getAvailableContexts()}shouldShowContextSelector(){return this.authService.isAuthenticated()&&this.authService.canBeStaff()}setTheme(t){this.themeService.setTheme(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=S({type:e,selectors:[["app-root"]],hostBindings:function(n,o){n&1&&b("click",function(f){return o.onDocumentClick(f)},q)},decls:55,vars:28,consts:[[1,"app-container"],[1,"sidebar",3,"click"],[1,"sidebar-header"],["class","sidebar-brand",4,"ngIf"],[1,"icon-button","sidebar-toggle",3,"click"],[1,"material-icons"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-section",4,"ngIf"],["class","nav-section-title",4,"ngIf"],[1,"nav-menu"],[1,"nav-item",2,"display","none"],["routerLink","/profile","routerLinkActive","nav-link--active","data-label","Profilo",1,"nav-link"],[1,"nav-text"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-label","Logout",1,"nav-link",3,"click"],[1,"sidebar_footer"],["class","context-selector-container",4,"ngIf"],[1,"sidebar-user"],[1,"user-main-info"],[1,"user-avatar-small"],["class","user-details",4,"ngIf"],[1,"theme-toggle-integrated"],[1,"theme-toggle-compact"],["type","checkbox",3,"change","checked"],[1,"slider-compact"],[1,"material-icons","theme-icon"],["aria-label","Apri sidebar",1,"mobile-sidebar-toggle",3,"click"],[3,"isLoading"],[1,"main-content"],[1,"sidebar-brand"],[1,"nav-section-title"],["routerLink","/restaurant/dashboard","routerLinkActive","nav-link--active","data-label","Dashboard",1,"nav-link"],["routerLink","/restaurant/table-map","routerLinkActive","nav-link--active","data-label","Prenotazioni",1,"nav-link"],["routerLink","/restaurant/kitchen-display","routerLinkActive","nav-link--active","data-label","Pannello Cucina",1,"nav-link"],["routerLink","/restaurant/floor-plan","routerLinkActive","nav-link--active","data-label","Layout Sala",1,"nav-link"],["routerLink","/restaurant/staff-management","routerLinkActive","nav-link--active","data-label","Staff",1,"nav-link"],["routerLink","/restaurant/menu","routerLinkActive","nav-link--active","data-label","Men\xF9 e Piatti",1,"nav-link"],["routerLink","/restaurant/recipe","routerLinkActive","nav-link--active","data-label","Ricette",1,"nav-link"],["routerLink","/food-cost","routerLinkActive","nav-link--active","data-label","Food Cost",1,"nav-link"],["routerLink","/restaurant/inventory","routerLinkActive","nav-link--active","data-label","Inventario",1,"nav-link"],["routerLink","/restaurant/suppliers","routerLinkActive","nav-link--active","data-label","Fornitori",1,"nav-link"],["routerLink","/restaurant/expense-management","routerLinkActive","nav-link--active","data-label","Gestione Spese",1,"nav-link"],["routerLink","/restaurant/financial-report","routerLinkActive","nav-link--active","data-label","Report Finanziario",1,"nav-link"],["routerLink","/supplier/dashboard","routerLinkActive","nav-link--active","data-label","Dashboard",1,"nav-link"],["routerLink","/supplier/products","routerLinkActive","nav-link--active","data-label","Catalogo Prodotti",1,"nav-link"],["routerLink","/customer/search","routerLinkActive","nav-link--active","data-label","Cerca Ristoranti",1,"nav-link"],["routerLink","/customer/menu-display","routerLinkActive","nav-link--active","data-label","Cerca Ristoranti",1,"nav-link"],["routerLink","/customer/restaurant/restaurant-list","routerLinkActive","nav-link--active","data-label","Lista Ristoranti",1,"nav-link"],["routerLink","/customer/reservations","routerLinkActive","nav-link--active","data-label","Le mie Prenotazioni",1,"nav-link"],["routerLink","/customer/orders","routerLinkActive","nav-link--active","data-label","I miei Ordini",1,"nav-link"],["routerLink","/customer/reviews","routerLinkActive","nav-link--active","data-label","Le mie Recensioni",1,"nav-link"],["routerLink","/restaurant/settings","routerLinkActive","nav-link--active","data-label","Impostazioni Ristorante",1,"nav-link"],["routerLink","/supplier/settings","routerLinkActive","nav-link--active","data-label","Impostazioni Fornitore",1,"nav-link"],["routerLink","/customer/settings","routerLinkActive","nav-link--active","data-label","Impostazioni Cliente",1,"nav-link"],[1,"context-selector-container"],[1,"user-details"],[1,"user-info"],[1,"user-name"],["class","restaurant-info",4,"ngIf"],[1,"restaurant-info"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"aside",1),b("click",function(f){return o.onSidebarNavClick(f)}),i(2,"div",2),c(3,Pe,5,0,"div",3),i(4,"button",4),b("click",function(){return o.toggleSidebar()}),i(5,"span",5),a(6),r()()(),i(7,"nav",6),C(8,"div",7),c(9,Ie,8,6,"div",8)(10,ze,6,4,"div",8)(11,Ne,5,3,"div",8)(12,He,5,3,"div",8)(13,qe,15,1,"div",8)(14,Ye,39,1,"div",8),i(15,"div",7),c(16,Ke,2,0,"h3",9),i(17,"ul",10)(18,"li",11)(19,"a",12)(20,"span",5),a(21,"person"),r(),i(22,"span",13),a(23,"Profilo"),r()()(),c(24,Je,6,0,"li",14)(25,Qe,6,0,"li",14)(26,Xe,6,0,"li",14),i(27,"li",15)(28,"button",16),b("click",function(){return o.logout()}),i(29,"span",5),a(30,"logout"),r(),i(31,"span",13),a(32,"Logout"),r()()()()()(),i(33,"div",17),c(34,Ze,2,0,"div",18),i(35,"div",19)(36,"div",20)(37,"div",21),a(38),R(39,"uppercase"),r(),c(40,nt,8,7,"div",22),r(),i(41,"div",23),R(42,"async"),i(43,"label",24)(44,"input",25),R(45,"async"),b("change",function(){return o.themeService.toggleTheme()}),r(),i(46,"span",26)(47,"span",27),a(48,"dark_mode"),r()()()()()()(),i(49,"button",28),b("click",function(){return o.toggleSidebar()}),i(50,"span",5),a(51,"menu"),r()(),C(52,"app-loader",29),i(53,"main",30),C(54,"router-outlet"),r()()),n&2&&(s(),z("sidebar--collapsed",o.isSidebarCollapsed),s(2),l("ngIf",!o.isSidebarCollapsed),s(3),A(o.isSidebarCollapsed?"menu":"chevron_left"),s(3),l("ngIf",o.isRestaurantUser()),s(),l("ngIf",o.isRestaurantUser()&&o.authService.hasPermission("view_reports")),s(),l("ngIf",o.isRestaurantUser()&&o.authService.hasPermission("view_reports")),s(),l("ngIf",o.isRestaurantUser()&&o.authService.hasPermission("view_reports")),s(),l("ngIf",o.isSupplierUser()),s(),l("ngIf",o.isCustomerUser()),s(2),l("ngIf",!o.isSidebarCollapsed),s(8),l("ngIf",o.isRestaurantUser()&&o.authService.hasPermission("manage_restaurant_settings")),s(),l("ngIf",o.isSupplierUser()),s(),l("ngIf",o.isCustomerUser()),s(8),l("ngIf",o.shouldShowContextSelector()),s(4),k(" ",I(39,22,o.getUserInitial())," "),s(2),l("ngIf",!o.isSidebarCollapsed),s(),W("data-label",I(42,24,o.themeService.currentTheme$)==="dark"?"Tema Scuro":"Tema Chiaro"),s(3),l("checked",I(45,26,o.themeService.currentTheme$)==="dark"),s(8),l("isLoading",o.loading),s(),z("main-content--expanded",o.isSidebarCollapsed))},dependencies:[y,P,oe,de,se,le,L,E,Z,ee],styles:['.app-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:var(--background);position:relative}.sidebar[_ngcontent-%COMP%]{width:var(--grandezzasidebar);height:100vh;background:var(--sidebar-background);border-right:1px solid color-mix(in srgb,var(--secondary) 20%,transparent);display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;flex-shrink:0;position:fixed;left:0;top:0;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow-x:none!important}.sidebar--collapsed[_ngcontent-%COMP%]{width:64px}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]{overflow:visible!important}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{overflow-y:auto!important;overflow-x:hidden!important;align-items:center;padding:0}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%], .sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{position:relative;overflow:visible!important}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{justify-content:center}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:var(--grandezzasidebar);overflow:auto;transition:all .3s cubic-bezier(.4,0,.2,1);background:var(--background);min-height:100vh}.main-content--expanded[_ngcontent-%COMP%]{margin-left:64px}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:100vh;width:100vw;transform:translate(0);transition:transform .25s ease;z-index:1100}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.main-content[_ngcontent-%COMP%]{margin-left:0!important;width:100%}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed) + .main-content[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:#00000073;z-index:1050;pointer-events:auto}.mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none;position:fixed;left:12px;top:12px;z-index:1200;width:44px;height:44px;border-radius:10px;background:var(--smoke-color-1);border:1px solid color-mix(in srgb,var(--secondary) 12%,transparent);box-shadow:0 6px 18px color-mix(in srgb,var(--primary) 12%,transparent);display:flex;align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);justify-content:center;cursor:pointer}.sidebar.sidebar--collapsed[_ngcontent-%COMP%] + .mobile-sidebar-toggle[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]:not(.sidebar--collapsed) + .mobile-sidebar-toggle[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:inline-block}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--gutter-sm);border-bottom:1px solid color-mix(in srgb,var(--secondary) 15%,transparent);background:color-mix(in srgb,var(--background) 92%,transparent);position:relative;gap:var(--gutter-sm)}.sidebar-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,color-mix(in srgb,var(--primary) 30%,transparent) 50%,transparent 100%)}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);height:100%;width:100%;padding:var(--gutter-sm);border-radius:12px;background:var(--shadow);border:1px solid color-mix(in srgb,var(--primary) 15%,transparent)}.sidebar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary);font-size:var(--fs-md);font-weight:800;letter-spacing:-.5px;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.sidebar-brand[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary);font-size:24px;background:transparent;padding:6px;border-radius:8px}.sidebar-toggle[_ngcontent-%COMP%]{background:var(--shadow);border-radius:10px;border:1px solid var(--shadow);transition:all .3s ease;height:100%;width:100%}@media (max-width: 768px){.sidebar-toggle[_ngcontent-%COMP%]{max-width:5rem}}.sidebar-toggle[_ngcontent-%COMP%]:hover{background:var(--shadow2);border-color:var(--primary);transform:scale(1.05) rotate(-5deg)}.sidebar-user[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gutter-sm);padding:var(--gutter-sm);border-top:1px solid color-mix(in srgb,var(--secondary) 15%,transparent);background:var(--shadow);position:relative;min-height:60px}.user-avatar-small[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--accent-warm));display:flex;align-items:center;justify-content:center;color:var(--text-color);font-weight:700;font-size:.8rem;border:2px solid color-mix(in srgb,var(--secondary) 30%,transparent);flex-shrink:0}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-width:0;flex:1}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:0}.user-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:var(--fs-sm)}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:600}.user-role.chip[_ngcontent-%COMP%]{font-size:.7rem;padding:4px 10px;width:fit-content;background:color-mix(in srgb,var(--tertiary) 10%,transparent);color:var(--tertiary);border:1px solid color-mix(in srgb,var(--tertiary) 20%,transparent);border-radius:20px;font-weight:600}.sidebar-nav[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:0;gap:var(--gutter-sm);overflow-y:auto;overflow-x:none!important;background:var(--background)}.nav-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md);background:var(--background);margin-bottom:var(--gutter-sm)}.nav-section-title[_ngcontent-%COMP%]{font-weight:700;color:var(--coloretitlenav);padding:0 var(--gutter-sm);text-transform:uppercase;letter-spacing:.5px;opacity:.8;margin-top:var(--gutter-md)}.nav-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--gutter-sm);background:var(--background)}.nav-item[_ngcontent-%COMP%]{width:100%;padding:0 var(--gutter-sm)}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;padding:var(--gutter-sm);border-radius:14px;color:var(--text-color);text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border:1.5px solid transparent;position:relative;width:100%;background:color-mix(in srgb,var(--background) 60%,transparent);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:none;cursor:pointer;font-family:inherit;font-size:inherit}.nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-4px;top:50%;transform:translateY(-50%);width:4px;height:0;background:linear-gradient(180deg,var(--primary),var(--accent-warm));border-radius:0 4px 4px 0;transition:height .3s ease}.nav-link[_ngcontent-%COMP%]:hover{background:var(--shadow);border-color:color-mix(in srgb,var(--primary) 25%,transparent);transform:translate(8px);box-shadow:0 4px 16px color-mix(in srgb,var(--primary) 15%,transparent)}.nav-link[_ngcontent-%COMP%]:hover:before{height:60%}.nav-link--active[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 12%,transparent)!important;border-color:color-mix(in srgb,var(--primary) 60%,transparent)!important;color:var(--primary)!important;font-weight:700;transform:translate(-5px);box-shadow:0 6px 20px color-mix(in srgb,var(--primary) 20%,transparent)}.nav-link--active[_ngcontent-%COMP%]:before{height:80%;background:linear-gradient(180deg,var(--primary),var(--accent-warm))}.nav-link--active[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)!important;transform:scale(1.1)}.nav-link[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:22px;color:color-mix(in srgb,var(--text-color) 70%,transparent);flex-shrink:0;transition:all .3s ease;background:transparent;padding:6px;border-radius:10px}.nav-link[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%]{color:var(--primary);background:transparent;transform:scale(1.1)}.nav-text[_ngcontent-%COMP%]{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:all .3s ease;font-size:.9rem;color:inherit}.sidebar-footer[_ngcontent-%COMP%]{padding:var(--gutter-sm);border-top:1px solid color-mix(in srgb,var(--secondary) 15%,transparent);background:var(--shadow);position:relative}.sidebar-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,color-mix(in srgb,var(--secondary) 40%,transparent) 50%,transparent 100%)}.restaurant-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:var(--gutter-sm);border-radius:12px;border:1px solid color-mix(in srgb,var(--secondary) 15%,transparent);margin:0;color:var(--primary);font-weight:800;letter-spacing:-.5px;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.restaurant-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:800}.restaurant-info[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--tertiary);font-style:normal;font-weight:500;opacity:.8}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .restaurant-info[_ngcontent-%COMP%], .sidebar--collapsed[_ngcontent-%COMP%]   .nav-badge[_ngcontent-%COMP%]{opacity:0;visibility:hidden;width:0;height:0;overflow:hidden}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;gap:8px;padding:10px}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:calc(var(--gutter-sm) / 2);margin:0;border-radius:16px;position:relative;z-index:1}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{padding:0;align-items:center}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:var(--gutter-md);display:flex;justify-content:center}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .nav-badge[_ngcontent-%COMP%]{opacity:1;visibility:visible;position:absolute;right:8px;top:8px;width:auto;height:auto}.nav-link[_ngcontent-%COMP%], .sidebar-toggle[_ngcontent-%COMP%], .icon-button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.nav-link[_ngcontent-%COMP%]:active, .sidebar-toggle[_ngcontent-%COMP%]:active{transform:scale(.95)}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:color-mix(in srgb,var(--secondary) 5%,transparent);border-radius:10px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:color-mix(in srgb,var(--primary) 30%,transparent);border-radius:10px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:color-mix(in srgb,var(--primary) 50%,transparent)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]:not(:first-child):before{content:"";position:absolute;top:-8px;left:50%;transform:translate(-50%);width:24px;height:1px;background:color-mix(in srgb,var(--secondary) 30%,transparent)}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after{content:attr(data-label);position:absolute;left:calc(100% + 15px);top:50%;transform:translateY(-50%);background:#000;color:#fff;padding:10px 14px;border-radius:8px;white-space:nowrap;font-size:.85rem;font-weight:600;box-shadow:0 4px 20px #0000004d;z-index:10000;min-width:max-content;opacity:0;visibility:hidden;transition:all .3s ease}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{opacity:1;visibility:visible}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{transform:none!important;background:color-mix(in srgb,var(--primary) 12%,transparent)!important}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%]{color:var(--primary)!important;background:transparent;transform:scale(1.1)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]{position:relative;margin-bottom:var(--gutter-md)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]:not(:first-child):before{content:"";position:absolute;top:-8px;left:50%;border-radius:var(--fs-sm);transform:translate(-50%);width:80%;height:var(--gutter-sm);background:color-mix(in srgb,var(--tertiary) 80%,transparent)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]:not(:first-child){padding-top:var(--gutter-md)}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section-title[_ngcontent-%COMP%]{display:block!important;opacity:1!important;visibility:visible!important;width:auto!important;height:1px!important;background:color-mix(in srgb,var(--secondary) 40%,transparent);margin:var(--gutter-md) auto;padding:0;text-indent:-9999px;overflow:hidden;border:none;border-radius:2px}.sidebar--collapsed[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]:first-child   .nav-section-title[_ngcontent-%COMP%]{margin-top:0}.sidebar_footer[_ngcontent-%COMP%]{display:flex;flex-direction:column}.context-selector[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.context-selector[_ngcontent-%COMP%]{margin:0}.context-selector[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.sidebar--collapsed[_ngcontent-%COMP%]   .context-selector-container[_ngcontent-%COMP%]{display:none}.theme-toggle-integrated[_ngcontent-%COMP%]{flex-shrink:0}.theme-toggle-compact[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;padding:6px;border-radius:8px;transition:all .3s ease;position:relative}.theme-toggle-compact[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);transform:scale(1.05)}.theme-toggle-compact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.slider-compact[_ngcontent-%COMP%]{position:relative;width:32px;height:32px;border-radius:50%;background:var(--smoke-color-2);display:flex;align-items:center;justify-content:center;transition:all .3s ease;border:2px solid transparent}.theme-toggle-compact[_ngcontent-%COMP%]:hover   .slider-compact[_ngcontent-%COMP%]{border-color:color-mix(in srgb,var(--primary) 30%,transparent)}.theme-toggle-compact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider-compact[_ngcontent-%COMP%]{background:var(--primary);transform:rotate(180deg)}.theme-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--text-color);transition:all .3s ease}.theme-toggle-compact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider-compact[_ngcontent-%COMP%]   .theme-icon[_ngcontent-%COMP%]{color:#fff;transform:rotate(180deg)}.light-icon[_ngcontent-%COMP%], .dark-icon[_ngcontent-%COMP%]{opacity:.8}.theme-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .light-icon[_ngcontent-%COMP%]{opacity:.6}.theme-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .slider[_ngcontent-%COMP%]   .dark-icon[_ngcontent-%COMP%]{opacity:.6}.theme-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);transition:all .3s ease;white-space:nowrap}.theme-switcher-collapsed[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]{justify-content:center;padding:8px}.theme-switcher-collapsed[_ngcontent-%COMP%]   .theme-label[_ngcontent-%COMP%]{display:none}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:after{content:attr(data-label);position:absolute;left:calc(100% + 15px);top:50%;transform:translateY(-50%);background:#000;color:#fff;padding:10px 14px;border-radius:8px;white-space:nowrap;font-size:.85rem;font-weight:600;box-shadow:0 4px 20px #0000004d;z-index:10000;min-width:max-content;opacity:0;visibility:hidden;transition:all .3s ease}.sidebar.sidebar--collapsed[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover:after{opacity:1;visibility:visible}.sidebar_footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.sidebar-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border-top:1px solid color-mix(in srgb,var(--secondary) 15%,transparent);background:var(--shadow);position:relative}.sidebar-user[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,color-mix(in srgb,var(--secondary) 40%,transparent) 50%,transparent 100%)}.user-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);flex:1;min-width:0}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;min-width:0;flex:1}.user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.role-badge[_ngcontent-%COMP%]{font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600;white-space:nowrap;flex-shrink:0}.role-badge.role-admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 20%,transparent);color:var(--primary)}.role-badge.role-staff[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 20%,transparent);color:var(--secondary)}.role-badge.role-customer[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--tertiary) 20%,transparent);color:var(--tertiary)}.restaurant-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}']})};te(U,be).catch(e=>console.error(e));
