import{a as Se}from"./chunk-2GRPEXHI.js";import{a as we}from"./chunk-DFE35UP3.js";import{a as Ce}from"./chunk-QU72IQ5W.js";import{a as xe}from"./chunk-QUTFIOET.js";import"./chunk-SVYAZSVR.js";import{qb as fe,rb as ye}from"./chunk-7ARAJ5DM.js";import{A as he,a as ie,b as ae,d as re,e as oe,g as se,i as le,j as de,k as ce,s as me,t as pe,u as ue,v as ve,w as _e,x as ge}from"./chunk-YO2SNT5L.js";import{d as ne}from"./chunk-MEEOFM4U.js";import"./chunk-RD7WPZ3N.js";import"./chunk-JDHQCX3C.js";import{k as J,l as K,m as Q,n as Z,r as ee,v as te}from"./chunk-RJWLMJIA.js";import{Hb as z,Ib as l,Jb as w,Ka as $,Kb as x,La as s,Lb as H,Ob as b,Pb as D,Qb as E,Sb as G,Va as Y,Vb as O,Xb as V,Y as q,Zb as N,_a as u,ca as A,dc as U,gb as m,hb as W,ib as T,kb as X,la as v,ma as _,na as j,qb as o,rb as a,sb as P,tb as I,ub as F,vb as R,yb as h,zb as c}from"./chunk-KIAVC6JW.js";import{g as k}from"./chunk-RA2WU32H.js";var B=class r extends xe{getTableName(){return"personal_appointments"}loadByDateRange(t,e){return k(this,null,function*(){let n=yield this.getCurrentRestaurantId();if(!n)return[];let{data:i,error:d}=yield this.getSupabaseClientPublic().from(this.getTableName()).select("*").eq("restaurant_id",n).gte("start_datetime",t.toISOString()).lte("end_datetime",e.toISOString()).order("start_datetime",{ascending:!0});return d?(this.handleError("loadByDateRange",d),[]):i||[]})}static \u0275fac=(()=>{let t;return function(n){return(t||(t=j(r)))(n||r)}})();static \u0275prov=q({token:r,factory:r.\u0275fac,providedIn:"root"})};var ke=()=>["LUN","MAR","MER","GIO","VEN","SAB","DOM"];function Pe(r,t){if(r&1&&(o(0,"div",39)(1,"span"),l(2),a(),o(3,"span",40),l(4),a()()),r&2){let e=t.$implicit;s(2),x("Tavoli da ",e.size,":"),s(2),w(e.count)}}function Ie(r,t){if(r&1&&(o(0,"div",37),u(1,Pe,5,2,"div",38),a()),r&2){let e=c();s(),m("ngForOf",e.getSimpleCapacityDistribution())}}function Fe(r,t){if(r&1&&(o(0,"span",41),l(1),a()),r&2){let e=c();s(),x(" (",e.getAvailableTablesToday()," tavoli liberi) ")}}function Oe(r,t){if(r&1&&(o(0,"div",7)(1,"div",8)(2,"span",42),l(3,"event"),a(),o(4,"h3",10),l(5),O(6,"date"),a()(),o(7,"div",43),l(8),a(),o(9,"div",12),l(10),a()()),r&2){let e=c();s(5),x("Disponibilit\xE0 ",V(6,4,e.selectedDate,"dd/MM"),""),s(3),x(" ",e.getAvailableTablesForSelectedDate()," tavoli "),s(2),H(" Posti: ",e.todayCapacity," / ",e.calculateMaxCapacitySimple()," ")}}function Ve(r,t){if(r&1&&(o(0,"div",49),l(1),a()),r&2){let e=t.$implicit;s(),x(" ",e," ")}}function Ae(r,t){r&1&&P(0,"lucide-angular",56)}function ze(r,t){if(r&1&&(o(0,"span",57),l(1),a()),r&2){let e=c().$implicit,n=c(2);W("background",n.getEventColor(e.events[0])),s(),w(e.events.length)}}function We(r,t){r&1&&(I(0),o(1,"span",66),l(2,"event"),a(),F())}function Ne(r,t){if(r&1&&(l(0),O(1,"date")),r&2){let e=c().$implicit;w(V(1,1,e.start,"HH:mm"))}}function He(r,t){if(r&1&&(o(0,"span",67),l(1),a()),r&2){let e=c().$implicit;s(),x(" ",e.title," ")}}function $e(r,t){if(r&1&&(o(0,"span",67)(1,"span",27),l(2,"restaurant"),a(),l(3),a()),r&2){let e=c().$implicit;s(3),x(" ",e.meta.customerName," ")}}function Be(r,t){if(r&1){let e=R();o(0,"div",61),h("click",function(i){let d=v(e).$implicit,p=c(4);return i.stopPropagation(),_(p.onEventClick(d))}),o(1,"span",62),u(2,We,3,0,"ng-container",63)(3,Ne,2,4,"ng-template",null,0,N),a(),I(5,64),u(6,He,2,1,"span",65)(7,$e,4,1,"span",65),F(),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(4);W("border-color",i.getEventColor(e)),s(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),s(3),m("ngSwitch",e.meta.eventType),s(),m("ngSwitchCase","personal"),s(),m("ngSwitchCase","reservation")}}function Le(r,t){if(r&1){let e=R();o(0,"div",68),h("click",function(i){v(e);let d=c(2).$implicit,p=c(2);return i.stopPropagation(),_(p.onDayClick(d.date))}),l(1),a()}if(r&2){let e=c(2).$implicit,n=c(2);s(),x(" +",n.getEventsForDate(e.date).length-2," ")}}function qe(r,t){if(r&1&&(o(0,"div",58),u(1,Be,8,7,"div",59)(2,Le,2,1,"div",60),a()),r&2){let e=c().$implicit,n=c(2);s(),m("ngForOf",n.getLimitedEventsForDate(e.date,2)),s(),m("ngIf",n.hasMoreEvents(e.date,2))}}function je(r,t){if(r&1){let e=R();o(0,"div",50),h("click",function(){let i=v(e).$implicit,d=c(2);return _(d.openDayDetails(i.date))}),o(1,"div",51)(2,"span",52),l(3),a(),u(4,Ae,1,0,"lucide-angular",53)(5,ze,2,3,"span",54),a(),u(6,qe,3,2,"div",55),a()}if(r&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e.date))("current-month",e.isCurrentMonth)("other-month",!e.isCurrentMonth)("closed-day",n.isDayClosed(e.date)),s(2),T("today-number",n.isToday(e.date)),s(),w(e.date.getDate()),s(),m("ngIf",n.isDayClosed(e.date)),s(),m("ngIf",e.events.length>0),s(),m("ngIf",e.events.length>0)}}function Ye(r,t){if(r&1&&(o(0,"div",44)(1,"div",45),u(2,Ve,2,1,"div",46),a(),o(3,"div",47),u(4,je,7,14,"div",48),a()()),r&2){let e=c();s(2),m("ngForOf",G(2,ke)),s(2),m("ngForOf",e.getMonthDays())}}function Xe(r,t){if(r&1&&(o(0,"div",76)(1,"div",77),l(2),O(3,"date"),a(),o(4,"div",78),l(5),a()()),r&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e))("closed-day",n.isDayClosed(e)),s(2),w(V(3,6,e,"EEE")),s(3),w(e.getDate())}}function Ge(r,t){if(r&1&&(o(0,"div",79),l(1),a()),r&2){let e=t.$implicit;s(),x(" ",e," ")}}function Ue(r,t){r&1&&(I(0),o(1,"span",27),l(2,"event"),a(),F())}function Je(r,t){if(r&1&&(l(0),O(1,"date")),r&2){let e=c().$implicit;x(" ",V(1,1,e.start,"HH:mm")," ")}}function Ke(r,t){if(r&1&&(o(0,"div",88)(1,"span",89),l(2,"event_note"),a(),l(3),a()),r&2){let e=c().$implicit;s(3),x(" ",e.title," ")}}function Qe(r,t){if(r&1&&(o(0,"div",88)(1,"span",89),l(2,"restaurant"),a(),l(3),a()),r&2){let e=c().$implicit;s(3),x(" ",e.meta.customerName," ")}}function Ze(r,t){if(r&1&&(o(0,"div",90),l(1),a()),r&2){let e=c().$implicit;s(),x(" ",e.meta.partySize,"p ")}}function et(r,t){if(r&1){let e=R();o(0,"div",84),h("click",function(i){let d=v(e).$implicit,p=c(4);return i.stopPropagation(),_(p.onEventClick(d))}),o(1,"div",85),u(2,Ue,3,0,"ng-container",63)(3,Je,2,4,"ng-template",null,1,N),a(),I(5,64),u(6,Ke,4,1,"div",86)(7,Qe,4,1,"div",86),F(),u(8,Ze,2,1,"div",87),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(4);W("background",i.getEventColor(e)),s(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),s(3),m("ngSwitch",e.meta.eventType),s(),m("ngSwitchCase","personal"),s(),m("ngSwitchCase","reservation"),s(),m("ngIf",e.meta.eventType==="reservation")}}function tt(r,t){if(r&1){let e=R();o(0,"div",82),h("click",function(){v(e);let i=c().$implicit,d=c(2);return _(d.openDayDetails(i))}),u(1,et,9,8,"div",83),a()}if(r&2){let e=t.$implicit,n=c().$implicit,i=c(2);s(),m("ngForOf",i.getEventsForSlot(n,e))}}function nt(r,t){if(r&1&&(o(0,"div",80),u(1,tt,2,1,"div",81),a()),r&2){let e=t.$implicit,n=c(2);T("closed-day",n.isDayClosed(e)),s(),m("ngForOf",n.getTimeSlotsForDay(e))}}function it(r,t){if(r&1&&(o(0,"div",69)(1,"div",70),P(2,"div",71),u(3,Xe,6,9,"div",72),a(),o(4,"div",73)(5,"div",71),u(6,Ge,2,1,"div",74),a(),u(7,nt,2,3,"div",75),a()()),r&2){let e=c();s(3),m("ngForOf",e.weekDays),s(3),m("ngForOf",e.getTimeSlotsForDay(e.weekDays[0])),s(),m("ngForOf",e.weekDays)}}function at(r,t){r&1&&(I(0),o(1,"span",27),l(2,"event"),a(),F())}function rt(r,t){if(r&1&&(l(0),O(1,"date")),r&2){let e=c().$implicit;w(V(1,1,e.start,"HH:mm"))}}function ot(r,t){if(r&1&&(o(0,"div",104),l(1),a()),r&2){let e=c().$implicit;s(),x("\u{1F4CC} ",e.title,"")}}function st(r,t){if(r&1&&(o(0,"div",104),l(1),a()),r&2){let e=c().$implicit;s(),w(e.meta.customerName)}}function lt(r,t){if(r&1&&(o(0,"div",105),l(1),a()),r&2){let e=c().$implicit;s(),H(" ",e.meta.partySize," persone \u2022 ",e.meta.tableInfo," ")}}function dt(r,t){if(r&1){let e=R();o(0,"div",100),h("click",function(i){let d=v(e).$implicit,p=c(3);return i.stopPropagation(),_(p.onEventClick(d))}),o(1,"div",101),u(2,at,3,0,"ng-container",63)(3,rt,2,4,"ng-template",null,1,N),a(),I(5,64),u(6,ot,2,1,"div",102)(7,st,2,1,"div",102),F(),u(8,lt,2,2,"div",103),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(3);W("background",i.getEventColor(e)),s(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),s(3),m("ngSwitch",e.meta.eventType),s(),m("ngSwitchCase","personal"),s(),m("ngSwitchCase","reservation"),s(),m("ngIf",e.meta.eventType==="reservation")}}function ct(r,t){if(r&1){let e=R();o(0,"div",96)(1,"div",97),l(2),a(),o(3,"div",98),h("click",function(){v(e);let i=c(2);return _(i.openDayDetails(i.viewDate))}),u(4,dt,9,8,"div",99),a()()}if(r&2){let e=t.$implicit,n=c(2);s(2),w(e),s(2),m("ngForOf",n.getEventsForSlot(n.viewDate,e))}}function mt(r,t){if(r&1&&(o(0,"div",91)(1,"div",92)(2,"h2",93),l(3),O(4,"date"),a()(),o(5,"div",94),u(6,ct,5,2,"div",95),a()()),r&2){let e=c();s(),T("closed-day",e.isDayClosed(e.viewDate)),s(2),w(V(4,4,e.viewDate,"fullDate")),s(3),m("ngForOf",e.getTimeSlotsForDay(e.viewDate))}}function pt(r,t){if(r&1&&(o(0,"option",140),l(1),a()),r&2){let e=t.$implicit;m("value",e),s(),x(" ",e," ")}}function ut(r,t){if(r&1&&(o(0,"small",141),l(1),a()),r&2){let e=c(2);s(),x(" Capienza massima: ",e.maxCapacity," persone ")}}function vt(r,t){r&1&&(o(0,"small",142),l(1," Nessun tavolo configurato \u2013 impossibile prenotare "),a())}function _t(r,t){if(r&1){let e=R();o(0,"div",113)(1,"label",143),P(2,"lucide-angular",144),l(3," Stato "),a(),o(4,"select",145),E("ngModelChange",function(i){v(e);let d=c(2);return D(d.newReservation.status,i)||(d.newReservation.status=i),_(i)}),o(5,"option",140),l(6,"Confermata"),a(),o(7,"option",140),l(8,"In attesa"),a(),o(9,"option",140),l(10,"Cancellata"),a()()()}if(r&2){let e=c(2);s(4),b("ngModel",e.newReservation.status),s(),m("value",e.ReservationStatus.Confirmed),s(2),m("value",e.ReservationStatus.Pending),s(2),m("value",e.ReservationStatus.Cancelled)}}function gt(r,t){if(r&1){let e=R();o(0,"div",106)(1,"div",107)(2,"div",108)(3,"h3",109)(4,"span",9),l(5,"event_available"),a(),l(6," Nuova Prenotazione "),a(),o(7,"button",26),h("click",function(){v(e);let i=c();return _(i.closeNewReservationModal())}),o(8,"span",27),l(9,"close"),a()()(),o(10,"div")(11,"form",110),h("ngSubmit",function(){v(e);let i=c();return _(i.createManualReservation())}),o(12,"div",111)(13,"div",112)(14,"div",113)(15,"label",114),P(16,"lucide-angular",115),l(17," Nome * "),a(),o(18,"input",116),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.customer_name,i)||(d.newReservation.customer_name=i),_(i)}),a()(),o(19,"div",113)(20,"label",117)(21,"span",27),l(22,"person_outline"),a(),l(23," Cognome * "),a(),o(24,"input",118),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.customer_surname,i)||(d.newReservation.customer_surname=i),_(i)}),a()()(),o(25,"div",112)(26,"div",113)(27,"label",119),P(28,"lucide-angular",120),l(29," Email "),a(),o(30,"input",121),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.customer_email,i)||(d.newReservation.customer_email=i),_(i)}),a()(),o(31,"div",113)(32,"label",122)(33,"span",27),l(34,"phone"),a(),l(35," Telefono * "),a(),o(36,"input",123),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.customer_phone,i)||(d.newReservation.customer_phone=i),_(i)}),a()()(),o(37,"div",112)(38,"div",113)(39,"label",124)(40,"span",27),l(41,"event"),a(),l(42," Data * "),a(),o(43,"input",125),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.reservation_date,i)||(d.newReservation.reservation_date=i),_(i)}),h("change",function(){v(e);let i=c();return _(i.onReservationDateChange())}),a()(),o(44,"div",113)(45,"label",126)(46,"span",27),l(47,"schedule"),a(),l(48," Ora * "),a(),o(49,"select",127),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.reservation_time,i)||(d.newReservation.reservation_time=i),_(i)}),o(50,"option",128),l(51,"Scegli un orario"),a(),u(52,pt,2,2,"option",129),a()()(),o(53,"div",112)(54,"div",113)(55,"label",130)(56,"span",27),l(57,"group"),a(),l(58," Numero Persone * "),a(),o(59,"input",131),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.party_size,i)||(d.newReservation.party_size=i),_(i)}),a(),u(60,ut,2,1,"small",132)(61,vt,2,0,"small",133),a(),u(62,_t,11,4,"div",134),a(),o(63,"div",113)(64,"label",135)(65,"span",27),l(66,"notes"),a(),l(67," Richieste Speciali "),a(),o(68,"textarea",136),E("ngModelChange",function(i){v(e);let d=c();return D(d.newReservation.special_requests,i)||(d.newReservation.special_requests=i),_(i)}),a()()(),o(69,"div",137)(70,"button",138),h("click",function(){v(e);let i=c();return _(i.closeNewReservationModal())}),o(71,"span",27),l(72,"close"),a(),l(73," Annulla "),a(),o(74,"button",139),P(75,"lucide-angular",31),l(76," Crea Prenotazione "),a()()()()()()}if(r&2){let e=c();s(16),m("size",20),s(2),b("ngModel",e.newReservation.customer_name),s(6),b("ngModel",e.newReservation.customer_surname),s(4),m("size",20),s(2),b("ngModel",e.newReservation.customer_email),s(6),b("ngModel",e.newReservation.customer_phone),s(7),b("ngModel",e.newReservation.reservation_date),m("min",e.minDate),s(6),b("ngModel",e.newReservation.reservation_time),s(3),m("ngForOf",e.getAvailableTimeSlotsForDate(e.selectedDate)),s(7),b("ngModel",e.newReservation.party_size),m("max",e.maxCapacity),s(),m("ngIf",e.maxCapacity>0),s(),m("ngIf",e.maxCapacity===0),s(),m("ngIf",e.editingReservationId),s(6),b("ngModel",e.newReservation.special_requests),s(7),m("size",20)}}function ht(r,t){if(r&1&&(o(0,"span")(1,"span",175),l(2,"event_note"),a(),l(3),a()),r&2){let e=c().$implicit;s(3),x(" ",e.title," ")}}function xt(r,t){if(r&1&&(o(0,"span")(1,"span",175),l(2,"restaurant"),a(),l(3),a()),r&2){let e=c().$implicit;s(3),x(" ",e.meta.customerName," ")}}function ft(r,t){if(r&1&&(o(0,"span",176),l(1),a()),r&2){let e=c().$implicit,n=c(3);X(n.getReservationStatusClass(e.meta.status)),s(),x(" ",e.meta.status," ")}}function yt(r,t){if(r&1&&(o(0,"div",178)(1,"span",179),l(2,"email"),a(),o(3,"span",180),l(4),a()()),r&2){let e=c(2).$implicit;s(4),w(e.meta.customerEmail)}}function wt(r,t){if(r&1&&(o(0,"div",177)(1,"div",178)(2,"span",179),l(3,"phone"),a(),o(4,"span",180),l(5),a()(),u(6,yt,5,1,"div",181),a()),r&2){let e=c().$implicit;s(5),w(e.meta.customerPhone),s(),m("ngIf",e.meta.customerEmail)}}function Ct(r,t){if(r&1&&(I(0),o(1,"div",170)(2,"span",171),l(3,"group"),a(),o(4,"div",172),l(5),a(),o(6,"div",173),l(7,"Persone"),a()(),o(8,"div",170)(9,"span",171),l(10,"table_restaurant"),a(),o(11,"div",172),l(12),a(),o(13,"div",173),l(14,"Tavolo"),a()(),F()),r&2){let e=c().$implicit;s(5),w(e.meta.partySize),s(7),w(e.meta.tableInfo||"\u2014")}}function St(r,t){if(r&1&&(I(0),l(1),O(2,"date"),O(3,"date"),F()),r&2){let e=c(2).$implicit;s(),H(" ",V(2,2,e.start,"HH:mm")," - ",V(3,5,e.end,"HH:mm")," ")}}function bt(r,t){r&1&&l(0," Tutto il giorno ")}function Dt(r,t){if(r&1&&(I(0),o(1,"div",170)(2,"span",171),l(3,"description"),a(),o(4,"div",172),l(5),a(),o(6,"div",173),l(7,"Descrizione"),a()(),o(8,"div",170)(9,"span",171),l(10,"access_time"),a(),o(11,"div",172),u(12,St,4,8,"ng-container",63)(13,bt,1,0,"ng-template",null,3,N),a(),o(15,"div",173),l(16,"Orario"),a()(),F()),r&2){let e=z(14),n=c().$implicit;s(5),w(n.meta.description||"Nessuna descrizione"),s(7),m("ngIf",!n.meta.isAllDay)("ngIfElse",e)}}function Et(r,t){if(r&1&&(o(0,"div",182)(1,"div",183)(2,"span",184),l(3,"notes"),a(),o(4,"strong",180),l(5,"Note"),a()(),o(6,"p",185),l(7),a()()),r&2){let e=c().$implicit;s(7),w(e.meta.reservation.special_requests)}}function Mt(r,t){if(r&1){let e=R();o(0,"div",157)(1,"div",158)(2,"div",159)(3,"div",160)(4,"h4",161),I(5,64),u(6,ht,4,1,"span",162)(7,xt,4,1,"span",162),F(),o(8,"span",163),l(9),a()(),u(10,ft,2,3,"span",164),a(),u(11,wt,7,2,"div",165),a(),o(12,"div",159)(13,"button",166),h("click",function(){let i=v(e).$implicit,d=c(3);return _(d.editEvent(i))}),o(14,"span",27),l(15,"edit"),a()(),o(16,"button",167),h("click",function(){let i=v(e).$implicit,d=c(3);return _(d.deleteEvent(i))}),P(17,"lucide-angular",168),a()()(),o(18,"div",169)(19,"div",170)(20,"span",171),l(21,"schedule"),a(),o(22,"div",172),l(23),O(24,"date"),a(),o(25,"div",173),l(26,"Orario"),a()(),I(27,64),u(28,Ct,15,2,"ng-container",162)(29,Dt,17,3,"ng-container",162),F(),a(),u(30,Et,8,1,"div",174),a()}if(r&2){let e=t.$implicit;s(5),m("ngSwitch",e.meta.eventType),s(),m("ngSwitchCase","personal"),s(),m("ngSwitchCase","reservation"),s(),T("bg-purple",e.meta.eventType==="personal")("bg-primary",e.meta.eventType==="reservation"),s(),x(" ",e.meta.eventType==="personal"?"Personale":"Prenotazione"," "),s(),m("ngIf",e.meta.eventType==="reservation"),s(),m("ngIf",e.meta.eventType==="reservation"),s(6),m("size",20),s(6),w(V(24,16,e.start,"HH:mm")),s(4),m("ngSwitch",e.meta.eventType),s(),m("ngSwitchCase","reservation"),s(),m("ngSwitchCase","personal"),s(),m("ngIf",e.meta.eventType==="reservation"&&(e.meta.reservation==null?null:e.meta.reservation.special_requests))}}function Tt(r,t){if(r&1&&(o(0,"div",155),u(1,Mt,31,19,"div",156),a()),r&2){let e=c(2);s(),m("ngForOf",e.selectedDayEvents)}}function Rt(r,t){r&1&&(o(0,"div",186)(1,"span",187),l(2,"event_busy"),a(),o(3,"h3",188),l(4,"Nessun evento per questa data"),a(),o(5,"p",189),l(6,'Clicca su "Nuovo Appuntamento" o "Nuova Prenotazione" per aggiungerne uno'),a()())}function kt(r,t){if(r&1){let e=R();o(0,"div",106)(1,"div",107)(2,"div",108)(3,"div",146)(4,"div",147)(5,"span",148),l(6,"calendar_today"),a()(),o(7,"div")(8,"h3",149),l(9,"Eventi del giorno"),a(),o(10,"p",150),l(11),O(12,"date"),a()()(),o(13,"button",26),h("click",function(){v(e);let i=c();return _(i.closeDayDetailsModal())}),o(14,"span",27),l(15,"close"),a()()(),o(16,"div",151)(17,"div",152)(18,"span",27),l(19,"event_available"),a(),o(20,"div")(21,"strong"),l(22),a(),l(23),a()(),u(24,Tt,2,1,"div",153)(25,Rt,7,0,"ng-template",null,2,N),o(27,"div",137)(28,"button",138),h("click",function(){v(e);let i=c();return _(i.closeDayDetailsModal())}),o(29,"span",27),l(30,"close"),a(),l(31," Chiudi "),a(),o(32,"button",138),h("click",function(){v(e);let i=c();return _(i.openNewPersonalAppointmentModal(i.selectedDate))}),o(33,"span",27),l(34,"event_note"),a(),l(35," Nuovo Appuntamento "),a(),o(36,"button",154),h("click",function(){v(e);let i=c();return _(i.openNewReservationForSelectedDay())}),P(37,"lucide-angular",31),l(38," Nuova Prenotazione "),a()()()()()}if(r&2){let e=z(26),n=c();s(11),w(V(12,6,n.selectedDate,"EEEE d MMMM yyyy")),s(11),x("",n.selectedDayEvents.length," eventi"),s(),x(" \xB7 ",n.calculateTotalGuests()," persone totali "),s(),m("ngIf",n.selectedDayEvents.length>0)("ngIfElse",e),s(13),m("size",20)}}function Pt(r,t){if(r&1){let e=R();o(0,"div",106)(1,"div",190)(2,"div",108)(3,"h3",109)(4,"span",27),l(5,"event_note"),a(),l(6),a(),o(7,"button",26),h("click",function(){v(e);let i=c();return _(i.closePersonalAppointmentModal())}),o(8,"span",27),l(9,"close"),a()()(),o(10,"div",151)(11,"form",110,4),h("ngSubmit",function(){v(e);let i=c();return _(i.savePersonalAppointment())}),o(13,"div",113)(14,"label",191),l(15,"Titolo *"),a(),o(16,"input",192),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.title,i)||(d.personalAppointmentData.title=i),_(i)}),a()(),o(17,"div",112)(18,"div",113)(19,"label",191),l(20,"Inizio *"),a(),o(21,"input",193),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.start_datetime,i)||(d.personalAppointmentData.start_datetime=i),_(i)}),a()(),o(22,"div",113)(23,"label",191),l(24,"Fine *"),a(),o(25,"input",194),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.end_datetime,i)||(d.personalAppointmentData.end_datetime=i),_(i)}),a()()(),o(26,"div",113)(27,"label",191),l(28,"Descrizione"),a(),o(29,"textarea",195),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.description,i)||(d.personalAppointmentData.description=i),_(i)}),a()(),o(30,"div",113)(31,"label",191),l(32,"Colore"),a(),o(33,"div",178)(34,"input",196),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.color,i)||(d.personalAppointmentData.color=i),_(i)}),a(),P(35,"div",197),a()(),o(36,"div",198)(37,"input",199),E("ngModelChange",function(i){v(e);let d=c();return D(d.personalAppointmentData.is_all_day,i)||(d.personalAppointmentData.is_all_day=i),_(i)}),a(),o(38,"span"),l(39,"Giornata intera"),a()(),o(40,"div",137)(41,"button",138),h("click",function(){v(e);let i=c();return _(i.closePersonalAppointmentModal())}),l(42," Annulla "),a(),o(43,"button",200),l(44," Salva "),a()()()()()()}if(r&2){let e=z(12),n=c();s(6),x(" ",n.editingPersonalAppointment?"Modifica":"Nuovo"," Appuntamento Personale "),s(10),b("ngModel",n.personalAppointmentData.title),s(5),b("ngModel",n.personalAppointmentData.start_datetime),s(4),b("ngModel",n.personalAppointmentData.end_datetime),s(4),b("ngModel",n.personalAppointmentData.description),s(5),b("ngModel",n.personalAppointmentData.color),s(),W("background-color",n.personalAppointmentData.color),s(2),b("ngModel",n.personalAppointmentData.is_all_day),s(6),m("disabled",e.invalid)}}var De=(n=>(n.Month="month",n.Week="week",n.Day="day",n))(De||{}),Ee=(n=>(n.Pending="pending",n.Confirmed="confirmed",n.Cancelled="cancelled",n))(Ee||{}),be=class r{reservationService=A(Ce);shiftService=A(Se);tableService=A(we);authService=A(ne);personalAppointmentService=A(B);cdr=A(U);editingReservationId=null;touchStartX=0;touchEndX=0;SWIPE_THRESHOLD=50;view="month";CalendarView=De;viewDate=new Date;minDate=new Date().toISOString().split("T")[0];weekDays=[];weekViewHours=[];events=[];ReservationStatus=Ee;personalEvents=[];showPersonalAppointmentModal=!1;editingPersonalAppointment=null;personalAppointmentData={title:"",description:"",start_datetime:"",end_datetime:"",color:"#3788d8",is_all_day:!1};showNewReservationModal=!1;showDayDetailsModal=!1;showReservationModal=!1;saving=!1;tables=[];maxCapacity=0;tableStats=null;selectedDate=new Date;selectedDayEvents=[];newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(new Date),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"};closures=[];mobileTooltipDay=null;mobileTooltipTimeout=null;todayCapacity=0;loading=!1;shifts=[];calendarStartHour=8;calendarEndHour=23;availableTimeSlots=[];ngOnInit(){return k(this,null,function*(){this.minDate=this.formatDateForInput(new Date),console.log("\u{1F504} Calendar component initialized"),this.setupSubscriptions(),yield this.loadShifts(),yield this.loadTables(),yield this.loadCalendarData(),yield this.loadPersonalAppointments(),this.updateWeekView()})}setupSubscriptions(){this.reservationService.restaurantReservations$.subscribe(t=>{console.log("\u{1F4C5} Reservations received:",t.length),this.events=this.mapReservationsToEvents(t),this.calculateTodayCapacity(),this.events.length>0&&console.log("\u{1F4CC} First event:",this.events[0])}),this.tableService.data$.subscribe(t=>{console.log("\u{1F4CA} Tables updated:",t?.length),this.tables=t||[],this.calculateMaxCapacity(),this.calculateTodayCapacity()}),this.shiftService.closures$.subscribe(t=>{this.closures=t,this.cdr.detectChanges()})}loadShifts(){return k(this,null,function*(){try{this.shifts=this.shiftService.data,(!this.shifts||this.shifts.length===0)&&(yield this.shiftService.loadData(),this.shifts=this.shiftService.data),this.calculateCalendarHoursFromShifts(),this.calculateAvailableTimeSlots(),this.updateWeekView()}catch(t){console.error("Error loading shifts:",t),this.calendarStartHour=8,this.calendarEndHour=23}})}loadCalendarData(){return k(this,null,function*(){this.loading=!0;try{console.log("\u{1F4C5} Loading calendar data..."),yield this.reservationService.loadRestaurantReservations(),console.log("\u2705 Calendar data loaded successfully"),console.log("\u{1F4CA} Events after load:",this.events.length)}catch(t){console.error("Error loading calendar data:",t)}finally{this.loading=!1}})}loadReservations(){this.reservationService.loadRestaurantReservations()}getEventColor(t){return t.meta.eventType==="personal"?"var(--purple, #2196F3)":this.getEventColorBySize(t.meta.partySize)}getEventColorBySize(t){return t?t<=2?"var(--primary, #4CAF50)":t<=4?"var(--secondary, #2196F3)":"var(--tertiary, #2196F3)":"var(--tertiary,  #FF9800)"}mapReservationsToEvents(t){return t.map(e=>{try{let[n,i,d]=e.reservation_date.split("-").map(Number),[p,g,y=0]=e.reservation_time.split(":").map(Number),M=new Date(n,i-1,d,p,g,y),C="Cliente",f="";if(e.users)C=e.users.first_name||"",f=e.users.last_name||"";else if(e.customer_name)if(e.customer_name&&e.customer_surname)C=e.customer_name,f=e.customer_surname;else{let L=e.customer_name.trim().split(" ");C=L[0]||"",f=L.slice(1).join(" ")||""}let S=e.users?.phone||e.customer_phone||"",Me=e.users?.email||e.customer_email||"",Te=e.tables?`Tavolo ${e.tables.table_number}`:"Da assegnare";return{id:e.id,start:M,title:`${C} ${f} - ${e.party_size} persone`,color:{primary:this.getEventColorBySize(e.party_size),secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:`${C} ${f}`.trim(),customerSurname:f,customerEmail:Me,customerPhone:S,partySize:e.party_size,tableInfo:Te,status:e.status||"confirmed"}}}catch(n){console.error("\u274C Error mapping reservation:",e.id,n);let i=new Date;return{id:e.id,start:i,title:"Errore nella prenotazione",color:{primary:"var(--danger)",secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:"Errore",customerSurname:"",customerEmail:"",customerPhone:"",partySize:e.party_size||0,tableInfo:"Errore",status:"error"}}}})}onDayClick(t){this.openDayDetails(t)}deleteReservation(t){return k(this,null,function*(){if(t&&confirm("Sei sicuro di voler eliminare questa prenotazione?"))try{yield this.reservationService.deleteReservation(t.toString()),this.events=this.events.filter(e=>e.id!==t),this.selectedDayEvents=this.selectedDayEvents.filter(e=>e.id!==t),this.calculateTodayCapacity(),this.reservationService.loadRestaurantReservations(),alert("Prenotazione eliminata con successo!"),this.selectedDayEvents.length===0&&setTimeout(()=>{this.closeDayDetailsModal()},1e3)}catch(e){console.error("Error deleting reservation:",e),alert("Errore durante l'eliminazione della prenotazione")}})}onEventClick(t){if(t.meta.eventType==="personal"){let e=t.meta.appointment,n;e.is_all_day?n="\u{1F5D3}\uFE0F Tutto il giorno":n=`\u{1F552} ${this.formatTimeForDisplay(e.start_datetime)} - ${this.formatTimeForDisplay(e.end_datetime)}`,alert(`\u{1F4C5} Appuntamento personale

Titolo: ${e.title}
Descrizione: ${e.description||"Nessuna"}
${n}`)}else alert(`${t.meta.customerName}
${t.start.toLocaleTimeString()}
${t.meta.partySize} persone`)}deletePersonalAppointment(t){return k(this,null,function*(){if(confirm("Eliminare questo appuntamento?"))try{yield this.personalAppointmentService.delete(t),yield this.loadPersonalAppointments()}catch(e){console.error("Errore eliminazione:",e)}})}createManualReservation(){return k(this,null,function*(){if(this.validateReservation()){this.saving=!0;try{let t=`${this.newReservation.customer_name} ${this.newReservation.customer_surname}`.trim(),e=this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,n={customer_name:this.newReservation.customer_name,customer_surname:this.newReservation.customer_surname,customer_email:this.newReservation.customer_email,customer_phone:this.newReservation.customer_phone,reservation_date:this.newReservation.reservation_date,reservation_time:this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,party_size:this.newReservation.party_size,special_requests:this.newReservation.special_requests,status:this.newReservation.status};console.log("\u{1F4E4} Invio dati prenotazione:",n);let i=yield this.reservationService.createRestaurantReservation(n);i?(console.log("\u2705 Prenotazione creata con successo:",i),alert("Prenotazione creata con successo!"),yield this.reservationService.loadRestaurantReservations(),this.closeNewReservationModal()):alert("Errore durante la creazione della prenotazione")}catch(t){console.error("\u274C Errore creazione prenotazione:",t),alert(`Errore: ${t.message||"Impossibile creare la prenotazione"}`)}finally{this.saving=!1}}})}onReservationDateChange(){this.selectedDate=new Date(this.newReservation.reservation_date);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&!t.includes(this.newReservation.reservation_time)&&(this.newReservation.reservation_time=t[0])}validateReservation(){if(!this.newReservation.customer_name.trim())return alert("Inserisci il nome del cliente"),!1;if(!this.newReservation.customer_surname.trim())return alert("Inserisci il cognome del cliente"),!1;if(!this.newReservation.customer_phone.trim())return alert("Inserisci il telefono del cliente"),!1;if(this.newReservation.customer_email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newReservation.customer_email))return alert("Inserisci un'email valida (es: nome@dominio.com)"),!1;let t=new Date(this.newReservation.reservation_date),e=new Date;return e.setHours(0,0,0,0),t<e?(alert("Non puoi prenotare per una data passata"),!1):this.newReservation.party_size<1||this.newReservation.party_size>50?(alert("Il numero di persone deve essere tra 1 e 50"),!1):!0}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}closeReservationModal(){this.showReservationModal=!1,this.resetReservationForm()}resetReservationForm(){let t=new Date;this.newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(t),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"}}setView(t){this.view=t,this.updateWeekView()}previous(){this.animateSwipe("swipe-right"),this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()-1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-1),this.updateWeekView(),this.cdr.detectChanges()}next(){this.animateSwipe("swipe-left"),this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+1),this.updateWeekView(),this.cdr.detectChanges()}today(){this.viewDate=new Date,this.updateWeekView(),this.cdr.detectChanges()}getWeekDays(){console.log("getWeekDays called with viewDate:",this.viewDate);let t=[],e=new Date(this.viewDate),n=e.getDay(),i=e.getDate()-n+(n===0?-6:1),d=new Date(e.setDate(i));for(let p=0;p<7;p++){let g=new Date(d);g.setDate(d.getDate()+p),t.push(g)}return t}getEventsForDay(t){let e=t.toISOString().split("T")[0];return this.events.filter(n=>n.start.toISOString().split("T")[0]===e)}getEventsForHour(t,e){let n=new Date(t);n.setHours(e,0,0,0);let i=new Date(t);return i.setHours(e+1,0,0,0),this.events.filter(d=>d.start>=n&&d.start<i)}getMonthDays(){let t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),n=new Date(t,e,1),i=new Date(t,e+1,0),d=n.getDay(),p=d===0?6:d-1,g=[],y=p;for(let f=y;f>0;f--){let S=new Date(n);S.setDate(S.getDate()-f),g.push({date:S,isCurrentMonth:!1,events:this.getEventsForDate(S)})}for(let f=1;f<=i.getDate();f++){let S=new Date(t,e,f);g.push({date:S,isCurrentMonth:!0,events:this.getEventsForDate(S)})}let C=42-g.length;for(let f=1;f<=C;f++){let S=new Date(i);S.setDate(S.getDate()+f),g.push({date:S,isCurrentMonth:!1,events:this.getEventsForDate(S)})}return g}getEventCountForDate(t){return this.getEventsForDate(t).length}getLimitedEventsForDate(t,e=3){return this.getEventsForDate(t).slice(0,e)}hasMoreEvents(t,e=3){return this.getEventsForDate(t).length>e}isToday(t){let e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isCurrentMonth(t){return t.getMonth()===this.viewDate.getMonth()}calculateCalendarHoursFromShifts(){if(!this.shifts||this.shifts.length===0){this.calendarStartHour=8,this.calendarEndHour=23;return}let t=24,e=0;this.shifts.forEach(n=>{if(n.is_active){let i=this.extractHourFromTime(n.start_time),d=this.extractHourFromTime(n.end_time);i<t&&(t=i),d>e&&(e=d)}}),this.calendarStartHour=t===24?8:t,this.calendarEndHour=e===0?23:e}extractHourFromTime(t){return t?parseInt(t.split(":")[0],10):0}extractMinutesFromTime(t){return t?parseInt(t.split(":")[1],10):0}calculateAvailableTimeSlots(){if(!this.shifts||this.shifts.length===0){this.availableTimeSlots=this.generateTimeSlots(12,23,30);return}let t=[],e=30;this.shifts.forEach(n=>{if(n.is_active){let i=this.extractHourFromTime(n.start_time),d=this.extractMinutesFromTime(n.start_time),p=this.extractHourFromTime(n.end_time),g=this.extractMinutesFromTime(n.end_time),y=this.generateTimeSlotsWithStartEnd(i,d,p,g,e);t.push(...y)}}),this.availableTimeSlots=[...new Set(t)].sort()}generateTimeSlotsWithStartEnd(t,e,n,i,d){let p=[],g=t,y=e,M=Math.floor(y/d)*d;for(M>y,y=M;g<n||g===n&&y<i;){let C=g.toString().padStart(2,"0"),f=y.toString().padStart(2,"0");p.push(`${C}:${f}`),y+=d,y>=60&&(y=0,g++)}return p}generateTimeSlots(t,e,n){let i=[];for(let d=t;d<=e;d++)for(let p=0;p<60;p+=n){let g=d.toString().padStart(2,"0"),y=p.toString().padStart(2,"0");i.push(`${g}:${y}`)}return i}getAvailableTimeSlotsForDate(t){return this.availableTimeSlots}getWeekViewHours(){console.log("\u{1F4C5} getWeekViewHours called:",{start:this.calendarStartHour,end:this.calendarEndHour,view:this.view});let t=[],e=Math.max(0,Math.min(this.calendarStartHour||8,23)),n=Math.max(e,Math.min(this.calendarEndHour||23,23));for(let i=e;i<=n;i++)t.push(i);return t}openNewReservationModal(){this.editingReservationId=null,this.selectedDate=new Date,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0,this.resetReservationForm()}openDayDetails(t){console.log("\u{1F4C5} Opening day details for:",t),console.log("\u{1F4CA} Current events count:",this.events.length),this.selectedDate=t,this.selectedDayEvents=this.getEventsForDate(t),console.log("\u{1F4CB} Events for selected day:",this.selectedDayEvents.length),console.log("\u{1F4CB} All events:"),this.events.forEach((e,n)=>{console.log(`Event ${n}:`,{date:e.start,customer:e.meta.eventType==="reservation"?e.meta.customerName:"Appuntamento",localDate:e.start.toLocaleDateString("it-IT")})}),this.showDayDetailsModal=!0,setTimeout(()=>{console.log("\u{1F504} Modal state:",this.showDayDetailsModal)},100)}closeNewReservationModal(){this.showNewReservationModal=!1,this.editingReservationId=null,this.resetReservationForm()}closeDayDetailsModal(){this.showDayDetailsModal=!1}openNewReservationForSelectedDay(){this.showDayDetailsModal=!1,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0}editReservation(t){if(t.meta.eventType!=="reservation")return;this.editingReservationId=t.meta.reservation.id;let e=t.meta.customerName.split(" "),n=e[0]||"",i=e.slice(1).join(" ")||"";t.meta.customerSurname&&(i=t.meta.customerSurname);let d,p=t.meta.status?.toLowerCase();p==="pending"?d="pending":p==="cancelled"||p==="cancellata"?d="cancelled":d="confirmed",this.newReservation={customer_name:n,customer_surname:i,customer_email:t.meta.customerEmail||"",customer_phone:t.meta.customerPhone||"",reservation_date:this.formatDateForInput(t.start),reservation_time:this.formatTime(t.start),party_size:t.meta.partySize,special_requests:t.meta.reservation.special_requests||"",status:d},this.showDayDetailsModal=!1,this.showNewReservationModal=!0}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}getReservationStatusClass(t){switch(t?.toLowerCase()){case"confirmed":case"confermata":return"status-confirmed";case"pending":case"in attesa":return"status-pending";case"cancelled":case"cancellata":return"status-cancelled";default:return"status-unknown"}}formatTimeForDisplay(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}formatDateForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${i}`}formatDateForDB(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${i}`}loadTables(){return k(this,null,function*(){try{console.log("\u{1F504} Loading restaurant tables..."),yield this.tableService.loadData();let t=this.tableService.getTables();console.log("\u2705 Tables loaded from service:",t?.length),this.tables=t||[],this.calculateMaxCapacity()}catch(t){console.error("Error loading tables:",t)}})}calculateMaxCapacity(){if(this.tables.length===0){console.log("\u26A0\uFE0F No tables found, using default capacity"),this.maxCapacity=50,this.tableStats=null;return}this.maxCapacity=this.tableService.calculateMaxCapacity(this.tables),this.tableStats=this.tableService.getTableStats(this.tables),console.log("\u{1F4CA} Capacity calculated:",{maxCapacity:this.maxCapacity,tableCount:this.tables.length,stats:this.tableStats})}getCapacityDistribution(){if(!this.tables.length)return[];let t=this.tableService.getCapacityByTableType(this.tables);return Object.entries(t).map(([e,n])=>({capacity:parseInt(e),count:n})).sort((e,n)=>e.capacity-n.capacity)}getAvailableTablesForDate(t){let e=this.formatDateForInput(t),i=this.events.filter(d=>this.formatDateForInput(d.start)===e&&d.meta.eventType==="reservation").map(d=>d.meta.reservation).filter(d=>d.table_id).map(d=>d.table_id);return this.tables.filter(d=>!i.includes(d.id))}getDateCapacityStats(t){let e=this.formatDateForInput(t),i=this.events.filter(M=>this.formatDateForInput(M.start)===e&&M.meta.eventType==="reservation").reduce((M,C)=>M+(C.meta.partySize||0),0),d=this.getAvailableTablesForDate(t),p=d.length,g=d.reduce((M,C)=>M+(C.capacity||0),0),y=this.maxCapacity>0?i/this.maxCapacity*100:0;return{totalCapacity:this.maxCapacity,usedCapacity:i,availableCapacity:g,availableTables:p,percentage:Math.round(y)}}calculateMaxCapacitySimple(){return this.tables.length===0?50:this.tables.reduce((t,e)=>t+(e.capacity||0),0)}getAvailableTablesToday(){if(this.tables.length===0)return 0;let t=new Date().toISOString().split("T")[0],e=this.events.filter(n=>new Date(n.start).toISOString().split("T")[0]===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getAvailableTablesForSelectedDate(){if(this.tables.length===0||!this.selectedDate)return 0;let t=this.formatDateForInput(this.selectedDate),e=this.events.filter(n=>this.formatDateForInput(n.start)===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getSimpleCapacityDistribution(){let t=[],e={};this.tables.forEach(n=>{let i=n.capacity||0;e[i]=(e[i]||0)+1});for(let[n,i]of Object.entries(e))t.push({size:parseInt(n),count:i});return t.sort((n,i)=>n.size-i.size)}isSameDate(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}getEventsForDate(t){let e=this.formatDateForInput(t);return this.allEvents.filter(n=>this.formatDateForInput(n.start)===e)}get allEvents(){return[...this.events,...this.personalEvents]}getTodaysReservationCount(){let t=new Date;return this.events.filter(e=>this.isSameDate(e.start,t)).length}calculateTodayCapacity(){let t=new Date,e=this.events.filter(n=>this.isSameDate(n.start,t)&&n.meta.eventType==="reservation");this.todayCapacity=e.reduce((n,i)=>n+(i.meta.partySize||0),0),console.log("\u{1F4C5} Today capacity (local):",{today:t.toLocaleDateString("it-IT"),events:e.length,capacity:this.todayCapacity})}calculateTotalGuests(){return this.selectedDayEvents.reduce((t,e)=>e.meta.eventType==="reservation"?t+e.meta.partySize:t,0)}loadPersonalAppointments(){return k(this,null,function*(){try{yield this.personalAppointmentService.loadData(),this.personalEvents=this.mapPersonalToEvents(this.personalAppointmentService.data)}catch(t){console.error("Errore caricamento appuntamenti personali:",t)}})}mapPersonalToEvents(t){return t.map(e=>({id:e.id,start:new Date(e.start_datetime),end:new Date(e.end_datetime),title:e.title,color:{primary:e.color||"#3788d8",secondary:"var(--background)"},meta:{eventType:"personal",description:e.description,isAllDay:e.is_all_day,appointment:e}}))}openNewPersonalAppointmentModal(t){let e=t||this.viewDate,n=new Date(e);n.setHours(9,0,0,0);let i=new Date(e);i.setHours(10,0,0,0),this.personalAppointmentData={title:"",description:"",start_datetime:this.formatDateTimeForInput(n),end_datetime:this.formatDateTimeForInput(i),color:"#3788d8",is_all_day:!1},this.editingPersonalAppointment=null,this.showPersonalAppointmentModal=!0}editPersonalAppointment(t){if(t.meta.eventType!=="personal")return;let e=t.meta.appointment;this.personalAppointmentData={title:e.title,description:e.description||"",start_datetime:this.formatDateTimeForInput(new Date(e.start_datetime)),end_datetime:this.formatDateTimeForInput(new Date(e.end_datetime)),color:e.color||"#3788d8",is_all_day:e.is_all_day||!1},this.editingPersonalAppointment=e,this.showPersonalAppointmentModal=!0}savePersonalAppointment(){return k(this,null,function*(){if(!this.personalAppointmentData.title)return;let t=yield this.authService.getCurrentStaffRestaurantId();if(!t)return;let e={restaurant_id:t,title:this.personalAppointmentData.title,description:this.personalAppointmentData.description||null,start_datetime:new Date(this.personalAppointmentData.start_datetime).toISOString(),end_datetime:new Date(this.personalAppointmentData.end_datetime).toISOString(),color:this.personalAppointmentData.color,is_all_day:this.personalAppointmentData.is_all_day};try{this.editingPersonalAppointment?yield this.personalAppointmentService.update(this.editingPersonalAppointment.id,e):yield this.personalAppointmentService.create(e),yield this.loadPersonalAppointments(),this.closePersonalAppointmentModal()}catch(n){console.error("Errore salvataggio appuntamento:",n),alert("Errore durante il salvataggio")}})}closePersonalAppointmentModal(){this.showPersonalAppointmentModal=!1,this.editingPersonalAppointment=null}formatDateTimeForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),d=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0");return`${e}-${n}-${i}T${d}:${p}`}editEvent(t){t.meta.eventType==="personal"?this.editPersonalAppointment(t):this.editReservation(t)}deleteEvent(t){t.meta.eventType==="personal"?t.id&&this.deletePersonalAppointment(t.id):this.deleteReservation(t.id)}onTouchStart(t){console.log("touch start",t.changedTouches[0].screenX),this.touchStartX=t.changedTouches[0].screenX}onTouchMove(t){console.log("touch move",t.changedTouches[0].screenX,t.changedTouches[0].screenY),t.preventDefault()}onTouchEnd(t){console.log("touch end",t.changedTouches[0].screenX),this.touchEndX=t.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){let t=this.touchStartX-this.touchEndX;console.log("Swipe diff:",t,"threshold:",this.SWIPE_THRESHOLD),Math.abs(t)>this.SWIPE_THRESHOLD?t>0?(console.log("\u{1F449} Swipe sinistra -> next()"),this.next()):(console.log("\u{1F448} Swipe destra -> previous()"),this.previous()):console.log("\u23F8\uFE0F Swipe troppo corto, ignorato"),this.touchStartX=0,this.touchEndX=0}animateSwipe(t){let e=document.querySelector(".calendar-container");e&&(e.classList.add(t),setTimeout(()=>{e.classList.remove(t)},200))}onDocumentTouchStart(t){let e=document.querySelector(".calendar-container");e&&e.contains(t.target)&&this.onTouchStart(t)}onDocumentTouchMove(t){let e=document.querySelector(".calendar-container");e&&e.contains(t.target)&&this.onTouchMove(t)}onDocumentTouchEnd(t){let e=document.querySelector(".calendar-container");e&&e.contains(t.target)&&this.onTouchEnd(t)}computeWeekDays(){let t=[],e=new Date(this.viewDate),n=e.getDay(),i=e.getDate()-n+(n===0?-6:1),d=new Date(e.setDate(i));for(let p=0;p<7;p++){let g=new Date(d);g.setDate(d.getDate()+p),t.push(g)}return t}updateWeekView(){this.weekDays=this.computeWeekDays(),this.weekViewHours=this.getWeekViewHours()}getTimeSlotsForDay(t){let e=t.getDay(),n=e===0?7:e,i=this.shifts.filter(g=>g.is_active&&g.days_of_week.includes(n));if(i.length===0)return[];let d=[],p=30;return i.forEach(g=>{let y=this.extractHourFromTime(g.start_time),M=this.extractMinutesFromTime(g.start_time),C=this.extractHourFromTime(g.end_time),f=this.extractMinutesFromTime(g.end_time),S=this.generateTimeSlotsWithStartEnd(y,M,C,f,p);d.push(...S)}),[...new Set(d)].sort()}getEventsForSlot(t,e){let[n,i]=e.split(":").map(Number),d=new Date(t);d.setHours(n,i,0,0);let p=new Date(d);return p.setMinutes(p.getMinutes()+30),this.events.filter(g=>g.start>=d&&g.start<p)}getAllWeekSlots(){let t=new Set;return this.weekDays.forEach(e=>{this.getTimeSlotsForDay(e).forEach(n=>t.add(n))}),Array.from(t).sort()}isDayClosed(t){let e=t.getDay(),n=e===0?7:e;return!this.shifts.some(d=>d.is_active&&d.days_of_week.includes(n))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Y({type:r,selectors:[["app-calendar-view"]],hostBindings:function(e,n){e&1&&h("touchstart",function(d){return n.onDocumentTouchStart(d)},!1,$)("touchmove",function(d){return n.onDocumentTouchMove(d)},!1,$)("touchend",function(d){return n.onDocumentTouchEnd(d)},!1,$)},decls:71,vars:41,consts:[["normalTimeSmall",""],["normalTime",""],["noEvents",""],["allDay",""],["personalForm","ngForm"],[1,"page-container"],["data-tutorial","calendar-cards",1,"grid-cards","p-sm","mb-lg"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"text-md","font-semibold","m-0"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"text-muted","card-footer","flex-col"],[1,"flex"],["class","mt-sm text-mini flex flex-col",4,"ngIf"],[1,"material-icons","text-md"],[1,"text-md","font-bold","justify-center","flex"],["class","ml-sm text-mini",4,"ngIf"],["class","card",4,"ngIf"],[1,"flex","justify-center","w-100","p-sm"],[1,"text-md"],[1,"flex","justify-between","items-center","gap-md","p-sm","calendar-controls"],["data-tutorial","calendar-mode",1,"flex","gap-sm"],[1,"promethea-button","outline",3,"click"],["data-tutorial","calendar-view",1,"flex","items-center","gap-md","justify-center"],[1,"icon-button",3,"click"],[1,"material-icons"],[1,"promethea-button","ghost",3,"click"],["data-tutorial","calendar-add",1,"flex","gap-sm"],[1,"promethea-button",3,"click"],["name","plus",3,"size"],[1,"p-sm","calendar-container",3,"touchstart","touchmove","touchend"],["data-tutorial","calendar-day","class","calendar-month-view",4,"ngIf"],["class","calendar-week-view",4,"ngIf"],["class","calendar-day-view border rounded overflow-hidden",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"mt-sm","text-mini","flex","flex-col"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"font-semibold"],[1,"ml-sm","text-mini"],[1,"material-icons","text-md","text-primary"],[1,"text-md","font-bold","text-info","justify-center","text-primary","flex"],["data-tutorial","calendar-day",1,"calendar-month-view"],[1,"month-weekdays"],["class","month-weekday p-sm text-center font-bold text-mini uppercase",4,"ngFor","ngForOf"],[1,"month-grid"],["class","month-day flex flex-col border bg-body p-0",3,"today","current-month","other-month","closed-day","click",4,"ngFor","ngForOf"],[1,"month-weekday","p-sm","text-center","font-bold","text-mini","uppercase"],[1,"month-day","flex","flex-col","border","bg-body","p-0",3,"click"],[1,"day-number-wrapper","flex","justify-between","items-center","p-sm"],[1,"day-number","font-bold","text-md"],["name","lock","class","text-mini","title","Chiuso",4,"ngIf"],["class","day-events-indicator",3,"background",4,"ngIf"],["class","month-events-compact",4,"ngIf"],["name","lock","title","Chiuso",1,"text-mini"],[1,"day-events-indicator"],[1,"month-events-compact"],["class","month-event-compact bg-glass flex items-center gap-sm",3,"border-color","click",4,"ngFor","ngForOf"],["class","more-events-compact text-mini text-primary text-center p-mini",3,"click",4,"ngIf"],[1,"month-event-compact","bg-glass","flex","items-center","gap-sm",3,"click"],[1,"event-time-small","font-bold","text-mini","bg-body","rounded","px-sm","py-mini"],[4,"ngIf","ngIfElse"],[3,"ngSwitch"],["class","event-customer-small text-mini flex items-center gap-sm",4,"ngSwitchCase"],[1,"material-icons",2,"font-size","12px"],[1,"event-customer-small","text-mini","flex","items-center","gap-sm"],[1,"more-events-compact","text-mini","text-primary","text-center","p-mini",3,"click"],[1,"calendar-week-view"],[1,"week-header","flex"],[1,"week-time-column"],["class","week-day-header",3,"today","closed-day",4,"ngFor","ngForOf"],[1,"week-body"],["class","week-hour",4,"ngFor","ngForOf"],["class","week-day-column",3,"closed-day",4,"ngFor","ngForOf"],[1,"week-day-header"],[1,"week-day-name"],[1,"week-day-number"],[1,"week-hour"],[1,"week-day-column"],["class","week-hour-slot",3,"click",4,"ngFor","ngForOf"],[1,"week-hour-slot",3,"click"],["class","week-event",3,"background","click",4,"ngFor","ngForOf"],[1,"week-event",3,"click"],[1,"event-time"],["class","event-customer",4,"ngSwitchCase"],["class","event-details",4,"ngIf"],[1,"event-customer"],[1,"material-icons",2,"margin-right","var(--gap-sm)"],[1,"event-details"],[1,"calendar-day-view","border","rounded","overflow-hidden"],[1,"day-header","p-md","text-center","bg-smoke"],[1,"text-md","font-bold"],[1,"day-body","overflow-auto"],["class","day-hour flex",4,"ngFor","ngForOf"],[1,"day-hour","flex"],[1,"hour-label","w-20","bg-smoke","flex","items-center","justify-center","font-semibold","text-mini"],[1,"hour-slot","flex-1","p-xs",3,"click"],["class","day-event rounded shadow-card",3,"background","click",4,"ngFor","ngForOf"],[1,"day-event","rounded","shadow-card",3,"click"],[1,"event-time","font-bold","text-mini"],["class","event-customer font-bold text-mini flex items-center gap-sm",4,"ngSwitchCase"],["class","event-details text-mini",4,"ngIf"],[1,"event-customer","font-bold","text-mini","flex","items-center","gap-sm"],[1,"event-details","text-mini"],[1,"modal-overlay"],[1,"modal-container","modal-lg"],[1,"modal-header"],[1,"section-title"],[3,"ngSubmit"],[1,"form-card"],[1,"form-row"],[1,"form-group"],["for","customerName",1,"standard-label"],["name","user",1,"nav-icon",3,"size"],["type","text","id","customerName","name","customerName","required","","placeholder","Inserisci nome",3,"ngModelChange","ngModel"],["for","customerSurname",1,"standard-label"],["type","text","id","customerSurname","name","customerSurname","required","","placeholder","Inserisci cognome",3,"ngModelChange","ngModel"],["for","customerEmail",1,"standard-label"],["name","mail",1,"nav-icon",3,"size"],["type","email","id","customerEmail","name","customerEmail","placeholder","Inserisci email (facoltativo)",3,"ngModelChange","ngModel"],["for","customerPhone",1,"standard-label"],["type","tel","id","customerPhone","name","customerPhone","required","","placeholder","Inserisci telefono",3,"ngModelChange","ngModel"],["for","reservationDate",1,"standard-label"],["type","date","id","reservationDate","name","reservationDate","required","",3,"ngModelChange","change","ngModel","min"],["for","reservationTime",1,"standard-label"],["id","reservationTime","name","reservationTime","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","partySize",1,"standard-label"],["type","number","id","partySize","name","partySize","min","1","required","",3,"ngModelChange","ngModel","max"],["class","text-muted",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["for","specialRequests",1,"standard-label"],["id","specialRequests","name","specialRequests","rows","3","placeholder","Note o richieste particolari...",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","ghost",3,"click"],["type","submit",1,"promethea-button"],[3,"value"],[1,"text-muted"],[1,"text-danger"],["for","reservationStatus",1,"standard-label"],["name","info"],["id","reservationStatus","name","reservationStatus",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-md"],[1,"header-icon"],[1,"material-icons","text-primary","text-lg"],[1,"section-title","m-0"],[1,"text-muted","m-0"],[1,"modal-content","p-md"],[1,"info-message","mb-lg"],["class","flex flex-col gap-md mb-sm",4,"ngIf","ngIfElse"],["type","button",1,"promethea-button",3,"click"],[1,"flex","flex-col","gap-md","mb-sm"],["class","card hover-lift",4,"ngFor","ngForOf"],[1,"card","hover-lift"],[1,"flex","justify-between","items-start","flex-wrap"],[1,"flex","gap-sm"],[1,"flex","items-center","gap-sm","mb-sm","flex-wrap"],[1,"font-bold","text-md","m-0"],[4,"ngSwitchCase"],[1,"chip","ml-sm"],["class","chip",3,"class",4,"ngIf"],["class","flex items-center gap-md flex-wrap",4,"ngIf"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small",3,"click"],["name","trash-2",3,"size"],[1,"card-body"],[1,"flex","flex-col","items-center","text-center","p-sm","rounded","bg-smoke"],[1,"material-icons","text-primary","mb-xs"],[1,"font-bold","text-md"],[1,"text-mini","font-semibold"],["class","mt-md p-sm rounded bg-smoke",4,"ngIf"],[1,"material-icons",2,"vertical-align","middle"],[1,"chip"],[1,"flex","items-center","gap-md","flex-wrap"],[1,"flex","items-center","gap-sm"],[1,"material-icons","text-mini"],[1,"text-mini"],["class","flex items-center gap-sm",4,"ngIf"],[1,"mt-md","p-sm","rounded","bg-smoke"],[1,"flex","items-center","gap-sm","mb-xs"],[1,"material-icons","text-primary"],[1,"text-sm","m-0"],[1,"empty-state","text-center","py-xl"],[1,"material-icons","text-lg","text-muted","mb-md"],[1,"text-md","font-bold","mb-sm"],[1,"text-muted","mb-lg"],[1,"modal-container","modal-md"],[1,"standard-label"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","start","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","end","required","",3,"ngModelChange","ngModel"],["name","description","rows","3",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"],[1,"color-preview"],[1,"checkbox-label"],["type","checkbox","name","isAllDay",3,"ngModelChange","ngModel"],["type","submit",1,"promethea-button",3,"disabled"]],template:function(e,n){e&1&&(o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),l(5,"event_available"),a(),o(6,"h3",10),l(7,"Prenotazioni Oggi"),a()(),o(8,"div",11),l(9),a(),o(10,"div",12),l(11,"Per oggi"),a()(),o(12,"div",7)(13,"div",8)(14,"span",9),l(15,"group"),a(),o(16,"h3",10),l(17,"Capienza Massima"),a()(),o(18,"div",11),l(19),a(),o(20,"div",13)(21,"div",14),l(22),a(),u(23,Ie,2,1,"div",15),a()(),o(24,"div",7)(25,"div",8)(26,"span",16),l(27," table_restaurant "),a(),o(28,"h3",10),l(29,"Occupazione Oggi"),a()(),o(30,"div",17),l(31),a(),o(32,"div",12),l(33),u(34,Fe,2,1,"span",18),a()(),u(35,Oe,11,7,"div",19),a(),o(36,"div",20)(37,"strong",21),l(38),O(39,"date"),a()(),o(40,"div",22)(41,"div",23)(42,"button",24),h("click",function(){return n.setView(n.CalendarView.Month)}),l(43,"Mese"),a(),o(44,"button",24),h("click",function(){return n.setView(n.CalendarView.Week)}),l(45,"Settimana"),a(),o(46,"button",24),h("click",function(){return n.setView(n.CalendarView.Day)}),l(47,"Giorno"),a()(),o(48,"div",25)(49,"button",26),h("click",function(){return n.previous()}),o(50,"span",27),l(51,"chevron_left"),a()(),o(52,"button",28),h("click",function(){return n.today()}),l(53,"Oggi"),a(),o(54,"button",26),h("click",function(){return n.next()}),o(55,"span",27),l(56,"chevron_right"),a()()(),o(57,"div",29)(58,"button",30),h("click",function(){return n.openNewReservationModal()}),P(59,"lucide-angular",31),l(60,"Prenotazione "),a(),o(61,"button",28),h("click",function(){return n.openNewPersonalAppointmentModal()}),P(62,"lucide-angular",31),l(63,"Personale "),a()()(),o(64,"div",32),h("touchstart",function(d){return n.onTouchStart(d)})("touchmove",function(d){return n.onTouchMove(d)})("touchend",function(d){return n.onTouchEnd(d)}),u(65,Ye,5,3,"div",33)(66,it,8,3,"div",34)(67,mt,7,7,"div",35),a(),u(68,gt,77,17,"div",36)(69,kt,39,9,"div",36)(70,Pt,45,10,"div",36),a()),e&2&&(s(9),x(" ",n.getTodaysReservationCount()," "),s(10),x(" ",n.calculateMaxCapacitySimple()," "),s(3),x("",n.tables.length," tavoli"),s(),m("ngIf",n.tables.length>0),s(3),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),s(4),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),s(),H(" ",n.todayCapacity," / ",n.calculateMaxCapacitySimple()," "),s(2),x(" ",(n.todayCapacity/n.calculateMaxCapacitySimple()*100||0).toFixed(0),"% "),s(),m("ngIf",n.getAvailableTablesToday()>0),s(),m("ngIf",n.selectedDate),s(3),w(V(39,38,n.viewDate,"MMMM yyyy")),s(4),T("active",n.view===n.CalendarView.Month),s(2),T("active",n.view===n.CalendarView.Week),s(2),T("active",n.view===n.CalendarView.Day),s(13),m("size",20),s(3),m("size",20),s(2),T("loading",n.loading),s(),m("ngIf",n.view===n.CalendarView.Month),s(),m("ngIf",n.view===n.CalendarView.Week),s(),m("ngIf",n.view===n.CalendarView.Day),s(),m("ngIf",n.showNewReservationModal),s(),m("ngIf",n.showDayDetailsModal),s(),m("ngIf",n.showPersonalAppointmentModal))},dependencies:[te,J,K,Q,Z,ee,he,de,pe,ue,ae,ce,ie,me,re,oe,ge,_e,ve,le,se,ye,fe],styles:['.calendar-container[_ngcontent-%COMP%]{touch-action:pan-y;transition:opacity .2s ease,transform .2s ease}.calendar-container.swipe-left[_ngcontent-%COMP%]{transform:translate(-10px);opacity:.7}.calendar-container.swipe-right[_ngcontent-%COMP%]{transform:translate(10px);opacity:.7}.calendar-month-view[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.month-weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-2);border-bottom:2px solid var(--primary)}.month-weekday[_ngcontent-%COMP%]{border-right:1px solid var(--smoke-1)}.month-weekday[_ngcontent-%COMP%]:last-child{border-right:none}.month-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);grid-auto-rows:minmax(4rem,1fr);min-height:30rem}.month-day[_ngcontent-%COMP%]{min-height:120px;transition:all .2s ease;cursor:pointer;position:relative;overflow:hidden}.month-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 20%,transparent);z-index:10}.month-day.today[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-color:var(--primary)}.month-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--smoke-1) 10%,transparent);opacity:.6}.month-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--primary);font-weight:900}.day-events-indicator[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:2px 6px;border-radius:10px;color:#fff;min-width:16px;text-align:center;line-height:1}.month-events-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;overflow:hidden;flex:1}.month-event-compact[_ngcontent-%COMP%]{border-left:3px solid;padding:3px 5px;border-radius:4px;cursor:pointer;transition:all .2s ease;font-size:calc(var(--fs-mini) / 1.2);line-height:1.2;margin:0 var(--gap-sm)}.month-event-compact[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px var(--shadow-2)}.event-time-small[_ngcontent-%COMP%]{font-size:9px;min-width:28px;padding:1px 3px;border-radius:3px;text-align:center;flex-shrink:0}.event-customer-small[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.more-events-compact[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-radius:3px;cursor:pointer;transition:all .2s ease;margin-top:2px}.more-events-compact[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 15%,transparent)}.calendar-week-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.week-header[_ngcontent-%COMP%]{display:flex;background:var(--smoke-2);border-bottom:2px solid var(--primary);flex-shrink:0}.week-time-column[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);border-right:2px solid var(--primary);flex-shrink:0;display:flex;flex-direction:column}.week-day-header[_ngcontent-%COMP%]{flex:1;padding:var(--gap-sm);text-align:center;font-weight:700;color:var(--text-color);border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:60px}.week-day-header.today[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.week-day-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);text-transform:uppercase;margin-bottom:var(--gap-sm)}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:800}.week-body[_ngcontent-%COMP%]{flex:1;display:flex;overflow-y:auto}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%]{height:60px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:var(--fs-sm);font-weight:600;color:var(--text-color);border-bottom:1px solid var(--smoke-1);position:relative}.week-hour[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;background:var(--smoke-1);z-index:1}.week-day-column[_ngcontent-%COMP%]{flex:1;border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;overflow:hidden}.week-day-column[_ngcontent-%COMP%]:last-child{border-right:none}.week-hour-slot[_ngcontent-%COMP%]{height:60px;flex-shrink:0;border-bottom:1px solid var(--smoke-1);position:relative;padding:2px;cursor:pointer;transition:background .2s ease;background:var(--background)}.week-hour-slot[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.week-hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 15%,transparent)}.week-event[_ngcontent-%COMP%]{position:absolute;left:2px;right:2px;padding:6px 8px;border-radius:6px;color:#fff;font-size:11px;cursor:pointer;z-index:2;transition:all .2s ease;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-shadow:0 2px 4px #0000001a}.week-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px var(--shadow-2);z-index:100}.calendar-day-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.day-header[_ngcontent-%COMP%]{padding:var(--gap-md);text-align:center;background:var(--smoke-2);border-bottom:2px solid var(--primary);border-radius:12px 12px 0 0;flex-shrink:0}.day-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.day-hour[_ngcontent-%COMP%]{display:flex;min-height:60px;border-bottom:1px solid var(--smoke-1);background:var(--background)}.day-hour[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.hour-label[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0;font-size:var(--fs-sm);border-right:2px solid var(--primary)}.hour-slot[_ngcontent-%COMP%]{flex:1;position:relative;padding:4px;cursor:pointer;transition:background .2s ease}.hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 10%,transparent)}.day-event[_ngcontent-%COMP%]{background:var(--gradiente);color:#fff;padding:8px 12px;border-radius:8px;margin:2px 0;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.day-event[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px var(--shadow-2)}.closed-day[_ngcontent-%COMP%]{background-color:var(--shadow-2);color:#c62828}.closed-day[_ngcontent-%COMP%]   .week-day-name[_ngcontent-%COMP%], .closed-day[_ngcontent-%COMP%]   .week-day-number[_ngcontent-%COMP%], .closed-day[_ngcontent-%COMP%]   .month-day[_ngcontent-%COMP%]{color:#c62828}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-direction:column}.month-grid[_ngcontent-%COMP%]{min-height:350px}.month-day[_ngcontent-%COMP%]{min-height:70px}.month-weekday[_ngcontent-%COMP%]{font-size:10px;padding:8px 4px}.month-event-compact[_ngcontent-%COMP%]{font-size:8px}.event-time-small[_ngcontent-%COMP%]{font-size:7px;min-width:24px}.day-events-indicator[_ngcontent-%COMP%]{font-size:8px;padding:1px 4px}.week-time-column[_ngcontent-%COMP%], .hour-label[_ngcontent-%COMP%]{width:60px}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%], .week-hour-slot[_ngcontent-%COMP%], .day-hour[_ngcontent-%COMP%]{height:40px}.week-event[_ngcontent-%COMP%]{font-size:9px;padding:4px}.week-day-header[_ngcontent-%COMP%]{min-height:50px}.week-day-name[_ngcontent-%COMP%]{font-size:10px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}}@media (max-width: 480px){.month-day[_ngcontent-%COMP%]{min-height:60px}.month-event-compact[_ngcontent-%COMP%]{flex-direction:column;gap:1px}.event-customer-small[_ngcontent-%COMP%], .more-events-compact[_ngcontent-%COMP%]{font-size:7px}}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-2);border-radius:4px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}']})};export{De as CalendarView,Ee as ReservationStatus,be as RestaurantCalendar};
