import{a as Re}from"./chunk-D2R4X6CG.js";import{a as Ee}from"./chunk-UDDH3K6K.js";import{a as Me}from"./chunk-M7LRT77K.js";import{a as B}from"./chunk-2S5KLAST.js";import{a as Se}from"./chunk-AMYEPXIV.js";import"./chunk-SY2ZWW6D.js";import{Ab as De,zb as be}from"./chunk-N3VPFYDE.js";import{A as we,a as le,b as de,d as ce,e as me,g as pe,i as ue,j as ve,k as _e,s as ge,t as he,u as fe,v as xe,w as ye,x as Ce}from"./chunk-45CSFDAZ.js";import{d as se}from"./chunk-TB7INTC7.js";import"./chunk-Q3EITIAW.js";import"./chunk-RC3HHTXM.js";import{k as te,l as ne,m as ie,n as ae,r as re,v as oe}from"./chunk-MPTEMNWF.js";import{Eb as U,Fb as J,Gb as K,Hb as z,Ib as d,Jb as S,Ka as $,Kb as x,La as l,Lb as H,Ob as D,Pb as E,Qb as M,Sb as Z,Va as G,Vb as V,Xb as O,Y as j,Zb as N,_a as g,ca as A,dc as ee,gb as m,hb as W,ib as T,kb as Q,la as u,ma as v,na as Y,qa as X,qb as o,rb as a,sb as P,tb as I,ub as F,vb as R,yb as f,zb as c}from"./chunk-5BU4UD4M.js";import{g as k}from"./chunk-RA2WU32H.js";var L=class r extends Se{getTableName(){return"personal_appointments"}loadByDateRange(t,e){return k(this,null,function*(){let n=yield this.getCurrentRestaurantId();if(!n)return[];let{data:i,error:s}=yield this.getSupabaseClientPublic().from(this.getTableName()).select("*").eq("restaurant_id",n).gte("start_datetime",t.toISOString()).lte("end_datetime",e.toISOString()).order("start_datetime",{ascending:!0});return s?(this.handleError("loadByDateRange",s),[]):i||[]})}static \u0275fac=(()=>{let t;return function(n){return(t||(t=Y(r)))(n||r)}})();static \u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"})};var Oe=["calendarContainer"],Ae=()=>["LUN","MAR","MER","GIO","VEN","SAB","DOM"];function ze(r,t){if(r&1&&(o(0,"div",40)(1,"span"),d(2),a(),o(3,"span",41),d(4),a()()),r&2){let e=t.$implicit;l(2),x("Tavoli da ",e.size,":"),l(2),S(e.count)}}function We(r,t){if(r&1&&(o(0,"div",38),g(1,ze,5,2,"div",39),a()),r&2){let e=c();l(),m("ngForOf",e.getSimpleCapacityDistribution())}}function Ne(r,t){if(r&1&&(o(0,"span",42),d(1),a()),r&2){let e=c();l(),x(" (",e.getAvailableTablesToday()," tavoli liberi) ")}}function He(r,t){if(r&1&&(o(0,"div",8)(1,"div",9)(2,"span",43),d(3,"event"),a(),o(4,"h3",11),d(5),V(6,"date"),a()(),o(7,"div",44),d(8),a(),o(9,"div",13),d(10),a()()),r&2){let e=c();l(5),x("Disponibilit\xE0 ",O(6,4,e.selectedDate,"dd/MM"),""),l(3),x(" ",e.getAvailableTablesForSelectedDate()," tavoli "),l(2),H(" Posti: ",e.todayCapacity," / ",e.maxCapacityValue," ")}}function $e(r,t){if(r&1&&(o(0,"div",50),d(1),a()),r&2){let e=t.$implicit;l(),x(" ",e," ")}}function Be(r,t){r&1&&P(0,"lucide-angular",57)}function Le(r,t){if(r&1&&(o(0,"span",58),d(1),a()),r&2){let e=c().$implicit,n=c(2);W("background",n.getEventColor(e.events[0])),l(),S(e.events.length)}}function qe(r,t){r&1&&(I(0),o(1,"span",67),d(2,"event"),a(),F())}function je(r,t){if(r&1&&(d(0),V(1,"date")),r&2){let e=c().$implicit;S(O(1,1,e.start,"HH:mm"))}}function Ye(r,t){if(r&1&&(o(0,"span",68),d(1),a()),r&2){let e=c().$implicit;l(),x(" ",e.title," ")}}function Xe(r,t){if(r&1&&(o(0,"span",68)(1,"span",28),d(2,"restaurant"),a(),d(3),a()),r&2){let e=c().$implicit;l(3),x(" ",e.meta.customerName," ")}}function Ge(r,t){if(r&1){let e=R();o(0,"div",62),f("click",function(i){let s=u(e).$implicit,p=c(4);return i.stopPropagation(),v(p.onEventClick(s))}),o(1,"span",63),g(2,qe,3,0,"ng-container",64)(3,je,2,4,"ng-template",null,1,N),a(),I(5,65),g(6,Ye,2,1,"span",66)(7,Xe,4,1,"span",66),F(),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(4);W("border-color",i.getEventColor(e)),l(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),l(3),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation")}}function Qe(r,t){if(r&1){let e=R();o(0,"div",69),f("click",function(i){u(e);let s=c(2).$implicit,p=c(2);return i.stopPropagation(),v(p.onDayClick(s.date))}),d(1),a()}if(r&2){let e=c(2).$implicit,n=c(2);l(),x(" +",n.getEventsForDate(e.date).length-2," ")}}function Ue(r,t){if(r&1&&(o(0,"div",59),g(1,Ge,8,7,"div",60)(2,Qe,2,1,"div",61),a()),r&2){let e=c().$implicit,n=c(2);l(),m("ngForOf",n.getLimitedEventsForDate(e.date,2)),l(),m("ngIf",n.hasMoreEvents(e.date,2))}}function Je(r,t){if(r&1){let e=R();o(0,"div",51),f("click",function(){let i=u(e).$implicit,s=c(2);return v(s.openDayDetails(i.date))}),o(1,"div",52)(2,"span",53),d(3),a(),g(4,Be,1,0,"lucide-angular",54)(5,Le,2,3,"span",55),a(),g(6,Ue,3,2,"div",56),a()}if(r&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e.date))("current-month",e.isCurrentMonth)("other-month",!e.isCurrentMonth)("closed-day",n.isDayClosed(e.date)),l(2),T("today-number",n.isToday(e.date)),l(),S(e.date.getDate()),l(),m("ngIf",n.isDayClosed(e.date)),l(),m("ngIf",e.events.length>0),l(),m("ngIf",e.events.length>0)}}function Ke(r,t){if(r&1&&(o(0,"div",45)(1,"div",46),g(2,$e,2,1,"div",47),a(),o(3,"div",48),g(4,Je,7,14,"div",49),a()()),r&2){let e=c();l(2),m("ngForOf",Z(2,Ae)),l(2),m("ngForOf",e.monthDays)}}function Ze(r,t){if(r&1&&(o(0,"div",77)(1,"div",78),d(2),V(3,"date"),a(),o(4,"div",79),d(5),a()()),r&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e))("closed-day",n.isDayClosed(e)),l(2),S(O(3,6,e,"EEE")),l(3),S(e.getDate())}}function et(r,t){if(r&1&&(o(0,"div",80),d(1),a()),r&2){let e=t.$implicit;l(),x(" ",e," ")}}function tt(r,t){r&1&&(I(0),o(1,"span",28),d(2,"event"),a(),F())}function nt(r,t){if(r&1&&(d(0),V(1,"date")),r&2){let e=c().$implicit;x(" ",O(1,1,e.start,"HH:mm")," ")}}function it(r,t){if(r&1&&(o(0,"div",89)(1,"span",90),d(2,"event_note"),a(),d(3),a()),r&2){let e=c().$implicit;l(3),x(" ",e.title," ")}}function at(r,t){if(r&1&&(o(0,"div",89)(1,"span",90),d(2,"restaurant"),a(),d(3),a()),r&2){let e=c().$implicit;l(3),x(" ",e.meta.customerName," ")}}function rt(r,t){if(r&1&&(o(0,"div",91),d(1),a()),r&2){let e=c().$implicit;l(),x(" ",e.meta.partySize,"p ")}}function ot(r,t){if(r&1){let e=R();o(0,"div",85),f("click",function(i){let s=u(e).$implicit,p=c(4);return i.stopPropagation(),v(p.onEventClick(s))}),o(1,"div",86),g(2,tt,3,0,"ng-container",64)(3,nt,2,4,"ng-template",null,2,N),a(),I(5,65),g(6,it,4,1,"div",87)(7,at,4,1,"div",87),F(),g(8,rt,2,1,"div",88),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(4);W("background",i.getEventColor(e)),l(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),l(3),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),m("ngIf",e.meta.eventType==="reservation")}}function st(r,t){if(r&1){let e=R();o(0,"div",83),f("click",function(){u(e);let i=c().$implicit,s=c(2);return v(s.openDayDetails(i))}),g(1,ot,9,8,"div",84),a()}if(r&2){let e=t.$implicit,n=c().$implicit,i=c(2);l(),m("ngForOf",i.getEventsForSlot(n,e))}}function lt(r,t){if(r&1&&(o(0,"div",81),g(1,st,2,1,"div",82),a()),r&2){let e=t.$implicit,n=c(2);T("closed-day",n.isDayClosed(e)),l(),m("ngForOf",n.getTimeSlotsForDay(e))}}function dt(r,t){if(r&1&&(o(0,"div",70)(1,"div",71),P(2,"div",72),g(3,Ze,6,9,"div",73),a(),o(4,"div",74)(5,"div",72),g(6,et,2,1,"div",75),a(),g(7,lt,2,3,"div",76),a()()),r&2){let e=c();l(3),m("ngForOf",e.weekDays),l(3),m("ngForOf",e.getTimeSlotsForDay(e.weekDays[0])),l(),m("ngForOf",e.weekDays)}}function ct(r,t){r&1&&(I(0),o(1,"span",28),d(2,"event"),a(),F())}function mt(r,t){if(r&1&&(d(0),V(1,"date")),r&2){let e=c().$implicit;S(O(1,1,e.start,"HH:mm"))}}function pt(r,t){if(r&1&&(o(0,"div",105),d(1),a()),r&2){let e=c().$implicit;l(),x("\u{1F4CC} ",e.title,"")}}function ut(r,t){if(r&1&&(o(0,"div",105),d(1),a()),r&2){let e=c().$implicit;l(),S(e.meta.customerName)}}function vt(r,t){if(r&1&&(o(0,"div",106),d(1),a()),r&2){let e=c().$implicit;l(),H(" ",e.meta.partySize," persone \u2022 ",e.meta.tableInfo," ")}}function _t(r,t){if(r&1){let e=R();o(0,"div",101),f("click",function(i){let s=u(e).$implicit,p=c(3);return i.stopPropagation(),v(p.onEventClick(s))}),o(1,"div",102),g(2,ct,3,0,"ng-container",64)(3,mt,2,4,"ng-template",null,2,N),a(),I(5,65),g(6,pt,2,1,"div",103)(7,ut,2,1,"div",103),F(),g(8,vt,2,2,"div",104),a()}if(r&2){let e=t.$implicit,n=z(4),i=c(3);W("background",i.getEventColor(e)),l(2),m("ngIf",e.meta.eventType==="personal"&&e.meta.isAllDay)("ngIfElse",n),l(3),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),m("ngIf",e.meta.eventType==="reservation")}}function gt(r,t){if(r&1){let e=R();o(0,"div",97)(1,"div",98),d(2),a(),o(3,"div",99),f("click",function(){u(e);let i=c(2);return v(i.openDayDetails(i.viewDate))}),g(4,_t,9,8,"div",100),a()()}if(r&2){let e=t.$implicit,n=c(2);l(2),S(e),l(2),m("ngForOf",n.getEventsForSlot(n.viewDate,e))}}function ht(r,t){if(r&1&&(o(0,"div",92)(1,"div",93)(2,"h2",94),d(3),V(4,"date"),a()(),o(5,"div",95),g(6,gt,5,2,"div",96),a()()),r&2){let e=c();l(),T("closed-day",e.isDayClosed(e.viewDate)),l(2),S(O(4,4,e.viewDate,"fullDate")),l(3),m("ngForOf",e.getTimeSlotsForDay(e.viewDate))}}function ft(r,t){if(r&1&&(o(0,"option",141),d(1),a()),r&2){let e=t.$implicit;m("value",e),l(),x(" ",e," ")}}function xt(r,t){if(r&1&&(o(0,"small",142),d(1),a()),r&2){let e=c(2);l(),x(" Capienza massima: ",e.maxCapacity," persone ")}}function yt(r,t){r&1&&(o(0,"small",143),d(1," Nessun tavolo configurato \u2013 impossibile prenotare "),a())}function Ct(r,t){if(r&1){let e=R();o(0,"div",114)(1,"label",144),P(2,"lucide-angular",145),d(3," Stato "),a(),o(4,"select",146),M("ngModelChange",function(i){u(e);let s=c(2);return E(s.newReservation.status,i)||(s.newReservation.status=i),v(i)}),o(5,"option",141),d(6,"Confermata"),a(),o(7,"option",141),d(8,"In attesa"),a(),o(9,"option",141),d(10,"Cancellata"),a()()()}if(r&2){let e=c(2);l(4),D("ngModel",e.newReservation.status),l(),m("value",e.ReservationStatus.Confirmed),l(2),m("value",e.ReservationStatus.Pending),l(2),m("value",e.ReservationStatus.Cancelled)}}function wt(r,t){if(r&1){let e=R();o(0,"div",107)(1,"div",108)(2,"div",109)(3,"h3",110)(4,"span",10),d(5,"event_available"),a(),d(6," Nuova Prenotazione "),a(),o(7,"button",27),f("click",function(){u(e);let i=c();return v(i.closeNewReservationModal())}),o(8,"span",28),d(9,"close"),a()()(),o(10,"div")(11,"form",111),f("ngSubmit",function(){u(e);let i=c();return v(i.createManualReservation())}),o(12,"div",112)(13,"div",113)(14,"div",114)(15,"label",115),P(16,"lucide-angular",116),d(17," Nome * "),a(),o(18,"input",117),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.customer_name,i)||(s.newReservation.customer_name=i),v(i)}),a()(),o(19,"div",114)(20,"label",118)(21,"span",28),d(22,"person_outline"),a(),d(23," Cognome * "),a(),o(24,"input",119),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.customer_surname,i)||(s.newReservation.customer_surname=i),v(i)}),a()()(),o(25,"div",113)(26,"div",114)(27,"label",120),P(28,"lucide-angular",121),d(29," Email "),a(),o(30,"input",122),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.customer_email,i)||(s.newReservation.customer_email=i),v(i)}),a()(),o(31,"div",114)(32,"label",123)(33,"span",28),d(34,"phone"),a(),d(35," Telefono * "),a(),o(36,"input",124),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.customer_phone,i)||(s.newReservation.customer_phone=i),v(i)}),a()()(),o(37,"div",113)(38,"div",114)(39,"label",125)(40,"span",28),d(41,"event"),a(),d(42," Data * "),a(),o(43,"input",126),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.reservation_date,i)||(s.newReservation.reservation_date=i),v(i)}),f("change",function(){u(e);let i=c();return v(i.onReservationDateChange())}),a()(),o(44,"div",114)(45,"label",127)(46,"span",28),d(47,"schedule"),a(),d(48," Ora * "),a(),o(49,"select",128),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.reservation_time,i)||(s.newReservation.reservation_time=i),v(i)}),o(50,"option",129),d(51,"Scegli un orario"),a(),g(52,ft,2,2,"option",130),a()()(),o(53,"div",113)(54,"div",114)(55,"label",131)(56,"span",28),d(57,"group"),a(),d(58," Numero Persone * "),a(),o(59,"input",132),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.party_size,i)||(s.newReservation.party_size=i),v(i)}),a(),g(60,xt,2,1,"small",133)(61,yt,2,0,"small",134),a(),g(62,Ct,11,4,"div",135),a(),o(63,"div",114)(64,"label",136)(65,"span",28),d(66,"notes"),a(),d(67," Richieste Speciali "),a(),o(68,"textarea",137),M("ngModelChange",function(i){u(e);let s=c();return E(s.newReservation.special_requests,i)||(s.newReservation.special_requests=i),v(i)}),a()()(),o(69,"div",138)(70,"button",139),f("click",function(){u(e);let i=c();return v(i.closeNewReservationModal())}),o(71,"span",28),d(72,"close"),a(),d(73," Annulla "),a(),o(74,"button",140),P(75,"lucide-angular",32),d(76," Crea Prenotazione "),a()()()()()()}if(r&2){let e=c();l(16),m("size",20),l(2),D("ngModel",e.newReservation.customer_name),l(6),D("ngModel",e.newReservation.customer_surname),l(4),m("size",20),l(2),D("ngModel",e.newReservation.customer_email),l(6),D("ngModel",e.newReservation.customer_phone),l(7),D("ngModel",e.newReservation.reservation_date),m("min",e.minDate),l(6),D("ngModel",e.newReservation.reservation_time),l(3),m("ngForOf",e.getAvailableTimeSlotsForDate(e.selectedDate)),l(7),D("ngModel",e.newReservation.party_size),m("max",e.maxCapacity),l(),m("ngIf",e.maxCapacity>0),l(),m("ngIf",e.maxCapacity===0),l(),m("ngIf",e.editingReservationId),l(6),D("ngModel",e.newReservation.special_requests),l(7),m("size",20)}}function St(r,t){if(r&1&&(o(0,"span")(1,"span",176),d(2,"event_note"),a(),d(3),a()),r&2){let e=c().$implicit;l(3),x(" ",e.title," ")}}function bt(r,t){if(r&1&&(o(0,"span")(1,"span",176),d(2,"restaurant"),a(),d(3),a()),r&2){let e=c().$implicit;l(3),x(" ",e.meta.customerName," ")}}function Dt(r,t){if(r&1&&(o(0,"span",177),d(1),a()),r&2){let e=c().$implicit,n=c(3);Q(n.getReservationStatusClass(e.meta.status)),l(),x(" ",e.meta.status," ")}}function Et(r,t){if(r&1&&(o(0,"div",179)(1,"span",67),d(2,"email"),a(),o(3,"span",180),d(4),a()()),r&2){let e=c(2).$implicit;l(4),S(e.meta.customerEmail)}}function Mt(r,t){if(r&1&&(o(0,"div",178)(1,"div",179)(2,"span",67),d(3,"phone"),a(),o(4,"span",180),d(5),a()(),g(6,Et,5,1,"div",181),a()),r&2){let e=c().$implicit;l(5),S(e.meta.customerPhone),l(),m("ngIf",e.meta.customerEmail)}}function Rt(r,t){if(r&1&&(I(0),o(1,"div",171)(2,"span",172),d(3,"group"),a(),o(4,"div",173),d(5),a(),o(6,"div",174),d(7,"Persone"),a()(),o(8,"div",171)(9,"span",172),d(10,"table_restaurant"),a(),o(11,"div",173),d(12),a(),o(13,"div",174),d(14,"Tavolo"),a()(),F()),r&2){let e=c().$implicit;l(5),S(e.meta.partySize),l(7),S(e.meta.tableInfo||"\u2014")}}function Tt(r,t){if(r&1&&(I(0),d(1),V(2,"date"),V(3,"date"),F()),r&2){let e=c(2).$implicit;l(),H(" ",O(2,2,e.start,"HH:mm")," - ",O(3,5,e.end,"HH:mm")," ")}}function kt(r,t){r&1&&d(0," Tutto il giorno ")}function Pt(r,t){if(r&1&&(I(0),o(1,"div",171)(2,"span",172),d(3,"description"),a(),o(4,"div",173),d(5),a(),o(6,"div",174),d(7,"Descrizione"),a()(),o(8,"div",171)(9,"span",172),d(10,"access_time"),a(),o(11,"div",173),g(12,Tt,4,8,"ng-container",64)(13,kt,1,0,"ng-template",null,4,N),a(),o(15,"div",174),d(16,"Orario"),a()(),F()),r&2){let e=z(14),n=c().$implicit;l(5),S(n.meta.description||"Nessuna descrizione"),l(7),m("ngIf",!n.meta.isAllDay)("ngIfElse",e)}}function It(r,t){if(r&1&&(o(0,"div",182)(1,"div",183)(2,"span",184),d(3,"notes"),a(),o(4,"strong",180),d(5,"Note"),a()(),o(6,"p",185),d(7),a()()),r&2){let e=c().$implicit;l(7),S(e.meta.reservation.special_requests)}}function Ft(r,t){if(r&1){let e=R();o(0,"div",158)(1,"div",159)(2,"div",160)(3,"div",161)(4,"h4",162),I(5,65),g(6,St,4,1,"span",163)(7,bt,4,1,"span",163),F(),o(8,"span",164),d(9),a()(),g(10,Dt,2,3,"span",165),a(),g(11,Mt,7,2,"div",166),a(),o(12,"div",160)(13,"button",167),f("click",function(){let i=u(e).$implicit,s=c(3);return v(s.editEvent(i))}),o(14,"span",28),d(15,"edit"),a()(),o(16,"button",168),f("click",function(){let i=u(e).$implicit,s=c(3);return v(s.deleteEvent(i))}),P(17,"lucide-angular",169),a()()(),o(18,"div",170)(19,"div",171)(20,"span",172),d(21,"schedule"),a(),o(22,"div",173),d(23),V(24,"date"),a(),o(25,"div",174),d(26,"Orario"),a()(),I(27,65),g(28,Rt,15,2,"ng-container",163)(29,Pt,17,3,"ng-container",163),F(),a(),g(30,It,8,1,"div",175),a()}if(r&2){let e=t.$implicit;l(5),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),T("bg-purple",e.meta.eventType==="personal")("bg-primary",e.meta.eventType==="reservation"),l(),x(" ",e.meta.eventType==="personal"?"Personale":"Prenotazione"," "),l(),m("ngIf",e.meta.eventType==="reservation"),l(),m("ngIf",e.meta.eventType==="reservation"),l(6),m("size",20),l(6),S(O(24,16,e.start,"HH:mm")),l(4),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","reservation"),l(),m("ngSwitchCase","personal"),l(),m("ngIf",e.meta.eventType==="reservation"&&(e.meta.reservation==null?null:e.meta.reservation.special_requests))}}function Vt(r,t){if(r&1&&(o(0,"div",156),g(1,Ft,31,19,"div",157),a()),r&2){let e=c(2);l(),m("ngForOf",e.selectedDayEvents)}}function Ot(r,t){r&1&&(o(0,"div",186)(1,"span",187),d(2,"event_busy"),a(),o(3,"h3",188),d(4,"Nessun evento per questa data"),a(),o(5,"p",189),d(6,'Clicca su "Nuovo Appuntamento" o "Nuova Prenotazione" per aggiungerne uno'),a()())}function At(r,t){if(r&1){let e=R();o(0,"div",107)(1,"div",108)(2,"div",109)(3,"div",147)(4,"div",148)(5,"span",149),d(6,"calendar_today"),a()(),o(7,"div")(8,"h3",150),d(9,"Eventi del giorno"),a(),o(10,"p",151),d(11),V(12,"date"),a()()(),o(13,"button",27),f("click",function(){u(e);let i=c();return v(i.closeDayDetailsModal())}),o(14,"span",28),d(15,"close"),a()()(),o(16,"div",152)(17,"div",153)(18,"span",28),d(19,"event_available"),a(),o(20,"div")(21,"strong"),d(22),a(),d(23),a()(),g(24,Vt,2,1,"div",154)(25,Ot,7,0,"ng-template",null,3,N),o(27,"div",138)(28,"button",139),f("click",function(){u(e);let i=c();return v(i.closeDayDetailsModal())}),o(29,"span",28),d(30,"close"),a(),d(31," Chiudi "),a(),o(32,"button",139),f("click",function(){u(e);let i=c();return v(i.openNewPersonalAppointmentModal(i.selectedDate))}),o(33,"span",28),d(34,"event_note"),a(),d(35," Nuovo Appuntamento "),a(),o(36,"button",155),f("click",function(){u(e);let i=c();return v(i.openNewReservationForSelectedDay())}),P(37,"lucide-angular",32),d(38," Nuova Prenotazione "),a()()()()()}if(r&2){let e=z(26),n=c();l(11),S(O(12,6,n.selectedDate,"EEEE d MMMM yyyy")),l(11),x("",n.selectedDayEvents.length," eventi"),l(),x(" \xB7 ",n.calculateTotalGuests()," persone totali "),l(),m("ngIf",n.selectedDayEvents.length>0)("ngIfElse",e),l(13),m("size",20)}}function zt(r,t){if(r&1){let e=R();o(0,"div",107)(1,"div",190)(2,"div",109)(3,"h3",110)(4,"span",28),d(5,"event_note"),a(),d(6),a(),o(7,"button",27),f("click",function(){u(e);let i=c();return v(i.closePersonalAppointmentModal())}),o(8,"span",28),d(9,"close"),a()()(),o(10,"div",152)(11,"form",111,5),f("ngSubmit",function(){u(e);let i=c();return v(i.savePersonalAppointment())}),o(13,"div",114)(14,"label",191),d(15,"Titolo *"),a(),o(16,"input",192),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.title,i)||(s.personalAppointmentData.title=i),v(i)}),a()(),o(17,"div",113)(18,"div",114)(19,"label",191),d(20,"Inizio *"),a(),o(21,"input",193),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.start_datetime,i)||(s.personalAppointmentData.start_datetime=i),v(i)}),a()(),o(22,"div",114)(23,"label",191),d(24,"Fine *"),a(),o(25,"input",194),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.end_datetime,i)||(s.personalAppointmentData.end_datetime=i),v(i)}),a()()(),o(26,"div",114)(27,"label",191),d(28,"Descrizione"),a(),o(29,"textarea",195),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.description,i)||(s.personalAppointmentData.description=i),v(i)}),a()(),o(30,"div",114)(31,"label",191),d(32,"Colore"),a(),o(33,"div",179)(34,"input",196),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.color,i)||(s.personalAppointmentData.color=i),v(i)}),a(),P(35,"div",197),a()(),o(36,"div",198)(37,"input",199),M("ngModelChange",function(i){u(e);let s=c();return E(s.personalAppointmentData.is_all_day,i)||(s.personalAppointmentData.is_all_day=i),v(i)}),a(),o(38,"span"),d(39,"Giornata intera"),a()(),o(40,"div",138)(41,"button",139),f("click",function(){u(e);let i=c();return v(i.closePersonalAppointmentModal())}),d(42," Annulla "),a(),o(43,"button",200),d(44," Salva "),a()()()()()()}if(r&2){let e=z(12),n=c();l(6),x(" ",n.editingPersonalAppointment?"Modifica":"Nuovo"," Appuntamento Personale "),l(10),D("ngModel",n.personalAppointmentData.title),l(5),D("ngModel",n.personalAppointmentData.start_datetime),l(4),D("ngModel",n.personalAppointmentData.end_datetime),l(4),D("ngModel",n.personalAppointmentData.description),l(5),D("ngModel",n.personalAppointmentData.color),l(),W("background-color",n.personalAppointmentData.color),l(2),D("ngModel",n.personalAppointmentData.is_all_day),l(6),m("disabled",e.invalid)}}var ke=(n=>(n.Month="month",n.Week="week",n.Day="day",n))(ke||{}),Pe=(n=>(n.Pending="pending",n.Confirmed="confirmed",n.Cancelled="cancelled",n))(Pe||{}),Te=class r{reservationService=A(Me);shiftService=A(Re);tableService=A(Ee);authService=A(se);personalAppointmentService=A(L);cdr=A(ee);destroyRef=A(X);calendarContainerRef;editingReservationId=null;monthDays=[];maxCapacityValue=0;capacityDistribution=[];touchStartX=0;touchEndX=0;SWIPE_THRESHOLD=50;view="month";CalendarView=ke;viewDate=new Date;minDate=new Date().toISOString().split("T")[0];weekDays=[];weekViewHours=[];events=[];ReservationStatus=Pe;personalEvents=[];showPersonalAppointmentModal=!1;editingPersonalAppointment=null;personalAppointmentData={title:"",description:"",start_datetime:"",end_datetime:"",color:"#3788d8",is_all_day:!1};showNewReservationModal=!1;showDayDetailsModal=!1;showReservationModal=!1;saving=!1;tables=[];maxCapacity=0;tableStats=null;selectedDate=new Date;selectedDayEvents=[];newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(new Date),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"};closures=[];mobileTooltipDay=null;mobileTooltipTimeout=null;todayCapacity=0;loading=!1;shifts=[];calendarStartHour=8;calendarEndHour=23;availableTimeSlots=[];ngOnInit(){return k(this,null,function*(){this.minDate=this.formatDateForInput(new Date),console.log("\u{1F504} Calendar component initialized"),this.setupSubscriptions(),yield this.loadShifts(),yield this.loadTables(),yield this.loadCalendarData(),yield this.loadPersonalAppointments(),this.updateWeekView()})}setupSubscriptions(){this.reservationService.restaurantReservations$.pipe(B(this.destroyRef)).subscribe(t=>{this.events=this.mapReservationsToEvents(t),this.calculateTodayCapacity(),this.refreshCalendarData(),this.cdr.markForCheck()}),this.tableService.data$.pipe(B(this.destroyRef)).subscribe(t=>{this.tables=t||[],this.calculateMaxCapacity(),this.refreshCalendarData(),this.cdr.markForCheck()}),this.shiftService.closures$.pipe(B(this.destroyRef)).subscribe(t=>{this.closures=t,this.cdr.markForCheck()})}loadShifts(){return k(this,null,function*(){try{this.shifts=this.shiftService.data,(!this.shifts||this.shifts.length===0)&&(yield this.shiftService.loadData(),this.shifts=this.shiftService.data),this.calculateCalendarHoursFromShifts(),this.calculateAvailableTimeSlots(),this.updateWeekView(),this.refreshCalendarData(),this.cdr.markForCheck()}catch(t){console.error("Error loading shifts:",t),this.calendarStartHour=8,this.calendarEndHour=23}})}loadCalendarData(){return k(this,null,function*(){this.loading=!0;try{console.log("\u{1F4C5} Loading calendar data..."),yield this.reservationService.loadRestaurantReservations(),console.log("\u2705 Calendar data loaded successfully"),console.log("\u{1F4CA} Events after load:",this.events.length)}catch(t){console.error("Error loading calendar data:",t)}finally{this.loading=!1}})}loadReservations(){this.reservationService.loadRestaurantReservations()}getEventColor(t){return t.meta.eventType==="personal"?"var(--purple, #2196F3)":this.getEventColorBySize(t.meta.partySize)}getEventColorBySize(t){return t?t<=2?"var(--primary, #4CAF50)":t<=4?"var(--secondary, #2196F3)":"var(--tertiary, #2196F3)":"var(--tertiary,  #FF9800)"}mapReservationsToEvents(t){return t.map(e=>{try{let[n,i,s]=e.reservation_date.split("-").map(Number),[p,_,C=0]=e.reservation_time.split(":").map(Number),y=new Date(n,i-1,s,p,_,C),h="Cliente",w="";if(e.users)h=e.users.first_name||"",w=e.users.last_name||"";else if(e.customer_name)if(e.customer_name&&e.customer_surname)h=e.customer_name,w=e.customer_surname;else{let q=e.customer_name.trim().split(" ");h=q[0]||"",w=q.slice(1).join(" ")||""}let b=e.users?.phone||e.customer_phone||"",Ie=e.users?.email||e.customer_email||"",Fe=e.tables?`Tavolo ${e.tables.table_number}`:"Da assegnare";return{id:e.id,start:y,title:`${h} ${w} - ${e.party_size} persone`,color:{primary:this.getEventColorBySize(e.party_size),secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:`${h} ${w}`.trim(),customerSurname:w,customerEmail:Ie,customerPhone:b,partySize:e.party_size,tableInfo:Fe,status:e.status||"confirmed"}}}catch(n){console.error("\u274C Error mapping reservation:",e.id,n);let i=new Date;return{id:e.id,start:i,title:"Errore nella prenotazione",color:{primary:"var(--danger)",secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:"Errore",customerSurname:"",customerEmail:"",customerPhone:"",partySize:e.party_size||0,tableInfo:"Errore",status:"error"}}}})}onDayClick(t){this.openDayDetails(t)}deleteReservation(t){return k(this,null,function*(){if(t&&confirm("Sei sicuro di voler eliminare questa prenotazione?"))try{yield this.reservationService.deleteReservation(t.toString()),this.events=this.events.filter(e=>e.id!==t),this.selectedDayEvents=this.selectedDayEvents.filter(e=>e.id!==t),this.calculateTodayCapacity(),this.reservationService.loadRestaurantReservations(),alert("Prenotazione eliminata con successo!"),this.selectedDayEvents.length===0&&setTimeout(()=>{this.closeDayDetailsModal()},1e3)}catch(e){console.error("Error deleting reservation:",e),alert("Errore durante l'eliminazione della prenotazione")}})}onEventClick(t){if(t.meta.eventType==="personal"){let e=t.meta.appointment,n;e.is_all_day?n="\u{1F5D3}\uFE0F Tutto il giorno":n=`\u{1F552} ${this.formatTimeForDisplay(e.start_datetime)} - ${this.formatTimeForDisplay(e.end_datetime)}`,alert(`\u{1F4C5} Appuntamento personale

Titolo: ${e.title}
Descrizione: ${e.description||"Nessuna"}
${n}`)}else alert(`${t.meta.customerName}
${t.start.toLocaleTimeString()}
${t.meta.partySize} persone`)}deletePersonalAppointment(t){return k(this,null,function*(){if(confirm("Eliminare questo appuntamento?"))try{yield this.personalAppointmentService.delete(t),yield this.loadPersonalAppointments()}catch(e){console.error("Errore eliminazione:",e)}})}createManualReservation(){return k(this,null,function*(){if(this.validateReservation()){this.saving=!0;try{let t=`${this.newReservation.customer_name} ${this.newReservation.customer_surname}`.trim(),e=this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,n={customer_name:this.newReservation.customer_name,customer_surname:this.newReservation.customer_surname,customer_email:this.newReservation.customer_email,customer_phone:this.newReservation.customer_phone,reservation_date:this.newReservation.reservation_date,reservation_time:this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,party_size:this.newReservation.party_size,special_requests:this.newReservation.special_requests,status:this.newReservation.status};console.log("\u{1F4E4} Invio dati prenotazione:",n);let i=yield this.reservationService.createRestaurantReservation(n);i?(console.log("\u2705 Prenotazione creata con successo:",i),alert("Prenotazione creata con successo!"),yield this.reservationService.loadRestaurantReservations(),this.closeNewReservationModal()):alert("Errore durante la creazione della prenotazione")}catch(t){console.error("\u274C Errore creazione prenotazione:",t),alert(`Errore: ${t.message||"Impossibile creare la prenotazione"}`)}finally{this.saving=!1}}})}onReservationDateChange(){this.selectedDate=new Date(this.newReservation.reservation_date);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&!t.includes(this.newReservation.reservation_time)&&(this.newReservation.reservation_time=t[0])}validateReservation(){if(!this.newReservation.customer_name.trim())return alert("Inserisci il nome del cliente"),!1;if(!this.newReservation.customer_surname.trim())return alert("Inserisci il cognome del cliente"),!1;if(!this.newReservation.customer_phone.trim())return alert("Inserisci il telefono del cliente"),!1;if(this.newReservation.customer_email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newReservation.customer_email))return alert("Inserisci un'email valida (es: nome@dominio.com)"),!1;let t=new Date(this.newReservation.reservation_date),e=new Date;return e.setHours(0,0,0,0),t<e?(alert("Non puoi prenotare per una data passata"),!1):this.newReservation.party_size<1||this.newReservation.party_size>50?(alert("Il numero di persone deve essere tra 1 e 50"),!1):!0}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}closeReservationModal(){this.showReservationModal=!1,this.resetReservationForm()}resetReservationForm(){let t=new Date;this.newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(t),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"}}setView(t){this.view=t,this.updateWeekView()}previous(){this.animateSwipe("swipe-right"),this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()-1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-1),this.updateWeekView(),this.refreshCalendarData(),this.cdr.detectChanges()}next(){this.animateSwipe("swipe-left"),this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+1),this.updateWeekView(),this.refreshCalendarData(),this.cdr.detectChanges()}today(){this.viewDate=new Date,this.updateWeekView(),this.refreshCalendarData(),this.cdr.detectChanges()}getWeekDays(){console.log("getWeekDays called with viewDate:",this.viewDate);let t=[],e=new Date(this.viewDate),n=e.getDay(),i=e.getDate()-n+(n===0?-6:1),s=new Date(e.setDate(i));for(let p=0;p<7;p++){let _=new Date(s);_.setDate(s.getDate()+p),t.push(_)}return t}getEventsForDay(t){let e=t.toISOString().split("T")[0];return this.events.filter(n=>n.start.toISOString().split("T")[0]===e)}getEventsForHour(t,e){let n=new Date(t);n.setHours(e,0,0,0);let i=new Date(t);return i.setHours(e+1,0,0,0),this.events.filter(s=>s.start>=n&&s.start<i)}getMonthDays(){let t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),n=new Date(t,e,1),i=new Date(t,e+1,0),s=n.getDay(),p=s===0?6:s-1,_=[],C=p;for(let w=C;w>0;w--){let b=new Date(n);b.setDate(b.getDate()-w),_.push({date:b,isCurrentMonth:!1,events:this.getEventsForDate(b)})}for(let w=1;w<=i.getDate();w++){let b=new Date(t,e,w);_.push({date:b,isCurrentMonth:!0,events:this.getEventsForDate(b)})}let h=42-_.length;for(let w=1;w<=h;w++){let b=new Date(i);b.setDate(b.getDate()+w),_.push({date:b,isCurrentMonth:!1,events:this.getEventsForDate(b)})}return _}getEventCountForDate(t){return this.getEventsForDate(t).length}getLimitedEventsForDate(t,e=3){return this.getEventsForDate(t).slice(0,e)}hasMoreEvents(t,e=3){return this.getEventsForDate(t).length>e}isToday(t){let e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isCurrentMonth(t){return t.getMonth()===this.viewDate.getMonth()}calculateCalendarHoursFromShifts(){if(!this.shifts||this.shifts.length===0){this.calendarStartHour=8,this.calendarEndHour=23;return}let t=24,e=0;this.shifts.forEach(n=>{if(n.is_active){let i=this.extractHourFromTime(n.start_time),s=this.extractHourFromTime(n.end_time);i<t&&(t=i),s>e&&(e=s)}}),this.calendarStartHour=t===24?8:t,this.calendarEndHour=e===0?23:e}extractHourFromTime(t){return t?parseInt(t.split(":")[0],10):0}extractMinutesFromTime(t){return t?parseInt(t.split(":")[1],10):0}calculateAvailableTimeSlots(){if(!this.shifts||this.shifts.length===0){this.availableTimeSlots=this.generateTimeSlots(12,23,30);return}let t=[],e=30;this.shifts.forEach(n=>{if(n.is_active){let i=this.extractHourFromTime(n.start_time),s=this.extractMinutesFromTime(n.start_time),p=this.extractHourFromTime(n.end_time),_=this.extractMinutesFromTime(n.end_time),C=this.generateTimeSlotsWithStartEnd(i,s,p,_,e);t.push(...C)}}),this.availableTimeSlots=[...new Set(t)].sort()}generateTimeSlotsWithStartEnd(t,e,n,i,s){let p=[],_=t,C=e,y=Math.floor(C/s)*s;for(y>C,C=y;_<n||_===n&&C<i;){let h=_.toString().padStart(2,"0"),w=C.toString().padStart(2,"0");p.push(`${h}:${w}`),C+=s,C>=60&&(C=0,_++)}return p}generateTimeSlots(t,e,n){let i=[];for(let s=t;s<=e;s++)for(let p=0;p<60;p+=n){let _=s.toString().padStart(2,"0"),C=p.toString().padStart(2,"0");i.push(`${_}:${C}`)}return i}getAvailableTimeSlotsForDate(t){return this.availableTimeSlots}getWeekViewHours(){let t=[],e=Math.max(0,Math.min(this.calendarStartHour||8,23)),n=Math.max(e,Math.min(this.calendarEndHour||23,23));for(let i=e;i<=n;i++)t.push(i);return t}openNewReservationModal(){this.editingReservationId=null,this.selectedDate=new Date,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0,this.resetReservationForm()}openDayDetails(t){console.log("\u{1F4C5} Opening day details for:",t),console.log("\u{1F4CA} Current events count:",this.events.length),this.selectedDate=t,this.selectedDayEvents=this.getEventsForDate(t),console.log("\u{1F4CB} Events for selected day:",this.selectedDayEvents.length),console.log("\u{1F4CB} All events:"),this.events.forEach((e,n)=>{console.log(`Event ${n}:`,{date:e.start,customer:e.meta.eventType==="reservation"?e.meta.customerName:"Appuntamento",localDate:e.start.toLocaleDateString("it-IT")})}),this.showDayDetailsModal=!0,setTimeout(()=>{console.log("\u{1F504} Modal state:",this.showDayDetailsModal)},100)}closeNewReservationModal(){this.showNewReservationModal=!1,this.editingReservationId=null,this.resetReservationForm()}closeDayDetailsModal(){this.showDayDetailsModal=!1}openNewReservationForSelectedDay(){this.showDayDetailsModal=!1,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0}editReservation(t){if(t.meta.eventType!=="reservation")return;this.editingReservationId=t.meta.reservation.id;let e=t.meta.customerName.split(" "),n=e[0]||"",i=e.slice(1).join(" ")||"";t.meta.customerSurname&&(i=t.meta.customerSurname);let s,p=t.meta.status?.toLowerCase();p==="pending"?s="pending":p==="cancelled"||p==="cancellata"?s="cancelled":s="confirmed",this.newReservation={customer_name:n,customer_surname:i,customer_email:t.meta.customerEmail||"",customer_phone:t.meta.customerPhone||"",reservation_date:this.formatDateForInput(t.start),reservation_time:this.formatTime(t.start),party_size:t.meta.partySize,special_requests:t.meta.reservation.special_requests||"",status:s},this.showDayDetailsModal=!1,this.showNewReservationModal=!0}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}getReservationStatusClass(t){switch(t?.toLowerCase()){case"confirmed":case"confermata":return"status-confirmed";case"pending":case"in attesa":return"status-pending";case"cancelled":case"cancellata":return"status-cancelled";default:return"status-unknown"}}formatTimeForDisplay(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}formatDateForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${i}`}formatDateForDB(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${i}`}loadTables(){return k(this,null,function*(){try{console.log("\u{1F504} Loading restaurant tables..."),yield this.tableService.loadData();let t=this.tableService.getTables();console.log("\u2705 Tables loaded from service:",t?.length),this.tables=t||[],this.calculateMaxCapacity()}catch(t){console.error("Error loading tables:",t)}})}calculateMaxCapacity(){if(this.tables.length===0){console.log("\u26A0\uFE0F No tables found, using default capacity"),this.maxCapacity=50,this.tableStats=null;return}this.maxCapacity=this.tableService.calculateMaxCapacity(this.tables),this.tableStats=this.tableService.getTableStats(this.tables),console.log("\u{1F4CA} Capacity calculated:",{maxCapacity:this.maxCapacity,tableCount:this.tables.length,stats:this.tableStats})}getCapacityDistribution(){if(!this.tables.length)return[];let t=this.tableService.getCapacityByTableType(this.tables);return Object.entries(t).map(([e,n])=>({capacity:parseInt(e),count:n})).sort((e,n)=>e.capacity-n.capacity)}getAvailableTablesForDate(t){let e=this.formatDateForInput(t),i=this.events.filter(s=>this.formatDateForInput(s.start)===e&&s.meta.eventType==="reservation").map(s=>s.meta.reservation).filter(s=>s.table_id).map(s=>s.table_id);return this.tables.filter(s=>!i.includes(s.id))}getDateCapacityStats(t){let e=this.formatDateForInput(t),i=this.events.filter(y=>this.formatDateForInput(y.start)===e&&y.meta.eventType==="reservation").reduce((y,h)=>y+(h.meta.partySize||0),0),s=this.getAvailableTablesForDate(t),p=s.length,_=s.reduce((y,h)=>y+(h.capacity||0),0),C=this.maxCapacity>0?i/this.maxCapacity*100:0;return{totalCapacity:this.maxCapacity,usedCapacity:i,availableCapacity:_,availableTables:p,percentage:Math.round(C)}}calculateMaxCapacitySimple(){return this.tables.length===0?50:this.tables.reduce((t,e)=>t+(e.capacity||0),0)}getAvailableTablesToday(){if(this.tables.length===0)return 0;let t=new Date().toISOString().split("T")[0],e=this.events.filter(n=>new Date(n.start).toISOString().split("T")[0]===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getAvailableTablesForSelectedDate(){if(this.tables.length===0||!this.selectedDate)return 0;let t=this.formatDateForInput(this.selectedDate),e=this.events.filter(n=>this.formatDateForInput(n.start)===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getSimpleCapacityDistribution(){let t=[],e={};this.tables.forEach(n=>{let i=n.capacity||0;e[i]=(e[i]||0)+1});for(let[n,i]of Object.entries(e))t.push({size:parseInt(n),count:i});return t.sort((n,i)=>n.size-i.size)}isSameDate(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}getEventsForDate(t){let e=this.formatDateForInput(t);return this.allEvents.filter(n=>this.formatDateForInput(n.start)===e)}get allEvents(){return[...this.events,...this.personalEvents]}getTodaysReservationCount(){let t=new Date;return this.events.filter(e=>this.isSameDate(e.start,t)).length}calculateTodayCapacity(){let t=new Date,e=this.events.filter(n=>this.isSameDate(n.start,t)&&n.meta.eventType==="reservation");this.todayCapacity=e.reduce((n,i)=>n+(i.meta.partySize||0),0),console.log("\u{1F4C5} Today capacity (local):",{today:t.toLocaleDateString("it-IT"),events:e.length,capacity:this.todayCapacity})}calculateTotalGuests(){return this.selectedDayEvents.reduce((t,e)=>e.meta.eventType==="reservation"?t+e.meta.partySize:t,0)}loadPersonalAppointments(){return k(this,null,function*(){try{yield this.personalAppointmentService.loadData(),this.personalEvents=this.mapPersonalToEvents(this.personalAppointmentService.data)}catch(t){console.error("Errore caricamento appuntamenti personali:",t)}})}mapPersonalToEvents(t){return t.map(e=>({id:e.id,start:new Date(e.start_datetime),end:new Date(e.end_datetime),title:e.title,color:{primary:e.color||"#3788d8",secondary:"var(--background)"},meta:{eventType:"personal",description:e.description,isAllDay:e.is_all_day,appointment:e}}))}openNewPersonalAppointmentModal(t){let e=t||this.viewDate,n=new Date(e);n.setHours(9,0,0,0);let i=new Date(e);i.setHours(10,0,0,0),this.personalAppointmentData={title:"",description:"",start_datetime:this.formatDateTimeForInput(n),end_datetime:this.formatDateTimeForInput(i),color:"#3788d8",is_all_day:!1},this.editingPersonalAppointment=null,this.showPersonalAppointmentModal=!0}editPersonalAppointment(t){if(t.meta.eventType!=="personal")return;let e=t.meta.appointment;this.personalAppointmentData={title:e.title,description:e.description||"",start_datetime:this.formatDateTimeForInput(new Date(e.start_datetime)),end_datetime:this.formatDateTimeForInput(new Date(e.end_datetime)),color:e.color||"#3788d8",is_all_day:e.is_all_day||!1},this.editingPersonalAppointment=e,this.showPersonalAppointmentModal=!0}savePersonalAppointment(){return k(this,null,function*(){if(!this.personalAppointmentData.title)return;let t=yield this.authService.getCurrentStaffRestaurantId();if(!t)return;let e={restaurant_id:t,title:this.personalAppointmentData.title,description:this.personalAppointmentData.description||null,start_datetime:new Date(this.personalAppointmentData.start_datetime).toISOString(),end_datetime:new Date(this.personalAppointmentData.end_datetime).toISOString(),color:this.personalAppointmentData.color,is_all_day:this.personalAppointmentData.is_all_day};try{this.editingPersonalAppointment?yield this.personalAppointmentService.update(this.editingPersonalAppointment.id,e):yield this.personalAppointmentService.create(e),yield this.loadPersonalAppointments(),this.closePersonalAppointmentModal()}catch(n){console.error("Errore salvataggio appuntamento:",n),alert("Errore durante il salvataggio")}})}closePersonalAppointmentModal(){this.showPersonalAppointmentModal=!1,this.editingPersonalAppointment=null}formatDateTimeForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0");return`${e}-${n}-${i}T${s}:${p}`}editEvent(t){t.meta.eventType==="personal"?this.editPersonalAppointment(t):this.editReservation(t)}deleteEvent(t){t.meta.eventType==="personal"?t.id&&this.deletePersonalAppointment(t.id):this.deleteReservation(t.id)}onTouchStart(t){console.log("touch start",t.changedTouches[0].screenX),this.touchStartX=t.changedTouches[0].screenX}onTouchMove(t){t.preventDefault()}onTouchEnd(t){console.log("touch end",t.changedTouches[0].screenX),this.touchEndX=t.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){let t=this.touchStartX-this.touchEndX;console.log("Swipe diff:",t,"threshold:",this.SWIPE_THRESHOLD),Math.abs(t)>this.SWIPE_THRESHOLD?t>0?(console.log("\u{1F449} Swipe sinistra -> next()"),this.next()):(console.log("\u{1F448} Swipe destra -> previous()"),this.previous()):console.log("\u23F8\uFE0F Swipe troppo corto, ignorato"),this.touchStartX=0,this.touchEndX=0}animateSwipe(t){let e=document.querySelector(".calendar-container");e&&(e.classList.add(t),setTimeout(()=>{e.classList.remove(t)},200))}onDocumentTouchStart(t){this.calendarContainerRef?.nativeElement.contains(t.target)&&this.onTouchStart(t)}onDocumentTouchMove(t){this.calendarContainerRef?.nativeElement.contains(t.target)&&t.preventDefault()}onDocumentTouchEnd(t){this.calendarContainerRef?.nativeElement.contains(t.target)&&this.onTouchEnd(t)}computeWeekDays(){let t=[],e=new Date(this.viewDate),n=e.getDay(),i=e.getDate()-n+(n===0?-6:1),s=new Date(e.setDate(i));for(let p=0;p<7;p++){let _=new Date(s);_.setDate(s.getDate()+p),t.push(_)}return t}updateWeekView(){this.weekDays=this.computeWeekDays(),this.weekViewHours=this.getWeekViewHours()}getTimeSlotsForDay(t){let e=t.getDay(),n=e===0?7:e,i=this.shifts.filter(_=>_.is_active&&_.days_of_week.includes(n));if(i.length===0)return[];let s=[],p=30;return i.forEach(_=>{let C=this.extractHourFromTime(_.start_time),y=this.extractMinutesFromTime(_.start_time),h=this.extractHourFromTime(_.end_time),w=this.extractMinutesFromTime(_.end_time),b=this.generateTimeSlotsWithStartEnd(C,y,h,w,p);s.push(...b)}),[...new Set(s)].sort()}getEventsForSlot(t,e){let[n,i]=e.split(":").map(Number),s=new Date(t);s.setHours(n,i,0,0);let p=new Date(s);return p.setMinutes(p.getMinutes()+30),this.events.filter(_=>_.start>=s&&_.start<p)}getAllWeekSlots(){let t=new Set;return this.weekDays.forEach(e=>{this.getTimeSlotsForDay(e).forEach(n=>t.add(n))}),Array.from(t).sort()}isDayClosed(t){let e=t.getDay(),n=e===0?7:e;return!this.shifts.some(s=>s.is_active&&s.days_of_week.includes(n))}refreshCalendarData(){this.monthDays=this.computeMonthDays(),this.maxCapacityValue=this.calculateMaxCapacitySimple(),this.capacityDistribution=this.getSimpleCapacityDistribution()}computeMonthDays(){let t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),n=new Date(t,e,1),i=new Date(t,e+1,0),s=n.getDay(),p=s===0?6:s-1,_=[];for(let y=p;y>0;y--){let h=new Date(n);h.setDate(h.getDate()-y),_.push({date:h,isCurrentMonth:!1,events:this.getEventsForDate(h),isClosed:this.isDayClosed(h)})}for(let y=1;y<=i.getDate();y++){let h=new Date(t,e,y);_.push({date:h,isCurrentMonth:!0,events:this.getEventsForDate(h),isClosed:this.isDayClosed(h)})}let C=42-_.length;for(let y=1;y<=C;y++){let h=new Date(i);h.setDate(h.getDate()+y),_.push({date:h,isCurrentMonth:!1,events:this.getEventsForDate(h),isClosed:this.isDayClosed(h)})}return _}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=G({type:r,selectors:[["app-calendar-view"]],viewQuery:function(e,n){if(e&1&&U(Oe,5),e&2){let i;J(i=K())&&(n.calendarContainerRef=i.first)}},hostBindings:function(e,n){e&1&&f("touchstart",function(s){return n.onDocumentTouchStart(s)},!1,$)("touchmove",function(s){return n.onDocumentTouchMove(s)},!1,$)("touchend",function(s){return n.onDocumentTouchEnd(s)},!1,$)},decls:72,vars:41,consts:[["calendarContainer",""],["normalTimeSmall",""],["normalTime",""],["noEvents",""],["allDay",""],["personalForm","ngForm"],[1,"page-container"],["data-tutorial","calendar-cards",1,"grid-cards","p-sm","mb-lg"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"text-md","font-semibold","m-0"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"text-muted","card-footer","flex-col"],[1,"flex"],["class","mt-sm text-mini flex flex-col",4,"ngIf"],[1,"material-icons","text-md"],[1,"text-md","font-bold","justify-center","flex"],["class","ml-sm text-mini",4,"ngIf"],["class","card",4,"ngIf"],[1,"flex","justify-center","w-100","p-sm"],[1,"text-md"],[1,"flex","justify-between","items-center","gap-md","p-sm","calendar-controls"],["data-tutorial","calendar-mode",1,"flex","gap-sm"],[1,"promethea-button","outline",3,"click"],["data-tutorial","calendar-view",1,"flex","items-center","gap-md","justify-center"],[1,"icon-button",3,"click"],[1,"material-icons"],[1,"promethea-button","ghost",3,"click"],["data-tutorial","calendar-add",1,"flex","gap-sm"],[1,"promethea-button",3,"click"],["name","plus",3,"size"],[1,"p-sm","calendar-container",3,"touchstart","touchmove","touchend"],["data-tutorial","calendar-day","class","calendar-month-view",4,"ngIf"],["class","calendar-week-view",4,"ngIf"],["class","calendar-day-view border rounded overflow-hidden",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"mt-sm","text-mini","flex","flex-col"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"font-semibold"],[1,"ml-sm","text-mini"],[1,"material-icons","text-md","text-primary"],[1,"text-md","font-bold","text-info","justify-center","text-primary","flex"],["data-tutorial","calendar-day",1,"calendar-month-view"],[1,"month-weekdays"],["class","month-weekday p-sm text-center font-bold text-mini uppercase",4,"ngFor","ngForOf"],[1,"month-grid"],["class","month-day flex flex-col border bg-body p-0",3,"today","current-month","other-month","closed-day","click",4,"ngFor","ngForOf"],[1,"month-weekday","p-sm","text-center","font-bold","text-mini","uppercase"],[1,"month-day","flex","flex-col","border","bg-body","p-0",3,"click"],[1,"day-number-wrapper","flex","justify-between","items-center","p-sm"],[1,"day-number","font-bold","text-md"],["name","lock","class","text-mini","title","Chiuso",4,"ngIf"],["class","day-events-indicator",3,"background",4,"ngIf"],["class","month-events-compact",4,"ngIf"],["name","lock","title","Chiuso",1,"text-mini"],[1,"day-events-indicator"],[1,"month-events-compact"],["class","month-event-compact p-mini flex",3,"border-color","click",4,"ngFor","ngForOf"],["class","more-events-compact text-mini text-primary text-center p-mini",3,"click",4,"ngIf"],[1,"month-event-compact","p-mini","flex",3,"click"],[1,"event-time-small","font-bold","text-mini","rounded"],[4,"ngIf","ngIfElse"],[3,"ngSwitch"],["class","event-customer-small text-mini flex items-center gap-sm",4,"ngSwitchCase"],[1,"material-icons","text-mini"],[1,"event-customer-small","text-mini","flex","items-center","gap-sm"],[1,"more-events-compact","text-mini","text-primary","text-center","p-mini",3,"click"],[1,"calendar-week-view"],[1,"week-header","flex"],[1,"week-time-column"],["class","week-day-header",3,"today","closed-day",4,"ngFor","ngForOf"],[1,"week-body"],["class","week-hour",4,"ngFor","ngForOf"],["class","week-day-column",3,"closed-day",4,"ngFor","ngForOf"],[1,"week-day-header"],[1,"week-day-name"],[1,"week-day-number"],[1,"week-hour"],[1,"week-day-column"],["class","week-hour-slot",3,"click",4,"ngFor","ngForOf"],[1,"week-hour-slot",3,"click"],["class","week-event",3,"background","click",4,"ngFor","ngForOf"],[1,"week-event",3,"click"],[1,"event-time"],["class","event-customer",4,"ngSwitchCase"],["class","event-details",4,"ngIf"],[1,"event-customer"],[1,"material-icons",2,"margin-right","var(--gap-sm)"],[1,"event-details"],[1,"calendar-day-view","border","rounded","overflow-hidden"],[1,"day-header","p-md","text-center","bg-smoke"],[1,"text-md","font-bold"],[1,"day-body","overflow-auto"],["class","day-hour flex",4,"ngFor","ngForOf"],[1,"day-hour","flex"],[1,"hour-label","w-20","bg-smoke","flex","items-center","justify-center","font-semibold","text-mini"],[1,"hour-slot","flex-1","p-xs",3,"click"],["class","day-event rounded shadow-card",3,"background","click",4,"ngFor","ngForOf"],[1,"day-event","rounded","shadow-card",3,"click"],[1,"event-time","font-bold","text-mini"],["class","event-customer font-bold text-mini flex items-center gap-sm",4,"ngSwitchCase"],["class","event-details text-mini",4,"ngIf"],[1,"event-customer","font-bold","text-mini","flex","items-center","gap-sm"],[1,"event-details","text-mini"],[1,"modal-overlay"],[1,"modal-container","modal-lg"],[1,"modal-header"],[1,"section-title"],[3,"ngSubmit"],[1,"form-card"],[1,"form-row"],[1,"form-group"],["for","customerName",1,"standard-label"],["name","user",1,"nav-icon",3,"size"],["type","text","id","customerName","name","customerName","required","","placeholder","Inserisci nome",3,"ngModelChange","ngModel"],["for","customerSurname",1,"standard-label"],["type","text","id","customerSurname","name","customerSurname","required","","placeholder","Inserisci cognome",3,"ngModelChange","ngModel"],["for","customerEmail",1,"standard-label"],["name","mail",1,"nav-icon",3,"size"],["type","email","id","customerEmail","name","customerEmail","placeholder","Inserisci email (facoltativo)",3,"ngModelChange","ngModel"],["for","customerPhone",1,"standard-label"],["type","tel","id","customerPhone","name","customerPhone","required","","placeholder","Inserisci telefono",3,"ngModelChange","ngModel"],["for","reservationDate",1,"standard-label"],["type","date","id","reservationDate","name","reservationDate","required","",3,"ngModelChange","change","ngModel","min"],["for","reservationTime",1,"standard-label"],["id","reservationTime","name","reservationTime","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","partySize",1,"standard-label"],["type","number","id","partySize","name","partySize","min","1","required","",3,"ngModelChange","ngModel","max"],["class","text-muted",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["for","specialRequests",1,"standard-label"],["id","specialRequests","name","specialRequests","rows","3","placeholder","Note o richieste particolari...",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","ghost",3,"click"],["type","submit",1,"promethea-button"],[3,"value"],[1,"text-muted"],[1,"text-danger"],["for","reservationStatus",1,"standard-label"],["name","info"],["id","reservationStatus","name","reservationStatus",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-md"],[1,"header-icon"],[1,"material-icons","text-primary","text-lg"],[1,"section-title","m-0"],[1,"text-muted","m-0"],[1,"modal-content","p-md"],[1,"info-message","mb-lg"],["class","flex flex-col gap-md mb-sm",4,"ngIf","ngIfElse"],["type","button",1,"promethea-button",3,"click"],[1,"flex","flex-col","gap-md","mb-sm"],["class","card hover-lift",4,"ngFor","ngForOf"],[1,"card","hover-lift"],[1,"flex","justify-between","items-start","flex-wrap"],[1,"flex","gap-sm"],[1,"flex","items-center","gap-sm","mb-sm","flex-wrap"],[1,"font-bold","text-md","m-0"],[4,"ngSwitchCase"],[1,"chip","ml-sm"],["class","chip",3,"class",4,"ngIf"],["class","flex items-center gap-md flex-wrap",4,"ngIf"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small",3,"click"],["name","trash-2",3,"size"],[1,"card-body"],[1,"flex","flex-col","items-center","text-center","p-sm","rounded","bg-smoke"],[1,"material-icons","text-primary","mb-xs"],[1,"font-bold","text-md"],[1,"text-mini","font-semibold"],["class","mt-md p-sm rounded bg-smoke",4,"ngIf"],[1,"material-icons",2,"vertical-align","middle"],[1,"chip"],[1,"flex","items-center","gap-md","flex-wrap"],[1,"flex","items-center","gap-sm"],[1,"text-mini"],["class","flex items-center gap-sm",4,"ngIf"],[1,"mt-md","p-sm","rounded","bg-smoke"],[1,"flex","items-center","gap-sm","mb-xs"],[1,"material-icons","text-primary"],[1,"text-sm","m-0"],[1,"empty-state","text-center","py-xl"],[1,"material-icons","text-lg","text-muted","mb-md"],[1,"text-md","font-bold","mb-sm"],[1,"text-muted","mb-lg"],[1,"modal-container","modal-md"],[1,"standard-label"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","start","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","end","required","",3,"ngModelChange","ngModel"],["name","description","rows","3",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"],[1,"color-preview"],[1,"checkbox-label"],["type","checkbox","name","isAllDay",3,"ngModelChange","ngModel"],["type","submit",1,"promethea-button",3,"disabled"]],template:function(e,n){if(e&1){let i=R();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"span",10),d(5,"event_available"),a(),o(6,"h3",11),d(7,"Prenotazioni Oggi"),a()(),o(8,"div",12),d(9),a(),o(10,"div",13),d(11,"Per oggi"),a()(),o(12,"div",8)(13,"div",9)(14,"span",10),d(15,"group"),a(),o(16,"h3",11),d(17,"Capienza Massima"),a()(),o(18,"div",12),d(19),a(),o(20,"div",14)(21,"div",15),d(22),a(),g(23,We,2,1,"div",16),a()(),o(24,"div",8)(25,"div",9)(26,"span",17),d(27," table_restaurant "),a(),o(28,"h3",11),d(29,"Occupazione Oggi"),a()(),o(30,"div",18),d(31),a(),o(32,"div",13),d(33),g(34,Ne,2,1,"span",19),a()(),g(35,He,11,7,"div",20),a(),o(36,"div",21)(37,"strong",22),d(38),V(39,"date"),a()(),o(40,"div",23)(41,"div",24)(42,"button",25),f("click",function(){return u(i),v(n.setView(n.CalendarView.Month))}),d(43,"Mese"),a(),o(44,"button",25),f("click",function(){return u(i),v(n.setView(n.CalendarView.Week))}),d(45,"Settimana"),a(),o(46,"button",25),f("click",function(){return u(i),v(n.setView(n.CalendarView.Day))}),d(47,"Giorno"),a()(),o(48,"div",26)(49,"button",27),f("click",function(){return u(i),v(n.previous())}),o(50,"span",28),d(51,"chevron_left"),a()(),o(52,"button",29),f("click",function(){return u(i),v(n.today())}),d(53,"Oggi"),a(),o(54,"button",27),f("click",function(){return u(i),v(n.next())}),o(55,"span",28),d(56,"chevron_right"),a()()(),o(57,"div",30)(58,"button",31),f("click",function(){return u(i),v(n.openNewReservationModal())}),P(59,"lucide-angular",32),d(60,"Prenotazione "),a(),o(61,"button",29),f("click",function(){return u(i),v(n.openNewPersonalAppointmentModal())}),P(62,"lucide-angular",32),d(63,"Personale "),a()()(),o(64,"div",33,0),f("touchstart",function(p){return u(i),v(n.onTouchStart(p))})("touchmove",function(p){return u(i),v(n.onTouchMove(p))})("touchend",function(p){return u(i),v(n.onTouchEnd(p))}),g(66,Ke,5,3,"div",34)(67,dt,8,3,"div",35)(68,ht,7,7,"div",36),a(),g(69,wt,77,17,"div",37)(70,At,39,9,"div",37)(71,zt,45,10,"div",37),a()}e&2&&(l(9),x(" ",n.getTodaysReservationCount()," "),l(10),x(" ",n.maxCapacityValue," "),l(3),x("",n.tables.length," tavoli"),l(),m("ngIf",n.tables.length>0),l(3),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),l(4),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),l(),H(" ",n.todayCapacity," / ",n.maxCapacityValue," "),l(2),x(" ",(n.todayCapacity/n.calculateMaxCapacitySimple()*100||0).toFixed(0),"% "),l(),m("ngIf",n.getAvailableTablesToday()>0),l(),m("ngIf",n.selectedDate),l(3),S(O(39,38,n.viewDate,"MMMM yyyy")),l(4),T("active",n.view===n.CalendarView.Month),l(2),T("active",n.view===n.CalendarView.Week),l(2),T("active",n.view===n.CalendarView.Day),l(13),m("size",20),l(3),m("size",20),l(2),T("loading",n.loading),l(2),m("ngIf",n.view===n.CalendarView.Month),l(),m("ngIf",n.view===n.CalendarView.Week),l(),m("ngIf",n.view===n.CalendarView.Day),l(),m("ngIf",n.showNewReservationModal),l(),m("ngIf",n.showDayDetailsModal),l(),m("ngIf",n.showPersonalAppointmentModal))},dependencies:[oe,te,ne,ie,ae,re,we,ve,he,fe,de,_e,le,ge,ce,me,Ce,ye,xe,ue,pe,De,be],styles:['.calendar-container[_ngcontent-%COMP%]{touch-action:pan-y;transition:opacity .2s ease,transform .2s ease}.calendar-container.swipe-left[_ngcontent-%COMP%]{transform:translate(-10px);opacity:.7}.calendar-container.swipe-right[_ngcontent-%COMP%]{transform:translate(10px);opacity:.7}.calendar-month-view[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.month-weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-2);border-bottom:2px solid var(--primary)}.month-weekday[_ngcontent-%COMP%]{border-right:1px solid var(--smoke-1)}.month-weekday[_ngcontent-%COMP%]:last-child{border-right:none}.month-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);grid-auto-rows:minmax(4rem,1fr);min-height:30rem}.month-day[_ngcontent-%COMP%]{min-height:120px;transition:all .2s ease;cursor:pointer;position:relative;overflow:hidden}.month-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 20%,transparent);z-index:10}.month-day.today[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-color:var(--primary)}.month-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--smoke-1) 10%,transparent);opacity:.6}.month-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--primary);font-weight:900}.day-events-indicator[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:2px 6px;border-radius:10px;color:#fff;min-width:16px;text-align:center;line-height:1}.month-events-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;overflow:hidden;flex:1}.month-event-compact[_ngcontent-%COMP%]{border-left:3px solid;border-radius:4px;cursor:pointer;transition:all .2s ease;font-size:var(--fs-mini);line-height:1.1;margin:0 var(--gap-mini);gap:var(--gap-mini)}.month-event-compact[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px var(--shadow-2)}.event-time-small[_ngcontent-%COMP%]{font-size:var(--fs-mini);padding:1px 3px;border-radius:3px;text-align:center;flex-shrink:0}.event-customer-small[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.more-events-compact[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-radius:3px;cursor:pointer;transition:all .2s ease;margin-top:2px}.more-events-compact[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 15%,transparent)}.calendar-week-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.week-header[_ngcontent-%COMP%]{display:flex;background:var(--smoke-2);border-bottom:2px solid var(--primary);flex-shrink:0}.week-time-column[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);border-right:2px solid var(--primary);flex-shrink:0;display:flex;flex-direction:column}.week-day-header[_ngcontent-%COMP%]{flex:1;padding:var(--gap-sm);text-align:center;font-weight:700;color:var(--text-color);border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:60px}.week-day-header.today[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.week-day-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);text-transform:uppercase;margin-bottom:var(--gap-sm)}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:800}.week-body[_ngcontent-%COMP%]{flex:1;display:flex;overflow-y:auto}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%]{height:60px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:var(--fs-sm);font-weight:600;color:var(--text-color);border-bottom:1px solid var(--smoke-1);position:relative}.week-hour[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;background:var(--smoke-1);z-index:1}.week-day-column[_ngcontent-%COMP%]{flex:1;border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;overflow:hidden}.week-day-column[_ngcontent-%COMP%]:last-child{border-right:none}.week-hour-slot[_ngcontent-%COMP%]{height:60px;flex-shrink:0;border-bottom:1px solid var(--smoke-1);position:relative;padding:2px;cursor:pointer;transition:background .2s ease;background:var(--background)}.week-hour-slot[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.week-hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 15%,transparent)}.week-event[_ngcontent-%COMP%]{position:absolute;left:2px;right:2px;padding:6px 8px;border-radius:6px;color:#fff;font-size:11px;cursor:pointer;z-index:2;transition:all .2s ease;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-shadow:0 2px 4px #0000001a}.week-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px var(--shadow-2);z-index:100}.calendar-day-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.day-header[_ngcontent-%COMP%]{padding:var(--gap-md);text-align:center;background:var(--smoke-2);border-bottom:2px solid var(--primary);border-radius:12px 12px 0 0;flex-shrink:0}.day-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.day-hour[_ngcontent-%COMP%]{display:flex;min-height:60px;border-bottom:1px solid var(--smoke-1);background:var(--background)}.day-hour[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.hour-label[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0;font-size:var(--fs-sm);border-right:2px solid var(--primary)}.hour-slot[_ngcontent-%COMP%]{flex:1;position:relative;padding:4px;cursor:pointer;transition:background .2s ease}.hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 10%,transparent)}.day-event[_ngcontent-%COMP%]{background:var(--gradiente);color:#fff;padding:8px 12px;border-radius:8px;margin:2px 0;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.day-event[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px var(--shadow-2)}.closed-day[_ngcontent-%COMP%]{background-color:var(--shadow-2);color:#c62828}.closed-day[_ngcontent-%COMP%]   .week-day-name[_ngcontent-%COMP%], .closed-day[_ngcontent-%COMP%]   .week-day-number[_ngcontent-%COMP%], .closed-day[_ngcontent-%COMP%]   .month-day[_ngcontent-%COMP%]{color:#c62828}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-direction:column}.month-grid[_ngcontent-%COMP%]{min-height:350px}.month-day[_ngcontent-%COMP%]{min-height:70px}.month-weekday[_ngcontent-%COMP%]{font-size:10px;padding:8px 4px}.month-event-compact[_ngcontent-%COMP%]{font-size:8px}.event-time-small[_ngcontent-%COMP%]{font-size:7px;min-width:24px}.day-events-indicator[_ngcontent-%COMP%]{font-size:8px;padding:1px 4px}.week-time-column[_ngcontent-%COMP%], .hour-label[_ngcontent-%COMP%]{width:60px}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%], .week-hour-slot[_ngcontent-%COMP%], .day-hour[_ngcontent-%COMP%]{height:40px}.week-event[_ngcontent-%COMP%]{font-size:9px;padding:4px}.week-day-header[_ngcontent-%COMP%]{min-height:50px}.week-day-name[_ngcontent-%COMP%]{font-size:10px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}}@media (max-width: 480px){.month-day[_ngcontent-%COMP%]{min-height:60px}.month-event-compact[_ngcontent-%COMP%]{flex-direction:column;gap:1px}.event-customer-small[_ngcontent-%COMP%], .more-events-compact[_ngcontent-%COMP%]{font-size:7px}}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-2);border-radius:4px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}'],changeDetection:0})};export{ke as CalendarView,Pe as ReservationStatus,Te as RestaurantCalendar};
