import{a as fi}from"./chunk-Y4O4RGFI.js";import{a as hi}from"./chunk-6SRTQ6XE.js";import{a as pi}from"./chunk-CBBEHQ7F.js";import{b as ni,d as ii,e as ri,g as ai,h as oi,i as si,j as li,t as di,u as ci,v as ui,x as mi}from"./chunk-XXXLA76A.js";import"./chunk-GS53O7WG.js";import"./chunk-EBEBQMEP.js";import{b as ti,d as _t}from"./chunk-N3KHNVQY.js";import{b as j,c as Ce,e as qn,f as lt,g as ce,h as Kn,k as Zn,m as Jn,n as Qn,o as ei}from"./chunk-I5JNAJO4.js";import{$ as ft,$a as wt,Aa as $n,B as X,C as Fn,Ca as le,D as it,Db as jn,Eb as B,Ga as Yn,Hb as F,I as rt,J as zn,Jb as g,K as In,Ka as vt,L as ue,M as re,Oa as v,Ob as G,P as Hn,Pb as We,Qb as J,R as He,S as An,Ta as M,Tb as S,Ua as be,Ub as ge,V as Wn,Vb as ot,X as at,Ya as xe,Yb as Xe,Z as me,Zb as Ge,_b as Ue,a as N,aa as Gt,ac as Xn,b as Me,ba as pe,bc as ie,c as On,ca as Ln,cb as te,cc as Re,db as ye,dc as Q,eb as he,ec as Ut,fb as yt,fc as qt,g as Te,ga as Ee,gc as Kt,ha as we,hb as ne,hc as Gn,ic as Zt,j as Oe,jc as P,kc as Jt,la as E,lc as se,m as ee,mc as _e,n as ht,nc as Un,o as Rn,ob as fe,oc as de,pb as Bn,qa as D,qb as ae,qc as st,ra as T,rb as oe,sa as Pn,sb as Nn,ta as gt,tb as q,ub as K,v as Vn,vb as k,vc as Qt,wb as m,xb as p,yb as Z,za as Ae}from"./chunk-HCHBVVTJ.js";var en=class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,r){return this.getAllStyles(e)[r]}isStaticPositioned(e){return(this.getStyle(e,"position")||"static")==="static"}offsetParent(e){let r=e.offsetParent||document.documentElement;for(;r&&r!==document.documentElement&&this.isStaticPositioned(r);)r=r.offsetParent;return r||document.documentElement}position(e,r=!0){let t,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(e,"position")==="fixed")t=e.getBoundingClientRect(),t={top:t.top,bottom:t.bottom,left:t.left,right:t.right,height:t.height,width:t.width};else{let a=this.offsetParent(e);t=this.offset(e,!1),a!==document.documentElement&&(i=this.offset(a,!1)),i.top+=a.clientTop,i.left+=a.clientLeft}return t.top-=i.top,t.bottom-=i.top,t.left-=i.left,t.right-=i.left,r&&(t.top=Math.round(t.top),t.bottom=Math.round(t.bottom),t.left=Math.round(t.left),t.right=Math.round(t.right)),t}offset(e,r=!0){let t=e.getBoundingClientRect(),i={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},a={height:t.height||e.offsetHeight,width:t.width||e.offsetWidth,top:t.top+i.top,bottom:t.bottom+i.top,left:t.left+i.left,right:t.right+i.left};return r&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(e,r,t,i){let[a="top",o="center"]=t.split("-"),s=i?this.offset(e,!1):this.position(e,!1),l=this.getAllStyles(r),u=parseFloat(l.marginTop),d=parseFloat(l.marginBottom),h=parseFloat(l.marginLeft),f=parseFloat(l.marginRight),_=0,c=0;switch(a){case"top":_=s.top-(r.offsetHeight+u+d);break;case"bottom":_=s.top+s.height;break;case"left":c=s.left-(r.offsetWidth+h+f);break;case"right":c=s.left+s.width;break}switch(o){case"top":_=s.top;break;case"bottom":_=s.top+s.height-r.offsetHeight;break;case"left":c=s.left;break;case"right":c=s.left+s.width-r.offsetWidth;break;case"center":a==="top"||a==="bottom"?c=s.left+s.width/2-r.offsetWidth/2:_=s.top+s.height/2-r.offsetHeight/2;break}r.style.transform=`translate(${Math.round(c)}px, ${Math.round(_)}px)`;let w=r.getBoundingClientRect(),C=document.documentElement,R=window.innerHeight||C.clientHeight,H=window.innerWidth||C.clientWidth;return w.left>=0&&w.top>=0&&w.right<=H&&w.bottom<=R}},qr=/\s+/,gi=new en;function tn(n,e,r,t,i){let a=Array.isArray(r)?r:r.split(qr),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],s=e.classList,l=_=>{let[c,w]=_.split("-"),C=[];return i&&(C.push(`${i}-${c}`),w&&C.push(`${i}-${c}-${w}`),C.forEach(R=>{s.add(R)})),C};i&&o.forEach(_=>{s.remove(`${i}-${_}`)});let u=a.findIndex(_=>_==="auto");u>=0&&o.forEach(function(_){a.find(c=>c.search("^"+_)!==-1)==null&&a.splice(u++,1,_)});let d=e.style;d.position="absolute",d.top="0",d.left="0",d["will-change"]="transform";let h,f=!1;for(h of a){let _=l(h);if(gi.positionElements(n,e,h,t)){f=!0;break}i&&_.forEach(c=>{s.remove(c)})}return f||(h=a[0],l(h),gi.positionElements(n,e,h,t)),h}var Tt=(function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n})(Tt||{}),Kr=[Tt.SUNDAY,Tt.SATURDAY],nn=7,rn=24,Ct=60,Ve=3600*24;function vi(n,{startDate:e,seconds:r,excluded:t,precision:i}){if(t.length<1)return 0;let{addSeconds:a,getDay:o,addDays:s}=n,l=a(e,r-1),u=o(e),d=o(l),h=0,f=e;for(;f<l;){let _=o(f);t.some(c=>c===_)&&(h+=Zr(n,{dayStart:u,dayEnd:d,day:_,precision:i,startDate:e,endDate:l})),f=s(f,1)}return h}function Zr(n,{precision:e,day:r,dayStart:t,dayEnd:i,startDate:a,endDate:o}){let{differenceInSeconds:s,endOfDay:l,startOfDay:u}=n;if(e==="minutes"){if(r===t)return s(l(a),a)+1;if(r===i)return s(o,u(o))+1}return Ve}function Jr(n,{event:e,offset:r,startOfWeekDate:t,excluded:i,precision:a,totalDaysInView:o}){let{max:s,differenceInSeconds:l,addDays:u,endOfDay:d,differenceInDays:h}=n,f=Ve,_=s([e.start,t]);if(e.end)switch(a){case"minutes":f=l(e.end,_);break;default:f=h(u(d(e.end),1),_)*Ve;break}let c=r*Ve,w=c+f,C=o*Ve;return w>C&&(f=C-c),f-=vi(n,{startDate:_,seconds:f,excluded:i,precision:a}),f/Ve}function Qr(n,{event:e,startOfWeek:r,excluded:t,precision:i}){let{differenceInDays:a,startOfDay:o,differenceInSeconds:s}=n;if(e.start<r)return 0;let l=0;switch(i){case"days":l=a(o(e.start),r)*Ve;break;case"minutes":l=s(e.start,r);break}return l-=vi(n,{startDate:r,seconds:l,excluded:t,precision:i}),Math.abs(l/Ve)}function ea(n,{event:e,periodStart:r,periodEnd:t}){let{isSameSecond:i}=n,a=e.start,o=e.end||e.start;return!!(a>r&&a<t||o>r&&o<t||a<r&&o>t||i(a,r)||i(a,t)||i(o,r)||i(o,t))}function dt(n,{events:e,periodStart:r,periodEnd:t}){return e.filter(i=>ea(n,{event:i,periodStart:r,periodEnd:t}))}function wi(n,{date:e,weekendDays:r=Kr}){let{startOfDay:t,isSameDay:i,getDay:a}=n,o=t(new Date),s=a(e);return{date:e,day:s,isPast:e<o,isToday:i(e,o),isFuture:e>o,isWeekend:r.indexOf(s)>-1}}function xt(n,{viewDate:e,weekStartsOn:r,excluded:t=[],weekendDays:i,viewStart:a=n.startOfWeek(e,{weekStartsOn:r}),viewEnd:o=n.addDays(a,nn)}){let{addDays:s,getDay:l}=n,u=[],d=a;for(;d<o;)t.some(h=>l(d)===h)||u.push(wi(n,{date:d,weekendDays:i})),d=s(d,1);return u}function ta(n,{date1:e,date2:r,excluded:t}){let i=e,a=0;for(;i<r;)t.indexOf(n.getDay(i))===-1&&a++,i=n.addDays(i,1);return a}function na(n,{events:e=[],excluded:r=[],precision:t="days",absolutePositionedEvents:i=!1,viewStart:a,viewEnd:o}){a=n.startOfDay(a),o=n.endOfDay(o);let{differenceInSeconds:s,differenceInDays:l}=n,u=ta(n,{date1:a,date2:o,excluded:r}),d=l(o,a)+1,h=e.filter(c=>c.allDay).map(c=>{let w=Qr(n,{event:c,startOfWeek:a,excluded:r,precision:t}),C=Jr(n,{event:c,offset:w,startOfWeekDate:a,excluded:r,precision:t,totalDaysInView:d});return{event:c,offset:w,span:C}}).filter(c=>c.offset<u).filter(c=>c.span>0).map(c=>({event:c.event,offset:c.offset,span:c.span,startsBeforeWeek:c.event.start<a,endsAfterWeek:(c.event.end||c.event.start)>o})).sort((c,w)=>{let C=s(c.event.start,w.event.start);return C===0?s(w.event.end||w.event.start,c.event.end||c.event.start):C}),f=[],_=[];return h.forEach((c,w)=>{if(_.indexOf(c)===-1){_.push(c);let C=c.span+c.offset,R=h.slice(w+1).filter(z=>{if(z.offset>=C&&C+z.span<=d&&_.indexOf(z)===-1){let V=z.offset-C;return i||(z.offset=V),C+=z.span+V,_.push(z),!0}}),H=[c,...R],I=H.filter(z=>z.event.id).map(z=>z.event.id).join("-");f.push(Object.assign({row:H},I?{id:I}:{}))}}),f}function ia(n,{events:e,viewDate:r,hourSegments:t,hourDuration:i,dayStart:a,dayEnd:o,weekStartsOn:s,excluded:l,weekendDays:u,segmentHeight:d,viewStart:h,viewEnd:f,minimumEventHeight:_}){let c=aa(n,{viewDate:r,hourSegments:t,hourDuration:i,dayStart:a,dayEnd:o}),w=xt(n,{viewDate:r,weekStartsOn:s,excluded:l,weekendDays:u,viewStart:h,viewEnd:f}),{setHours:C,setMinutes:R,getHours:H,getMinutes:I}=n;return w.map(z=>{let V=ra(n,{events:e,viewDate:z.date,hourSegments:t,dayStart:a,dayEnd:o,segmentHeight:d,eventWidth:1,hourDuration:i,minimumEventHeight:_}),U=c.map(O=>{let A=O.segments.map(y=>{let b=R(C(z.date,H(y.date)),I(y.date));return Object.assign(Object.assign({},y),{date:b})});return Object.assign(Object.assign({},O),{segments:A})});function W(O,A){let y=Math.max(...A.map(L=>L.left+1)),b=O.filter(L=>L.left>=y).filter(L=>Dt(A,L.top,L.top+L.height).length>0);return b.length>0?W(O,b):y}let Y=V.events.map(O=>{let y=100/W(V.events,Dt(V.events,O.top,O.top+O.height));return Object.assign(Object.assign({},O),{left:O.left*y,width:y})});return{hours:U,date:z.date,events:Y.map(O=>{let A=Dt(Y.filter(y=>y.left>O.left),O.top,O.top+O.height);return A.length>0?Object.assign(Object.assign({},O),{width:Math.min(...A.map(y=>y.left))-O.left}):O})}})}function yi(n,{events:e=[],viewDate:r,weekStartsOn:t,excluded:i=[],precision:a="days",absolutePositionedEvents:o=!1,hourSegments:s,hourDuration:l,dayStart:u,dayEnd:d,weekendDays:h,segmentHeight:f,minimumEventHeight:_,viewStart:c=n.startOfWeek(r,{weekStartsOn:t}),viewEnd:w=n.endOfWeek(r,{weekStartsOn:t})}){e||(e=[]);let{startOfDay:C,endOfDay:R}=n;c=C(c),w=R(w);let H=dt(n,{events:e,periodStart:c,periodEnd:w}),I=xt(n,{viewDate:r,weekStartsOn:t,excluded:i,weekendDays:h,viewStart:c,viewEnd:w});return{allDayEventRows:na(n,{events:H,excluded:i,precision:a,absolutePositionedEvents:o,viewStart:c,viewEnd:w}),period:{events:H,start:I[0].date,end:R(I[I.length-1].date)},hourColumns:ia(n,{events:e,viewDate:r,hourSegments:s,hourDuration:l,dayStart:u,dayEnd:d,weekStartsOn:t,excluded:i,weekendDays:h,segmentHeight:f,viewStart:c,viewEnd:w,minimumEventHeight:_})}}function _i(n,{events:e=[],viewDate:r,weekStartsOn:t,excluded:i=[],viewStart:a=n.startOfMonth(r),viewEnd:o=n.endOfMonth(r),weekendDays:s}){e||(e=[]);let{startOfWeek:l,endOfWeek:u,differenceInDays:d,startOfDay:h,addHours:f,endOfDay:_,isSameMonth:c,getDay:w}=n,C=l(a,{weekStartsOn:t}),R=u(o,{weekStartsOn:t}),H=dt(n,{events:e,periodStart:C,periodEnd:R}),I=[],z;for(let O=0;O<d(R,C)+1;O++){let A;if(z?(A=h(f(z,rn)),z.getTime()===A.getTime()&&(A=h(f(z,rn+1))),z=A):A=z=C,!i.some(y=>w(A)===y)){let y=wi(n,{date:A,weekendDays:s}),b=dt(n,{events:H,periodStart:h(A),periodEnd:_(A)});y.inMonth=c(A,r),y.events=b,y.badgeTotal=b.length,I.push(y)}}let V=[],U=nn-i.length;if(U<nn)for(let O=0;O<I.length;O+=U){let A=I.slice(O,O+U);A.some(b=>a<=b.date&&b.date<o)&&(V=[...V,...A])}else V=I;let W=Math.floor(V.length/U),Y=[];for(let O=0;O<W;O++)Y.push(O*U);return{rowOffsets:Y,totalDaysVisibleInWeek:U,days:V,period:{start:V[0].date,end:_(V[V.length-1].date),events:H}}}function Dt(n,e,r){return n.filter(t=>{let i=t.top,a=t.top+t.height;return e<a&&a<r||e<i&&i<r?!0:i<=e&&r<=a})}function ra(n,{events:e,viewDate:r,hourSegments:t,dayStart:i,dayEnd:a,eventWidth:o,segmentHeight:s,hourDuration:l,minimumEventHeight:u}){let{setMinutes:d,setHours:h,startOfDay:f,startOfMinute:_,endOfDay:c,differenceInMinutes:w}=n,C=d(h(f(r),Et(i.hour)),bt(i.minute)),R=d(h(_(c(r)),Et(a.hour)),bt(a.minute));R.setSeconds(59,999);let H=[],I=dt(n,{events:e.filter(W=>!W.allDay),periodStart:C,periodEnd:R}),z=I.sort((W,Y)=>W.start.valueOf()-Y.start.valueOf()).map(W=>{let Y=W.start,O=W.end||Y,A=Y<C,y=O>R,b=t*s/(l||Ct),L=0;if(Y>C){let Xt=n.getTimezoneOffset(Y),Ur=n.getTimezoneOffset(C)-Xt;L+=w(Y,C)+Ur}L*=b,L=Math.floor(L);let ve=A?C:Y,kn=y?R:O,jr=n.getTimezoneOffset(ve)-n.getTimezoneOffset(kn),ke=w(kn,ve)+jr;W.end?ke*=b:ke=s,u&&ke<u&&(ke=u),ke=Math.floor(ke);let Xr=L+ke,Gr=Dt(H,L,Xr),jt=0;for(;Gr.some(Xt=>Xt.left===jt);)jt+=o;let Mn={event:W,height:ke,width:o,top:L,left:jt,startsBeforeDay:A,endsAfterDay:y};return H.push(Mn),Mn}),V=Math.max(...z.map(W=>W.left+W.width)),U=dt(n,{events:e.filter(W=>W.allDay),periodStart:f(C),periodEnd:c(R)});return{events:z,width:V,allDayEvents:U,period:{events:I,start:C,end:R}}}function Et(n){return Math.max(Math.min(23,n),0)}function bt(n){return Math.max(Math.min(59,n),0)}function aa(n,{viewDate:e,hourSegments:r,hourDuration:t,dayStart:i,dayEnd:a}){let{setMinutes:o,setHours:s,startOfDay:l,startOfMinute:u,endOfDay:d,addMinutes:h,addDays:f}=n,_=[],c=o(s(l(e),Et(i.hour)),bt(i.minute)),w=o(s(u(d(e)),Et(a.hour)),bt(a.minute)),C=(t||Ct)/r,R=l(e),H=d(e),I=V=>V;n.getTimezoneOffset(R)!==n.getTimezoneOffset(H)&&(R=f(R,1),c=f(c,1),w=f(w,1),I=V=>f(V,-1));let z=t?rn*60/t:Ct;for(let V=0;V<z;V++){let U=[];for(let W=0;W<r;W++){let Y=h(h(c,V*(t||Ct)),W*C);Y>=c&&Y<w&&U.push({date:I(Y),displayDate:Y,isStart:W===0})}U.length>0&&_.push({segments:U})}return _}var qe=(function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n})(qe||{});function Ci(n,e){let r=!0;function t(i,a){e(i,a),r=!1}return Array.isArray(n)?(n.forEach(i=>{i.start?i.start instanceof Date||t(qe.StartPropertyNotDate,i):t(qe.StartPropertyMissing,i),i.end&&(i.end instanceof Date||t(qe.EndPropertyNotDate,i),i.start>i.end&&t(qe.EndsBeforeStart,i))}),r):(e(qe.NotArray,n),!1)}function oa(n,e){return typeof n>"u"?typeof e>"u"?n:e:n}function ln(n,e){return n=oa(n,e),typeof n=="function"?function(){for(var t=arguments,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=t[o];return!!n.apply(this,a)}:n?function(){return!0}:function(){return!1}}var an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol?"symbol":typeof n},Ti=function(n){return n!=null&&(typeof n>"u"?"undefined":an(n))==="object"&&n.nodeType===1&&an(n.style)==="object"&&an(n.ownerDocument)==="object"};function Ei(n,e){if(e=un(e,!0),!Ti(e))return-1;for(var r=0;r<n.length;r++)if(n[r]===e)return r;return-1}function dn(n,e){return Ei(n,e)!==-1}function sa(n,e){for(var r=0;r<e.length;r++)dn(n,e[r])||n.push(e[r]);return e}function la(n){for(var e=arguments,r=[],t=arguments.length-1;t-- >0;)r[t]=e[t+1];return r=r.map(un),sa(n,r)}function da(n){for(var e=arguments,r=[],t=arguments.length-1;t-- >0;)r[t]=e[t+1];return r.map(un).reduce(function(i,a){var o=Ei(n,a);return o!==-1?i.concat(n.splice(o,1)):i},[])}function un(n,e){if(typeof n=="string")try{return document.querySelector(n)}catch(r){throw r}if(!Ti(n)&&!e)throw new TypeError(n+" is not a DOM element.");return n}function ca(n,e){e=e||{};var r=ln(e.allowUpdate,!0);return function(i){if(i=i||window.event,n.target=i.target||i.srcElement||i.originalTarget,n.element=this,n.type=i.type,!!r(i)){if(i.targetTouches)n.x=i.targetTouches[0].clientX,n.y=i.targetTouches[0].clientY,n.pageX=i.targetTouches[0].pageX,n.pageY=i.targetTouches[0].pageY,n.screenX=i.targetTouches[0].screenX,n.screenY=i.targetTouches[0].screenY;else{if(i.pageX===null&&i.clientX!==null){var a=i.target&&i.target.ownerDocument||document,o=a.documentElement,s=a.body;n.pageX=i.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),n.pageY=i.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}else n.pageX=i.pageX,n.pageY=i.pageY;n.x=i.clientX,n.y=i.clientY,n.screenX=i.screenX,n.screenY=i.screenY}n.clientX=n.x,n.clientY=n.y}}}function ua(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var e={};return Object.defineProperties(e,n),e}function bi(n){if(n===window)return ua();try{var e=n.getBoundingClientRect();return e.x===void 0&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}function ma(n,e){var r=bi(e);return n.y>r.top&&n.y<r.bottom&&n.x>r.left&&n.x<r.right}var cn=void 0;typeof Object.create!="function"?cn=(function(n){var e=function(){};return function(r,t){if(r!==Object(r)&&r!==null)throw TypeError("Argument must be an object, or null");e.prototype=r||{};var i=new e;return e.prototype=null,t!==n&&Object.defineProperties(i,t),r===null&&(i.__proto__=null),i}})():cn=Object.create;var pa=cn,Le=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function ha(n){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};n!==void 0&&n.addEventListener("mousemove",r);function r(a){for(var o=0;o<Le.length;o++)e[Le[o]]=a[Le[o]]}var t=(function(){if(MouseEvent)return function(o,s,l){var u=new MouseEvent("mousemove",on(e,s));return sn(u,l),o.dispatchEvent(u)};if(typeof document.createEvent=="function")return function(o,s,l){var u=on(e,s),d=document.createEvent("MouseEvents");return d.initMouseEvent("mousemove",!0,!0,window,0,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget),sn(d,l),o.dispatchEvent(d)};if(typeof document.createEventObject=="function")return function(o,s,l){var u=document.createEventObject(),d=on(e,s);for(var h in d)u[h]=d[h];return sn(u,l),o.dispatchEvent(u)}})();function i(){n&&n.removeEventListener("mousemove",r,!1),e=null}return{destroy:i,dispatch:t}}function on(n,e){e=e||{};for(var r=pa(n),t=0;t<Le.length;t++)e[Le[t]]!==void 0&&(r[Le[t]]=e[Le[t]]);return r}function sn(n,e){console.log("data ",e),n.data=e||{},n.dispatched="mousemove"}var ut=["webkit","moz","ms","o"],ct=(function(){if(typeof window>"u")return function(){};for(var n=0,e=ut.length;n<e&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[ut[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var i=new Date().getTime(),a=Math.max(0,16-i-r),o=window.setTimeout(function(){return t(i+a)},a);return r=i+a,o}}return window.requestAnimationFrame.bind(window)})(),Ke=(function(){if(typeof window>"u")return function(){};for(var n=0,e=ut.length;n<e&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[ut[n]+"CancelAnimationFrame"]||window[ut[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){window.clearTimeout(r)}),window.cancelAnimationFrame.bind(window)})();function fa(n,e){e===void 0&&(e={});var r=this,t=4,i=!1;if(typeof e.margin!="object"){var a=e.margin||-1;this.margin={left:a,right:a,top:a,bottom:a}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},s=ca(o),l=ha(),u=!1;window.addEventListener("mousemove",s,!1),window.addEventListener("touchmove",s,!1),isNaN(e.maxSpeed)||(t=e.maxSpeed),typeof t!="object"&&(t={left:t,right:t,top:t,bottom:t}),this.autoScroll=ln(e.autoScroll),this.syncMove=ln(e.syncMove,!1),this.destroy=function(y){window.removeEventListener("mousemove",s,!1),window.removeEventListener("touchmove",s,!1),window.removeEventListener("mousedown",w,!1),window.removeEventListener("touchstart",w,!1),window.removeEventListener("mouseup",C,!1),window.removeEventListener("touchend",C,!1),window.removeEventListener("pointerup",C,!1),window.removeEventListener("mouseleave",H,!1),window.removeEventListener("mousemove",V,!1),window.removeEventListener("touchmove",V,!1),window.removeEventListener("scroll",c,!0),n=[],y&&R()},this.add=function(){for(var y=[],b=arguments.length;b--;)y[b]=arguments[b];return la.apply(void 0,[n].concat(y)),this},this.remove=function(){for(var y=[],b=arguments.length;b--;)y[b]=arguments[b];return da.apply(void 0,[n].concat(y))};var d=null,h;Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]),(function(y){n=[],y.forEach(function(b){b===window?d=window:r.add(b)})})(n),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return t}},point:{get:function(){return o}},scrolling:{get:function(){return i}}});var f=null,_;window.addEventListener("mousedown",w,!1),window.addEventListener("touchstart",w,!1),window.addEventListener("mouseup",C,!1),window.addEventListener("touchend",C,!1),window.addEventListener("pointerup",C,!1),window.addEventListener("mousemove",V,!1),window.addEventListener("touchmove",V,!1),window.addEventListener("mouseleave",H,!1),window.addEventListener("scroll",c,!0);function c(y){for(var b=0;b<n.length;b++)if(n[b]===y.target){i=!0;break}i&&ct(function(){return i=!1})}function w(){u=!0}function C(){u=!1,R()}function R(){Ke(_),Ke(h)}function H(){u=!1}function I(y){if(!y)return null;if(f===y||dn(n,y))return y;for(;y=y.parentNode;)if(dn(n,y))return y;return null}function z(){for(var y=null,b=0;b<n.length;b++)Di(o,n[b])&&(y=n[b]);return y}function V(y){if(r.autoScroll()&&!y.dispatched){var b=y.target,L=document.body;f&&!Di(o,f)&&(r.scrollWhenOutside||(f=null)),b&&b.parentNode===L?b=z():(b=I(b),b||(b=z())),b&&b!==f&&(f=b),d&&(Ke(h),h=ct(U)),f&&(Ke(_),_=ct(W))}}function U(){Y(d),Ke(h),h=ct(U)}function W(){f&&(Y(f),Ke(_),_=ct(W))}function Y(y){var b=bi(y),L,ve;o.x<b.left+r.margin.left?L=Math.floor(Math.max(-1,(o.x-b.left)/r.margin.left-1)*r.maxSpeed.left):o.x>b.right-r.margin.right?L=Math.ceil(Math.min(1,(o.x-b.right)/r.margin.right+1)*r.maxSpeed.right):L=0,o.y<b.top+r.margin.top?ve=Math.floor(Math.max(-1,(o.y-b.top)/r.margin.top-1)*r.maxSpeed.top):o.y>b.bottom-r.margin.bottom?ve=Math.ceil(Math.min(1,(o.y-b.bottom)/r.margin.bottom+1)*r.maxSpeed.bottom):ve=0,r.syncMove()&&l.dispatch(y,{pageX:o.pageX+L,pageY:o.pageY+ve,clientX:o.x+L,clientY:o.y+ve}),setTimeout(function(){ve&&O(y,ve),L&&A(y,L)})}function O(y,b){y===window?window.scrollTo(y.pageXOffset,y.pageYOffset+b):y.scrollTop+=b}function A(y,b){y===window?window.scrollTo(y.pageXOffset+b,y.pageYOffset):y.scrollLeft+=b}}function ga(n,e){return new fa(n,e)}function Di(n,e,r){return r?n.y>r.top&&n.y<r.bottom&&n.x>r.left&&n.x<r.right:ma(n,e)}var xi=ga;var ki=(()=>{let e=class e{constructor(){this.currentDrag=new ee}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Mi=(()=>{let e=class e{constructor(){this.elementRef=E(le)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlDraggableScrollContainer",""]]});let n=e;return n})();function mn(n,e,r){r&&r.split(" ").forEach(t=>n.addClass(e.nativeElement,t))}function St(n,e,r){r&&r.split(" ").forEach(t=>n.removeClass(e.nativeElement,t))}var Mt=(()=>{let e=class e{constructor(){this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new M,this.dragStart=new M,this.ghostElementCreated=new M,this.dragging=new M,this.dragEnd=new M,this.pointerDown$=new ee,this.pointerMove$=new ee,this.pointerUp$=new ee,this.eventListenerSubscriptions={},this.destroy$=new ee,this.timeLongPress={timerBegin:0,timerEnd:0},this.element=E(le),this.renderer=E(xe),this.draggableHelper=E(ki),this.zone=E(be),this.vcr=E(wt),this.scrollContainer=E(Mi,{optional:!0}),this.document=E(gt)}ngOnInit(){this.checkEventListeners();let t=this.pointerDown$.pipe(re(()=>this.canDrag()),it(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();let a=this.renderer.createElement("style");this.renderer.setAttribute(a,"type","text/css"),this.renderer.appendChild(a,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(a)});let o=this.getScrollPosition(),s=new Oe(c=>{let w=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(w,"scroll",C=>c.next(C))}).pipe(ft(o),X(()=>this.getScrollPosition())),l=new ee,u=new Rn;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let d=ue(this.pointerUp$,this.pointerDown$,u,this.destroy$).pipe(me()),h=Fn([this.pointerMove$,s]).pipe(X(([c,w])=>({currentDrag$:l,transformX:c.clientX-i.clientX,transformY:c.clientY-i.clientY,clientX:c.clientX,clientY:c.clientY,scrollLeft:w.left,scrollTop:w.top,target:c.event.target})),X(c=>(this.dragSnapGrid.x&&(c.transformX=Math.round(c.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(c.transformY=Math.round(c.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),c)),X(c=>(this.dragAxis.x||(c.transformX=0),this.dragAxis.y||(c.transformY=0),c)),X(c=>{let w=c.scrollLeft-o.left,C=c.scrollTop-o.top;return Me(N({},c),{x:c.transformX+w,y:c.transformY+C})}),re(({x:c,y:w,transformX:C,transformY:R})=>!this.validateDrag||this.validateDrag({x:c,y:w,transform:{x:C,y:R}})),pe(d),me()),f=h.pipe(He(1),me()),_=h.pipe(Wn(1),me());return f.subscribe(({clientX:c,clientY:w,x:C,y:R})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:u})}),this.scroller=xi([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],Me(N({},this.autoScroll),{autoScroll(){return!0}})),mn(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let H=this.element.nativeElement.getBoundingClientRect(),I=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(I):this.element.nativeElement.parentNode.insertBefore(I,this.element.nativeElement.nextSibling),this.ghostElement=I,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(I,{position:"fixed",top:`${H.top}px`,left:`${H.left}px`,width:`${H.width}px`,height:`${H.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let z=this.vcr.createEmbeddedView(this.ghostElementTemplate);I.innerHTML="",z.rootNodes.filter(V=>V instanceof Node).forEach(V=>{I.appendChild(V)}),_.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(z))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:c-C,clientY:w-R,element:I})}),_.subscribe(()=>{I.parentElement.removeChild(I),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(l)}),_.pipe(it(c=>{let w=u.pipe(Hn(),He(1),X(C=>Me(N({},c),{dragCancelled:C>0})));return u.complete(),w})).subscribe(({x:c,y:w,dragCancelled:C})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:c,y:w,dragCancelled:C})}),St(this.renderer,this.element,this.dragActiveClass),l.complete()}),ue(d,_).pipe(He(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(a)})}),h}),me());ue(t.pipe(He(1),X(i=>[,i])),t.pipe(at())).pipe(re(([i,a])=>i?i.x!==a.x||i.y!==a.y:!0),X(([i,a])=>a)).subscribe(({x:i,y:a,currentDrag$:o,clientX:s,clientY:l,transformX:u,transformY:d,target:h})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:a})}),requestAnimationFrame(()=>{if(this.ghostElement){let f=`translate3d(${u}px, ${d}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:f,"-webkit-transform":f,"-ms-transform":f,"-moz-transform":f,"-o-transform":f})}}),o.next({clientX:s,clientY:l,dropData:this.dropData,target:h})})}ngOnChanges(t){t.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let t=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;t&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",a=>{this.onMouseDown(a)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",a=>{this.onMouseUp(a)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",a=>{this.onTouchStart(a)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",a=>{this.onTouchEnd(a)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",a=>{this.onTouchEnd(a)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!t&&i&&this.unsubscribeEventListeners()}onMouseDown(t){t.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onMouseUp(t){t.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onTouchStart(t){let i,a,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),a=!1,o=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let s=rt(this.document,"contextmenu").subscribe(u=>{u.preventDefault()}),l=rt(this.document,"touchmove",{passive:!1}).subscribe(u=>{this.touchStartLongPress&&!a&&o&&(a=this.shouldBeginDrag(t,u,i)),(!this.touchStartLongPress||!o||a)&&(u.preventDefault(),this.pointerMove$.next({event:u,clientX:u.targetTouches[0].clientX,clientY:u.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{s.unsubscribe(),l.unsubscribe()}}this.pointerDown$.next({event:t,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY})}onTouchEnd(t){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:t,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(t){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",t)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(t=>{this.eventListenerSubscriptions[t](),delete this.eventListenerSubscriptions[t]})}setElementStyles(t,i){Object.keys(i).forEach(a=>{this.renderer.setStyle(t,a,i[a])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(t,i,a){let o=this.getScrollPosition(),s={top:Math.abs(o.top-a.top),left:Math.abs(o.left-a.left)},l=Math.abs(i.targetTouches[0].clientX-t.touches[0].clientX)-s.left,u=Math.abs(i.targetTouches[0].clientY-t.touches[0].clientY)-s.top,d=l+u,h=this.touchStartLongPress;return(d>h.delta||s.top>0||s.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=h.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let t=this.getScrollElement(),i=t.scrollWidth>t.clientWidth,a=t.scrollHeight>t.clientHeight;return i||a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Ae]});let n=e;return n})();function Si(n,e,r){return n>=r.left&&n<=r.right&&e>=r.top&&e<=r.bottom}var Ot=(()=>{let e=class e{constructor(){this.dragEnter=new M,this.dragLeave=new M,this.dragOver=new M,this.drop=new M,this.element=E(le),this.draggableHelper=E(ki),this.zone=E(be),this.renderer=E(xe),this.scrollContainer=E(Mi,{optional:!0})}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(t=>{mn(this.renderer,this.element,this.dragActiveClass);let i={updateCache:!0},a=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0}),o,s=t.pipe(X(({clientX:d,clientY:h,dropData:f,target:_})=>{o={clientX:d,clientY:h,dropData:f,target:_},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);let c=Si(d,h,i.rect),w=!this.validateDrop||this.validateDrop({clientX:d,clientY:h,target:_,dropData:f});return i.scrollContainerRect?c&&w&&Si(d,h,i.scrollContainerRect):c&&w})),l=s.pipe(An()),u;l.pipe(re(d=>d)).subscribe(()=>{u=!0,mn(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),s.pipe(re(d=>d)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),l.pipe(at(),re(([d,h])=>d&&!h)).subscribe(()=>{u=!1,St(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),t.subscribe({complete:()=>{a(),St(this.renderer,this.element,this.dragActiveClass),u&&(St(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}});let n=e;return n})(),mt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({});let n=e;return n})();var Pe=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function va(n){let e=n.cloneNode(!0),r=e.querySelectorAll("[id]"),t=n.nodeName.toLowerCase();return e.removeAttribute("id"),r.forEach(i=>{i.removeAttribute("id")}),t==="canvas"?Vi(n,e):(t==="input"||t==="select"||t==="textarea")&&Ri(n,e),Oi("canvas",n,e,Vi),Oi("input, textarea, select",n,e,Ri),e}function Oi(n,e,r,t){let i=e.querySelectorAll(n);if(i.length){let a=r.querySelectorAll(n);for(let o=0;o<i.length;o++)t(i[o],a[o])}}var wa=0;function Ri(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${wa++}`)}function Vi(n,e){let r=e.getContext("2d");if(r)try{r.drawImage(n,0,0)}catch{}}function Fi(n,e,r,t){let i={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return e.top&&(i.top+=t),e.bottom&&(i.bottom+=t),e.left&&(i.left+=r),e.right&&(i.right+=r),i.height=i.bottom-i.top,i.width=i.right-i.left,i}function ya(n,e){let r=0,t=0,i=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(s=>i[s]).find(s=>!!s);if(o&&o.includes("translate")&&(r=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),t=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),e==="absolute")return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-t,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-t,left:n.nativeElement.offsetLeft-r,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-r};{let s=n.nativeElement.getBoundingClientRect();return{height:s.height,width:s.width,top:s.top-t,bottom:s.bottom-t,left:s.left-r,right:s.right-r,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}var zi=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function Ii(n,e){return n.left&&n.top?e.topLeft:n.right&&n.top?e.topRight:n.left&&n.bottom?e.bottomLeft:n.right&&n.bottom?e.bottomRight:n.left||n.right?e.leftOrRight:n.top||n.bottom?e.topOrBottom:""}function Rt({edges:n,initialRectangle:e,newRectangle:r}){let t={};return Object.keys(n).forEach(i=>{t[i]=(r[i]||0)-(e[i]||0)}),t}var Hi="resize-active",_a="resize-ghost-element",Ca=50,hn=(()=>{let e=class e{constructor(){this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=zi,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=Ca,this.resizeStart=new M,this.resizing=new M,this.resizeEnd=new M,this.mouseup=new ee,this.mousedown=new ee,this.mousemove=new ee,this.destroy$=new ee,this.platformId=E(Yn),this.renderer=E(xe),this.elm=E(le),this.zone=E(be),this.pointerEventListeners=pn.getInstance(this.renderer,this.zone)}ngOnInit(){let t=ue(this.pointerEventListeners.pointerDown,this.mousedown),i=ue(this.pointerEventListeners.pointerMove,this.mousemove).pipe(Ln(({event:d})=>{o&&d.cancelable&&d.preventDefault()}),me()),a=ue(this.pointerEventListeners.pointerUp,this.mouseup),o,s=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},l=()=>N(N({},zi),this.resizeCursors);t.pipe(it(d=>{function h(c){return{clientX:c.clientX-d.clientX,clientY:c.clientY-d.clientY}}let f=()=>{let c={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?c.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(c.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?c.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(c.y=+this.resizeSnapGrid.bottom)),c};function _(c,w){return{x:Math.ceil(c.clientX/w.x),y:Math.ceil(c.clientY/w.y)}}return ue(i.pipe(He(1)).pipe(X(c=>[,c])),i.pipe(at())).pipe(X(([c,w])=>[c&&h(c),h(w)])).pipe(re(([c,w])=>{if(!c)return!0;let C=f(),R=_(c,C),H=_(w,C);return R.x!==H.x||R.y!==H.y})).pipe(X(([,c])=>{let w=f();return{clientX:Math.round(c.clientX/w.x)*w.x,clientY:Math.round(c.clientY/w.y)*w.y}})).pipe(pe(ue(a,t)))})).pipe(re(()=>!!o)).pipe(X(({clientX:d,clientY:h})=>Fi(o.startingRect,o.edges,d,h))).pipe(re(d=>this.allowNegativeResizes||!!(d.height&&d.width&&d.height>0&&d.width>0))).pipe(re(d=>this.validateResize?this.validateResize({rectangle:d,edges:Rt({edges:o.edges,initialRectangle:o.startingRect,newRectangle:d})}):!0),pe(this.destroy$)).subscribe(d=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",`${d.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${d.width}px`),this.renderer.setStyle(o.clonedNode,"top",`${d.top}px`),this.renderer.setStyle(o.clonedNode,"left",`${d.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:Rt({edges:o.edges,initialRectangle:o.startingRect,newRectangle:d}),rectangle:d})}),o.currentRect=d}),t.pipe(X(({edges:d})=>d||{}),re(d=>Object.keys(d).length>0),pe(this.destroy$)).subscribe(d=>{o&&s();let h=ya(this.elm,this.ghostElementPositioning);o={edges:d,startingRect:h,currentRect:h};let f=l(),_=Ii(o.edges,f);this.renderer.setStyle(document.body,"cursor",_),this.setElementClass(this.elm,Hi,!0),this.enableGhostResize&&(o.clonedNode=va(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",`${o.startingRect.left}px`),this.renderer.setStyle(o.clonedNode,"top",`${o.startingRect.top}px`),this.renderer.setStyle(o.clonedNode,"height",`${o.startingRect.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${o.startingRect.width}px`),this.renderer.setStyle(o.clonedNode,"cursor",Ii(o.edges,f)),this.renderer.addClass(o.clonedNode,_a),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:Rt({edges:d,initialRectangle:h,newRectangle:h}),rectangle:Fi(h,{},0,0)})})}),a.pipe(pe(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,Hi),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:Rt({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),s(),o=null)})}ngOnDestroy(){ei(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(t,i,a){a?this.renderer.addClass(t.nativeElement,i):this.renderer.removeClass(t.nativeElement,i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]});let n=e;return n})(),pn=class n{static getInstance(e,r){return n.instance||(n.instance=new n(e,r)),n.instance}constructor(e,r){this.pointerDown=new Oe(t=>{let i,a;return r.runOutsideAngular(()=>{i=e.listen("document","mousedown",o=>{t.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Pe&&(a=e.listen("document","touchstart",o=>{t.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{i(),Pe&&a()}}).pipe(me()),this.pointerMove=new Oe(t=>{let i,a;return r.runOutsideAngular(()=>{i=e.listen("document","mousemove",o=>{t.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Pe&&(a=e.listen("document","touchmove",o=>{t.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{i(),Pe&&a()}}).pipe(me()),this.pointerUp=new Oe(t=>{let i,a,o;return r.runOutsideAngular(()=>{i=e.listen("document","mouseup",s=>{t.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Pe&&(a=e.listen("document","touchend",s=>{t.next({clientX:s.changedTouches[0].clientX,clientY:s.changedTouches[0].clientY,event:s})}),o=e.listen("document","touchcancel",s=>{t.next({clientX:s.changedTouches[0].clientX,clientY:s.changedTouches[0].clientY,event:s})}))}),()=>{i(),Pe&&(a(),o())}}).pipe(me())}},Ai=(()=>{let e=class e{constructor(){this.renderer=E(xe),this.element=E(le),this.zone=E(be),this.resizableDirective=E(hn,{optional:!0}),this.resizeEdges={},this.eventListeners={},this.destroy$=new ee}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(t=>{this.onMousedown(t,t.clientX,t.clientY)}),this.listenOnTheHost("mouseup").subscribe(t=>{this.onMouseup(t.clientX,t.clientY)}),Pe&&(this.listenOnTheHost("touchstart").subscribe(t=>{this.onMousedown(t,t.touches[0].clientX,t.touches[0].clientY)}),ue(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(t=>{this.onMouseup(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(t,i,a){t.cancelable&&t.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",o=>{this.onMousemove(o,o.targetTouches[0].clientX,o.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",o=>{this.onMousemove(o,o.clientX,o.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:a,edges:this.resizeEdges})}onMouseup(t,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:t,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(t,i,a){this.resizable.mousemove.next({clientX:i,clientY:a,edges:this.resizeEdges,event:t})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(t=>{this.eventListeners[t](),delete this.eventListeners[t]})}listenOnTheHost(t){return rt(this.element.nativeElement,t).pipe(pe(this.destroy$))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}});let n=e;return n})(),fn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({});let n=e;return n})();var Bi=n=>({event:n}),Da=n=>({action:n}),_n=(n,e)=>e.id??e;function Ta(n,e){if(n&1){let r=B();m(0,"a",4),P(1,"calendarA11y"),F("mwlClick",function(i){let a=D(r).$implicit,o=g(2).event;return T(a.onClick({event:o,sourceEvent:i}))})("mwlKeydownEnter",function(i){let a=D(r).$implicit,o=g(2).event;return T(a.onClick({event:o,sourceEvent:i}))}),p()}if(n&2){let r=e.$implicit;k("ngClass",r.cssClass)("innerHtml",r.label,vt),fe("aria-label",se(1,3,Re(6,Da,r),"actionButtonLabel"))}}function Ea(n,e){if(n&1&&(m(0,"span",2),q(1,Ta,2,8,"a",3,_n),p()),n&2){let r=g().event;v(),K(r.actions)}}function ba(n,e){if(n&1&&ae(0,Ea,3,0,"span",2),n&2){let r=e.event;oe(r.actions?0:-1)}}function xa(n,e){}var Sa=(n,e)=>({event:n,view:e}),Qe=()=>({});function ka(n,e){if(n&1&&(Z(0,"span",2),P(1,"calendarEventTitle"),P(2,"calendarA11y")),n&2){let r=e.event,t=e.view;k("innerHTML",_e(1,2,r.title,t,r),vt),fe("aria-hidden",se(2,6,ie(9,Qe),"hideEventTitle"))}}function Ma(n,e){}var Oa=(n,e,r)=>({contents:n,placement:e,event:r});function Ra(n,e){if(n&1&&(m(0,"div",2),Z(1,"div",3)(2,"div",4),p()),n&2){let r=e.contents,t=e.placement;k("ngClass","cal-tooltip-"+t),v(2),k("innerHtml",r,vt)}}function Va(n,e){}var Fa=(n,e)=>({days:n,locale:e}),et=(n,e)=>e.date.toISOString();function za(n,e){if(n&1){let r=B();m(0,"div",4),F("click",function(i){let a=D(r).$implicit,o=g(2);return T(o.columnHeaderClicked.emit({isoDayNumber:a.day,sourceEvent:i}))}),S(1),P(2,"calendarDate"),p()}if(n&2){let r=e.$implicit,t=g().locale;J("cal-past",r.isPast)("cal-today",r.isToday)("cal-future",r.isFuture)("cal-weekend",r.isWeekend),k("ngClass",r.cssClass),v(),ot(" ",_e(2,10,r.date,"monthViewColumnHeader",t)," ")}}function Ia(n,e){if(n&1&&(m(0,"div",2),q(1,za,3,14,"div",3,et),p()),n&2){let r=e.days;v(),K(r)}}function Ha(n,e){}var Aa=(n,e,r,t,i,a,o,s,l,u,d)=>({day:n,openDay:e,locale:r,tooltipPlacement:t,highlightDay:i,unhighlightDay:a,eventClicked:o,tooltipTemplate:s,tooltipAppendToBody:l,tooltipDelay:u,validateDrag:d}),Wa=(n,e)=>({day:n,locale:e}),Cn=n=>({backgroundColor:n}),La=(n,e)=>({event:n,draggedFrom:e}),pt=(n,e)=>({x:n,y:e}),Ft=()=>({delay:300,delta:30});function Pa(n,e){if(n&1&&(m(0,"span",4),S(1),p()),n&2){let r=g().day;v(),ge(r.badgeTotal)}}function $a(n,e){if(n&1){let r=B();m(0,"div",8),P(1,"calendarEventTitle"),P(2,"calendarA11y"),F("mouseenter",function(){let i=D(r).$implicit,a=g(2).highlightDay;return T(a.emit({event:i}))})("mouseleave",function(){let i=D(r).$implicit,a=g(2).unhighlightDay;return T(a.emit({event:i}))})("mwlClick",function(i){let a=D(r).$implicit,o=g(2).eventClicked;return T(o.emit({event:a,sourceEvent:i}))}),p()}if(n&2){let r=e.$implicit,t=g(2),i=t.day,a=t.tooltipPlacement,o=t.tooltipTemplate,s=t.tooltipAppendToBody,l=t.tooltipDelay,u=t.validateDrag;J("cal-draggable",r.draggable),k("ngStyle",Re(22,Cn,r.color==null?null:r.color.primary))("ngClass",r==null?null:r.cssClass)("mwlCalendarTooltip",_e(1,15,r.title,"monthTooltip",r))("tooltipPlacement",a)("tooltipEvent",r)("tooltipTemplate",o)("tooltipAppendToBody",s)("tooltipDelay",l)("dropData",Q(24,La,r,i))("dragAxis",Q(27,pt,r.draggable,r.draggable))("validateDrag",u)("touchStartLongPress",ie(30,Ft)),fe("aria-hidden",se(2,19,ie(31,Qe),"hideMonthCellEvents"))}}function Ya(n,e){if(n&1&&(m(0,"div",6),q(1,$a,3,32,"div",7,_n),p()),n&2){let r=g().day;v(),K(r.events)}}function Ba(n,e){if(n&1&&(m(0,"div",2),P(1,"calendarA11y"),m(2,"span",3),ae(3,Pa,2,1,"span",4),m(4,"span",5),S(5),P(6,"calendarDate"),p()()(),ae(7,Ya,3,0,"div",6)),n&2){let r=e.day,t=e.locale;fe("aria-label",se(1,4,Q(11,Wa,r,t),"monthCell")),v(3),oe(r.badgeTotal>0?3:-1),v(2),ge(_e(6,7,r.date,"monthViewDayNumber",t)),v(2),oe(r.events.length>0?7:-1)}}function Na(n,e){}var ja=(n,e,r,t)=>({events:n,eventClicked:e,isOpen:r,validateDrag:t}),Wi=(n,e)=>({date:n,locale:e}),Ni=(n,e)=>({event:n,locale:e});function Xa(n,e){if(n&1){let r=B();m(0,"div",6),Z(1,"span",7),S(2," "),m(3,"mwl-calendar-event-title",8),P(4,"calendarA11y"),F("mwlClick",function(i){let a=D(r).$implicit,o=g(2).eventClicked;return T(o.emit({event:a,sourceEvent:i}))})("mwlKeydownEnter",function(i){let a=D(r).$implicit,o=g(2).eventClicked;return T(o.emit({event:a,sourceEvent:i}))}),p(),S(5," "),Z(6,"mwl-calendar-event-actions",9),p()}if(n&2){let r=e.$implicit,t=g(2).validateDrag,i=g();J("cal-draggable",r.draggable),k("ngClass",r==null?null:r.cssClass)("dropData",Re(16,Bi,r))("dragAxis",Q(18,pt,r.draggable,r.draggable))("validateDrag",t)("touchStartLongPress",ie(21,Ft)),v(),k("ngStyle",Re(22,Cn,r.color==null?null:r.color.primary)),v(2),k("event",r)("customTemplate",i.eventTitleTemplate),fe("aria-label",se(4,13,Q(24,Ni,r,i.locale),"eventDescription")),v(3),k("event",r)("customTemplate",i.eventActionsTemplate)}}function Ga(n,e){if(n&1&&(m(0,"div",2),Bn("cal-open-day-events-closing"),Z(1,"span",3),P(2,"calendarA11y"),Z(3,"span",4),P(4,"calendarA11y"),q(5,Xa,7,27,"div",5,_n),p()),n&2){let r=g().events,t=g();v(),fe("aria-label",se(2,2,Q(8,Wi,t.date,t.locale),"openDayEventsAlert")),v(2),fe("aria-label",se(4,5,Q(11,Wi,t.date,t.locale),"openDayEventsLandmark")),v(2),K(r)}}function Ua(n,e){if(n&1&&ae(0,Ga,7,14,"div",2),n&2){let r=e.isOpen;oe(r?0:-1)}}function qa(n,e){}function Ka(n,e){if(n&1){let r=B();m(0,"mwl-calendar-month-cell",6),P(1,"calendarA11y"),F("mwlClick",function(i){let a=D(r).$implicit,o=g(2);return T(o.dayClicked.emit({day:a,sourceEvent:i}))})("mwlKeydownEnter",function(i){let a=D(r).$implicit,o=g(2);return T(o.dayClicked.emit({day:a,sourceEvent:i}))})("highlightDay",function(i){D(r);let a=g(2);return T(a.toggleDayHighlight(i.event,!0))})("unhighlightDay",function(i){D(r);let a=g(2);return T(a.toggleDayHighlight(i.event,!1))})("drop",function(i){let a=D(r).$implicit,o=g(2);return T(o.eventDropped(a,i.dropData.event,i.dropData.draggedFrom))})("eventClicked",function(i){D(r);let a=g(2);return T(a.eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))}),p()}if(n&2){let r=e.$implicit,t=g(2);k("ngClass",r==null?null:r.cssClass)("day",r)("openDay",t.openDay)("locale",t.locale)("tooltipPlacement",t.tooltipPlacement)("tooltipAppendToBody",t.tooltipAppendToBody)("tooltipTemplate",t.tooltipTemplate)("tooltipDelay",t.tooltipDelay)("customTemplate",t.cellTemplate)("ngStyle",Re(15,Cn,r.backgroundColor))("clickListenerDisabled",!t.dayClicked.observed),fe("tabindex",se(1,12,ie(17,Qe),"monthCellTabIndex"))}}function Za(n,e){if(n&1){let r=B();m(0,"div")(1,"div",3),q(2,Ka,2,18,"mwl-calendar-month-cell",4,et),P(4,"slice"),p(),m(5,"mwl-calendar-open-day-events",5),F("eventClicked",function(i){D(r);let a=g();return T(a.eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))})("drop",function(i){D(r);let a=g();return T(a.eventDropped(a.openDay,i.dropData.event,i.dropData.draggedFrom))}),p()()}if(n&2){let r=e.$implicit,t=g();v(2),K(_e(4,7,t.view.days,r,r+t.view.totalDaysVisibleInWeek)),v(3),k("locale",t.locale)("isOpen",t.openRowIndex===r)("events",t.openDay==null?null:t.openDay.events)("date",t.openDay==null?null:t.openDay.date)("customTemplate",t.openDayEventsTemplate)("eventTitleTemplate",t.eventTitleTemplate)("eventActionsTemplate",t.eventActionsTemplate)}}var Ja=(n,e,r,t,i)=>({days:n,locale:e,dayHeaderClicked:r,eventDropped:t,dragEnter:i});function Qa(n,e){if(n&1){let r=B();m(0,"div",4),F("mwlClick",function(i){let a=D(r).$implicit,o=g().dayHeaderClicked;return T(o.emit({day:a,sourceEvent:i}))})("drop",function(i){let a=D(r).$implicit,o=g().eventDropped;return T(o.emit({event:i.dropData.event,newStart:a.date}))})("dragEnter",function(){let i=D(r).$implicit,a=g().dragEnter;return T(a.emit({date:i.date}))}),m(1,"b"),S(2),P(3,"calendarDate"),p(),Z(4,"br"),m(5,"span"),S(6),P(7,"calendarDate"),p()()}if(n&2){let r=e.$implicit,t=g().locale;J("cal-past",r.isPast)("cal-today",r.isToday)("cal-future",r.isFuture)("cal-weekend",r.isWeekend),k("ngClass",r.cssClass),v(2),ge(_e(3,11,r.date,"weekViewColumnHeader",t)),v(4),ge(_e(7,15,r.date,"weekViewColumnSubHeader",t))}}function eo(n,e){if(n&1&&(m(0,"div",2),q(1,Qa,8,19,"div",3,et),p()),n&2){let r=e.days;v(),K(r)}}function to(n,e){}var no=(n,e,r,t,i,a,o,s,l)=>({weekEvent:n,tooltipPlacement:e,eventClicked:r,tooltipTemplate:t,tooltipAppendToBody:i,tooltipDisabled:a,tooltipDelay:o,column:s,daysInWeek:l}),io=(n,e,r)=>({color:n,backgroundColor:e,borderColor:r});function ro(n,e){if(n&1){let r=B();m(0,"div",2),P(1,"calendarEventTitle"),P(2,"calendarA11y"),F("mwlClick",function(i){let a=D(r).eventClicked;return T(a.emit({sourceEvent:i}))})("mwlKeydownEnter",function(i){let a=D(r).eventClicked;return T(a.emit({sourceEvent:i}))}),Z(3,"mwl-calendar-event-actions",3),S(4," "),Z(5,"mwl-calendar-event-title",4),p()}if(n&2){let r=e.weekEvent,t=e.tooltipPlacement,i=e.tooltipTemplate,a=e.tooltipAppendToBody,o=e.tooltipDisabled,s=e.tooltipDelay,l=e.daysInWeek,u=g();k("ngStyle",Ut(20,io,r.event.color==null?null:r.event.color.secondaryText,r.event.color==null?null:r.event.color.secondary,r.event.color==null?null:r.event.color.primary))("mwlCalendarTooltip",o?"":_e(1,13,r.event.title,l===1?"dayTooltip":"weekTooltip",r.tempEvent||r.event))("tooltipPlacement",t)("tooltipEvent",r.tempEvent||r.event)("tooltipTemplate",i)("tooltipAppendToBody",a)("tooltipDelay",s),fe("aria-label",se(2,17,Q(24,Ni,r.tempEvent||r.event,u.locale),"eventDescription")),v(3),k("event",r.tempEvent||r.event)("customTemplate",u.eventActionsTemplate),v(2),k("event",r.tempEvent||r.event)("customTemplate",u.eventTitleTemplate)("view",l===1?"day":"week")}}function ao(n,e){}var oo=(n,e,r,t,i)=>({segment:n,locale:e,segmentHeight:r,isTimeLabel:t,daysInWeek:i});function so(n,e){if(n&1&&(m(0,"div",3),S(1),P(2,"calendarDate"),p()),n&2){let r=g(),t=r.segment,i=r.locale,a=r.daysInWeek;v(),ot(" ",_e(2,1,t.displayDate,a===1?"dayViewHour":"weekViewHour",i)," ")}}function lo(n,e){if(n&1&&(m(0,"div",2),P(1,"calendarA11y"),ae(2,so,3,5,"div",3),p()),n&2){let r=e.segment,t=e.segmentHeight,i=e.isTimeLabel,a=e.daysInWeek;We("height",t,"px"),J("cal-hour-start",r.isStart)("cal-after-hour-start",!r.isStart),k("ngClass",r.cssClass),fe("aria-hidden",se(1,9,ie(12,Qe),a===1?"hideDayHourSegment":"hideWeekHourSegment")),v(2),oe(i?2:-1)}}function co(n,e){}var uo=(n,e,r,t,i,a,o)=>({columnDate:n,dayStartHour:e,dayStartMinute:r,dayEndHour:t,dayEndMinute:i,isVisible:a,topPx:o});function mo(n,e){if(n&1&&Z(0,"div",3),n&2){let r=g().topPx;We("top",r,"px")}}function po(n,e){if(n&1&&ae(0,mo,1,2,"div",2),n&2){let r=e.isVisible;oe(r?0:-1)}}function ho(n,e){}var fo=(n,e)=>({left:n,right:e}),ji=(n,e)=>({event:n,calendarId:e}),go=n=>({x:n}),vo=()=>({left:!0}),wo=()=>({right:!0}),yo=(n,e,r,t)=>({left:n,right:e,top:r,bottom:t}),_o=()=>({left:!0,top:!0}),Co=()=>({right:!0,bottom:!0}),Do=(n,e)=>e.hours[0]?e.hours[0].segments[0].date.toISOString():e,To=(n,e)=>e.id,Xi=(n,e)=>e.event.id??e.event,Gi=(n,e)=>e.segments[0].date.toISOString();function Eo(n,e){n&1&&jn(0)}function bo(n,e){if(n&1){let r=B();m(0,"div",16),F("drop",function(i){let a=D(r).$implicit,o=g(2);return T(o.eventDropped(i,a.date,!0))})("dragEnter",function(){let i=D(r).$implicit,a=g(2);return T(a.dateDragEnter(i.date))}),p()}}function xo(n,e){n&1&&Z(0,"div",19),n&2&&k("resizeEdges",ie(1,vo))}function So(n,e){n&1&&Z(0,"div",21),n&2&&k("resizeEdges",ie(1,wo))}function ko(n,e){if(n&1){let r=B();m(0,"div",18,3),F("resizeStart",function(i){let a=D(r).$implicit;g();let o=G(1),s=g(2);return T(s.allDayEventResizeStarted(o,a,i))})("resizing",function(i){let a=D(r).$implicit,o=g(3);return T(o.allDayEventResizing(a,i,o.dayColumnWidth))})("resizeEnd",function(){let i=D(r).$implicit,a=g(3);return T(a.allDayEventResizeEnded(i))})("dragStart",function(){let i=D(r).$implicit,a=G(1);g();let o=G(1),s=g(2);return T(s.dragStarted(o,a,i,!1))})("dragging",function(){D(r);let i=g(3);return T(i.allDayEventDragMove())})("dragEnd",function(i){let a=D(r).$implicit,o=g(3);return T(o.dragEnded(a,i,o.dayColumnWidth))}),ae(2,xo,1,2,"div",19),m(3,"mwl-calendar-week-view-event",20),F("eventClicked",function(i){let a=D(r).$implicit,o=g(3);return T(o.eventClicked.emit({event:a.event,sourceEvent:i.sourceEvent}))}),p(),ae(4,So,1,2,"div",21),p()}if(n&2){let r=e.$implicit,t=g(3);We("width",100/t.days.length*r.span,"%")("margin-left",t.rtl?null:100/t.days.length*r.offset,"%")("margin-right",t.rtl?100/t.days.length*r.offset:null,"%"),J("cal-draggable",r.event.draggable&&t.allDayEventResizes.size===0)("cal-starts-within-week",!r.startsBeforeWeek)("cal-ends-within-week",!r.endsAfterWeek),k("ngClass",r.event==null?null:r.event.cssClass)("resizeCursors",t.resizeCursors)("resizeSnapGrid",Q(33,fo,t.dayColumnWidth,t.dayColumnWidth))("validateResize",t.validateResize)("dropData",Q(36,ji,r.event,t.calendarId))("dragAxis",Q(39,pt,r.event.draggable&&t.allDayEventResizes.size===0,!t.snapDraggedEvents&&r.event.draggable&&t.allDayEventResizes.size===0))("dragSnapGrid",t.snapDraggedEvents?Re(42,go,t.dayColumnWidth):ie(44,Qe))("validateDrag",t.validateDrag)("touchStartLongPress",ie(45,Ft)),v(2),oe(!(r.event==null||r.event.resizable==null)&&r.event.resizable.beforeStart&&!r.startsBeforeWeek?2:-1),v(),k("locale",t.locale)("weekEvent",r)("tooltipPlacement",t.tooltipPlacement)("tooltipTemplate",t.tooltipTemplate)("tooltipAppendToBody",t.tooltipAppendToBody)("tooltipDelay",t.tooltipDelay)("customTemplate",t.eventTemplate)("eventTitleTemplate",t.eventTitleTemplate)("eventActionsTemplate",t.eventActionsTemplate)("daysInWeek",t.daysInWeek),v(),oe(!(r.event==null||r.event.resizable==null)&&r.event.resizable.afterEnd&&!r.endsAfterWeek?4:-1)}}function Mo(n,e){if(n&1&&(m(0,"div",15,2),q(2,ko,5,46,"div",17,Xi),p()),n&2){let r=e.$implicit;v(2),K(r.row)}}function Oo(n,e){if(n&1){let r=B();m(0,"div",12,1),F("dragEnter",function(){D(r);let i=g();return T(i.dragEnter("allDay"))})("dragLeave",function(){D(r);let i=g();return T(i.dragLeave("allDay"))}),m(2,"div",10)(3,"div",9),ne(4,Eo,1,0,"ng-container",13),p(),q(5,bo,1,0,"div",14,et),p(),q(7,Mo,4,0,"div",15,To),p()}if(n&2){let r=g();v(4),k("ngTemplateOutlet",r.allDayEventsLabelTemplate),v(),K(r.days),v(2),K(r.view.allDayEventRows)}}function Ro(n,e){if(n&1&&Z(0,"mwl-calendar-week-view-hour-segment",25),n&2){let r=e.$implicit,t=g(3);We("height",t.hourSegmentHeight,"px"),k("segment",r)("segmentHeight",t.hourSegmentHeight)("locale",t.locale)("customTemplate",t.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",t.daysInWeek)}}function Vo(n,e){if(n&1&&(m(0,"div",23),q(1,Ro,1,8,"mwl-calendar-week-view-hour-segment",24,et),p()),n&2){let r=e.$implicit,t=e.$index;J("cal-hour-odd",t%2!==0),v(),K(r.segments)}}function Fo(n,e){if(n&1&&(m(0,"div",9),q(1,Vo,3,2,"div",22,Gi),p()),n&2){let r=g();v(),K(r.view.hourColumns[0].hours)}}function zo(n,e){n&1&&Z(0,"div",19),n&2&&k("resizeEdges",ie(1,_o))}function Io(n,e){}function Ho(n,e){if(n&1){let r=B();m(0,"mwl-calendar-week-view-event",31),F("eventClicked",function(i){D(r);let a=g().$implicit,o=g(2);return T(o.eventClicked.emit({event:a.event,sourceEvent:i.sourceEvent}))}),p()}if(n&2){let r=g().$implicit,t=g().$implicit,i=g();k("locale",i.locale)("weekEvent",r)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDisabled",i.dragActive||i.timeEventResizes.size>0)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("column",t)("daysInWeek",i.daysInWeek)}}function Ao(n,e){n&1&&Z(0,"div",21),n&2&&k("resizeEdges",ie(1,Co))}function Wo(n,e){if(n&1){let r=B();m(0,"div",29,3),F("resizeStart",function(i){let a=D(r).$implicit,o=g(2),s=G(6);return T(o.timeEventResizeStarted(s,a,i))})("resizing",function(i){let a=D(r).$implicit,o=g(2);return T(o.timeEventResizing(a,i))})("resizeEnd",function(){let i=D(r).$implicit,a=g(2);return T(a.timeEventResizeEnded(i))})("dragStart",function(){let i=D(r).$implicit,a=G(1),o=g(2),s=G(6);return T(o.dragStarted(s,a,i,!0))})("dragging",function(i){let a=D(r).$implicit,o=g(2);return T(o.dragMove(a,i))})("dragEnd",function(i){let a=D(r).$implicit,o=g(2);return T(o.dragEnded(a,i,o.dayColumnWidth,!0))}),ae(2,zo,1,2,"div",19),ne(3,Io,0,0,"ng-template",30)(4,Ho,1,12,"ng-template",null,4,de),ae(6,Ao,1,2,"div",21),p()}if(n&2){let r=e.$implicit,t=G(5),i=g(2);We("top",r.top,"px")("height",r.height,"px")("left",r.left,"%")("width",r.width,"%"),J("cal-draggable",r.event.draggable&&i.timeEventResizes.size===0)("cal-starts-within-day",!r.startsBeforeDay)("cal-ends-within-day",!r.endsAfterDay),k("ngClass",r.event.cssClass)("hidden",r.height===0&&r.width===0)("resizeCursors",i.resizeCursors)("resizeSnapGrid",qt(30,yo,i.dayColumnWidth,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight,i.eventSnapSize||i.hourSegmentHeight))("validateResize",i.validateResize)("allowNegativeResizes",!0)("dropData",Q(35,ji,r.event,i.calendarId))("dragAxis",Q(38,pt,r.event.draggable&&i.timeEventResizes.size===0,r.event.draggable&&i.timeEventResizes.size===0))("dragSnapGrid",i.snapDraggedEvents?Q(41,pt,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight):ie(44,Qe))("touchStartLongPress",ie(45,Ft))("ghostDragEnabled",!i.snapDraggedEvents)("ghostElementTemplate",t)("validateDrag",i.validateDrag),v(2),oe(!(r.event==null||r.event.resizable==null)&&r.event.resizable.beforeStart&&!r.startsBeforeDay?2:-1),v(),k("ngTemplateOutlet",t),v(3),oe(!(r.event==null||r.event.resizable==null)&&r.event.resizable.afterEnd&&!r.endsAfterDay?6:-1)}}function Lo(n,e){if(n&1){let r=B();m(0,"mwl-calendar-week-view-hour-segment",33),F("mwlClick",function(i){let a=D(r).$implicit,o=g(3);return T(o.hourSegmentClicked.emit({date:a.date,sourceEvent:i}))})("drop",function(i){let a=D(r).$implicit,o=g(3);return T(o.eventDropped(i,a.date,!1))})("dragEnter",function(){let i=D(r).$implicit,a=g(3);return T(a.dateDragEnter(i.date))}),p()}if(n&2){let r=e.$implicit,t=g(3);We("height",t.hourSegmentHeight,"px"),k("segment",r)("segmentHeight",t.hourSegmentHeight)("locale",t.locale)("customTemplate",t.hourSegmentTemplate)("daysInWeek",t.daysInWeek)("clickListenerDisabled",!t.hourSegmentClicked.observed)("dragOverClass",!t.dragActive||!t.snapDraggedEvents?"cal-drag-over":null)("isTimeLabel",t.daysInWeek===1)}}function Po(n,e){if(n&1&&(m(0,"div",23),q(1,Lo,1,10,"mwl-calendar-week-view-hour-segment",32,et),p()),n&2){let r=e.$implicit,t=e.$index;J("cal-hour-odd",t%2!==0),v(),K(r.segments)}}function $o(n,e){if(n&1&&(m(0,"div",11),Z(1,"mwl-calendar-week-view-current-time-marker",26),m(2,"div",27),q(3,Wo,7,46,"div",28,Xi),p(),q(5,Po,3,2,"div",22,Gi),p()),n&2){let r=e.$implicit,t=g();v(),k("columnDate",r.date)("dayStartHour",t.dayStartHour)("dayStartMinute",t.dayStartMinute)("dayEndHour",t.dayEndHour)("dayEndMinute",t.dayEndMinute)("hourSegments",t.hourSegments)("hourDuration",t.hourDuration)("hourSegmentHeight",t.hourSegmentHeight)("customTemplate",t.currentTimeMarkerTemplate),v(2),K(r.events),v(2),K(r.hours)}}var Be=(()=>{let e=class e{constructor(){this.clickListenerDisabled=!1,this.click=new M,this.destroy$=new ee,this.renderer=E(xe),this.elm=E(le)}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(pe(this.destroy$)).subscribe(t=>{t.stopPropagation(),this.click.emit(t)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Oe(t=>this.renderer.listen(this.elm.nativeElement,"click",i=>{t.next(i)}))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}});let n=e;return n})(),zt=(()=>{let e=class e{constructor(){this.keydown=new M,this.keydownListener=null,this.host=E(le),this.ngZone=E(be),this.renderer=E(xe)}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",t=>{(t.keyCode===13||t.which===13||t.key==="Enter")&&(t.preventDefault(),t.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(t)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}});let n=e;return n})(),Ze=(()=>{let e=class e{monthCell({day:t,locale:i}){return t.badgeTotal>0?`
        ${j(t.date,"EEEE MMMM d",i)},
        ${this.pluralizeEvents(t.badgeTotal,i)},
         click to expand
      `:`${j(t.date,"EEEE MMMM d",i)}`}pluralizeEvents(t,i){let o=new Intl.PluralRules(i).select(t),s={zero:"no events",one:"1 event",other:`${t} events`};return s[o]??s.other}openDayEventsLandmark({date:t,locale:i}){return`
      Beginning of expanded view for ${j(t,"EEEE MMMM dd",i)}
    `}openDayEventsAlert({date:t,locale:i}){return`${j(t,"EEEE MMMM dd",i)} expanded`}eventDescription({event:t,locale:i}){if(t.allDay===!0)return this.allDayEventDescription({event:t,locale:i});let a=`
      ${j(t.start,"EEEE MMMM dd",i)},
      ${t.title}, from ${j(t.start,"hh:mm a",i)}
    `;return t.end?a+` to ${j(t.end,"hh:mm a",i)}`:a}allDayEventDescription({event:t,locale:i}){let a=`
      ${t.title}, event spans multiple days:
      start time ${j(t.start,"MMMM dd hh:mm a",i)}
    `;return t.end?a+`, stop time ${j(t.end,"MMMM d hh:mm a",i)}`:a+", no stop time"}actionButtonLabel({action:t}){return t.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Ne=(()=>{let e=class e{constructor(){this.calendarA11y=E(Ze),this.locale=E(st)}transform(t,i){if(t.locale=t.locale||this.locale,typeof this.calendarA11y[i]>"u"){let a=Object.getOwnPropertyNames(Object.getPrototypeOf(Ze.prototype)).filter(o=>o!=="constructor");throw new Error(`${i} is not a valid a11y method. Can only be one of ${a.join(", ")}`)}return this.calendarA11y[i](t)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=yt({name:"calendarA11y",type:e,pure:!0});let n=e;return n})(),Ui=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:4,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-actions"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(i,a){if(i&1&&ne(0,ba,1,1,"ng-template",null,0,de)(2,xa,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Re(2,Bi,a.event))}},dependencies:[Ce,Be,zt,ce,Ne],encapsulation:2});let n=e;return n})(),Ye=class{month(e,r){return e.title}monthTooltip(e,r){return e.title}week(e,r){return e.title}weekTooltip(e,r){return e.title}day(e,r){return e.title}dayTooltip(e,r){return e.title}},Dn=(()=>{let e=class e{constructor(){this.calendarEventTitle=E(Ye)}transform(t,i,a){return this.calendarEventTitle[i](a,t)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=yt({name:"calendarEventTitle",type:e,pure:!0});let n=e;return n})(),qi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(i,a){if(i&1&&ne(0,ka,3,10,"ng-template",null,0,de)(2,Ma,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Q(2,Sa,a.event,a.view))}},dependencies:[ce,Dn,Ne],encapsulation:2});let n=e;return n})(),Yo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(i,a){if(i&1&&ne(0,Ra,3,2,"ng-template",null,0,de)(2,Va,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Ut(2,Oa,a.contents,a.placement,a.event))}},dependencies:[Ce,ce],encapsulation:2});let n=e;return n})(),Ki=(()=>{let e=class e{constructor(){this.placement="auto",this.delay=null,this.elementRef=E(le),this.injector=E(Pn),this.viewContainerRef=E(wt),this.document=E(gt),this.cancelTooltipDelay$=new ee}ngOnChanges(t){this.tooltipRef&&(t.contents||t.customTemplate||t.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?Vn("now"):zn(this.delay)).pipe(pe(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(Yo,{index:0,injector:this.injector,projectableNodes:[]}),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(t=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=tn(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),t.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...t,this.tooltipRef.instance.placement]))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=he({type:e,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(i,a){i&1&&F("mouseenter",function(){return a.onMouseOver()})("mouseleave",function(){return a.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[Ae]});let n=e;return n})(),Se=class{},De=(function(n){return n.Month="month",n.Week="week",n.Day="day",n})(De||{}),Zi=n=>Ci(n,(...r)=>console.warn("angular-calendar",...r));function Ji(n,e){return Math.floor(n.left)<=Math.ceil(e.left)&&Math.floor(e.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(e.right)&&Math.floor(e.right)<=Math.ceil(n.right)}function Bo(n,e){return Math.floor(n.top)<=Math.ceil(e.top)&&Math.floor(e.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(e.bottom)&&Math.floor(e.bottom)<=Math.ceil(n.bottom)}function No(n,e){return Ji(n,e)&&Bo(n,e)}function Qi(n,e){return Math.round(n/e)*e}var jo=60;function Xo(n,e,r){return(r||jo)/(n*e)}function gn(n,e,r,t,i){let a=Qi(n,t||r),o=Xo(e,r,i);return a*o}function Li(n,e,r){return e.end?e.end:n.addMinutes(e.start,r)}function $e(n,e,r,t){let i=0,a=0,o=r<0?n.subDays:n.addDays,s=e;for(;a<=Math.abs(r);){s=o(e,i);let l=n.getDay(s);t.indexOf(l)===-1&&a++,i++}return s}function Go(n,e,r){let t=e||n;return r.start<=n&&n<=r.end||r.start<=t&&t<=r.end}function Uo(n,e,r,t){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==t||n.dropData.event.allDay&&!r||!n.dropData.event.allDay&&r)}function vn(n,e,r,t=[],i){let a=i?n.startOfDay(e):n.startOfWeek(e,{weekStartsOn:r}),o=n.endOfWeek(e,{weekStartsOn:r});for(;t.indexOf(n.getDay(a))>-1&&a<o;)a=n.addDays(a,1);if(i){let s=n.endOfDay($e(n,a,i-1,t));return{viewStart:a,viewEnd:s}}else{let s=o;for(;t.indexOf(n.getDay(s))>-1&&s>a;)s=n.subDays(s,1);return{viewStart:a,viewEnd:s}}}function Tn({x:n,y:e}){return Math.abs(n)>1||Math.abs(e)>1}var qo=(()=>{let e=class e{constructor(){this.dateAdapter=E(Se)}monthViewColumnHeader({date:t,locale:i}){return j(t,"EEEE",i)}monthViewDayNumber({date:t,locale:i}){return j(t,"d",i)}monthViewTitle({date:t,locale:i}){return j(t,"LLLL y",i)}weekViewColumnHeader({date:t,locale:i}){return j(t,"EEEE",i)}weekViewColumnSubHeader({date:t,locale:i}){return j(t,"MMM d",i)}weekViewTitle({date:t,locale:i,weekStartsOn:a,excludeDays:o,daysInWeek:s}){let{viewStart:l,viewEnd:u}=vn(this.dateAdapter,t,a,o,s),d=(h,f)=>j(h,"MMM d"+(f?", yyyy":""),i);return`${d(l,l.getUTCFullYear()!==u.getUTCFullYear())} - ${d(u,!0)}`}weekViewHour({date:t,locale:i}){return j(t,"h a",i)}dayViewHour({date:t,locale:i}){return j(t,"h a",i)}dayViewTitle({date:t,locale:i}){return j(t,"EEEE, MMMM d, y",i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),Je=(()=>{let e=class e extends qo{};e.\u0275fac=(()=>{let t;return function(a){return(t||(t=$n(e)))(a||e)}})(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})(),It=(()=>{let e=class e{constructor(){this.dateFormatter=E(Je),this.locale=E(st)}transform(t,i,a=this.locale,o=0,s=[],l){if(typeof this.dateFormatter[i]>"u"){let u=Object.getOwnPropertyNames(Object.getPrototypeOf(Je.prototype)).filter(d=>d!=="constructor");throw new Error(`${i} is not a valid date formatter. Can only be one of ${u.join(", ")}`)}return this.dateFormatter[i]({date:t,locale:a,weekStartsOn:o,excludeDays:s,daysInWeek:l})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=yt({name:"calendarDate",type:e,pure:!0});let n=e;return n})(),tt=(()=>{let e=class e{constructor(){this.dateAdapter=E(Se)}getMonthView(t){return _i(this.dateAdapter,t)}getWeekViewHeader(t){return xt(this.dateAdapter,t)}getWeekView(t){return yi(this.dateAdapter,t)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac});let n=e;return n})();var Fe=(function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n})(Fe||{});var Vt=(()=>{let e=class e{static forRoot(t,i={}){return{ngModule:e,providers:[t,i.eventTitleFormatter||Ye,i.dateFormatter||Je,i.utils||tt,i.a11y||Ze]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({});let n=e;return n})(),Ko=(()=>{let e=class e{constructor(){this.columnHeaderClicked=new M}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["tabindex","0","role","columnheader",1,"cal-cell",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass"],["tabindex","0","role","columnheader",1,"cal-cell",3,"click","ngClass"]],template:function(i,a){if(i&1&&ne(0,Ia,3,0,"ng-template",null,0,de)(2,Ha,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Q(2,Fa,a.days,a.locale))}},dependencies:[Ce,ce,It],encapsulation:2});let n=e;return n})(),Zo=(()=>{let e=class e{constructor(){this.highlightDay=new M,this.unhighlightDay=new M,this.eventClicked=new M,this.validateDrag=Tn}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(i,a){i&2&&J("cal-past",a.day.isPast)("cal-today",a.day.isToday)("cal-future",a.day.isFuture)("cal-weekend",a.day.isWeekend)("cal-in-month",a.day.inMonth)("cal-out-month",!a.day.inMonth)("cal-has-events",a.day.events.length>0)("cal-open",a.day===a.openDay)("cal-event-highlight",!!a.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],[1,"cal-day-badge"],[1,"cal-day-number"],[1,"cal-events"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"mouseenter","mouseleave","mwlClick","ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress"]],template:function(i,a){if(i&1&&ne(0,Ba,8,14,"ng-template",null,0,de)(2,Na,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Zt(2,Aa,[a.day,a.openDay,a.locale,a.tooltipPlacement,a.highlightDay,a.unhighlightDay,a.eventClicked,a.tooltipTemplate,a.tooltipAppendToBody,a.tooltipDelay,a.validateDrag]))}},dependencies:[Mt,lt,Ce,Ki,Be,ce,It,Dn,Ne],encapsulation:2});let n=e;return n})(),Jo=(()=>{let e=class e{constructor(){this.isOpen=!1,this.eventClicked=new M,this.validateDrag=Tn}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:7,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"mwlClick","mwlKeydownEnter","event","customTemplate"],[3,"event","customTemplate"]],template:function(i,a){if(i&1&&ne(0,Ua,1,1,"ng-template",null,0,de)(2,qa,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",qt(2,ja,a.events,a.eventClicked,a.isOpen,a.validateDrag))}},dependencies:[Mt,Ce,lt,qi,Be,zt,Ui,ce,Ne],encapsulation:2});let n=e;return n})(),er=(()=>{let e=class e{constructor(){this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.locale=E(st),this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new M,this.dayClicked=new M,this.eventClicked=new M,this.columnHeaderClicked=new M,this.eventTimesChanged=new M,this.cdr=E(Qt),this.utils=E(tt),this.dateAdapter=E(Se)}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){let i=t.viewDate||t.excludeDays||t.weekendDays,a=t.viewDate||t.events||t.excludeDays||t.weekendDays;i&&this.refreshHeader(),t.events&&Zi(this.events),a&&this.refreshBody(),(i||a)&&this.emitBeforeViewRender(),(t.activeDayIsOpen||t.viewDate||t.events||t.excludeDays||t.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(t,i){this.view.days.forEach(a=>{i&&a.events.indexOf(t)>-1?a.backgroundColor=t.color&&t.color.secondary||"#D1E8FF":delete a.backgroundColor})}eventDropped(t,i,a){if(t!==a){let o=this.dateAdapter.getYear(t.date),s=this.dateAdapter.getMonth(t.date),l=this.dateAdapter.getDate(t.date),u=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,o),s),l),d;if(i.end){let h=this.dateAdapter.differenceInSeconds(u,i.start);d=this.dateAdapter.addSeconds(i.end,h)}this.eventTimesChanged.emit({event:i,newStart:u,newEnd:d,day:t,type:Fe.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(this.activeDayIsOpen===!0){let t=this.activeDay||this.viewDate;this.openDay=this.view.days.find(a=>this.dateAdapter.isSameDay(a.date,t));let i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[Ae],decls:5,vars:3,consts:[["role","grid",1,"cal-month-view"],[3,"columnHeaderClicked","days","locale","customTemplate"],[1,"cal-days"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"eventClicked","drop","locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked","ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled"]],template:function(i,a){i&1&&(m(0,"div",0)(1,"mwl-calendar-month-view-header",1),F("columnHeaderClicked",function(s){return a.columnHeaderClicked.emit(s)}),p(),m(2,"div",2),q(3,Za,6,11,"div",null,Nn),p()()),i&2&&(v(),k("days",a.columnHeaders)("locale",a.locale)("customTemplate",a.headerTemplate),v(2),K(a.view.rowOffsets))},dependencies:[Ko,Zo,Ot,Ce,lt,Be,zt,Jo,Jn,Ne],encapsulation:2});let n=e;return n})(),Pi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({imports:[mt,Vt,mt]});let n=e;return n})(),wn=class{constructor(e,r){this.dragContainerElement=e,this.startPosition=r.getBoundingClientRect()}validateDrag({x:e,y:r,snapDraggedEvents:t,dragAlreadyMoved:i,transform:a}){let o=Tn({x:e,y:r})||i;if(t){let s=Object.assign({},this.startPosition,{left:this.startPosition.left+a.x,right:this.startPosition.right+a.x,top:this.startPosition.top+a.y,bottom:this.startPosition.bottom+a.y});if(o){let l=this.dragContainerElement.getBoundingClientRect(),u=l.top<s.top&&s.top<l.bottom,d=l.top<s.bottom&&s.bottom<l.bottom;return Ji(l,s)&&(u||d)}return!1}else return o}},yn=class{constructor(e,r,t){this.resizeContainerElement=e,this.minWidth=r,this.rtl=t}validateResize({rectangle:e,edges:r}){return this.rtl&&(typeof r.left<"u"?(e.left-=r.left,e.right+=r.left):typeof r.right<"u"&&(e.left+=r.right,e.right-=r.right),e.width=e.right-e.left),this.minWidth&&Math.ceil(e.width)<Math.ceil(this.minWidth)?!1:No(this.resizeContainerElement.getBoundingClientRect(),e)}},Qo=(()=>{let e=class e{constructor(){this.dayHeaderClicked=new M,this.eventDropped=new M,this.dragEnter=new M}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"mwlClick","drop","dragEnter","ngClass"]],template:function(i,a){if(i&1&&ne(0,eo,3,0,"ng-template",null,0,de)(2,to,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Kt(2,Ja,a.days,a.locale,a.dayHeaderClicked,a.eventDropped,a.dragEnter))}},dependencies:[Ot,Ce,Be,ce,It],encapsulation:2});let n=e;return n})(),es=(()=>{let e=class e{constructor(){this.eventClicked=new M}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"mwlClick","mwlKeydownEnter","ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(i,a){if(i&1&&ne(0,ro,6,27,"ng-template",null,0,de)(2,ao,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Zt(2,no,[a.weekEvent,a.tooltipPlacement,a.eventClicked,a.tooltipTemplate,a.tooltipAppendToBody,a.tooltipDisabled,a.tooltipDelay,a.column,a.daysInWeek]))}},dependencies:[lt,Ki,Be,zt,Ui,qi,ce,Dn,Ne],encapsulation:2});let n=e;return n})(),ts=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],[1,"cal-time"]],template:function(i,a){if(i&1&&ne(0,lo,3,13,"ng-template",null,0,de)(2,co,0,0,"ng-template",1),i&2){let o=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",Kt(2,oo,a.segment,a.locale,a.segmentHeight,a.isTimeLabel,a.daysInWeek))}},dependencies:[Ce,ce,It,Ne],encapsulation:2});let n=e;return n})(),ns=(()=>{let e=class e{constructor(){this.columnDate$=new ht(void 0),this.dateAdapter=E(Se),this.zone=E(be),this.marker$=this.zone.onStable.pipe(Gt(()=>In(60*1e3)),ft(0),Gt(()=>this.columnDate$),X(t=>{let i=this.dateAdapter.setMinutes(this.dateAdapter.setHours(t,this.dayStartHour),this.dayStartMinute),a=this.dateAdapter.setMinutes(this.dateAdapter.setHours(t,this.dayEndHour),this.dayEndMinute),o=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),s=new Date;return{isVisible:this.dateAdapter.isSameDay(t,s)&&s>=i&&s<=a,top:this.dateAdapter.differenceInMinutes(s,i)*o}}))}ngOnChanges(t){t.columnDate&&this.columnDate$.next(t.columnDate.currentValue)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Ae],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-current-time-marker",3,"top"],[1,"cal-current-time-marker"]],template:function(i,a){if(i&1&&(ne(0,po,1,1,"ng-template",null,0,de)(2,ho,0,0,"ng-template",1),P(3,"async"),P(4,"async")),i&2){let o,s=G(1);v(2),k("ngTemplateOutlet",a.customTemplate||s)("ngTemplateOutletContext",Gn(6,uo,a.columnDate,a.dayStartHour,a.dayStartMinute,a.dayEndHour,a.dayEndMinute,(o=Jt(3,2,a.marker$))==null?null:o.isVisible,(o=Jt(4,4,a.marker$))==null?null:o.top))}},dependencies:[ce,Kn],encapsulation:2});let n=e;return n})(),En=(()=>{let e=class e{constructor(){this.events=[],this.excludeDays=[],this.locale=E(st),this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new M,this.eventClicked=new M,this.eventTimesChanged=new M,this.beforeViewRender=new M,this.hourSegmentClicked=new M,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.cdr=E(Qt),this.utils=E(tt),this.dateAdapter=E(Se),this.element=E(le)}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){let i=t.viewDate||t.excludeDays||t.weekendDays||t.daysInWeek||t.weekStartsOn,a=t.viewDate||t.dayStartHour||t.dayStartMinute||t.dayEndHour||t.dayEndMinute||t.hourSegments||t.hourDuration||t.weekStartsOn||t.weekendDays||t.excludeDays||t.hourSegmentHeight||t.events||t.daysInWeek||t.minimumEventHeight;i&&this.refreshHeader(),t.events&&Zi(this.events),a&&this.refreshBody(),(i||a)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&getComputedStyle(this.element.nativeElement).direction==="rtl",this.cdr.detectChanges()}timeEventResizeStarted(t,i,a){this.timeEventResizes.set(i.event,a),this.resizeStarted(t,i)}timeEventResizing(t,i){this.timeEventResizes.set(t.event,i);let a=new Map,o=[...this.events];this.timeEventResizes.forEach((s,l)=>{let u=this.getTimeEventResizedDates(l,s),d=N(N({},l),u);a.set(d,l);let h=o.indexOf(l);o[h]=d}),this.restoreOriginalEvents(o,a,!0)}timeEventResizeEnded(t){this.view=this.getWeekView(this.events);let i=this.timeEventResizes.get(t.event);if(i){this.timeEventResizes.delete(t.event);let a=this.getTimeEventResizedDates(t.event,i);this.eventTimesChanged.emit({newStart:a.start,newEnd:a.end,event:t.event,type:Fe.Resize})}}allDayEventResizeStarted(t,i,a){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof a.edges.left<"u"?"left":"right"}),this.resizeStarted(t,i,this.getDayColumnWidth(t))}allDayEventResizing(t,i,a){let o=this.allDayEventResizes.get(t),s=this.rtl?-1:1;if(typeof i.edges.left<"u"){let l=Math.round(+i.edges.left/a)*s;t.offset=o.originalOffset+l,t.span=o.originalSpan-l}else if(typeof i.edges.right<"u"){let l=Math.round(+i.edges.right/a)*s;t.span=o.originalSpan+l}}allDayEventResizeEnded(t){let i=this.allDayEventResizes.get(t);if(i){let a=i.edge==="left",o;a?o=t.offset-i.originalOffset:o=t.span-i.originalSpan,t.offset=i.originalOffset,t.span=i.originalSpan;let s=this.getAllDayEventResizedDates(t.event,o,a);this.eventTimesChanged.emit({newStart:s.start,newEnd:s.end,event:t.event,type:Fe.Resize}),this.allDayEventResizes.delete(t)}}getDayColumnWidth(t){return Math.floor(t.offsetWidth/this.days.length)}dateDragEnter(t){this.lastDragEnterDate=t}eventDropped(t,i,a){Uo(t,i,a,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||t.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:Fe.Drop,event:t.dropData.event,newStart:i,allDay:a}),this.lastDraggedEvent=null}dragEnter(t){this.eventDragEnterByType[t]++}dragLeave(t){this.eventDragEnterByType[t]--}dragStarted(t,i,a,o){this.dayColumnWidth=this.getDayColumnWidth(t);let s=new wn(t,i);this.validateDrag=({x:l,y:u,transform:d})=>{let h=this.allDayEventResizes.size===0&&this.timeEventResizes.size===0&&s.validateDrag({x:l,y:u,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:d});if(h&&this.validateEventTimesChanged){let f=this.getDragMovedEventTimes(a,{x:l,y:u},this.dayColumnWidth,o);return this.validateEventTimesChanged({type:Fe.Drag,event:a.event,newStart:f.start,newEnd:f.end})}return h},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&o&&this.view.hourColumns.forEach(l=>{let u=l.events.find(d=>d.event===a.event&&d!==a);u&&(u.width=0,u.height=0)}),this.cdr.markForCheck()}dragMove(t,i){let a=this.getDragMovedEventTimes(t,i,this.dayColumnWidth,!0),o=t.event,s=N(N({},o),a),l=this.events.map(u=>u===o?s:u);this.restoreOriginalEvents(l,new Map([[s,o]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(t,i,a,o=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;let{start:s,end:l}=this.getDragMovedEventTimes(t,i,a,o);(this.snapDraggedEvents||this.eventDragEnterByType[o?"time":"allDay"]>0)&&Go(s,l,this.view.period)&&(this.lastDraggedEvent=t.event,this.eventTimesChanged.emit({newStart:s,newEnd:l,event:t.event,type:Fe.Drag,allDay:!o}))}refreshHeader(){this.days=this.utils.getWeekViewHeader(N({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},vn(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit(N({header:this.days},this.view))}getWeekView(t){return this.utils.getWeekView(N({events:t,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight},vn(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}getDragMovedEventTimes(t,i,a,o){let s=Qi(i.x,a)/a*(this.rtl?-1:1),l=o?gn(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,u=this.dateAdapter.addMinutes($e(this.dateAdapter,t.event.start,s,this.excludeDays),l),d;return t.event.end&&(d=this.dateAdapter.addMinutes($e(this.dateAdapter,t.event.end,s,this.excludeDays),l)),{start:u,end:d}}restoreOriginalEvents(t,i,a=!0){let o=this.view;a&&(this.view=this.getWeekView(t));let s=t.filter(l=>i.has(l));this.view.hourColumns.forEach((l,u)=>{o.hourColumns[u].hours.forEach((d,h)=>{d.segments.forEach((f,_)=>{l.hours[h].segments[_].cssClass=f.cssClass})}),s.forEach(d=>{let h=i.get(d),f=l.events.find(_=>_.event===(a?d:h));if(f)f.event=h,f.tempEvent=d,a||(f.height=0,f.width=0);else{let _={event:h,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:d};l.events.push(_)}})}),i.clear()}getTimeEventResizedDates(t,i){let a={start:t.start,end:Li(this.dateAdapter,t,this.minimumEventHeight)},d=t,{end:o}=d,s=On(d,["end"]),l={start:this.dateAdapter.addMinutes(a.end,this.minimumEventHeight*-1),end:Li(this.dateAdapter,s,this.minimumEventHeight)},u=this.rtl?-1:1;if(typeof i.edges.left<"u"){let h=Math.round(+i.edges.left/this.dayColumnWidth)*u,f=$e(this.dateAdapter,a.start,h,this.excludeDays);f<l.start?a.start=f:a.start=l.start}else if(typeof i.edges.right<"u"){let h=Math.round(+i.edges.right/this.dayColumnWidth)*u,f=$e(this.dateAdapter,a.end,h,this.excludeDays);f>l.end?a.end=f:a.end=l.end}if(typeof i.edges.top<"u"){let h=gn(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),f=this.dateAdapter.addMinutes(a.start,h);f<l.start?a.start=f:a.start=l.start}else if(typeof i.edges.bottom<"u"){let h=gn(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),f=this.dateAdapter.addMinutes(a.end,h);f>l.end?a.end=f:a.end=l.end}return a}resizeStarted(t,i,a){this.dayColumnWidth=this.getDayColumnWidth(t);let o=new yn(t,a,this.rtl);this.validateResize=({rectangle:s,edges:l})=>{let u=o.validateResize({rectangle:N({},s),edges:l});if(u&&this.validateEventTimesChanged){let d;if(!a)d=this.getTimeEventResizedDates(i.event,{rectangle:s,edges:l});else{let h=this.rtl?-1:1;if(typeof l.left<"u"){let f=Math.round(+l.left/a)*h;d=this.getAllDayEventResizedDates(i.event,f,!this.rtl)}else{let f=Math.round(+l.right/a)*h;d=this.getAllDayEventResizedDates(i.event,f,this.rtl)}}return this.validateEventTimesChanged({type:Fe.Resize,event:i.event,newStart:d.start,newEnd:d.end})}return u},this.cdr.markForCheck()}getAllDayEventResizedDates(t,i,a){let o=t.start,s=t.end||t.start;return a?o=$e(this.dateAdapter,o,i,this.excludeDays):s=$e(this.dateAdapter,s,i,this.excludeDays),{start:o,end:s}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Ae],decls:9,vars:7,consts:[["dayColumns",""],["allDayEventsContainer",""],["eventRowContainer",""],["event",""],["weekEventTemplate",""],["role","grid",1,"cal-week-view"],[3,"dayHeaderClicked","eventDropped","dragEnter","days","locale","customTemplate"],["mwlDroppable","",1,"cal-all-day-events"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],[1,"cal-time-label-column"],[1,"cal-day-columns"],[1,"cal-day-column"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],[4,"ngTemplateOutlet"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column"],[1,"cal-events-row"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],[1,"cal-hour",3,"cal-hour-odd"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],[3,"ngTemplateOutlet"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"mwlClick","drop","dragEnter","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"]],template:function(i,a){if(i&1){let o=B();m(0,"div",5)(1,"mwl-calendar-week-view-header",6),F("dayHeaderClicked",function(l){return D(o),T(a.dayHeaderClicked.emit(l))})("eventDropped",function(l){return D(o),T(a.eventDropped({dropData:l},l.newStart,!0))})("dragEnter",function(l){return D(o),T(a.dateDragEnter(l.date))}),p(),ae(2,Oo,9,1,"div",7),m(3,"div",8),F("dragEnter",function(){return D(o),T(a.dragEnter("time"))})("dragLeave",function(){return D(o),T(a.dragLeave("time"))}),ae(4,Fo,3,0,"div",9),m(5,"div",10,0),q(7,$o,7,9,"div",11,Do),p()()()}i&2&&(v(),k("days",a.days)("locale",a.locale)("customTemplate",a.headerTemplate),v(),oe(a.view.allDayEventRows.length>0?2:-1),v(2),oe(a.view.hourColumns.length>0&&a.daysInWeek!==1?4:-1),v(),J("cal-resize-active",a.timeEventResizes.size>0),v(2),K(a.view.hourColumns))},dependencies:[Qo,Ot,ce,hn,Mt,Ce,Ai,es,ts,ns,Be],encapsulation:2});let n=e;return n})(),$i=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({imports:[fn,mt,Vt,fn,mt]});let n=e;return n})(),tr=(()=>{let e=class e{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new M,this.hourSegmentClicked=new M,this.eventTimesChanged=new M,this.beforeViewRender=new M}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=te({type:e,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender","daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged"]],template:function(i,a){i&1&&(m(0,"mwl-calendar-week-view",0),F("eventClicked",function(s){return a.eventClicked.emit(s)})("hourSegmentClicked",function(s){return a.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return a.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return a.beforeViewRender.emit(s)}),p()),i&2&&k("daysInWeek",1)("viewDate",a.viewDate)("events",a.events)("hourSegments",a.hourSegments)("hourDuration",a.hourDuration)("hourSegmentHeight",a.hourSegmentHeight)("minimumEventHeight",a.minimumEventHeight)("dayStartHour",a.dayStartHour)("dayStartMinute",a.dayStartMinute)("dayEndHour",a.dayEndHour)("dayEndMinute",a.dayEndMinute)("refresh",a.refresh)("locale",a.locale)("eventSnapSize",a.eventSnapSize)("tooltipPlacement",a.tooltipPlacement)("tooltipTemplate",a.tooltipTemplate)("tooltipAppendToBody",a.tooltipAppendToBody)("tooltipDelay",a.tooltipDelay)("resizeCursors",a.resizeCursors)("hourSegmentTemplate",a.hourSegmentTemplate)("eventTemplate",a.eventTemplate)("eventTitleTemplate",a.eventTitleTemplate)("eventActionsTemplate",a.eventActionsTemplate)("snapDraggedEvents",a.snapDraggedEvents)("allDayEventsLabelTemplate",a.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",a.currentTimeMarkerTemplate)("validateEventTimesChanged",a.validateEventTimesChanged)},dependencies:[En],encapsulation:2});let n=e;return n})(),Yi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({});let n=e;return n})(),nr=(()=>{let e=class e{static forRoot(t,i={}){return{ngModule:e,providers:[t,i.eventTitleFormatter||Ye,i.dateFormatter||Je,i.utils||tt,i.a11y||Ze]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({imports:[Vt,Pi,$i,Yi,Vt,Pi,$i,Yi]});let n=e;return n})();var rs=Math.pow(10,8)*24*60*60*1e3,ol=-rs,ir=6048e5,rr=864e5,Ht=6e4,ar=36e5;var as=3600;var or=as*24,sl=or*7,os=or*365.2425,ss=os/12,ll=ss*3,bn=Symbol.for("constructDateFrom");function $(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&bn in n?n[bn](e):n instanceof Date?new n.constructor(e):new Date(e)}function x(n,e){return $(e||n,n)}function nt(n,e,r){let t=x(n,r?.in);return isNaN(e)?$(r?.in||n,NaN):(e&&t.setDate(t.getDate()+e),t)}function At(n,e,r){let t=x(n,r?.in);if(isNaN(e))return $(r?.in||n,NaN);if(!e)return t;let i=t.getDate(),a=$(r?.in||n,t.getTime());a.setMonth(t.getMonth()+e+1,0);let o=a.getDate();return i>=o?a:(t.setFullYear(a.getFullYear(),a.getMonth(),i),t)}function Wt(n,e,r){return $(r?.in||n,+x(n)+e)}function sr(n,e,r){return Wt(n,e*ar,r)}var ls={};function Lt(){return ls}function Pt(n,e){let r=Lt(),t=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=x(n,e?.in),a=i.getDay(),o=(a<t?7:0)+a-t;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function je(n,e){return Pt(n,Me(N({},e),{weekStartsOn:1}))}function lr(n,e){let r=x(n,e?.in),t=r.getFullYear(),i=$(r,0);i.setFullYear(t+1,0,4),i.setHours(0,0,0,0);let a=je(i),o=$(r,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);let s=je(o);return r.getTime()>=a.getTime()?t+1:r.getTime()>=s.getTime()?t:t-1}function xn(n){let e=x(n),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+n-+r}function ze(n,...e){let r=$.bind(null,n||e.find(t=>typeof t=="object"));return e.map(r)}function Ie(n,e){let r=x(n,e?.in);return r.setHours(0,0,0,0),r}function dr(n,e,r){let[t,i]=ze(r?.in,n,e),a=Ie(t),o=Ie(i),s=+a-xn(a),l=+o-xn(o);return Math.round((s-l)/rr)}function cr(n,e){let r=lr(n,e),t=$(e?.in||n,0);return t.setFullYear(r,0,4),t.setHours(0,0,0,0),je(t)}function ur(n,e,r){let t=x(n,r?.in);return t.setTime(t.getTime()+e*Ht),t}function mr(n,e,r){return Wt(n,e*1e3,r)}function $t(n,e,r){return nt(n,e*7,r)}function pr(n,e){let r,t=e?.in;return n.forEach(i=>{!t&&typeof i=="object"&&(t=$.bind(null,i));let a=x(i,t);(!r||r<a||isNaN(+a))&&(r=a)}),$(t,r||NaN)}function hr(n,e,r){let[t,i]=ze(r?.in,n,e);return+Ie(t)==+Ie(i)}function gr(n,e,r){let[t,i]=ze(r?.in,n,e),a=fr(t,i),o=Math.abs(dr(t,i));t.setDate(t.getDate()-a*o);let s=+(fr(t,i)===-a),l=a*(o-s);return l===0?0:l}function fr(n,e){let r=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function Yt(n){return e=>{let t=(n?Math[n]:Math.trunc)(e);return t===0?0:t}}function Bt(n,e){return+x(n)-+x(e)}function vr(n,e,r){let t=Bt(n,e)/Ht;return Yt(r?.roundingMethod)(t)}function wr(n,e){let r=x(n,e?.in);return r.setHours(23,59,59,999),r}function yr(n,e){let r=x(n,e?.in),t=r.getMonth();return r.setFullYear(r.getFullYear(),t+1,0),r.setHours(23,59,59,999),r}function _r(n,e,r){let t=Bt(n,e)/1e3;return Yt(r?.roundingMethod)(t)}function Cr(n,e){let r=x(n,e?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Dr(n,e){let r=Lt(),t=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=x(n,e?.in),a=i.getDay(),o=(a<t?-7:0)+6-(a-t);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Tr(n,e){let r=x(n,e?.in),t=+je(r)-+cr(r);return Math.round(t/ir)+1}function Er(n,e){return x(n,e?.in).getDate()}function br(n,e){return x(n,e?.in).getDay()}function xr(n,e){let r=x(n,e?.in),t=r.getFullYear(),i=r.getMonth(),a=$(r,0);return a.setFullYear(t,i+1,0),a.setHours(0,0,0,0),a.getDate()}function Sr(n,e){return x(n,e?.in).getHours()}function kr(n,e){return x(n,e?.in).getMinutes()}function Mr(n,e){return x(n,e?.in).getMonth()}function Or(n,e){return x(n,e?.in).getFullYear()}function Rr(n,e){let r=x(n,e?.in);return r.setSeconds(0,0),r}function Vr(n,e,r){let[t,i]=ze(r?.in,n,e);return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()}function Sn(n,e){let r=x(n,e?.in);return r.setMilliseconds(0),r}function Fr(n,e){return+Sn(n)==+Sn(e)}function zr(n,e,r){return nt(n,-e,r)}function Ir(n,e,r){let t=x(n,r?.in),i=t.getFullYear(),a=t.getDate(),o=$(r?.in||n,0);o.setFullYear(i,e,15),o.setHours(0,0,0,0);let s=xr(o);return t.setMonth(e,Math.min(a,s)),t}function Hr(n,e,r){let t=x(n,r?.in);return t.setDate(e),t}function Ar(n,e,r){let t=x(n,r?.in);return t.setHours(e),t}function Wr(n,e,r){let t=x(n,r?.in);return t.setMinutes(e),t}function Lr(n,e,r){let t=x(n,r?.in);return isNaN(+t)?$(r?.in||n,NaN):(t.setFullYear(e),t)}function Pr(n,e,r){return At(n,-e,r)}function $r(n,e,r){return $t(n,-e,r)}function ds(n){return new Date(n).getTimezoneOffset()}function Yr(){return{addDays:nt,addHours:sr,addMinutes:ur,addSeconds:mr,differenceInDays:gr,differenceInMinutes:vr,differenceInSeconds:_r,endOfDay:wr,endOfMonth:yr,endOfWeek:Dr,getDay:br,getMonth:Mr,isSameDay:hr,isSameMonth:Vr,isSameSecond:Fr,max:pr,setHours:Ar,setMinutes:Wr,startOfDay:Ie,startOfMinute:Rr,startOfMonth:Cr,startOfWeek:Pt,getHours:Sr,getMinutes:kr,getTimezoneOffset:ds}}function Br(){return Object.assign(Object.assign({},Yr()),{addWeeks:$t,addMonths:At,subDays:zr,subWeeks:$r,subMonths:Pr,getISOWeek:Tr,setDate:Hr,setMonth:Ir,setYear:Lr,getDate:Er,getYear:Or})}var Nt=class n{supabaseService=E(ti);authService=E(_t);reservationsSubject=new ht([]);reservations$=this.reservationsSubject.asObservable();loadRestaurantReservations(){return Te(this,null,function*(){try{let e=yield this.getCurrentRestaurantId();if(!e)return console.error("No restaurant ID found"),[];let{data:r,error:t}=yield this.supabaseService.getSupabaseClient().from("reservations").select(`
          *,
          users (first_name, last_name, email, phone),
          tables (table_name, table_number, capacity)
        `).eq("restaurant_id",e).in("status",["pending","confirmed"]).order("reservation_date",{ascending:!0}).order("reservation_time",{ascending:!0});if(t)throw t;let i=r||[];return this.reservationsSubject.next(i),i}catch(e){return console.error("Error loading restaurant reservations:",e),[]}})}createManualReservation(e){return Te(this,null,function*(){try{let r=yield this.getCurrentRestaurantId();if(!r)throw new Error("Restaurant not found");let t=Me(N({},e),{restaurant_id:r,status:"confirmed",customer_id:null}),{data:i,error:a}=yield this.supabaseService.getSupabaseClient().from("reservations").insert(t).select(`
          *,
          users (first_name, last_name, email, phone),
          tables (table_name, table_number, capacity)
        `).single();if(a)throw a;return yield this.loadRestaurantReservations(),i}catch(r){return console.error("Error creating manual reservation:",r),null}})}getCurrentRestaurantId(){return Te(this,null,function*(){let e=this.authService.getCurrentStaffRestaurantId();if(e)return e;let r=this.authService.currentUserValue;if(!r)return null;try{let{data:t,error:i}=yield this.supabaseService.getSupabaseClient().from("restaurants").select("id").eq("owner_id",r.id).limit(1).single();if(i)throw i;return t?.id||null}catch(t){return console.error("Error fetching restaurant ID:",t),null}})}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function cs(n,e){if(n&1){let r=B();m(0,"mwl-calendar-month-view",25),F("dayClicked",function(i){D(r);let a=g();return T(a.onDayClick(i))})("eventClicked",function(i){D(r);let a=g();return T(a.onEventClick(i))}),p()}if(n&2){let r=g();k("viewDate",r.viewDate)("events",r.events)("activeDayIsOpen",!1)}}function us(n,e){if(n&1){let r=B();m(0,"mwl-calendar-week-view",26),F("eventClicked",function(i){D(r);let a=g();return T(a.onEventClick(i))}),p()}if(n&2){let r=g();k("viewDate",r.viewDate)("events",r.events)}}function ms(n,e){if(n&1){let r=B();m(0,"mwl-calendar-day-view",26),F("eventClicked",function(i){D(r);let a=g();return T(a.onEventClick(i))}),p()}if(n&2){let r=g();k("viewDate",r.viewDate)("events",r.events)}}function ps(n,e){if(n&1){let r=B();m(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3",30)(4,"span",17),S(5,"event_available"),p(),S(6," Nuova Prenotazione "),p(),m(7,"button",31),F("click",function(){D(r);let i=g();return T(i.closeReservationModal())}),m(8,"span",9),S(9,"close"),p()()(),m(10,"div",32)(11,"div",33)(12,"span",17),S(13,"calendar_today"),p(),m(14,"div",34)(15,"span",35),S(16,"Data selezionata"),p(),m(17,"span",36),S(18),P(19,"date"),p()()(),m(20,"form",37),F("ngSubmit",function(){D(r);let i=g();return T(i.createManualReservation())}),m(21,"div",38)(22,"label",39)(23,"span",9),S(24,"person"),p(),S(25," Nome Cliente * "),p(),m(26,"input",40),Ue("ngModelChange",function(i){D(r);let a=g();return Ge(a.newReservation.customer_name,i)||(a.newReservation.customer_name=i),T(i)}),p()(),m(27,"div",38)(28,"label",41)(29,"span",9),S(30,"phone"),p(),S(31," Telefono * "),p(),m(32,"input",42),Ue("ngModelChange",function(i){D(r);let a=g();return Ge(a.newReservation.customer_phone,i)||(a.newReservation.customer_phone=i),T(i)}),p()(),m(33,"div",43)(34,"div",38)(35,"label",44)(36,"span",9),S(37,"schedule"),p(),S(38," Ora "),p(),m(39,"input",45),Ue("ngModelChange",function(i){D(r);let a=g();return Ge(a.newReservation.reservation_time,i)||(a.newReservation.reservation_time=i),T(i)}),p()(),m(40,"div",38)(41,"label",46)(42,"span",9),S(43,"group"),p(),S(44," Numero Persone "),p(),m(45,"input",47),Ue("ngModelChange",function(i){D(r);let a=g();return Ge(a.newReservation.party_size,i)||(a.newReservation.party_size=i),T(i)}),p()()(),m(46,"div",38)(47,"label",48)(48,"span",9),S(49,"notes"),p(),S(50," Richieste Speciali "),p(),m(51,"textarea",49),Ue("ngModelChange",function(i){D(r);let a=g();return Ge(a.newReservation.special_requests,i)||(a.newReservation.special_requests=i),T(i)}),p()(),m(52,"div",50)(53,"button",51),F("click",function(){D(r);let i=g();return T(i.closeReservationModal())}),m(54,"span",9),S(55,"close"),p(),S(56," Annulla "),p(),m(57,"button",52)(58,"span",9),S(59,"add"),p(),S(60," Crea Prenotazione "),p()()()()()()}if(n&2){let r=g();v(18),ge(Un(19,6,r.selectedDate,"fullDate","","it")),v(8),Xe("ngModel",r.newReservation.customer_name),v(6),Xe("ngModel",r.newReservation.customer_phone),v(7),Xe("ngModel",r.newReservation.reservation_time),v(6),Xe("ngModel",r.newReservation.party_size),v(6),Xe("ngModel",r.newReservation.special_requests)}}var Nr=class n{calendarService=E(Nt);floorPlanService=E(fi);tableService=E(hi);authService=E(_t);reservationService=E(pi);view=De.Month;CalendarView=De;viewDate=new Date;events=[];showReservationModal=!1;selectedDate=new Date;newReservation={customer_name:"",customer_phone:"",reservation_time:"20:00",party_size:2,special_requests:""};maxCapacity=0;loading=!1;ngOnInit(){return Te(this,null,function*(){console.log("\u{1F504} Calendar component initialized"),yield this.loadCalendarData()})}loadCalendarData(){return Te(this,null,function*(){this.loading=!0;try{console.log("\u{1F4C5} Loading calendar data..."),yield Promise.all([this.loadReservations(),this.calculateMaxCapacity()]),console.log("\u2705 Calendar data loaded successfully")}catch(e){console.error("Error loading calendar data:",e)}finally{this.loading=!1}})}loadReservations(){this.loading=!0,this.reservationService.restaurantReservations$.subscribe({next:e=>{console.log("\u{1F4C5} Restaurant reservations loaded:",e.length),this.events=e.map(r=>{let t=new Date(r.reservation_date),[i,a]=r.reservation_time.split(":");t.setHours(parseInt(i),parseInt(a));let o=r.users?`${r.users.first_name} ${r.users.last_name}`:r.customer_name||"Cliente",s=r.tables?`${r.tables.table_name} (${r.tables.table_number})`:"Tavolo da assegnare";return{title:`${o} - ${r.party_size} persone`,start:t,color:{primary:this.getEventColor(r.party_size),secondary:this.getEventColor(r.party_size,!0)},meta:{reservation:r,partySize:r.party_size,customerName:o,customerPhone:r.users?.phone||r.customer_phone||"",tableInfo:s}}}),this.loading=!1},error:e=>{console.error("\u274C Errore nel caricamento prenotazioni:",e),this.loading=!1,this.events=this.createSampleEvents()}}),this.reservationService.loadRestaurantReservations()}getEventColor(e,r=!1){return e<=2?r?"#4CAF50":"#8BC34A":e<=4?r?"#FF9800":"#FFC107":r?"#F44336":"#E91E63"}createSampleEvents(){let e=new Date,r=new Date(e);r.setDate(e.getDate()+1);let t=new Date(e);return t.setDate(e.getDate()+2),[{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0),title:"Mario Rossi - 4 persone",color:{primary:"#C44536",secondary:"#F7F3F8"},meta:{reservation:{},customerName:"Mario Rossi",partySize:4,tableInfo:"Tavolo 1"}},{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),20,0),title:"Laura Bianchi - 2 persone",color:{primary:"#e09900",secondary:"#F7F3F8"},meta:{reservation:{},customerName:"Laura Bianchi",partySize:2,tableInfo:"Tavolo 2"}},{start:new Date(r.getFullYear(),r.getMonth(),r.getDate(),19,30),title:"Giuseppe Verdi - 6 persone",color:{primary:"#8d0092",secondary:"#F7F3F8"},meta:{reservation:{},customerName:"Giuseppe Verdi",partySize:6,tableInfo:"Tavolo 3"}},{start:new Date(t.getFullYear(),t.getMonth(),t.getDate(),13,0),title:"Anna Russo - 3 persone",color:{primary:"#C44536",secondary:"#F7F3F8"},meta:{reservation:{},customerName:"Anna Russo",partySize:3,tableInfo:"Tavolo 4"}}]}mapReservationsToEvents(e){return e.map(r=>{let t=new Date(r.reservation_date),[i,a]=r.reservation_time.split(":").map(Number);t.setHours(i,a);let o=r.users?`${r.users.first_name} ${r.users.last_name}`:r.customer_name||"Cliente",s=r.tables?`${r.tables.table_name} (${r.tables.table_number})`:"Tavolo da assegnare";return{id:r.id,start:t,title:`${o} - ${r.party_size} persone`,color:{primary:"#C44536",secondary:"#F7F3F8"},meta:{reservation:r,customerName:o,partySize:r.party_size,tableInfo:s}}})}calculateMaxCapacity(){return Te(this,null,function*(){try{yield this.tableService.loadData();let e=this.tableService.dataSubject.value;this.maxCapacity=e.reduce((r,t)=>r+(t.capacity||0),0),console.log("\u{1F4CA} Max capacity calculated:",this.maxCapacity)}catch(e){console.error("Error calculating max capacity:",e),this.maxCapacity=50}})}onDayClick(e){console.log("\u{1F4C5} Day clicked:",e.day.date),this.selectedDate=e.day.date,this.showReservationModal=!0}onEventClick(e){let r=e.event,t=r.meta.reservation;alert(`
      Prenotazione di: ${r.meta.customerName}
      Data: ${r.start.toLocaleDateString("it-IT")}
      Ora: ${r.start.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}
      Persone: ${r.meta.partySize}
      Tavolo: ${r.meta.tableInfo}
      Richieste speciali: ${t.special_requests||"Nessuna"}
      Stato: ${t.status}
    `)}createManualReservation(){return Te(this,null,function*(){if(this.validateReservation())try{let r={reservation_date:this.selectedDate.toISOString().split("T")[0],reservation_time:this.newReservation.reservation_time,party_size:this.newReservation.party_size,special_requests:this.newReservation.special_requests,customer_name:this.newReservation.customer_name,customer_phone:this.newReservation.customer_phone};(yield this.calendarService.createManualReservation(r))?(yield this.loadCalendarData(),this.closeReservationModal(),alert("Prenotazione creata con successo!")):alert("Errore durante la creazione della prenotazione")}catch(e){console.error("Error creating reservation:",e),alert(`Errore durante la creazione: ${e.message}`)}})}validateReservation(){return this.newReservation.customer_name.trim()?this.newReservation.customer_phone.trim()?this.newReservation.party_size<1?(alert("Il numero di persone deve essere almeno 1"),!1):!0:(alert("Inserisci il telefono del cliente"),!1):(alert("Inserisci il nome del cliente"),!1)}closeReservationModal(){this.showReservationModal=!1,this.resetReservationForm()}resetReservationForm(){this.newReservation={customer_name:"",customer_phone:"",reservation_time:"20:00",party_size:2,special_requests:""}}setView(e){this.view=e}previous(){({[De.Month]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()-1,1),[De.Week]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-7),[De.Day]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-1)})[this.view]()}next(){({[De.Month]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+1,1),[De.Week]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+7),[De.Day]:()=>this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+1)})[this.view]()}today(){this.viewDate=new Date}getTodaysReservationCount(){let e=new Date().toISOString().split("T")[0];return this.events.filter(r=>r.start.toISOString().split("T")[0]===e).length}getOccupiedTablesCount(){return Math.min(this.getTodaysReservationCount(),this.maxCapacity)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=te({type:n,selectors:[["app-calendar-view"]],features:[Xn([{provide:Se,useFactory:Br},tt,Je,Ze,Ye])],decls:72,vars:20,consts:[[1,"page-container"],[1,"section-header"],[1,"flex","gap-sm"],[1,"material-icons","fs-lg"],[1,"section-title"],[1,"text-muted"],[1,"calendar-controls","flex","justify-between","items-end","gap-lg","mb-lg","flex-wrap"],[1,"view-controls","flex","gap-sm"],[1,"promethea-button","ghost",3,"click"],[1,"material-icons"],[1,"date-controls","flex","gap-sm"],[1,"promethea-button",3,"click"],[1,"promethea-button","today-btn",3,"click"],[1,"date-display"],[1,"calendar-stats","grid-cards"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"text-md","font-semibold","m-0"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"calendar-wrapper"],[3,"viewDate","events","activeDayIsOpen","dayClicked","eventClicked",4,"ngIf"],[3,"viewDate","events","eventClicked",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"dayClicked","eventClicked","viewDate","events","activeDayIsOpen"],[3,"eventClicked","viewDate","events"],[1,"modal-overlay"],[1,"modal-container","modal-md"],[1,"p-md","border-t","border-b","border-[var(--smoke-1)]","flex","justify-between","items-center"],[1,"modal-title"],[1,"icon-button","close-button",3,"click"],[1,"p-lg","flex-1","overflow-y-auto"],[1,"selected-date","flex","items-start","gap-sm","py-sm","border-b","border-[var(--smoke-1)]","last:border-0"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"reservation-form","generic-form",3,"ngSubmit"],[1,"flex","flex-col","gap-1","flex-1","min-w-300"],["for","customerName",1,"standard-label"],["type","text","id","customerName","name","customerName","required","","placeholder","Inserisci nome cliente",3,"ngModelChange","ngModel"],["for","customerPhone",1,"standard-label"],["type","tel","id","customerPhone","name","customerPhone","required","","placeholder","Inserisci telefono",3,"ngModelChange","ngModel"],[1,"grid","gap-md","flex","flex-wrap"],["for","reservationTime",1,"standard-label"],["type","time","id","reservationTime","name","reservationTime","required","",3,"ngModelChange","ngModel"],["for","partySize",1,"standard-label"],["type","number","id","partySize","name","partySize","min","1","max","20","required","",3,"ngModelChange","ngModel"],["for","specialRequests",1,"standard-label"],["id","specialRequests","name","specialRequests","rows","3","placeholder","Note o richieste particolari...",3,"ngModelChange","ngModel"],[1,"flex","justify-between","items-center","gap-md","mt-lg","pt-md","border-t","border-[var(--smoke-1)]"],["type","button",1,"promethea-button","ghost",3,"click"],["type","submit",1,"promethea-button"]],template:function(r,t){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),S(4,"calendar_today"),p(),m(5,"h1",4),S(6,"Calendario Prenotazioni"),p()(),m(7,"p",5),S(8,"Gestisci e visualizza tutte le prenotazioni del ristorante"),p()(),m(9,"div",6)(10,"div",7)(11,"button",8),F("click",function(){return t.setView(t.CalendarView.Month)}),m(12,"span",9),S(13,"calendar_view_month"),p(),S(14," Mese "),p(),m(15,"button",8),F("click",function(){return t.setView(t.CalendarView.Week)}),m(16,"span",9),S(17,"calendar_view_week"),p(),S(18," Settimana "),p(),m(19,"button",8),F("click",function(){return t.setView(t.CalendarView.Day)}),m(20,"span",9),S(21,"calendar_view_day"),p(),S(22," Giorno "),p()(),m(23,"div",10)(24,"button",11),F("click",function(){return t.previous()}),m(25,"span",9),S(26,"chevron_left"),p()(),m(27,"button",12),F("click",function(){return t.today()}),S(28," Oggi "),p(),m(29,"button",11),F("click",function(){return t.next()}),m(30,"span",9),S(31,"chevron_right"),p()()(),m(32,"div",13)(33,"strong"),S(34),P(35,"date"),p()()(),m(36,"div",14)(37,"div",15)(38,"div",16)(39,"span",17),S(40,"event_available"),p(),m(41,"h3",18),S(42,"Prenotazioni Oggi"),p()(),m(43,"div",19),S(44),p(),m(45,"div",20),S(46,"Prenotazioni per oggi"),p()(),m(47,"div",15)(48,"div",16)(49,"span",17),S(50,"group"),p(),m(51,"h3",18),S(52,"Capienza Massima"),p()(),m(53,"div",19),S(54),p(),m(55,"div",20),S(56,"Posti totali disponibili"),p()(),m(57,"div",15)(58,"div",16)(59,"span",17),S(60,"table_restaurant"),p(),m(61,"h3",18),S(62,"Tavoli Occupati"),p()(),m(63,"div",19),S(64),p(),m(65,"div",20),S(66),p()()(),m(67,"div",21),ne(68,cs,1,3,"mwl-calendar-month-view",22)(69,us,1,2,"mwl-calendar-week-view",23)(70,ms,1,2,"mwl-calendar-day-view",23),p()(),ne(71,ps,61,11,"div",24)),r&2&&(v(11),J("active",t.view===t.CalendarView.Month),v(4),J("active",t.view===t.CalendarView.Week),v(4),J("active",t.view===t.CalendarView.Day),v(15),ge(se(35,17,t.viewDate,"MMMM yyyy")),v(10),ge(t.getTodaysReservationCount()),v(10),ge(t.maxCapacity),v(10),ge(t.getTodaysReservationCount()),v(2),ot("Su ",t.maxCapacity," totali"),v(),J("loading",t.loading),v(),k("ngIf",t.view===t.CalendarView.Month),v(),k("ngIf",t.view===t.CalendarView.Week),v(),k("ngIf",t.view===t.CalendarView.Day),v(),k("ngIf",t.showReservationModal))},dependencies:[Qn,qn,mi,si,ni,li,ii,ri,ui,ci,di,oi,ai,nr,er,En,tr,Zn],styles:[".calendar-header[_ngcontent-%COMP%]{margin-bottom:var(--gutter-xl)}.calendar-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--gap-lg);margin-top:var(--gap-md)}.view-controls[_ngcontent-%COMP%], .date-controls[_ngcontent-%COMP%]{display:flex;gap:var(--gap-sm);align-items:center}.date-display[_ngcontent-%COMP%]{color:var(--text-color);font-size:var(--fs-md);font-weight:600;padding:var(--gap-sm)}.calendar-stats[_ngcontent-%COMP%]{margin:var(--gap-lg) 0}.calendar-wrapper[_ngcontent-%COMP%]{position:relative}.calendar-wrapper.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}  .cal-month-view{background:var(--background);border-radius:12px;overflow:hidden;box-shadow:0 4px 12px var(--shadow);width:100%!important}  .cal-month-view .cal-header{background:var(--smoke-color-2);color:var(--text-color);font-weight:600;border-bottom:2px solid var(--primary);display:flex!important;flex-direction:row!important;width:100%!important}  .cal-month-view .cal-header .cal-cell{padding:var(--gap-md) var(--gap-sm);text-align:center;font-size:var(--fs-sm);flex:1;min-width:0;border-right:1px solid var(--smoke-1)}  .cal-month-view .cal-header .cal-cell:last-child{border-right:none}  .cal-month-view .cal-days{display:block!important;width:100%!important}  .cal-month-view .cal-cell-row{display:flex!important;flex-direction:row!important;width:100%!important;margin:0!important;padding:0!important}  .cal-month-view .cal-day-cell{flex:1;min-height:120px;padding:var(--gap-sm);border:1px solid var(--smoke-1);border-top:none;border-left:none;transition:all .2s ease;background:var(--background);position:relative;display:flex;flex-direction:column;width:calc(100% / 7)!important;box-sizing:border-box}  .cal-month-view .cal-cell-row .cal-day-cell:last-child{border-right:none}  .cal-month-view .cal-cell-row:last-child .cal-day-cell{border-bottom:1px solid var(--smoke-1)}  .cal-month-view .cal-day-cell:hover{background:var(--smoke-1)}  .cal-month-view .cal-day-number{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);margin-bottom:var(--gap-sm);opacity:.9;align-self:flex-end}  .cal-month-view .cal-day-badge{font-weight:600;position:absolute;top:var(--gap-sm);right:var(--gap-sm);display:inline-block;padding:.25rem .5rem;border-radius:50%;font-size:var(--fs-sm);background:var(--smoke-color-2);color:var(--text-color);border:1px solid var(--smoke-1);text-transform:capitalize}  .cal-month-view .cal-events{flex:1;display:flex;flex-direction:column;gap:2px;margin-top:var(--gap-sm);overflow-y:auto;max-height:80px}  .cal-month-view .cal-event{background:var(--primary);border-color:var(--primary);padding:var(--gap-sm);border-radius:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500;transition:all .2s ease;cursor:pointer}  .cal-month-view .cal-event:hover{background:var(--secondary);border-color:var(--secondary);transform:translateY(-1px);box-shadow:0 2px 8px var(--shadow)}  .cal-today .cal-day-number{color:var(--primary);font-weight:800}  .cal-today{background:color-mix(in srgb,var(--primary) 8%,transparent)!important}  .cal-out-month .cal-day-number{opacity:.3}  .cal-week-view .cal-header,   .cal-day-view .cal-header{background:var(--smoke-color-2);color:var(--text-color);font-weight:600;border-bottom:2px solid var(--primary);display:flex!important}  .cal-week-view .cal-header .cal-cell,   .cal-day-view .cal-header .cal-cell{padding:var(--gap-sm);text-align:center;flex:1}  .cal-week-view .cal-time-events,   .cal-day-view .cal-time-events{border:1px solid var(--smoke-1);border-radius:0 0 12px 12px;overflow:hidden}  .cal-week-view .cal-hour,   .cal-day-view .cal-hour{background:var(--background);border-color:var(--smoke-1);color:var(--text-color);transition:background-color .2s ease}  .cal-week-view .cal-hour:hover,   .cal-day-view .cal-hour:hover{background:var(--smoke-1)}  .cal-week-view .cal-hour-odd,   .cal-day-view .cal-hour-odd{background:color-mix(in srgb,var(--background) 98%,transparent)}  .cal-week-view .cal-event,   .cal-day-view .cal-event{background:var(--primary);border-color:var(--primary);padding:4px 8px;border-radius:6px;font-weight:500;transition:all .2s ease}  .cal-week-view .cal-event:hover,   .cal-day-view .cal-event:hover{background:var(--secondary);border-color:var(--secondary);transform:translateY(-1px);box-shadow:0 2px 8px var(--shadow)}  .cal-day-view .cal-hour-segment{border-color:var(--smoke-1)}  .cal-day-view .cal-hour-segment:hover{background:var(--smoke-1)}@media (max-width: 768px){.calendar-container[_ngcontent-%COMP%]{padding:var(--gap-sm)}.calendar-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gap-md)}.view-controls[_ngcontent-%COMP%], .date-controls[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.calendar-wrapper[_ngcontent-%COMP%]{padding:var(--gap-md);min-height:500px}  .cal-month-view .cal-day-cell{min-height:80px;padding:8px 4px}  .cal-month-view .cal-day-number{margin:4px;font-size:.8rem}  .cal-month-view .cal-event{font-size:.7rem;padding:2px 4px}.calendar-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.calendar-wrapper[_ngcontent-%COMP%]{min-height:400px;padding:var(--gap-sm)}  .cal-month-view .cal-day-cell{min-height:60px;padding:4px 2px}  .cal-month-view .cal-day-number{font-size:.7rem}}"]})};export{Nr as RestaurantCalendar};
