import{a as we}from"./chunk-R65J2MEW.js";import{a as fe}from"./chunk-YFIAMIX7.js";import{a as ye}from"./chunk-IX3NTRKV.js";import{a as ge}from"./chunk-JA5I2VC4.js";import"./chunk-Z3UXT6XE.js";import{eb as he,fb as xe}from"./chunk-GDRKFSJ5.js";import{a as te,b as ne,d as ie,e as ae,g as re,h as oe,i as se,j as le,q as de,r as ce,s as me,t as pe,u as ve,v as ue,x as _e}from"./chunk-D6L6OQLW.js";import{d as ee}from"./chunk-SMFU76LW.js";import"./chunk-TSK5DXKO.js";import{j as U,k as J,l as K,m as Q,q as X,u as Z}from"./chunk-WSJCHGNS.js";import{$b as O,Bb as c,Ha as l,Ib as H,Jb as A,Kb as T,Mb as j,Nb as s,Ob as w,Pb as g,Qb as N,Tb as C,Ub as b,Vb as S,Xa as L,Yb as Y,Z as B,ab as _,bc as I,ca as z,dc as G,ia as p,ja as v,nb as m,ob as r,pb as i,qb as P,ua as q,ub as F,vb as V,wb as R,zb as h}from"./chunk-QIXMMTC2.js";import{j as k}from"./chunk-4ZZIO3ZI.js";var W=class o extends ge{getTableName(){return"personal_appointments"}loadByDateRange(t,e){return k(this,null,function*(){let n=yield this.getCurrentRestaurantId();if(!n)return[];let{data:a,error:d}=yield this.getSupabaseClientPublic().from(this.getTableName()).select("*").eq("restaurant_id",n).gte("start_datetime",t.toISOString()).lte("end_datetime",e.toISOString()).order("start_datetime",{ascending:!0});return d?(this.handleError("loadByDateRange",d),[]):a||[]})}static \u0275fac=(()=>{let t;return function(n){return(t||(t=q(o)))(n||o)}})();static \u0275prov=B({token:o,factory:o.\u0275fac,providedIn:"root"})};var ke=()=>["LUN","MAR","MER","GIO","VEN","SAB","DOM"];function Re(o,t){if(o&1&&(r(0,"div",35)(1,"span"),s(2),i(),r(3,"span",36),s(4),i()()),o&2){let e=t.$implicit;l(2),g("Tavoli da ",e.size,":"),l(2),w(e.count)}}function Pe(o,t){if(o&1&&(r(0,"div",33),_(1,Re,5,2,"div",34),i()),o&2){let e=c();l(),m("ngForOf",e.getSimpleCapacityDistribution())}}function Te(o,t){if(o&1&&(r(0,"span",37),s(1),i()),o&2){let e=c();l(),g(" (",e.getAvailableTablesToday()," tavoli liberi) ")}}function Oe(o,t){if(o&1&&(r(0,"div",4)(1,"div",5)(2,"span",38),s(3,"event"),i(),r(4,"h3",7),s(5),O(6,"date"),i()(),r(7,"div",39),s(8),i(),r(9,"div",9),s(10),i()()),o&2){let e=c();l(5),g("Disponibilit\xE0 ",I(6,4,e.selectedDate,"dd/MM")),l(3),g(" ",e.getAvailableTablesForSelectedDate()," tavoli "),l(2),N(" Posti: ",e.todayCapacity," / ",e.calculateMaxCapacitySimple()," ")}}function Ie(o,t){if(o&1&&(r(0,"div",45),s(1),i()),o&2){let e=t.$implicit;l(),g(" ",e," ")}}function Fe(o,t){if(o&1&&(r(0,"span",51),s(1),i()),o&2){let e=c().$implicit,n=c(2);A("background",e.events[0].meta.eventType==="personal"?"var(--purple)":n.getEventColor(e.events[0].meta.partySize)),l(),g(" ",e.events.length," ")}}function Ve(o,t){if(o&1&&(r(0,"span",59)(1,"span",60),s(2,"event_note"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.title," ")}}function ze(o,t){if(o&1&&(r(0,"span",59)(1,"span",61),s(2,"restaurant"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.meta.customerName," ")}}function Ae(o,t){if(o&1){let e=R();r(0,"div",55),h("click",function(a){let d=p(e).$implicit,u=c(4);return a.stopPropagation(),v(u.onEventClick(d))}),r(1,"span",56),s(2),O(3,"date"),i(),F(4,57),_(5,Ve,4,1,"span",58)(6,ze,4,1,"span",58),V(),i()}if(o&2){let e=t.$implicit,n=c(4);A("border-color",e.meta.eventType==="personal"?"var(--purple)":n.getEventColor(e.meta.partySize)),l(2),w(I(3,6,e.start,"HH:mm")),l(2),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation")}}function Ne(o,t){if(o&1){let e=R();r(0,"div",62),h("click",function(a){p(e);let d=c(2).$implicit,u=c(2);return a.stopPropagation(),v(u.onDayClick(d.date))}),s(1),i()}if(o&2){let e=c(2).$implicit,n=c(2);l(),g(" +",n.getEventsForDate(e.date).length-2," ")}}function We(o,t){if(o&1&&(r(0,"div",52),_(1,Ae,7,9,"div",53)(2,Ne,2,1,"div",54),i()),o&2){let e=c().$implicit,n=c(2);l(),m("ngForOf",n.getLimitedEventsForDate(e.date,2)),l(),m("ngIf",n.hasMoreEvents(e.date,2))}}function He(o,t){if(o&1){let e=R();r(0,"div",46),h("click",function(){let a=p(e).$implicit,d=c(2);return v(d.openDayDetails(a.date))}),r(1,"div",47)(2,"span",48),s(3),i(),_(4,Fe,2,3,"span",49),i(),_(5,We,3,2,"div",50),i()}if(o&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e.date))("current-month",e.isCurrentMonth)("other-month",!e.isCurrentMonth),l(2),T("today-number",n.isToday(e.date)),l(),g(" ",e.date.getDate()," "),l(),m("ngIf",e.events.length>0),l(),m("ngIf",e.events.length>0)}}function $e(o,t){if(o&1&&(r(0,"div",40)(1,"div",41),_(2,Ie,2,1,"div",42),i(),r(3,"div",43),_(4,He,6,11,"div",44),i()()),o&2){let e=c();l(2),m("ngForOf",Y(2,ke)),l(2),m("ngForOf",e.getMonthDays())}}function Be(o,t){if(o&1&&(r(0,"div",70)(1,"div",71),s(2),O(3,"date"),i(),r(4,"div",72),s(5),i()()),o&2){let e=t.$implicit,n=c(2);T("today",n.isToday(e)),l(2),w(I(3,4,e,"EEE")),l(3),w(e.getDate())}}function qe(o,t){if(o&1&&(r(0,"div",73),s(1),i()),o&2){let e=t.$implicit;l(),g(" ",e,":00 ")}}function Le(o,t){if(o&1&&(r(0,"div",82)(1,"span",83),s(2,"event_note"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.title," ")}}function je(o,t){if(o&1&&(r(0,"div",82)(1,"span",83),s(2,"restaurant"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.meta.customerName," ")}}function Ye(o,t){if(o&1&&(r(0,"div",84),s(1),i()),o&2){let e=c().$implicit;l(),g(" ",e.meta.partySize,"p ")}}function Ge(o,t){if(o&1){let e=R();r(0,"div",78),h("click",function(a){let d=p(e).$implicit,u=c(4);return a.stopPropagation(),v(u.onEventClick(d))}),r(1,"div",79),s(2),O(3,"date"),i(),F(4,57),_(5,Le,4,1,"div",80)(6,je,4,1,"div",80),V(),_(7,Ye,2,1,"div",81),i()}if(o&2){let e=t.$implicit,n=c(4);A("background",n.getEventBackground(e)),l(2),w(I(3,7,e.start,"HH:mm")),l(2),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),m("ngIf",e.meta.eventType==="reservation")}}function Ue(o,t){if(o&1){let e=R();r(0,"div",76),h("click",function(){p(e);let a=c().$implicit,d=c(2);return v(d.openDayDetails(a))}),_(1,Ge,8,10,"div",77),i()}if(o&2){let e=t.$implicit,n=c().$implicit,a=c(2);l(),m("ngForOf",a.getEventsForHour(n,e))}}function Je(o,t){if(o&1&&(r(0,"div",74),_(1,Ue,2,1,"div",75),i()),o&2){let e=c(2);l(),m("ngForOf",e.getWeekViewHours())}}function Ke(o,t){if(o&1&&(r(0,"div",63)(1,"div",64),P(2,"div",65),_(3,Be,6,7,"div",66),i(),r(4,"div",67)(5,"div",65),_(6,qe,2,1,"div",68),i(),_(7,Je,2,1,"div",69),i()()),o&2){let e=c();l(3),m("ngForOf",e.getWeekDays()),l(3),m("ngForOf",e.getWeekViewHours()),l(),m("ngForOf",e.getWeekDays())}}function Qe(o,t){if(o&1&&(r(0,"div",82),s(1),i()),o&2){let e=c().$implicit;l(),g(" \u{1F4CC} ",e.title," ")}}function Xe(o,t){if(o&1&&(r(0,"div",82),s(1),i()),o&2){let e=c().$implicit;l(),g(" ",e.meta.customerName," ")}}function Ze(o,t){if(o&1&&(r(0,"div",84),s(1),i()),o&2){let e=c().$implicit;l(),N(" ",e.meta.partySize," persone \u2022 ",e.meta.tableInfo," ")}}function et(o,t){if(o&1){let e=R();r(0,"div",93),h("click",function(a){let d=p(e).$implicit,u=c(3);return a.stopPropagation(),v(u.onEventClick(d))}),r(1,"div",79),s(2),O(3,"date"),i(),F(4,57),_(5,Qe,2,1,"div",80)(6,Xe,2,1,"div",80),V(),_(7,Ze,2,2,"div",81),i()}if(o&2){let e=t.$implicit,n=c(3);A("background",n.getEventBackground(e)),l(2),w(I(3,7,e.start,"HH:mm")),l(2),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),m("ngIf",e.meta.eventType==="reservation")}}function tt(o,t){if(o&1){let e=R();r(0,"div",89)(1,"div",90),s(2),i(),r(3,"div",91),h("click",function(){p(e);let a=c(2);return v(a.openDayDetails(a.viewDate))}),_(4,et,8,10,"div",92),i()()}if(o&2){let e=t.$implicit,n=c(2);l(2),g("",e,":00"),l(2),m("ngForOf",n.getEventsForHour(n.viewDate,e))}}function nt(o,t){if(o&1&&(r(0,"div",85)(1,"div",86)(2,"h2"),s(3),O(4,"date"),i()(),r(5,"div",87),_(6,tt,5,2,"div",88),i()()),o&2){let e=c();l(3),w(I(4,2,e.viewDate,"fullDate")),l(3),m("ngForOf",e.getWeekViewHours())}}function it(o,t){if(o&1&&(r(0,"option",123),s(1),i()),o&2){let e=t.$implicit;m("value",e),l(),g(" ",e," ")}}function at(o,t){if(o&1){let e=R();r(0,"div",94)(1,"div",95)(2,"div",96)(3,"h3",97)(4,"span",6),s(5,"event_available"),i(),s(6," Nuova Prenotazione "),i(),r(7,"button",24),h("click",function(){p(e);let a=c();return v(a.closeNewReservationModal())}),r(8,"span",25),s(9,"close"),i()()(),r(10,"div")(11,"form",98),h("ngSubmit",function(){p(e);let a=c();return v(a.createManualReservation())}),r(12,"div",99)(13,"div",100)(14,"div",101)(15,"label",102),P(16,"lucide-angular",103),s(17," Nome * "),i(),r(18,"input",104),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.customer_name,a)||(d.newReservation.customer_name=a),v(a)}),i()(),r(19,"div",101)(20,"label",105)(21,"span",25),s(22,"person_outline"),i(),s(23," Cognome * "),i(),r(24,"input",106),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.customer_surname,a)||(d.newReservation.customer_surname=a),v(a)}),i()()(),r(25,"div",100)(26,"div",101)(27,"label",107),P(28,"lucide-angular",108),s(29," Email "),i(),r(30,"input",109),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.customer_email,a)||(d.newReservation.customer_email=a),v(a)}),i()(),r(31,"div",101)(32,"label",110)(33,"span",25),s(34,"phone"),i(),s(35," Telefono * "),i(),r(36,"input",111),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.customer_phone,a)||(d.newReservation.customer_phone=a),v(a)}),i()()(),r(37,"div",100)(38,"div",101)(39,"label",112)(40,"span",25),s(41,"event"),i(),s(42," Data * "),i(),r(43,"input",113),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.reservation_date,a)||(d.newReservation.reservation_date=a),v(a)}),h("change",function(){p(e);let a=c();return v(a.onReservationDateChange())}),i()(),r(44,"div",101)(45,"label",114)(46,"span",25),s(47,"schedule"),i(),s(48," Ora * "),i(),r(49,"select",115),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.reservation_time,a)||(d.newReservation.reservation_time=a),v(a)}),r(50,"option",116),s(51,"Scegli un orario"),i(),_(52,it,2,2,"option",117),i()()(),r(53,"div",100)(54,"div",101)(55,"label",118)(56,"span",25),s(57,"group"),i(),s(58," Numero Persone * "),i(),r(59,"input",119),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.party_size,a)||(d.newReservation.party_size=a),v(a)}),i()(),r(60,"div",101)(61,"label",120),P(62,"lucide-angular",121),s(63," Stato "),i(),r(64,"select",122),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.status,a)||(d.newReservation.status=a),v(a)}),r(65,"option",123),s(66,"Confermata"),i(),r(67,"option",123),s(68,"In attesa"),i(),r(69,"option",123),s(70,"Cancellata"),i()()()(),r(71,"div",101)(72,"label",124)(73,"span",25),s(74,"notes"),i(),s(75," Richieste Speciali "),i(),r(76,"textarea",125),S("ngModelChange",function(a){p(e);let d=c();return b(d.newReservation.special_requests,a)||(d.newReservation.special_requests=a),v(a)}),i()()(),r(77,"div",126)(78,"button",127),h("click",function(){p(e);let a=c();return v(a.closeNewReservationModal())}),r(79,"span",25),s(80,"close"),i(),s(81," Annulla "),i(),r(82,"button",128),P(83,"lucide-angular",27),s(84," Crea Prenotazione "),i()()()()()()}if(o&2){let e=c();l(16),m("size",20),l(2),C("ngModel",e.newReservation.customer_name),l(6),C("ngModel",e.newReservation.customer_surname),l(4),m("size",20),l(2),C("ngModel",e.newReservation.customer_email),l(6),C("ngModel",e.newReservation.customer_phone),l(7),C("ngModel",e.newReservation.reservation_date),m("min",e.minDate),l(6),C("ngModel",e.newReservation.reservation_time),l(3),m("ngForOf",e.getAvailableTimeSlotsForDate(e.selectedDate)),l(7),C("ngModel",e.newReservation.party_size),l(5),C("ngModel",e.newReservation.status),l(),m("value",e.ReservationStatus.Confirmed),l(2),m("value",e.ReservationStatus.Pending),l(2),m("value",e.ReservationStatus.Cancelled),l(7),C("ngModel",e.newReservation.special_requests),l(7),m("size",20)}}function rt(o,t){if(o&1&&(r(0,"span")(1,"span",60),s(2,"event_note"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.title," ")}}function ot(o,t){if(o&1&&(r(0,"span")(1,"span",60),s(2,"restaurant"),i(),s(3),i()),o&2){let e=c().$implicit;l(3),g(" ",e.meta.customerName," ")}}function st(o,t){if(o&1&&(r(0,"span",158),s(1),i()),o&2){let e=c().$implicit,n=c(3);j(n.getReservationStatusClass(e.meta.status)),l(),g(" ",e.meta.status," ")}}function lt(o,t){if(o&1&&(r(0,"div",160)(1,"span",161),s(2,"email"),i(),r(3,"span",162),s(4),i()()),o&2){let e=c(2).$implicit;l(4),w(e.meta.customerEmail)}}function dt(o,t){if(o&1&&(r(0,"div",159)(1,"div",160)(2,"span",161),s(3,"phone"),i(),r(4,"span",162),s(5),i()(),_(6,lt,5,1,"div",163),i()),o&2){let e=c().$implicit;l(5),w(e.meta.customerPhone),l(),m("ngIf",e.meta.customerEmail)}}function ct(o,t){if(o&1&&(F(0),r(1,"div",153)(2,"span",154),s(3,"group"),i(),r(4,"div",155),s(5),i(),r(6,"div",156),s(7,"Persone"),i()(),r(8,"div",153)(9,"span",154),s(10,"table_restaurant"),i(),r(11,"div",155),s(12),i(),r(13,"div",156),s(14,"Tavolo"),i()(),V()),o&2){let e=c().$implicit;l(5),w(e.meta.partySize),l(7),w(e.meta.tableInfo||"\u2014")}}function mt(o,t){if(o&1&&(F(0),r(1,"div",153)(2,"span",154),s(3,"description"),i(),r(4,"div",155),s(5),i(),r(6,"div",156),s(7,"Descrizione"),i()(),r(8,"div",153)(9,"span",154),s(10,"access_time"),i(),r(11,"div",155),s(12),O(13,"date"),i(),r(14,"div",156),s(15,"Fine"),i()(),V()),o&2){let e=c().$implicit;l(5),w(e.meta.description||"Nessuna descrizione"),l(7),w(e.meta.isAllDay?"Tutto il giorno":I(13,2,e.end,"HH:mm"))}}function pt(o,t){if(o&1&&(r(0,"div",164)(1,"div",165)(2,"span",166),s(3,"notes"),i(),r(4,"strong",162),s(5,"Note"),i()(),r(6,"p",167),s(7),i()()),o&2){let e=c().$implicit;l(7),w(e.meta.reservation.special_requests)}}function vt(o,t){if(o&1){let e=R();r(0,"div",140)(1,"div",141)(2,"div",142)(3,"div",143)(4,"h4",144),F(5,57),_(6,rt,4,1,"span",145)(7,ot,4,1,"span",145),V(),r(8,"span",146),s(9),i()(),_(10,st,2,3,"span",147),i(),_(11,dt,7,2,"div",148),i(),r(12,"div",142)(13,"button",149),h("click",function(){let a=p(e).$implicit,d=c(3);return v(d.editEvent(a))}),r(14,"span",25),s(15,"edit"),i()(),r(16,"button",150),h("click",function(){let a=p(e).$implicit,d=c(3);return v(d.deleteEvent(a))}),P(17,"lucide-angular",151),i()()(),r(18,"div",152)(19,"div",153)(20,"span",154),s(21,"schedule"),i(),r(22,"div",155),s(23),O(24,"date"),i(),r(25,"div",156),s(26,"Orario"),i()(),F(27,57),_(28,ct,15,2,"ng-container",145)(29,mt,16,5,"ng-container",145),V(),i(),_(30,pt,8,1,"div",157),i()}if(o&2){let e=t.$implicit;l(5),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","personal"),l(),m("ngSwitchCase","reservation"),l(),T("bg-purple",e.meta.eventType==="personal")("bg-primary",e.meta.eventType==="reservation"),l(),g(" ",e.meta.eventType==="personal"?"Personale":"Prenotazione"," "),l(),m("ngIf",e.meta.eventType==="reservation"),l(),m("ngIf",e.meta.eventType==="reservation"),l(6),m("size",20),l(6),w(I(24,16,e.start,"HH:mm")),l(4),m("ngSwitch",e.meta.eventType),l(),m("ngSwitchCase","reservation"),l(),m("ngSwitchCase","personal"),l(),m("ngIf",e.meta.eventType==="reservation"&&(e.meta.reservation==null?null:e.meta.reservation.special_requests))}}function ut(o,t){if(o&1&&(r(0,"div",138),_(1,vt,31,19,"div",139),i()),o&2){let e=c(2);l(),m("ngForOf",e.selectedDayEvents)}}function _t(o,t){o&1&&(r(0,"div",168)(1,"span",169),s(2,"event_busy"),i(),r(3,"h3",170),s(4,"Nessun evento per questa data"),i(),r(5,"p",171),s(6,'Clicca su "Nuovo Appuntamento" o "Nuova Prenotazione" per aggiungerne uno'),i()())}function gt(o,t){if(o&1){let e=R();r(0,"div",94)(1,"div",95)(2,"div",96)(3,"div",129)(4,"div",130)(5,"span",131),s(6,"calendar_today"),i()(),r(7,"div")(8,"h3",132),s(9,"Eventi del giorno"),i(),r(10,"p",133),s(11),O(12,"date"),i()()(),r(13,"button",24),h("click",function(){p(e);let a=c();return v(a.closeDayDetailsModal())}),r(14,"span",25),s(15,"close"),i()()(),r(16,"div",134)(17,"div",135)(18,"span",25),s(19,"event_available"),i(),r(20,"div")(21,"strong"),s(22),i(),s(23),i()(),_(24,ut,2,1,"div",136)(25,_t,7,0,"ng-template",null,0,G),r(27,"div",126)(28,"button",127),h("click",function(){p(e);let a=c();return v(a.closeDayDetailsModal())}),r(29,"span",25),s(30,"close"),i(),s(31," Chiudi "),i(),r(32,"button",127),h("click",function(){p(e);let a=c();return v(a.openNewPersonalAppointmentModal(a.selectedDate))}),r(33,"span",25),s(34,"event_note"),i(),s(35," Nuovo Appuntamento "),i(),r(36,"button",137),h("click",function(){p(e);let a=c();return v(a.openNewReservationForSelectedDay())}),P(37,"lucide-angular",27),s(38," Nuova Prenotazione "),i()()()()()}if(o&2){let e=H(26),n=c();l(11),w(I(12,6,n.selectedDate,"EEEE d MMMM yyyy")),l(11),g("",n.selectedDayEvents.length," eventi"),l(),g(" \xB7 ",n.calculateTotalGuests()," persone totali "),l(),m("ngIf",n.selectedDayEvents.length>0)("ngIfElse",e),l(13),m("size",20)}}function ht(o,t){if(o&1){let e=R();r(0,"div",94)(1,"div",172)(2,"div",96)(3,"h3",97)(4,"span",25),s(5,"event_note"),i(),s(6),i(),r(7,"button",24),h("click",function(){p(e);let a=c();return v(a.closePersonalAppointmentModal())}),r(8,"span",25),s(9,"close"),i()()(),r(10,"div",134)(11,"form",98,1),h("ngSubmit",function(){p(e);let a=c();return v(a.savePersonalAppointment())}),r(13,"div",101)(14,"label",173),s(15,"Titolo *"),i(),r(16,"input",174),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.title,a)||(d.personalAppointmentData.title=a),v(a)}),i()(),r(17,"div",100)(18,"div",101)(19,"label",173),s(20,"Inizio *"),i(),r(21,"input",175),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.start_datetime,a)||(d.personalAppointmentData.start_datetime=a),v(a)}),i()(),r(22,"div",101)(23,"label",173),s(24,"Fine *"),i(),r(25,"input",176),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.end_datetime,a)||(d.personalAppointmentData.end_datetime=a),v(a)}),i()()(),r(26,"div",101)(27,"label",173),s(28,"Descrizione"),i(),r(29,"textarea",177),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.description,a)||(d.personalAppointmentData.description=a),v(a)}),i()(),r(30,"div",101)(31,"label",173),s(32,"Colore"),i(),r(33,"div",160)(34,"input",178),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.color,a)||(d.personalAppointmentData.color=a),v(a)}),i(),P(35,"div",179),i()(),r(36,"div",180)(37,"input",181),S("ngModelChange",function(a){p(e);let d=c();return b(d.personalAppointmentData.is_all_day,a)||(d.personalAppointmentData.is_all_day=a),v(a)}),i(),r(38,"span"),s(39,"Giornata intera"),i()(),r(40,"div",126)(41,"button",127),h("click",function(){p(e);let a=c();return v(a.closePersonalAppointmentModal())}),s(42," Annulla "),i(),r(43,"button",182),s(44," Salva "),i()()()()()()}if(o&2){let e=H(12),n=c();l(6),g(" ",n.editingPersonalAppointment?"Modifica":"Nuovo"," Appuntamento Personale "),l(10),C("ngModel",n.personalAppointmentData.title),l(5),C("ngModel",n.personalAppointmentData.start_datetime),l(4),C("ngModel",n.personalAppointmentData.end_datetime),l(4),C("ngModel",n.personalAppointmentData.description),l(5),C("ngModel",n.personalAppointmentData.color),l(),A("background-color",n.personalAppointmentData.color),l(2),C("ngModel",n.personalAppointmentData.is_all_day),l(6),m("disabled",e.invalid)}}var be=(n=>(n.Month="month",n.Week="week",n.Day="day",n))(be||{}),Se=(n=>(n.Pending="pending",n.Confirmed="confirmed",n.Cancelled="cancelled",n))(Se||{}),Ce=class o{reservationService=z(ye);shiftService=z(we);tableService=z(fe);authService=z(ee);personalAppointmentService=z(W);view="month";CalendarView=be;viewDate=new Date;minDate=new Date().toISOString().split("T")[0];events=[];ReservationStatus=Se;personalEvents=[];showPersonalAppointmentModal=!1;editingPersonalAppointment=null;personalAppointmentData={title:"",description:"",start_datetime:"",end_datetime:"",color:"#3788d8",is_all_day:!1};showNewReservationModal=!1;showDayDetailsModal=!1;showReservationModal=!1;saving=!1;tables=[];maxCapacity=0;tableStats=null;selectedDate=new Date;selectedDayEvents=[];newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(new Date),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"};mobileTooltipDay=null;mobileTooltipTimeout=null;todayCapacity=0;loading=!1;shifts=[];calendarStartHour=8;calendarEndHour=23;availableTimeSlots=[];ngOnInit(){return k(this,null,function*(){this.minDate=this.formatDateForInput(new Date),console.log("\u{1F504} Calendar component initialized"),this.setupSubscriptions(),yield this.loadShifts(),yield this.loadTables(),yield this.loadCalendarData(),yield this.loadPersonalAppointments()})}setupSubscriptions(){this.reservationService.restaurantReservations$.subscribe(t=>{console.log("\u{1F4C5} Reservations received:",t.length),this.events=this.mapReservationsToEvents(t),this.calculateTodayCapacity(),this.events.length>0&&console.log("\u{1F4CC} First event:",this.events[0])}),this.tableService.data$.subscribe(t=>{console.log("\u{1F4CA} Tables updated:",t?.length),this.tables=t||[],this.calculateMaxCapacity(),this.calculateTodayCapacity()})}loadShifts(){return k(this,null,function*(){try{this.shifts=this.shiftService.data,(!this.shifts||this.shifts.length===0)&&(yield this.shiftService.loadData(),this.shifts=this.shiftService.data),this.calculateCalendarHoursFromShifts(),this.calculateAvailableTimeSlots(),console.log("\u2705 Shifts loaded for calendar:",{startHour:this.calendarStartHour,endHour:this.calendarEndHour,weekViewHours:this.getWeekViewHours()})}catch(t){console.error("Error loading shifts:",t),this.calendarStartHour=8,this.calendarEndHour=23}})}loadCalendarData(){return k(this,null,function*(){this.loading=!0;try{console.log("\u{1F4C5} Loading calendar data..."),yield this.reservationService.loadRestaurantReservations(),console.log("\u2705 Calendar data loaded successfully"),console.log("\u{1F4CA} Events after load:",this.events.length)}catch(t){console.error("Error loading calendar data:",t)}finally{this.loading=!1}})}loadReservations(){this.reservationService.loadRestaurantReservations()}getEventColor(t){return t?t<=2?"var(--primary)":t<=4?"var(--secondary)":"var(--tertiary)":"var(--tertiary)"}mapReservationsToEvents(t){return t.map(e=>{try{let[n,a,d]=e.reservation_date.split("-").map(Number),[u,x,y=0]=e.reservation_time.split(":").map(Number),E=new Date(n,a-1,d,u,x,y),M="Cliente",f="";if(e.users)M=e.users.first_name||"",f=e.users.last_name||"";else if(e.customer_name)if(e.customer_name&&e.customer_surname)M=e.customer_name,f=e.customer_surname;else{let $=e.customer_name.trim().split(" ");M=$[0]||"",f=$.slice(1).join(" ")||""}let D=e.users?.phone||e.customer_phone||"",Me=e.users?.email||e.customer_email||"",De=e.tables?`Tavolo ${e.tables.table_number}`:"Da assegnare";return{id:e.id,start:E,title:`${M} ${f} - ${e.party_size} persone`,color:{primary:this.getEventColor(e.party_size),secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:`${M} ${f}`.trim(),customerSurname:f,customerEmail:Me,customerPhone:D,partySize:e.party_size,tableInfo:De,status:e.status||"confirmed"}}}catch(n){console.error("\u274C Error mapping reservation:",e.id,n);let a=new Date;return{id:e.id,start:a,title:"Errore nella prenotazione",color:{primary:"var(--danger)",secondary:"var(--background)"},meta:{eventType:"reservation",reservation:e,customerName:"Errore",customerSurname:"",customerEmail:"",customerPhone:"",partySize:e.party_size||0,tableInfo:"Errore",status:"error"}}}})}onDayClick(t){this.openDayDetails(t)}deleteReservation(t){return k(this,null,function*(){if(t&&confirm("Sei sicuro di voler eliminare questa prenotazione?"))try{yield this.reservationService.deleteReservation(t.toString()),this.events=this.events.filter(e=>e.id!==t),this.selectedDayEvents=this.selectedDayEvents.filter(e=>e.id!==t),this.calculateTodayCapacity(),this.reservationService.loadRestaurantReservations(),alert("Prenotazione eliminata con successo!"),this.selectedDayEvents.length===0&&setTimeout(()=>{this.closeDayDetailsModal()},1e3)}catch(e){console.error("Error deleting reservation:",e),alert("Errore durante l'eliminazione della prenotazione")}})}onEventClick(t){if(t.meta.eventType==="personal"){let e=t.meta.appointment;confirm(`Appuntamento: ${t.title}
Descrizione: ${t.meta.description||"Nessuna"}
Modifica?`)&&this.editPersonalAppointment(t)}else alert(`${t.meta.customerName}
${t.start.toLocaleTimeString()}
${t.meta.partySize} persone`)}deletePersonalAppointment(t){return k(this,null,function*(){if(confirm("Eliminare questo appuntamento?"))try{yield this.personalAppointmentService.delete(t),yield this.loadPersonalAppointments()}catch(e){console.error("Errore eliminazione:",e)}})}createManualReservation(){return k(this,null,function*(){if(this.validateReservation()){this.saving=!0;try{let t=`${this.newReservation.customer_name} ${this.newReservation.customer_surname}`.trim(),e=this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,n={customer_name:this.newReservation.customer_name,customer_surname:this.newReservation.customer_surname,customer_email:this.newReservation.customer_email,customer_phone:this.newReservation.customer_phone,reservation_date:this.newReservation.reservation_date,reservation_time:this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,party_size:this.newReservation.party_size,special_requests:this.newReservation.special_requests,status:this.newReservation.status};console.log("\u{1F4E4} Invio dati prenotazione:",n);let a=yield this.reservationService.createRestaurantReservation(n);a?(console.log("\u2705 Prenotazione creata con successo:",a),alert("Prenotazione creata con successo!"),yield this.reservationService.loadRestaurantReservations(),this.closeNewReservationModal()):alert("Errore durante la creazione della prenotazione")}catch(t){console.error("\u274C Errore creazione prenotazione:",t),alert(`Errore: ${t.message||"Impossibile creare la prenotazione"}`)}finally{this.saving=!1}}})}onReservationDateChange(){this.selectedDate=new Date(this.newReservation.reservation_date);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&!t.includes(this.newReservation.reservation_time)&&(this.newReservation.reservation_time=t[0])}validateReservation(){if(!this.newReservation.customer_name.trim())return alert("Inserisci il nome del cliente"),!1;if(!this.newReservation.customer_surname.trim())return alert("Inserisci il cognome del cliente"),!1;if(!this.newReservation.customer_phone.trim())return alert("Inserisci il telefono del cliente"),!1;if(this.newReservation.customer_email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newReservation.customer_email))return alert("Inserisci un'email valida (es: nome@dominio.com)"),!1;let t=new Date(this.newReservation.reservation_date),e=new Date;return e.setHours(0,0,0,0),t<e?(alert("Non puoi prenotare per una data passata"),!1):this.newReservation.party_size<1||this.newReservation.party_size>50?(alert("Il numero di persone deve essere tra 1 e 50"),!1):!0}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}closeReservationModal(){this.showReservationModal=!1,this.resetReservationForm()}resetReservationForm(){let t=new Date;this.newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(t),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"}}setView(t){this.view=t}previous(){this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()-1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-1)}next(){this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+1)}today(){this.viewDate=new Date}getWeekDays(){let t=[],e=new Date(this.viewDate),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1),d=new Date(e.setDate(a));for(let u=0;u<7;u++){let x=new Date(d);x.setDate(d.getDate()+u),t.push(x)}return t}getEventsForDay(t){let e=t.toISOString().split("T")[0];return this.events.filter(n=>n.start.toISOString().split("T")[0]===e)}getEventsForHour(t,e){let n=new Date(t);n.setHours(e,0,0,0);let a=new Date(t);return a.setHours(e+1,0,0,0),this.events.filter(d=>d.start>=n&&d.start<a)}getMonthDays(){let t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),n=new Date(t,e,1),a=new Date(t,e+1,0),d=n.getDay(),u=d===0?6:d-1,x=[],y=u;for(let f=y;f>0;f--){let D=new Date(n);D.setDate(D.getDate()-f),x.push({date:D,isCurrentMonth:!1,events:this.getEventsForDate(D)})}for(let f=1;f<=a.getDate();f++){let D=new Date(t,e,f);x.push({date:D,isCurrentMonth:!0,events:this.getEventsForDate(D)})}let M=42-x.length;for(let f=1;f<=M;f++){let D=new Date(a);D.setDate(D.getDate()+f),x.push({date:D,isCurrentMonth:!1,events:this.getEventsForDate(D)})}return x}getEventCountForDate(t){return this.getEventsForDate(t).length}getLimitedEventsForDate(t,e=3){return this.getEventsForDate(t).slice(0,e)}hasMoreEvents(t,e=3){return this.getEventsForDate(t).length>e}isToday(t){let e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isCurrentMonth(t){return t.getMonth()===this.viewDate.getMonth()}calculateCalendarHoursFromShifts(){if(!this.shifts||this.shifts.length===0){this.calendarStartHour=8,this.calendarEndHour=23;return}let t=24,e=0;this.shifts.forEach(n=>{if(n.is_active){let a=this.extractHourFromTime(n.start_time),d=this.extractHourFromTime(n.end_time);a<t&&(t=a),d>e&&(e=d)}}),this.calendarStartHour=t===24?8:t,this.calendarEndHour=e===0?23:e}extractHourFromTime(t){return t?parseInt(t.split(":")[0],10):0}extractMinutesFromTime(t){return t?parseInt(t.split(":")[1],10):0}calculateAvailableTimeSlots(){if(!this.shifts||this.shifts.length===0){this.availableTimeSlots=this.generateTimeSlots(12,23,30);return}let t=[],e=30;this.shifts.forEach(n=>{if(n.is_active){let a=this.extractHourFromTime(n.start_time),d=this.extractMinutesFromTime(n.start_time),u=this.extractHourFromTime(n.end_time),x=this.extractMinutesFromTime(n.end_time),y=this.generateTimeSlotsWithStartEnd(a,d,u,x,e);t.push(...y)}}),this.availableTimeSlots=[...new Set(t)].sort()}generateTimeSlotsWithStartEnd(t,e,n,a,d){let u=[],x=t,y=e,E=Math.floor(y/d)*d;for(E>y,y=E;x<n||x===n&&y<a;){let M=x.toString().padStart(2,"0"),f=y.toString().padStart(2,"0");u.push(`${M}:${f}`),y+=d,y>=60&&(y=0,x++)}return u}generateTimeSlots(t,e,n){let a=[];for(let d=t;d<=e;d++)for(let u=0;u<60;u+=n){let x=d.toString().padStart(2,"0"),y=u.toString().padStart(2,"0");a.push(`${x}:${y}`)}return a}getAvailableTimeSlotsForDate(t){return this.availableTimeSlots}getWeekViewHours(){console.log("\u{1F4C5} getWeekViewHours called:",{start:this.calendarStartHour,end:this.calendarEndHour,view:this.view});let t=[],e=Math.max(0,Math.min(this.calendarStartHour||8,23)),n=Math.max(e,Math.min(this.calendarEndHour||23,23));for(let a=e;a<=n;a++)t.push(a);return t}openNewReservationModal(){this.selectedDate=new Date,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0,this.resetReservationForm()}openDayDetails(t){console.log("\u{1F4C5} Opening day details for:",t),console.log("\u{1F4CA} Current events count:",this.events.length),this.selectedDate=t,this.selectedDayEvents=this.getEventsForDate(t),console.log("\u{1F4CB} Events for selected day:",this.selectedDayEvents.length),console.log("\u{1F4CB} All events:"),this.events.forEach((e,n)=>{console.log(`Event ${n}:`,{date:e.start,customer:e.meta.eventType==="reservation"?e.meta.customerName:"Appuntamento",localDate:e.start.toLocaleDateString("it-IT")})}),this.showDayDetailsModal=!0,setTimeout(()=>{console.log("\u{1F504} Modal state:",this.showDayDetailsModal)},100)}closeNewReservationModal(){this.showNewReservationModal=!1,this.resetReservationForm()}closeDayDetailsModal(){this.showDayDetailsModal=!1}openNewReservationForSelectedDay(){this.showDayDetailsModal=!1,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0}editReservation(t){if(t.meta.eventType!=="reservation")return;let e=t.meta.customerName.split(" "),n=e[0]||"",a=e.slice(1).join(" ")||"";t.meta.customerSurname&&(a=t.meta.customerSurname);let d,u=t.meta.status?.toLowerCase();u==="pending"?d="pending":u==="cancelled"||u==="cancellata"?d="cancelled":d="confirmed",this.newReservation={customer_name:n,customer_surname:a,customer_email:t.meta.customerEmail||"",customer_phone:t.meta.customerPhone||"",reservation_date:this.formatDateForInput(t.start),reservation_time:this.formatTime(t.start),party_size:t.meta.partySize,special_requests:t.meta.reservation.special_requests||"",status:d},this.showDayDetailsModal=!1,this.showNewReservationModal=!0}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}getReservationStatusClass(t){switch(t?.toLowerCase()){case"confirmed":case"confermata":return"status-confirmed";case"pending":case"in attesa":return"status-pending";case"cancelled":case"cancellata":return"status-cancelled";default:return"status-unknown"}}formatTimeForDisplay(t){if(!t)return"";let[e,n]=t.split(":");return`${e}:${n}`}formatDateForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`}formatDateForDB(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`}loadTables(){return k(this,null,function*(){try{console.log("\u{1F504} Loading restaurant tables..."),yield this.tableService.loadData();let t=this.tableService.getTables();console.log("\u2705 Tables loaded from service:",t?.length),this.tables=t||[],this.calculateMaxCapacity()}catch(t){console.error("Error loading tables:",t)}})}calculateMaxCapacity(){if(this.tables.length===0){console.log("\u26A0\uFE0F No tables found, using default capacity"),this.maxCapacity=50,this.tableStats=null;return}this.maxCapacity=this.tableService.calculateMaxCapacity(this.tables),this.tableStats=this.tableService.getTableStats(this.tables),console.log("\u{1F4CA} Capacity calculated:",{maxCapacity:this.maxCapacity,tableCount:this.tables.length,stats:this.tableStats})}getCapacityDistribution(){if(!this.tables.length)return[];let t=this.tableService.getCapacityByTableType(this.tables);return Object.entries(t).map(([e,n])=>({capacity:parseInt(e),count:n})).sort((e,n)=>e.capacity-n.capacity)}getAvailableTablesForDate(t){let e=this.formatDateForInput(t),a=this.events.filter(d=>this.formatDateForInput(d.start)===e&&d.meta.eventType==="reservation").map(d=>d.meta.reservation).filter(d=>d.table_id).map(d=>d.table_id);return this.tables.filter(d=>!a.includes(d.id))}getDateCapacityStats(t){let e=this.formatDateForInput(t),a=this.events.filter(E=>this.formatDateForInput(E.start)===e&&E.meta.eventType==="reservation").reduce((E,M)=>E+(M.meta.partySize||0),0),d=this.getAvailableTablesForDate(t),u=d.length,x=d.reduce((E,M)=>E+(M.capacity||0),0),y=this.maxCapacity>0?a/this.maxCapacity*100:0;return{totalCapacity:this.maxCapacity,usedCapacity:a,availableCapacity:x,availableTables:u,percentage:Math.round(y)}}calculateMaxCapacitySimple(){return this.tables.length===0?50:this.tables.reduce((t,e)=>t+(e.capacity||0),0)}getAvailableTablesToday(){if(this.tables.length===0)return 0;let t=new Date().toISOString().split("T")[0],e=this.events.filter(n=>new Date(n.start).toISOString().split("T")[0]===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getAvailableTablesForSelectedDate(){if(this.tables.length===0||!this.selectedDate)return 0;let t=this.formatDateForInput(this.selectedDate),e=this.events.filter(n=>this.formatDateForInput(n.start)===t&&n.meta.eventType==="reservation"&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getSimpleCapacityDistribution(){let t=[],e={};this.tables.forEach(n=>{let a=n.capacity||0;e[a]=(e[a]||0)+1});for(let[n,a]of Object.entries(e))t.push({size:parseInt(n),count:a});return t.sort((n,a)=>n.size-a.size)}isSameDate(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}getEventsForDate(t){let e=this.formatDateForInput(t);return this.allEvents.filter(n=>this.formatDateForInput(n.start)===e)}get allEvents(){return[...this.events,...this.personalEvents]}getTodaysReservationCount(){let t=new Date;return this.events.filter(e=>this.isSameDate(e.start,t)).length}calculateTodayCapacity(){let t=new Date,e=this.events.filter(n=>this.isSameDate(n.start,t)&&n.meta.eventType==="reservation");this.todayCapacity=e.reduce((n,a)=>n+(a.meta.partySize||0),0),console.log("\u{1F4C5} Today capacity (local):",{today:t.toLocaleDateString("it-IT"),events:e.length,capacity:this.todayCapacity})}calculateTotalGuests(){return this.selectedDayEvents.reduce((t,e)=>e.meta.eventType==="reservation"?t+e.meta.partySize:t,0)}loadPersonalAppointments(){return k(this,null,function*(){try{yield this.personalAppointmentService.loadData(),this.personalEvents=this.mapPersonalToEvents(this.personalAppointmentService.data)}catch(t){console.error("Errore caricamento appuntamenti personali:",t)}})}mapPersonalToEvents(t){return t.map(e=>({id:e.id,start:new Date(e.start_datetime),end:new Date(e.end_datetime),title:e.title,color:{primary:e.color||"#3788d8",secondary:"var(--background)"},meta:{eventType:"personal",description:e.description,isAllDay:e.is_all_day,appointment:e}}))}openNewPersonalAppointmentModal(t){let e=t||this.viewDate,n=new Date(e);n.setHours(9,0,0,0);let a=new Date(e);a.setHours(10,0,0,0),this.personalAppointmentData={title:"",description:"",start_datetime:this.formatDateTimeForInput(n),end_datetime:this.formatDateTimeForInput(a),color:"#3788d8",is_all_day:!1},this.editingPersonalAppointment=null,this.showPersonalAppointmentModal=!0}editPersonalAppointment(t){if(t.meta.eventType!=="personal")return;let e=t.meta.appointment;this.personalAppointmentData={title:e.title,description:e.description||"",start_datetime:this.formatDateTimeForInput(new Date(e.start_datetime)),end_datetime:this.formatDateTimeForInput(new Date(e.end_datetime)),color:e.color||"#3788d8",is_all_day:e.is_all_day||!1},this.editingPersonalAppointment=e,this.showPersonalAppointmentModal=!0}savePersonalAppointment(){return k(this,null,function*(){if(!this.personalAppointmentData.title)return;let t=yield this.authService.getCurrentStaffRestaurantId();if(!t)return;let e={restaurant_id:t,title:this.personalAppointmentData.title,description:this.personalAppointmentData.description||null,start_datetime:new Date(this.personalAppointmentData.start_datetime).toISOString(),end_datetime:new Date(this.personalAppointmentData.end_datetime).toISOString(),color:this.personalAppointmentData.color,is_all_day:this.personalAppointmentData.is_all_day};try{this.editingPersonalAppointment?yield this.personalAppointmentService.update(this.editingPersonalAppointment.id,e):yield this.personalAppointmentService.create(e),yield this.loadPersonalAppointments(),this.closePersonalAppointmentModal()}catch(n){console.error("Errore salvataggio appuntamento:",n),alert("Errore durante il salvataggio")}})}closePersonalAppointmentModal(){this.showPersonalAppointmentModal=!1,this.editingPersonalAppointment=null}formatDateTimeForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),d=t.getHours().toString().padStart(2,"0"),u=t.getMinutes().toString().padStart(2,"0");return`${e}-${n}-${a}T${d}:${u}`}editEvent(t){t.meta.eventType==="personal"?this.editPersonalAppointment(t):this.editReservation(t)}deleteEvent(t){t.meta.eventType==="personal"?t.id&&this.deletePersonalAppointment(t.id):this.deleteReservation(t.id)}getEventBackground(t){return t.meta.eventType==="personal"?"var(--tertiary)":this.getEventColor(t.meta.partySize)}getIndicatorColor(t){return t.meta.eventType==="personal"?"var(--secondary)":this.getEventColor(t.meta.partySize)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=L({type:o,selectors:[["app-calendar-view"]],decls:71,vars:41,consts:[["noEvents",""],["personalForm","ngForm"],[1,"page-container"],["data-tutorial","calendar-cards",1,"grid-cards","p-sm","mb-lg"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"text-md","font-semibold","m-0"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"text-muted","card-footer","flex-col"],[1,"flex"],["class","mt-sm text-mini flex flex-col",4,"ngIf"],[1,"material-icons","text-md"],[1,"text-md","font-bold","justify-center","flex"],["class","ml-sm text-mini",4,"ngIf"],["class","card",4,"ngIf"],[1,"flex","justify-center","w-100","p-sm"],[1,"text-md"],[1,"calendar-controls"],["data-tutorial","calendar-mode",1,"modal-footer"],[1,"promethea-button",3,"click"],[1,"promethea-button","ghost",3,"click"],["data-tutorial","calendar-view",1,"flex","items-center","gap-md","justify-center"],[1,"icon-button",3,"click"],[1,"material-icons"],["data-tutorial","calendar-add",1,"modal-footer"],["name","plus",3,"size"],[1,"p-sm"],["data-tutorial","calendar-day","class","calendar-month-view",4,"ngIf"],["class","calendar-week-view",4,"ngIf"],["class","calendar-day-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"mt-sm","text-mini","flex","flex-col"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"font-semibold"],[1,"ml-sm","text-mini"],[1,"material-icons","text-md","text-primary"],[1,"text-md","font-bold","text-info","justify-center","text-primary","flex"],["data-tutorial","calendar-day",1,"calendar-month-view"],[1,"month-weekdays","flex"],["class","month-weekday",4,"ngFor","ngForOf"],[1,"month-grid"],["class","month-day",3,"today","current-month","other-month","click",4,"ngFor","ngForOf"],[1,"month-weekday"],[1,"month-day",3,"click"],[1,"day-number-wrapper"],[1,"day-number"],["class","day-events-indicator",3,"background",4,"ngIf"],["class","month-events-compact",4,"ngIf"],[1,"day-events-indicator"],[1,"month-events-compact"],["class","month-event-compact",3,"border-color","click",4,"ngFor","ngForOf"],["class","more-events-compact",3,"click",4,"ngIf"],[1,"month-event-compact",3,"click"],[1,"event-time-small"],[3,"ngSwitch"],["class","event-customer-small",4,"ngSwitchCase"],[1,"event-customer-small"],[1,"material-icons",2,"vertical-align","middle"],[1,"material-icons",2,"font-size","14px"],[1,"more-events-compact",3,"click"],[1,"calendar-week-view"],[1,"week-header","flex"],[1,"week-time-column"],["class","week-day-header",3,"today",4,"ngFor","ngForOf"],[1,"week-body"],["class","week-hour",4,"ngFor","ngForOf"],["class","week-day-column",4,"ngFor","ngForOf"],[1,"week-day-header"],[1,"week-day-name"],[1,"week-day-number"],[1,"week-hour"],[1,"week-day-column"],["class","week-hour-slot",3,"click",4,"ngFor","ngForOf"],[1,"week-hour-slot",3,"click"],["class","week-event",3,"background","click",4,"ngFor","ngForOf"],[1,"week-event",3,"click"],[1,"event-time"],["class","event-customer",4,"ngSwitchCase"],["class","event-details",4,"ngIf"],[1,"event-customer"],[1,"material-icons",2,"margin-right","var(--gap-sm)"],[1,"event-details"],[1,"calendar-day-view"],[1,"day-header"],[1,"day-body"],["class","day-hour",4,"ngFor","ngForOf"],[1,"day-hour"],[1,"hour-label"],[1,"hour-slot",3,"click"],["class","day-event",3,"background","click",4,"ngFor","ngForOf"],[1,"day-event",3,"click"],[1,"modal-overlay"],[1,"modal-container","modal-lg"],[1,"modal-header"],[1,"section-title"],[3,"ngSubmit"],[1,"form-card"],[1,"form-row"],[1,"form-group"],["for","customerName",1,"standard-label"],["name","user",1,"nav-icon",3,"size"],["type","text","id","customerName","name","customerName","required","","placeholder","Inserisci nome",3,"ngModelChange","ngModel"],["for","customerSurname",1,"standard-label"],["type","text","id","customerSurname","name","customerSurname","required","","placeholder","Inserisci cognome",3,"ngModelChange","ngModel"],["for","customerEmail",1,"standard-label"],["name","mail",1,"nav-icon",3,"size"],["type","email","id","customerEmail","name","customerEmail","placeholder","Inserisci email (facoltativo)",3,"ngModelChange","ngModel"],["for","customerPhone",1,"standard-label"],["type","tel","id","customerPhone","name","customerPhone","required","","placeholder","Inserisci telefono",3,"ngModelChange","ngModel"],["for","reservationDate",1,"standard-label"],["type","date","id","reservationDate","name","reservationDate","required","",3,"ngModelChange","change","ngModel","min"],["for","reservationTime",1,"standard-label"],["id","reservationTime","name","reservationTime","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","partySize",1,"standard-label"],["type","number","id","partySize","name","partySize","min","1","max","20","required","",3,"ngModelChange","ngModel"],["for","reservationStatus",1,"standard-label"],["name","info"],["id","reservationStatus","name","reservationStatus",3,"ngModelChange","ngModel"],[3,"value"],["for","specialRequests",1,"standard-label"],["id","specialRequests","name","specialRequests","rows","3","placeholder","Note o richieste particolari...",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","ghost",3,"click"],["type","submit",1,"promethea-button"],[1,"flex","items-center","gap-md"],[1,"header-icon"],[1,"material-icons","text-primary","text-lg"],[1,"section-title","m-0"],[1,"text-muted","m-0"],[1,"modal-content","p-md"],[1,"info-message","mb-lg"],["class","flex flex-col gap-md mb-sm",4,"ngIf","ngIfElse"],["type","button",1,"promethea-button",3,"click"],[1,"flex","flex-col","gap-md","mb-sm"],["class","card hover-lift",4,"ngFor","ngForOf"],[1,"card","hover-lift"],[1,"flex","justify-between","items-start","mb-md","flex-wrap"],[1,"flex","gap-sm"],[1,"flex","items-center","gap-sm","mb-sm","flex-wrap"],[1,"font-bold","text-md","m-0"],[4,"ngSwitchCase"],[1,"chip","ml-sm"],["class","chip",3,"class",4,"ngIf"],["class","flex items-center gap-md flex-wrap",4,"ngIf"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small",3,"click"],["name","trash-2",3,"size"],[1,"card-body"],[1,"flex","flex-col","items-center","text-center","p-sm","rounded","bg-smoke"],[1,"material-icons","text-primary","mb-xs"],[1,"font-bold","text-md"],[1,"text-mini","font-semibold"],["class","mt-md p-sm rounded bg-smoke",4,"ngIf"],[1,"chip"],[1,"flex","items-center","gap-md","flex-wrap"],[1,"flex","items-center","gap-sm"],[1,"material-icons","text-mini"],[1,"text-mini"],["class","flex items-center gap-sm",4,"ngIf"],[1,"mt-md","p-sm","rounded","bg-smoke"],[1,"flex","items-center","gap-sm","mb-xs"],[1,"material-icons","text-primary"],[1,"text-sm","m-0"],[1,"empty-state","text-center","py-xl"],[1,"material-icons","text-lg","text-muted","mb-md"],[1,"text-md","font-bold","mb-sm"],[1,"text-muted","mb-lg"],[1,"modal-container","modal-md"],[1,"standard-label"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","start","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","end","required","",3,"ngModelChange","ngModel"],["name","description","rows","3",3,"ngModelChange","ngModel"],["type","color","name","color",3,"ngModelChange","ngModel"],[1,"color-preview"],[1,"checkbox-label"],["type","checkbox","name","isAllDay",3,"ngModelChange","ngModel"],["type","submit",1,"promethea-button",3,"disabled"]],template:function(e,n){e&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),s(5,"event_available"),i(),r(6,"h3",7),s(7,"Prenotazioni Oggi"),i()(),r(8,"div",8),s(9),i(),r(10,"div",9),s(11,"Per oggi"),i()(),r(12,"div",4)(13,"div",5)(14,"span",6),s(15,"group"),i(),r(16,"h3",7),s(17,"Capienza Massima"),i()(),r(18,"div",8),s(19),i(),r(20,"div",10)(21,"div",11),s(22),i(),_(23,Pe,2,1,"div",12),i()(),r(24,"div",4)(25,"div",5)(26,"span",13),s(27," table_restaurant "),i(),r(28,"h3",7),s(29,"Occupazione Oggi"),i()(),r(30,"div",14),s(31),i(),r(32,"div",9),s(33),_(34,Te,2,1,"span",15),i()(),_(35,Oe,11,7,"div",16),i(),r(36,"div",17)(37,"strong",18),s(38),O(39,"date"),i()(),r(40,"div",19)(41,"div",20)(42,"button",21),h("click",function(){return n.setView(n.CalendarView.Month)}),s(43," Mese "),i(),r(44,"button",22),h("click",function(){return n.setView(n.CalendarView.Week)}),s(45," Settimana "),i(),r(46,"button",22),h("click",function(){return n.setView(n.CalendarView.Day)}),s(47," Giorno "),i()(),r(48,"div",23)(49,"button",24),h("click",function(){return n.previous()}),r(50,"span",25),s(51,"chevron_left"),i()(),r(52,"button",22),h("click",function(){return n.today()}),s(53," Oggi "),i(),r(54,"button",24),h("click",function(){return n.next()}),r(55,"span",25),s(56,"chevron_right"),i()()(),r(57,"div",26)(58,"button",21),h("click",function(){return n.openNewReservationModal()}),P(59,"lucide-angular",27),s(60," Prenotazione "),i(),r(61,"button",22),h("click",function(){return n.openNewPersonalAppointmentModal()}),P(62,"lucide-angular",27),s(63," Personale "),i()()(),r(64,"div",28),_(65,$e,5,3,"div",29)(66,Ke,8,3,"div",30)(67,nt,7,5,"div",31),i(),_(68,at,85,17,"div",32)(69,gt,39,9,"div",32)(70,ht,45,10,"div",32),i()),e&2&&(l(9),g(" ",n.getTodaysReservationCount()," "),l(10),g(" ",n.calculateMaxCapacitySimple()," "),l(3),g("",n.tables.length," tavoli"),l(),m("ngIf",n.tables.length>0),l(3),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),l(4),T("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),l(),N(" ",n.todayCapacity," / ",n.calculateMaxCapacitySimple()," "),l(2),g(" ",(n.todayCapacity/n.calculateMaxCapacitySimple()*100||0).toFixed(0),"% "),l(),m("ngIf",n.getAvailableTablesToday()>0),l(),m("ngIf",n.selectedDate),l(3),w(I(39,38,n.viewDate,"MMMM yyyy")),l(4),T("active",n.view===n.CalendarView.Month),l(2),T("active",n.view===n.CalendarView.Week),l(2),T("active",n.view===n.CalendarView.Day),l(13),m("size",20),l(3),m("size",20),l(2),T("loading",n.loading),l(),m("ngIf",n.view===n.CalendarView.Month),l(),m("ngIf",n.view===n.CalendarView.Week),l(),m("ngIf",n.view===n.CalendarView.Day),l(),m("ngIf",n.showNewReservationModal),l(),m("ngIf",n.showDayDetailsModal),l(),m("ngIf",n.showPersonalAppointmentModal))},dependencies:[Z,U,J,K,Q,_e,se,ce,me,ne,le,te,de,ie,ae,ue,ve,pe,oe,re,xe,he,X],styles:['.calendar-month-view[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.month-weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-2);border-bottom:2px solid var(--primary)}.month-weekday[_ngcontent-%COMP%]{padding:var(--gap-sm);text-align:center;font-weight:700;font-size:var(--fs-sm);color:var(--text-color);text-transform:uppercase;border-right:1px solid var(--smoke-1)}.month-weekday[_ngcontent-%COMP%]:last-child{border-right:none}.month-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);grid-auto-rows:minmax(4rem,1fr);min-height:30rem}.month-day[_ngcontent-%COMP%]{border:1px solid var(--smoke-1);padding:0;display:flex;flex-direction:column;min-height:120px;background:var(--background);transition:all .2s ease;cursor:pointer;position:relative;overflow:hidden}.month-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 20%,transparent);z-index:10}.month-day.today[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-color:var(--primary)}.month-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--smoke-1) 10%,transparent);opacity:.6}.day-number-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;padding:var(--gap-sm)}.day-number[_ngcontent-%COMP%]{font-weight:800;font-size:var(--fs-sn);color:var(--text-color);transition:all .2s ease;line-height:1}.month-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--primary);font-weight:900}.day-events-indicator[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:2px 6px;border-radius:10px;color:#fff;min-width:16px;text-align:center;line-height:1}.month-events-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;overflow:hidden;flex:1}.month-event-compact[_ngcontent-%COMP%]{background:var(--vetro);border-left:3px solid;padding:3px 5px;border-radius:4px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px;font-size:calc(var(--fs-sm) / 1.4);line-height:1.2;margin:0 var(--gap-sm)}.month-event-compact[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px var(--shadow-2)}.event-time-small[_ngcontent-%COMP%]{font-weight:700;font-size:9px;color:var(--text-color);min-width:28px;background:var(--background);padding:1px 3px;border-radius:3px;text-align:center;flex-shrink:0}.event-customer-small[_ngcontent-%COMP%]{font-weight:600;font-size:9px;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.more-events-compact[_ngcontent-%COMP%]{font-size:9px;color:var(--primary);text-align:center;padding:2px;background:color-mix(in srgb,var(--primary) 8%,transparent);border-radius:3px;cursor:pointer;transition:all .2s ease;margin-top:2px}.more-events-compact[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 15%,transparent)}.calendar-week-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.week-header[_ngcontent-%COMP%]{display:flex;background:var(--smoke-2);border-bottom:2px solid var(--primary);flex-shrink:0}.week-time-column[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);border-right:2px solid var(--primary);flex-shrink:0}.week-day-header[_ngcontent-%COMP%]{padding:var(--gap-sm);text-align:center;font-weight:700;color:var(--text-color);border-right:1px solid var(--smoke-1);flex:1;display:flex;flex-direction:column;justify-content:center;min-height:60px}.week-day-header.today[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.week-day-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);text-transform:uppercase;margin-bottom:2px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:800}.week-body[_ngcontent-%COMP%]{flex:1;display:flex;overflow-y:auto}.week-time-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%]{height:60px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:var(--fs-sm);font-weight:600;color:var(--text-color);border-bottom:1px solid var(--smoke-1);position:relative}.week-hour[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;background:var(--smoke-1);z-index:1}.week-day-column[_ngcontent-%COMP%]{flex:1;border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;overflow:hidden}.week-hour-slot[_ngcontent-%COMP%]{height:60px;flex-shrink:0;border-bottom:1px solid var(--smoke-1);position:relative;padding:2px;cursor:pointer;transition:background .2s ease;background:var(--background)}.week-hour-slot[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.week-hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 15%,transparent)}.week-event[_ngcontent-%COMP%]{position:absolute;left:2px;right:2px;padding:6px 8px;border-radius:6px;color:#fff;font-size:11px;cursor:pointer;z-index:2;transition:all .2s ease;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-shadow:0 2px 4px #0000001a}.week-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px var(--shadow-2);z-index:100}.calendar-day-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.day-header[_ngcontent-%COMP%]{padding:var(--gap-md);text-align:center;background:var(--smoke-2);border-bottom:2px solid var(--primary);border-radius:12px 12px 0 0;flex-shrink:0}.day-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.day-hour[_ngcontent-%COMP%]{display:flex;min-height:60px;border-bottom:1px solid var(--smoke-1);background:var(--background)}.day-hour[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.hour-label[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0;font-size:var(--fs-sm);border-right:2px solid var(--primary)}.hour-slot[_ngcontent-%COMP%]{flex:1;position:relative;padding:4px;cursor:pointer;transition:background .2s ease}.hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 10%,transparent)}.day-event[_ngcontent-%COMP%]{background:var(--gradiente);color:#fff;padding:8px 12px;border-radius:8px;margin:2px 0;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.day-event[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px var(--shadow-2)}.event-time[_ngcontent-%COMP%]{font-weight:600;font-size:10px;opacity:.9;margin-bottom:2px}.event-customer[_ngcontent-%COMP%]{font-weight:700;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.event-details[_ngcontent-%COMP%]{font-size:10px;opacity:.9;margin-top:2px}.calendar-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:var(--gap-sm)}@media (max-width: 768px){.calendar-controls[_ngcontent-%COMP%]{flex-direction:column}.month-grid[_ngcontent-%COMP%]{min-height:350px}.month-day[_ngcontent-%COMP%]{min-height:70px;padding:6px}.day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.month-weekday[_ngcontent-%COMP%]{padding:8px 4px;font-size:10px}.month-event-compact[_ngcontent-%COMP%]{padding:2px 3px;font-size:8px}.event-time-small[_ngcontent-%COMP%]{font-size:7px;min-width:24px}.day-events-indicator[_ngcontent-%COMP%]{font-size:8px;padding:1px 4px}.calendar-week-view[_ngcontent-%COMP%], .calendar-day-view[_ngcontent-%COMP%]{height:fit-content}.week-time-column[_ngcontent-%COMP%], .hour-label[_ngcontent-%COMP%]{width:60px}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%], .week-hour-slot[_ngcontent-%COMP%], .day-hour[_ngcontent-%COMP%]{height:40px}.week-event[_ngcontent-%COMP%]{font-size:9px;padding:4px}.week-day-header[_ngcontent-%COMP%]{padding:6px 3px;min-height:50px}.week-day-name[_ngcontent-%COMP%]{font-size:10px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}}@media (max-width: 480px){.month-day[_ngcontent-%COMP%]{min-height:60px;padding:4px}.month-event-compact[_ngcontent-%COMP%]{flex-direction:column;gap:1px}.event-customer-small[_ngcontent-%COMP%], .more-events-compact[_ngcontent-%COMP%]{font-size:7px}}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-2);border-radius:4px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.month-day[_ngcontent-%COMP%]:has(.day-events-count-many)   .month-events-compact[_ngcontent-%COMP%]{display:none!important}.month-day[_ngcontent-%COMP%]:has(.day-events-count-many)   .day-events-indicator[_ngcontent-%COMP%]{position:absolute!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;width:24px!important;height:24px!important;font-size:12px!important;border-radius:50%!important;background:var(--primary)!important;color:#fff!important;border:2px solid white!important;box-shadow:0 2px 4px #0003!important;z-index:10!important;display:flex!important;align-items:center!important;justify-content:center!important}.month-day.small-cell[_ngcontent-%COMP%]   .month-events-compact[_ngcontent-%COMP%]{display:none!important}.month-day.small-cell[_ngcontent-%COMP%]   .day-events-indicator[_ngcontent-%COMP%]{position:relative!important;top:auto!important;left:auto!important;transform:none!important;margin-left:4px!important}.month-day.event-overflow[_ngcontent-%COMP%]   .month-events-compact[_ngcontent-%COMP%]{display:none!important}.month-day.event-overflow[_ngcontent-%COMP%]:after{content:"";position:absolute;top:2px;right:2px;width:8px;height:8px;background:var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}@container (max-width: 768px){.calendar-month-view[_ngcontent-%COMP%]   .month-events-compact[_ngcontent-%COMP%]{display:none!important}.calendar-month-view[_ngcontent-%COMP%]   .day-events-indicator[_ngcontent-%COMP%]{position:absolute!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;width:28px!important;height:28px!important;font-size:13px!important;font-weight:700!important;border-radius:50%!important;background:var(--gradiente)!important;color:#fff!important;border:2px solid var(--background)!important;box-shadow:0 3px 6px #00000026!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:5!important;animation:_ngcontent-%COMP%_bounce .5s ease!important}.calendar-month-view[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{opacity:.7!important;font-size:13px!important}.calendar-month-view[_ngcontent-%COMP%]   .month-day[_ngcontent-%COMP%]{min-height:70px!important;padding:8px!important;position:relative!important}.calendar-month-view[_ngcontent-%COMP%]   .month-day.today[_ngcontent-%COMP%]   .day-events-indicator[_ngcontent-%COMP%]{border:2px solid var(--primary)!important;animation:_ngcontent-%COMP%_pulse-glow 2s infinite!important}}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translate(-50%,-50%) scale(.8)}50%{transform:translate(-50%,-50%) scale(1.1)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_pulse-glow{0%{box-shadow:0 0 rgba(var(--primary-rgb),.7)}70%{box-shadow:0 0 0 6px rgba(var(--primary-rgb),0)}to{box-shadow:0 0 rgba(var(--primary-rgb),0)}}@media (max-width: 768px){.calendar-month-view[_ngcontent-%COMP%]   .month-events-compact[_ngcontent-%COMP%]{display:none!important}.calendar-month-view[_ngcontent-%COMP%]   .day-number-wrapper[_ngcontent-%COMP%]{padding:0}.calendar-month-view[_ngcontent-%COMP%]   .day-events-indicator[_ngcontent-%COMP%]{position:absolute!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;width:28px!important;height:28px!important;font-size:13px!important;font-weight:700!important;border-radius:50%!important;background:var(--gradiente)!important;color:#fff!important;border:2px solid var(--background)!important;box-shadow:0 3px 6px #00000026!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:5!important}}.reservation-details[_ngcontent-%COMP%], .hover-lift[_ngcontent-%COMP%]{overflow:hidden}']})};export{be as CalendarView,Se as ReservationStatus,Ce as RestaurantCalendar};
