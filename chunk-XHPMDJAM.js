import{b as f,d as b}from"./chunk-MEEOFM4U.js";import{Y as v,ca as c,kc as a,xa as o}from"./chunk-KIAVC6JW.js";import{g as l}from"./chunk-RA2WU32H.js";var g=[{id:"welcome",title:"Benvenuto su Promethea!",description:"Sei nel posto giusto per gestire il tuo ristorante in modo semplice e completo. Ti mostriamo in pochi passi tutto quello che puoi fare. Si parte con il tour!",icon:"sparkles"},{id:"dashboard",title:"Dashboard & Report",description:"Panoramica del ristorante",icon:"layout-dashboard",route:"/restaurant/dashboard",tooltipTarget:'[data-tutorial="dashboard"]',tooltipPosition:"right",subSteps:[{tooltipTarget:'[data-tutorial="dashboard-reservation"]',tooltipPosition:"bottom",title:"Prenotazioni del giorno",description:"Qui vedi le prenotazioni di oggi, confrontato con ieri e con la media settimanale."},{tooltipTarget:'[data-tutorial="dashboard-orders"]',tooltipPosition:"bottom",title:"Ordini in tempo reale",description:"Numero di ordini aperti in questo momento."},{tooltipTarget:'[data-tutorial="dashboard-top-dishes"]',tooltipPosition:"right",title:"Piatti pi\xF9 venduti",description:"I tuoi bestseller di oggi. Utile per pianificare la produzione cucina."}]},{id:"floor-plan",title:"Mappa Ristorante",description:"Crea la mappa delle tue sale e gestisci i tavoli prenotabili.",icon:"table-2",route:"/restaurant/floor-plan",tooltipTarget:'[data-tutorial="floor-plan"]',tooltipPosition:"right",requiredPermission:"view_table_map",subSteps:[{tooltipTarget:'[data-tutorial="floor-plan-selector"]',tooltipPosition:"bottom",title:"Seleziona la sala",description:"Ogni mappa rappresenta una sala del tuo ristorante. Puoi avere pi\xF9 versioni della stessa sala per gestire cambi di layout frequenti."},{tooltipTarget:'[data-tutorial="floor-plan-new"]',tooltipPosition:"bottom",title:"Crea una nuova sala",description:"Dai un nome alla sala, scegli le dimensioni della mappa e inizia a disegnare i tavoli. Puoi modificare il nome, aggiungere, modificare le dimensioni o eliminare la mappa."},{tooltipTarget:'[data-tutorial="floor-plan-version"]',tooltipPosition:"bottom",title:"Versioni della mappa",description:"Ogni mappa nasce con la versione 1, poi puoi creare versioni alternative della stessa mappa con il tasto +. Quando sarai in una versione diversa da quella condivisa con la clientela comparir\xE0 il tasto di condivisione (per poter aggiornare la verisone di mappa visibile)."},{tooltipTarget:'[data-tutorial="floor-plan-zoom"]',tooltipPosition:"bottom",title:"Zoom della mappa e Griglia",description:"In questa sezione puoi fare zoom sulla mappa per muoverti con comodit\xE0 e attivare o disattivare la griglia di guida."},{tooltipTarget:'[data-tutorial="floor-plan-editor"]',tooltipPosition:"right",title:"Editor tavoli",description:"Disegna i tavoli in forma quadrata, rettangolare o tonda. Per ogni tavolo puoi impostare nome, numero, capienza, se \xE8 prenotabile online e puoi unire pi\xF9 tavoli in uno grande."},{tooltipTarget:'[data-tutorial="floor-plan-canvas"]',tooltipPosition:"top",title:"Personalizza la tua mappa",description:"Sposta i tavoli nella mappa, ruotali o uniscili per ricreare la tua sala."}]},{id:"staff",title:"Staff",description:"Aggiungi il tuo staff, assegna ruoli e permessi personalizzati. Ogni membro accede solo alle sezioni di sua competenza.",icon:"users",route:"/restaurant/staff-management",tooltipTarget:'[data-tutorial="staff"]',tooltipPosition:"right",requiredPermission:"manage_staff",subSteps:[{tooltipTarget:'[data-tutorial="staff-card"]',tooltipPosition:"bottom",title:"Card dello staff",description:"Card riepilogative per vedere il totale dei membri, gli inviti in attesa, la distribuzione dei ruoli attuale e i permessi configurati."},{tooltipTarget:'[data-tutorial="staff-add"]',tooltipPosition:"bottom",title:"Aggiungi un membro",description:"Invita un nuovo membro dello staff inserendo email e ruolo. Ricever\xE0 l'invito via email (attualmente non viene inviata una mail di conferma ma l'utente scelto alla registrazione verr\xE0 collegato allo staff automaticamente)."},{tooltipTarget:'[data-tutorial="staff-table"]',tooltipPosition:"top",title:"Lista del personale",description:"Tutti i membri del tuo team con ruolo e stato. Clicca su un membro per modificarne i dati o disattivarne l'accesso."},{tooltipTarget:'[data-tutorial="staff-permissions"]',tooltipPosition:"top",title:"Permessi e ruoli",description:"Per ogni membro puoi personalizzare i permessi: chi pu\xF2 vedere le finanze, gestire il menu, accedere all'inventario e molto altro."}]},{id:"table-map",title:"Ordini",description:"Ricevi e gestisci le comande dal tavolo in tempo reale. Ogni ordine viene inviato automaticamente alla cucina.",icon:"utensils-crossed",route:"/restaurant/table-map",tooltipTarget:'[data-tutorial="table-map"]',tooltipPosition:"right",requiredPermission:"manage_reservations",subSteps:[{tooltipTarget:'[data-tutorial="table-map-legend"]',tooltipPosition:"bottom",title:"Card per i tavoli",description:"Le card tavoli indicano lo stato: libero, prenotato, occupato e il totale dei tavoli. Un colpo d'occhio per gestire la sala in tempo reale."},{tooltipTarget:'[data-tutorial="table-map-shift"]',tooltipPosition:"left",title:"Orario del turno",description:"In questa sezione ti viene mostrato se siamo in turno oppure no. \xC8 possibile ordinare solo quando siamo in turno."},{tooltipTarget:'[data-tutorial="table-map-search"]',tooltipPosition:"left",title:"Filtri della mappa",description:"Filtra i tavoli della mappa per velocizzare la ricerca "},{tooltipTarget:'[data-tutorial="table-map-floor"]',tooltipPosition:"top",title:"Mappa interattiva",description:"Clicca su un tavolo per aprire la gestione: creare una prenotazione per un tavolo o prendere una comanda."}]},{id:"order-editor",title:"Pop-up ordine",description:"Da qui puoi inserire le ordinazioni dei clienti, specificando quantit\xE0, note e varianti. L'ordine viene inviato direttamente in cucina.",icon:"shopping-cart",route:"/restaurant/table-map",tooltipTarget:'[data-tutorial="order-editor"]',tooltipPosition:"right",requiredPermission:"manage_reservations",subSteps:[{tooltipTarget:'[data-tutorial="order-editor-button"]',tooltipPosition:"right",title:"Tasti rapidi",description:"In questa sezione hai i seguenti bottoni in ordine: Informativo (vedi la descrizione dei piatti), Visualizza comanda (ti permette di passare alla visualizzazione comanda per vedere l'ordine attuale), Crea nuova comanda (crea una nuova comanda con numerazione progressiva automatica), Chiudi il popup (in questo modo chiuderai l'ordine, prima il software ti chieder\xE0 se sei sicuro di voler procedere. Attenzione! In questo caso l'ordine non verr\xE0 salvato)."},{tooltipTarget:'[data-tutorial="order-editor-riepilogo"]',tooltipPosition:"left",title:"Riepilogo totale",description:"In questa piccola sezione vedrai l'ordine nel suo complesso (tutte le comande sommate)."},{tooltipTarget:'[data-tutorial="order-editor-cart"]',tooltipPosition:"left",title:"Riepilogo comanda",description:"Il totale si aggiorna in tempo reale. Puoi cambiare comanda direttamente da qui."},{tooltipTarget:'[data-tutorial="order-editor-menu"]',tooltipPosition:"right",title:"Scegli il menu",description:"Scegli il men\xF9 tra quelli disponibili della tua lista."},{tooltipTarget:'[data-tutorial="order-editor-dish"]',tooltipPosition:"right",title:"Seleziona i Piatti",description:"Seleziona i piatti per categoria e aggiungili all'ordine con un click. Puoi filtrare per nome o categoria per trovare subito quello che cerchi."},{tooltipTarget:'[data-tutorial="order-editor-send"]',tooltipPosition:"top",title:"Conferma lordine",description:"Con un click l'ordine viene confermato e arriva direttamente al pannello cucina. Lo chef lo vede subito e pu\xF2 aggiorare lo stato in tempo reale."}]},{id:"calendar",title:"Calendario",description:"Visualizza e gestisci tutte le prenotazioni in vista calendario. Alterna tra vista mensile e settimanale.",icon:"calendar",route:"/restaurant/calendar-view",tooltipTarget:'[data-tutorial="calendar"]',tooltipPosition:"right",requiredPermission:"manage_reservations",subSteps:[{tooltipTarget:'[data-tutorial="calendar-cards"]',tooltipPosition:"bottom",title:"Riepilogo del giorno",description:"Prenotazioni di oggi, capienza massima, occupazione e disponibilit\xE0 residua: tutto in un colpo d'occhio prima di aprire il servizio."},{tooltipTarget:'[data-tutorial="calendar-mode"]',tooltipPosition:"bottom",title:"Cambia modalit\xE0",description:"Passa dalla vista mensile a quella settimanale in base alle tue esigenze. La vista settimanale \xE8 pi\xF9 utile per la gestione operativa quotidiana."},{tooltipTarget:'[data-tutorial="calendar-add"]',tooltipPosition:"left",title:"Aggiungi prenotazione o appuntamento",description:"Crea una nuova prenotazione collegata a un tavolo oppure aggiungi un appuntamento personale libero, non visibile ai clienti."},{tooltipTarget:'[data-tutorial="calendar-view"]',tooltipPosition:"top",title:"Vista calendario",description:"Ogni evento \xE8 colorato per stato (confermata o in attesa). Clicca su un evento per aprirne i dettagli o modificarli."},{tooltipTarget:'[data-tutorial="calendar-day"]',tooltipPosition:"top",title:"Giorno calendario",description:"Cliccando sul giorno del calendario aprirai il pop-up per aggiungere prenotazioni per quel giorno."}]},{id:"reservation-list",title:"Lista prenotazioni",description:"Tutte le prenotazioni in un'unica vista tabellare. Filtra, cerca e gestisci ogni prenotazione nel dettaglio.",icon:"notebook-text",route:"/restaurant/reservation-manager",tooltipTarget:'[data-tutorial="reservation-list"]',tooltipPosition:"right",requiredPermission:"manage_reservations",subSteps:[{tooltipTarget:'[data-tutorial="reservation-filters"]',tooltipPosition:"bottom",title:"Filtra per data e stato",description:"Seleziona un intervallo di date o filtra per stato (confermata, in attesa, cancellata) per trovare subito la prenotazione che cerchi."},{tooltipTarget:'[data-tutorial="reservation-add"]',tooltipPosition:"bottom",title:"Nuova prenotazione",description:"Aggiungi una prenotazione manuale per un cliente che ha chiamato o si \xE8 presentato direttamente. Puoi assegnare subito il tavolo dalla mappa."},{tooltipTarget:'[data-tutorial="reservation-table"]',tooltipPosition:"top",title:"Tabella prenotazioni",description:"Nome cliente, data, orario, numero di coperti e stato in un'unica riga. Clicca su una riga per vederne il dettaglio completo o modificarla."}]},{id:"menu",title:"Men\xF9 & Piatti",description:"Aggiungi piatti, categorie e varianti. Il food cost si calcola automaticamente.",icon:"utensils",route:"/restaurant/menu",tooltipTarget:'[data-tutorial="menu"]',tooltipPosition:"right",requiredPermission:"manage_menu",subSteps:[{tooltipTarget:'[data-tutorial="menu-total-dishes"]',tooltipPosition:"bottom",title:"Totale piatti",description:"Il numero di piatti nel menu attivo. Si aggiorna in tempo reale in base ai filtri applicati."},{tooltipTarget:'[data-tutorial="menu-avg-price"]',tooltipPosition:"bottom",title:"Prezzo medio",description:"Il prezzo medio dei piatti filtrati. Utile per capire il posizionamento del tuo menu."},{tooltipTarget:'[data-tutorial="menu-avg-margin"]',tooltipPosition:"left",title:"Margine medio",description:"Il margine medio calcolato sui piatti visibili. Pi\xF9 \xE8 alto, meglio \xE8 per il tuo business."},{tooltipTarget:'[data-tutorial="menu-avg-foodcost"]',tooltipPosition:"bottom",title:"Food cost medio",description:"La percentuale media di food cost. L'obiettivo standard \xE8 tenerlo sotto il 30%."},{tooltipTarget:'[data-tutorial="menu-selector"]',tooltipPosition:"bottom",title:"Gestisci i tuoi menu",description:"Seleziona un menu esistente, creane uno nuovo, impostalo come preferito o attivo. Puoi avere menu diversi per pranzo, cena o stagione."},{tooltipTarget:'[data-tutorial="menu-print"]',tooltipPosition:"bottom",title:"Stampa il menu",description:"Stampa la versione staff con food cost e margini, oppure la versione cliente standard o personalizzata."},{tooltipTarget:'[data-tutorial="menu-chart"]',tooltipPosition:"top",title:"Grafico food cost",description:"Visualizza food cost e margine di ogni piatto in un istogramma. Ordina per nome o per food cost per trovare subito i piatti meno redditizi."},{tooltipTarget:'[data-tutorial="menu-filters"]',tooltipPosition:"bottom",title:"Cerca e filtra i piatti",description:"Filtra per categoria, stato o prezzo. Usa i bottoni per aggiungere un nuovo piatto, una bevanda o resettare i filtri."},{tooltipTarget:'[data-tutorial="menu-table"]',tooltipPosition:"top",title:"Tabella piatti",description:"Tutti i tuoi piatti con prezzo, food cost e margine. Clicca su una riga per modificarla o eliminarla."}]},{id:"recipe",title:"Ricette",description:"Salva le ricette dei tuoi piatti con specifiche tecniche per il team.",icon:"scroll-text",route:"/restaurant/recipe",tooltipTarget:'[data-tutorial="recipe"]',tooltipPosition:"right",requiredPermission:"manage_inventory",subSteps:[{tooltipTarget:'[data-tutorial="recipe-search"]',tooltipPosition:"bottom",title:"Cerca ricette",description:"Filtra le ricette per nome o categoria. Le ricette vengono create automaticamente quando aggiungi un piatto nel menu."},{tooltipTarget:'[data-tutorial="recipe-list"]',tooltipPosition:"top",title:"Lista ricette",description:"Tutte le tue ricette in un colpo d'occhio. Clicca su una ricetta per aprirla e aggiungere le specifiche di preparazione generali o per singolo ingrediente."}]},{id:"food-cost",title:"Food Cost",description:"Calcola il costo reale di ogni piatto in base agli ingredienti. Ottimizza i margini e aumenta la redditivit\xE0.",icon:"piggy-bank",route:"/food-cost",tooltipTarget:'[data-tutorial="food-cost"]',tooltipPosition:"right",requiredPermission:"manage_inventory",subSteps:[{tooltipTarget:'[data-tutorial="foodcost-info"]',tooltipPosition:"bottom",title:"Informazioni del piatto",description:"Nome del piatto, categoria, allergeni, tempo di preparazione e prezzo di vendita."},{tooltipTarget:'[data-tutorial="foodcost-ingredients"]',tooltipPosition:"top",title:"Tabella ingredienti",description:"Aggiungi gli ingredienti del piatto e inserisci le quantit\xE0 utilizzate. Il costo totale si calcola automaticamente in base ai prezzi dell'inventario e alla quantit\xE0."},{tooltipTarget:'[data-tutorial="foodcost-grafico"]',tooltipPosition:"top",title:"Grafico a torta",description:"Grafico che mostra la divisione dei costi del piatto con la possibilit\xE0 di intgrare o rimuovere nel grfico il margine."},{tooltipTarget:'[data-tutorial="foodcost-summary"]',tooltipPosition:"top",title:"Riepilogo food cost",description:"Costo totale ingredienti, percentuale di food cost e margine netto. Se il food cost supera il 30% valuta di rivedere le quantit\xE0 o il prezzo di vendita."}]},{id:"kitchen-display",title:"Pannello Cucina",description:"Il display cucina mostra in tempo reale gli ordini attivi per ogni tavolo. Lo chef vede subito cosa preparare e aggiorna lo stato con un click.",icon:"chef-hat",route:"/restaurant/kitchen-display",tooltipTarget:'[data-tutorial="kitchen-display"]',tooltipPosition:"right",requiredPermission:"view_kitchen_display",subSteps:[{tooltipTarget:'[data-tutorial="kitchen-cards"]',tooltipPosition:"bottom",title:"Stato ordini",description:"Le card mostrano il numero di piatti in attesa, in preparazione, pronti e attivi. Tieni d'occhio le card per evitare colli di bottiglia durante il servizio."},{tooltipTarget:'[data-tutorial="kitchen-filters"]',tooltipPosition:"bottom",title:"Filtra per categoria",description:"Filtra gli ordini per stato (in attesa, in preparazione, pronti) o per mappa."},{tooltipTarget:'[data-tutorial="kitchen-orders"]',tooltipPosition:"top",title:"Ordini live",description:'Ogni card rappresenta un tavolo con i piatti ordinati suddivisi per comande. Aggiorna lo stato di un piatto con un click: da "in attesa" a "in preparazione" fino a "pronto". Gli ordini arrivano qui non appena il cameriere li invia dal tavolo.'}]},{id:"inventory",title:"Inventario",description:"Tieni il magazzino sempre aggiornato. Gli ingredienti alimentano il food cost di ogni piatto.",icon:"package",route:"/restaurant/inventory",tooltipTarget:'[data-tutorial="inventory"]',tooltipPosition:"right",requiredPermission:"manage_inventory",subSteps:[{tooltipTarget:'[data-tutorial="inventory-total"]',tooltipPosition:"bottom",title:"Totale ingredienti",description:"Il numero totale di ingredienti nel tuo inventario. Clicca per vedere il dettaglio."},{tooltipTarget:'[data-tutorial="inventory-low-stock"]',tooltipPosition:"bottom",title:"Scorte basse",description:"Ingredienti sotto la soglia minima. Tienili sempre monitorati per non trovarti senza."},{tooltipTarget:'[data-tutorial="inventory-shopping-list"]',tooltipPosition:"left",title:"Lista della spesa",description:"Segna la lista della spesa in base alle scorte basse. Un click nella tabella per aggiungere gli ingredienti e sei pronto per l'ordine."},{tooltipTarget:'[data-tutorial="inventory-search"]',tooltipPosition:"top",title:"Cerca e filtra",description:"Cerca un ingrediente per nome o filtra per categoria e fornitore per trovarlo subito."},{tooltipTarget:'[data-tutorial="inventory-ingredient-search"]',tooltipPosition:"left",title:"Cerca su Wikipedia",description:"Cerca un direttamente da Wikipedia con i risultati filtrati solo per la cucina."},{tooltipTarget:'[data-tutorial="inventory-table"]',tooltipPosition:"top",title:"Tabella ingredienti",description:"Tutti i tuoi ingredienti con quantit\xE0, unit\xE0, soglia minima e costo. Modificali direttamente dalla riga."}]},{id:"beverages",title:"Bevande",description:"Monitora il tuo stock di bevande separatamente dall'inventario principale. Tieni sotto controllo prodotti totali, valore e scorte basse.",icon:"wine",route:"/restaurant/alcoholic-beverages",tooltipTarget:'[data-tutorial="beverages"]',tooltipPosition:"right",requiredPermission:"manage_inventory",subSteps:[{tooltipTarget:'[data-tutorial="beverages-cards"]',tooltipPosition:"bottom",title:"Riepilogo bevande",description:"Prodotti totali, valore dell'inventario bevande e scorte basse. Una panoramica rapida per sapere sempre cosa manca."},{tooltipTarget:'[data-tutorial="beverages-filters"]',tooltipPosition:"bottom",title:"Filtra e aggiungi",description:"Usa i filtri per categoria (vini, birre, superalcolici\u2026) o usa la ricerca."},{tooltipTarget:'[data-tutorial="beverages-table"]',tooltipPosition:"top",title:"Tabella bevande",description:"Tutti i prodotti con quantit\xE0, unit\xE0 di misura, soglia minima e costo unitario. Modifica o elimina direttamente dalla riga."}]},{id:"suppliers",title:"Fornitori",description:"Registra i tuoi fornitori e associali agli ingredienti. Tieni traccia di chi ti vende cosa e a quale prezzo.",icon:"truck",route:"/restaurant/suppliers",tooltipTarget:'[data-tutorial="suppliers"]',tooltipPosition:"right",requiredPermission:"manage_inventory",subSteps:[{tooltipTarget:'[data-tutorial="suppliers-cards"]',tooltipPosition:"bottom",title:"Fornitori attivi",description:"Il numero totale di fornitori registrati. Mantieni la lista aggiornata per collegare correttamente gli ingredienti e avere sempre il contatto giusto a portata di mano."},{tooltipTarget:'[data-tutorial="suppliers-add"]',tooltipPosition:"bottom",title:"Aggiungi fornitore",description:"Inserisci nome, contatti e condizioni di pagamento. Una volta registrato puoi associarlo agli ingredienti dell'inventario per tracciare la provenienza."},{tooltipTarget:'[data-tutorial="suppliers-table"]',tooltipPosition:"top",title:"Lista fornitori",description:"Tutti i tuoi fornitori con nome, referente e contatto. Clicca su un fornitore per vederne il dettaglio o modificare i dati."}]},{id:"expense-management",title:"Gestione Spese",description:"Registra e categorizza tutte le spese del ristorante. Monitora spese fisse e variabili per tenere i costi sotto controllo.",icon:"credit-card",route:"/restaurant/expense-management",tooltipTarget:'[data-tutorial="expense-management"]',tooltipPosition:"right",requiredPermission:"view_expenses",subSteps:[{tooltipTarget:'[data-tutorial="expenses-cards"]',tooltipPosition:"bottom",title:"Riepilogo del mese",description:"Spese fisse, spese variabili e totale del mese corrente. Confronta i valori mese per mese per individuare trend di costo anomali."},{tooltipTarget:'[data-tutorial="expenses-filters"]',tooltipPosition:"bottom",title:"Filtra le spese",description:"Cerca una spesa per nome o filtra per categoria e periodo. Utile per preparare report o verificare una voce specifica prima di parlare con il commercialista."},{tooltipTarget:'[data-tutorial="expenses-table"]',tooltipPosition:"top",title:"Tabella spese",description:"Tutte le voci di spesa con importo, categoria e data. Clicca su una riga per modificarla o eliminarla."}]},{id:"financial-report",title:"Report Finanziario",description:"Analizza entrate, uscite e redditivit\xE0 del tuo ristorante. Usa i dati per prendere decisioni basate sui numeri reali.",icon:"bar-chart-3",route:"/restaurant/financial-report",tooltipTarget:'[data-tutorial="financial-report"]',tooltipPosition:"right",requiredPermission:"view_reports",subSteps:[{tooltipTarget:'[data-tutorial="report-cards"]',tooltipPosition:"bottom",title:"KPI principali",description:"Entrate totali, uscite totali, risultato netto (guadagno o perdita) e break-even: quanti clienti servire per coprire le spese del periodo, calcolato sul tuo scontrino medio."},{tooltipTarget:'[data-tutorial="report-daily"]',tooltipPosition:"top",title:"Analisi giornaliera",description:"Andamento delle entrate giorno per giorno. Individua i giorni pi\xF9 performanti e quelli pi\xF9 deboli per pianificare promozioni o turni extra."},{tooltipTarget:'[data-tutorial="report-profitability"]',tooltipPosition:"top",title:"Stato redditivit\xE0",description:"Un indicatore chiaro di quanto il ristorante sta performando rispetto alle spese. Monitora il margine operativo e agisci prima che diventi un problema."},{tooltipTarget:'[data-tutorial="report-expenses-detail"]',tooltipPosition:"top",title:"Dettaglio spese",description:"Breakdown delle spese per categoria nel periodo selezionato. Utile per capire dove va il budget e dove si pu\xF2 ottimizzare."}]},{id:"web-site",title:"Crea il tuo sito web",description:"Con Promethea puoi avere un sito web professionale per il tuo ristorante, integrato con prenotazioni online e menu digitale.",icon:"globe",route:"/restaurant/web-site",tooltipTarget:'[data-tutorial="web-site"]',tooltipPosition:"right",requiredPermission:"view_reports"},{id:"contabile-fiscale",title:"Gestione Fiscale",description:"Affida la gestione fiscale e contabile a professionisti selezionati da Promethea. Fatture, dichiarazioni e adempimenti senza pensieri.",icon:"landmark",route:"/restaurant/contabile-fiscale",tooltipTarget:'[data-tutorial="contabile-fiscale"]',tooltipPosition:"right",requiredPermission:"view_reports"},{id:"marketing",title:"Promuovi il ristorante",description:"Campagne social, Google Ads e strategie di marketing pensate per la ristorazione. Fatti trovare dai clienti giusti nel momento giusto.",icon:"trending-up",route:"/restaurant/marketing",tooltipTarget:'[data-tutorial="marketing"]',tooltipPosition:"right",requiredPermission:"view_reports"},{id:"chat-window",title:"Chat del Ristorante",description:"In questa sezione puoi trovare una chat Generale con tutti i componenti del team o singole chat con gli utenti.",icon:"messages-square",route:"/restaurant/chat-window",tooltipTarget:'[data-tutorial="chat-window"]',tooltipPosition:"right",requiredPermission:"view_reports"},{id:"profile",title:"Profilo",description:"Aggiorna i dati del ristorante, carica il logo e personalizza le informazioni che i clienti vedranno.",icon:"user",route:"/restaurant/profile",tooltipTarget:'[data-tutorial="profile"]',tooltipPosition:"right",subSteps:[{tooltipTarget:'[data-tutorial="profile-info"]',tooltipPosition:"bottom",title:"Dati generali",description:"Nome, indirizzo, telefono e email del ristorante. Mantieni questi dati aggiornati: vengono usati in tutto il sistema e mostrati ai clienti."},{tooltipTarget:'[data-tutorial="profile-logo"]',tooltipPosition:"right",title:"Logo ristorante",description:"Carica il logo del tuo ristorante. Apparir\xE0 nell'app, nei menu stampati e nelle comunicazioni ai clienti."},{tooltipTarget:'[data-tutorial="profile-actions"]',tooltipPosition:"top",title:"Salva e tutorial",description:"Salva le modifiche al profilo oppure riavvia il tutorial in qualsiasi momento da questo bottone."}]},{id:"restaurant-settings",title:"Impostazioni",description:"Inserisci nome, indirizzo, orari e contatti. Questi dati saranno visibili ai clienti e usati da tutti i moduli.",icon:"settings",route:"/restaurant/settings",tooltipTarget:'[data-tutorial="restaurant-settings"]',tooltipPosition:"right",requiredPermission:"manage_restaurant_settings",subSteps:[{tooltipTarget:'[data-tutorial="settings-services"]',tooltipPosition:"bottom",title:"Servizi offerti",description:"Indica se il tuo ristorante offre consegna a domicilio, asporto o prenotazione tavolo online. Queste opzioni vengono mostrate ai clienti che trovano il tuo ristorante."},{tooltipTarget:'[data-tutorial="settings-additional"]',tooltipPosition:"bottom",title:"Informazioni aggiuntive",description:"Parcheggio disponibile, metodi di pagamento accettati, Wi-Fi e tipo di cucina. Piccoli dettagli che fanno la differenza nella scelta del cliente."},{tooltipTarget:'[data-tutorial="settings-shifts"]',tooltipPosition:"top",title:"Turni e orari di apertura",description:"Configura i giorni di apertura e i turni (pranzo, cena, continuato). Puoi aggiungere pi\xF9 turni per lo stesso giorno e impostare le eccezioni stagionali."},{tooltipTarget:'[data-tutorial="settings-gallery"]',tooltipPosition:"top",title:"Galleria foto",description:"Carica le foto del ristorante: sala, piatti, esterno. Le immagini vengono mostrate ai clienti nella scheda del ristorante e sul sito web."}]}],m=[{id:"welcome",title:"Benvenuto su Promethea!",description:"Scopri i migliori ristoranti della tua zona, ordina direttamente dal tavolo o prenota il tuo posto preferito.",icon:"sparkles"},{id:"discover",title:"Scopri i ristoranti vicino a te",description:"Cerca ristoranti per cucina, zona o valutazione. Ogni locale ha il suo menu digitale sempre aggiornato.",icon:"utensils",route:"/customer/restaurant/restaurant-list",tooltipTarget:'[data-tutorial="discover"]',tooltipPosition:"right"},{id:"order",title:"I tuoi ordini",description:"Scansiona il QR code al tavolo per ordinare direttamente, oppure prenota in anticipo con pochi tocchi.",icon:"shopping-bag",route:"/customer/orders",tooltipTarget:'[data-tutorial="order"]',tooltipPosition:"right"},{id:"profile",title:"Il tuo profilo e preferenze",description:"Salva i tuoi ristoranti preferiti, gestisci le allergie alimentari e consulta lo storico dei tuoi ordini.",icon:"user",route:"/customer/profile-user",tooltipTarget:'[data-tutorial="profile"]',tooltipPosition:"right"}],S=class p{authService=c(b);supabaseService=c(f);_isVisible=o(!1);_currentStep=o(0);_phase=o("modal");_type=o("customer");_showSkipConfirm=o(!1);_refreshTrigger=o(0);refreshSignal=this._refreshTrigger.asReadonly();isVisible=this._isVisible.asReadonly();currentStep=this._currentStep.asReadonly();phase=this._phase.asReadonly();type=this._type.asReadonly();showSkipConfirm=this._showSkipConfirm.asReadonly();_currentSubStep=o(0);currentSubStep=this._currentSubStep.asReadonly();_isIntroStep=o(!1);isIntroStep=this._isIntroStep.asReadonly();_singleModeStepId=null;_overviewMode=o(!1);overviewMode=this._overviewMode.asReadonly();static BUSINESS_STEPS=g;static CUSTOMER_STEPS=m;steps=a(()=>{let t=this._type()==="business"?g:m;return this._getVisibleSteps(t)});refreshTooltip(){this._refreshTrigger.update(t=>t+1)}currentStepData=a(()=>{let t=this.steps(),i=this._currentStep();return t[i]??null});isLastStep=a(()=>this._currentStep()===this.steps().length-1);progress=a(()=>Math.round((this._currentStep()+1)/this.steps().length*100));checkAndStart(){return l(this,null,function*(){if(this._isVisible())return;let t=this.authService.currentUserValue;if(!t)return;let e=this.authService.getCurrentContext()==="staff"?"business":"customer",r=e==="business"?"tutorial_business_completed":"tutorial_customer_completed";try{let{data:u,error:n}=yield this.supabaseService.getSupabaseClient().from("users").select(r).eq("id",t.id).single();if(n)throw n;if(u?.[r]===!0)return}catch{if(console.warn("[Tutorial] Impossibile leggere il flag, uso cache locale"),t[r]===!0)return}this._type.set(e),this._currentStep.set(0),this._phase.set("modal"),this._showSkipConfirm.set(!1),this._singleModeStepId=null,this._overviewMode.set(!0),this._isVisible.set(!0)})}nextStep(){if(this._phase()==="modal"){if(this._overviewMode())if(this.isLastStep()){this._overviewMode.set(!1),this._phase.set("tooltip"),this._currentStep.set(0);let t=this.steps()[0];this._isIntroStep.set(!!t?.subSteps?.length),this._currentSubStep.set(0)}else this._currentStep.update(t=>t+1);else(this.currentStepData()?.subSteps?.length??0)>0?(this._phase.set("tooltip"),this._isIntroStep.set(!0),this._currentSubStep.set(0)):this._singleModeStepId!==null?this.completeTutorial():this.isLastStep()?this.completeTutorial():this._currentStep.update(e=>e+1);return}if(this._phase()==="tooltip"){if(this._isIntroStep()){this._isIntroStep.set(!1);return}if(!this.isLastSubStep()){this._currentSubStep.update(t=>t+1);return}if(this._singleModeStepId!==null)this.completeTutorial();else if(this.isLastStep())this.completeTutorial();else{this._currentStep.update(i=>i+1);let t=this.steps()[this._currentStep()];this._isIntroStep.set(!!t?.subSteps?.length),this._currentSubStep.set(0)}}}prevStep(){if(this._phase()==="modal"){this._overviewMode()&&this._currentStep()>0&&this._currentStep.update(t=>t-1);return}if(this._phase()==="tooltip"){if(this._isIntroStep()){this._currentStep()>0&&(this._currentStep.update(e=>e-1),this.steps()[this._currentStep()]?.subSteps?.length?(this._isIntroStep.set(!0),this._currentSubStep.set(0)):(this._isIntroStep.set(!1),this._currentSubStep.set(0)));return}if(this._currentSubStep()>0){this._currentSubStep.update(i=>i-1);return}if(this.currentStepData()?.subSteps?.length){this._isIntroStep.set(!0);return}if(this._currentStep()>0){this._currentStep.update(e=>e-1);let i=this.steps()[this._currentStep()];i?.subSteps?.length?(this._isIntroStep.set(!1),this._currentSubStep.set(i.subSteps.length-1)):(this._isIntroStep.set(!1),this._currentSubStep.set(0))}}}requestSkip(){this._showSkipConfirm.set(!0)}cancelSkip(){this._showSkipConfirm.set(!1)}confirmSkip(){this._showSkipConfirm.set(!1),this.completeTutorial()}completeTutorial(){return l(this,null,function*(){this._isVisible.set(!1),this._phase.set("done"),yield this.saveCompletionFlag()})}saveCompletionFlag(){return l(this,null,function*(){let t=this.authService.currentUserValue;if(!t)return;let i=this._type()==="business"?"tutorial_business_completed":"tutorial_customer_completed";try{let{error:e}=yield this.supabaseService.getSupabaseClient().from("users").update({[i]:!0}).eq("id",t.id);e?console.error("\u274C Errore salvataggio tutorial flag:",e):t[i]=!0}catch(e){console.error("\u274C Eccezione salvataggio tutorial flag:",e)}})}restartTutorial(t){this._type.set(t),this._currentStep.set(0),this._phase.set("modal"),this._showSkipConfirm.set(!1),this._singleModeStepId=null,this._overviewMode.set(!0),this._isVisible.set(!0)}_getVisibleSteps(t){return t.filter(i=>i.requiredPermission?this.authService.hasPermission(i.requiredPermission):!0)}currentTooltipData=a(()=>{let t=this.currentStepData();return t?this._isIntroStep()?{tooltipTarget:t.tooltipTarget,tooltipPosition:t.tooltipPosition,title:t.title,description:t.description}:t.subSteps&&t.subSteps.length>0?t.subSteps[this._currentSubStep()]??null:{tooltipTarget:t.tooltipTarget,tooltipPosition:t.tooltipPosition,title:t.title,description:t.description}:null});hasSubSteps=a(()=>(this.currentStepData()?.subSteps?.length??0)>0);isLastSubStep=a(()=>{let t=this.currentStepData();return t?.subSteps?.length?this._currentSubStep()===t.subSteps.length-1:!0});subStepProgress=a(()=>{let t=this.currentStepData();return t?.subSteps?.length?{current:this._currentSubStep()+1,total:t.subSteps.length}:null});startTutorialFromStep(t,i="fromHere"){let r=this.authService.getCurrentContext()==="staff"?"business":"customer",n=(r==="business"?g:m).filter(s=>s.requiredPermission?this.authService.hasPermission(s.requiredPermission):!0),d=n.findIndex(s=>s.id===t);if(d===-1)return;this._isVisible()&&this._isVisible.set(!1),this._type.set(r),this._currentStep.set(d),this._phase.set("tooltip");let h=n[d];h.subSteps&&h.subSteps.length>0?(this._isIntroStep.set(!0),this._currentSubStep.set(0)):(this._isIntroStep.set(!1),this._currentSubStep.set(0)),this._showSkipConfirm.set(!1),this._singleModeStepId=i==="single"?t:null,this._overviewMode.set(!1),this._isVisible.set(!0)}static \u0275fac=function(i){return new(i||p)};static \u0275prov=v({token:p,factory:p.\u0275fac,providedIn:"root"})};export{S as a};
