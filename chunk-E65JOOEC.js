import{a as Se}from"./chunk-JA4P7KVP.js";import{a as Te}from"./chunk-LRNIFXNB.js";import{a as ye,b as z}from"./chunk-LKHJ66WT.js";import{a as we}from"./chunk-GKNZLVDN.js";import{a as A}from"./chunk-UCL3U7HJ.js";import"./chunk-5BFIQ7BP.js";import{b as ce,d as de,e as ue,g as pe,h as me,i as _e,p as ve,q as ge,r as be,u as he,w as fe}from"./chunk-77SKEQNN.js";import{a as xe}from"./chunk-7V5YPNIB.js";import{a as se}from"./chunk-KNL3CWA3.js";import{A as le,d as Z,e as ee,f as te,h as ie,i as ne,j as re,k as ae,t as oe}from"./chunk-DCWKKS33.js";import{$ as Y,$b as O,Db as m,Eb as d,La as l,Lb as W,Mb as K,Nb as L,Pb as k,Qb as o,Rb as w,Sb as g,Tb as F,Ub as B,Vb as h,Wb as f,Xb as x,_b as $,a as D,ab as J,b as H,bc as E,cc as X,ea as S,f as v,fb as b,g as G,ja as u,ka as p,qb as _,rb as i,sb as r,tb as I,zb as T}from"./chunk-K5RDB55Y.js";var q=class s{supabaseService=S(le);orderService=S(z);reservationService=S(A);calculateTableStatus(t){return v(this,null,function*(){let e=new Date().toISOString().split("T")[0],n=new Date;try{let{data:a,error:c}=yield this.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",e).in("status",["pending","confirmed"]);if(c)throw c;let{data:M,error:y}=yield this.supabaseService.getSupabaseClient().from("orders").select(`
          *,
          order_items (*)
        `).not("status","in",'("completed", "cancelled")');if(y)throw y;return t.map(C=>{let P=(a||[]).filter(V=>V.table_id===C.id),Q=(M||[]).filter(V=>V.table_id===C.id),N="free",U=null,R=null;return Q.length>0?(N="occupied",R=Q[0],R.order_items&&R.order_items.length>0&&R.order_items.every(j=>j.status==="served"||j.status==="out_of_stock")&&console.log(`\u{1F4CB} Tavolo ${C.table_number}: tutti i piatti serviti, pronto per il conto`)):P.length>0&&(N="reserved",U=P[0]),{table:C,status:N,currentReservation:U,currentOrder:R}})}catch(a){return console.error("\u274C Error calculating table status:",a),t.map(c=>({table:c,status:"free",currentReservation:null,currentOrder:null}))}})}isOrderActive(t){return t?!["completed","cancelled"].includes(t.status):!1}isReservationActive(t){if(!t)return!1;try{let e=new Date(`${t.reservation_date}T${t.reservation_time}`),n=new Date,c=(e.getTime()-n.getTime())/(1e3*60*60);return c<=2&&c>=-4}catch{return!1}}static \u0275fac=function(e){return new(e||s)};static \u0275prov=Y({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ce=()=>[1,2,3,4,5,6,7,8,9,10];function Ee(s,t){if(s&1&&(i(0,"option",43),o(1),r()),s&2){let e=t.$implicit;_("ngValue",e),l(),w(e.name)}}function Pe(s,t){if(s&1&&(i(0,"div",51)(1,"small"),o(2),r()()),s&2){let e=d().$implicit;l(2),g("Pren: ",e.currentReservation.customer_name)}}function ke(s,t){if(s&1&&(i(0,"div",51)(1,"small"),o(2),r()()),s&2){let e=d().$implicit;l(2),g("Ord: ",e.currentOrder.order_items==null?null:e.currentOrder.order_items.length," piatti")}}function Re(s,t){if(s&1){let e=T();i(0,"div",44),m("click",function(){let a=u(e).$implicit,c=d();return p(c.onTableClick(a))}),i(1,"div",45)(2,"div",46),o(3),r(),i(4,"div",47)(5,"div",48),o(6),r(),i(7,"div",49),o(8),r()(),b(9,Pe,3,1,"div",50)(10,ke,3,1,"div",50),r()()}if(s&2){let e=t.$implicit,n=d();k(n.getTableClass(e)),_("ngStyle",n.getTableStyle(e.table)),l(3),w(e.table.table_number),l(3),g("",e.table.capacity," p"),l(),k(n.getStatusColorClass(e.status)),l(),g(" ",n.getStatusText(e.status)," "),l(),_("ngIf",e.currentReservation),l(),_("ngIf",e.currentOrder)}}function Ie(s,t){s&1&&(i(0,"div",52)(1,"span",5),o(2,"search_off"),r(),i(3,"h3"),o(4,"Nessun tavolo trovato"),r(),i(5,"p",6),o(6,"Modifica i filtri di ricerca"),r()())}function Fe(s,t){if(s&1){let e=T();i(0,"div",65)(1,"button",26),m("click",function(){u(e);let a=d(2);return p(a.openManualReservationModal())}),i(2,"span",5),o(3,"event"),r(),o(4," Crea Prenotazione "),r(),i(5,"button",66),m("click",function(){u(e);let a=d(2);return p(a.openCreateOrderModal())}),i(6,"span",5),o(7,"restaurant"),r(),o(8," Crea Ordine "),r()()}}function Ve(s,t){if(s&1){let e=T();i(0,"div",65)(1,"button",26),m("click",function(){u(e);let a=d(2);return p(a.openEditReservationModal())}),i(2,"span",5),o(3,"edit"),r(),o(4," Modifica Prenotazione "),r(),i(5,"button",66),m("click",function(){u(e);let a=d(2);return p(a.openCreateOrderModal())}),i(6,"span",5),o(7,"check"),r(),o(8," Conferma Arrivo "),r()()}}function De(s,t){if(s&1){let e=T();i(0,"div",65)(1,"button",26),m("click",function(){u(e);let a=d(2);return p(a.openCreateOrderModal())}),i(2,"span",5),o(3,"add"),r(),o(4," Aggiungi Piatti "),r(),i(5,"button",42),m("click",function(){u(e);let a=d(2);return p(a.openOrderDetails())}),i(6,"span",5),o(7,"receipt"),r(),o(8," Dettagli Ordine "),r(),i(9,"button",67),m("click",function(){u(e);let a=d(2);return p(a.closeOrderAndCreateBill())}),i(10,"span",5),o(11,"receipt_long"),r(),o(12," Chiudi Conto "),r()()}}function Ae(s,t){if(s&1){let e=T();i(0,"div",68)(1,"button",69),m("click",function(){u(e);let a=d(2);return p(a.freeTableManually())}),i(2,"span",5),o(3,"lock_open"),r(),o(4," Libera Tavolo "),r()()}}function ze(s,t){if(s&1){let e=T();i(0,"div",53),m("click",function(){u(e);let a=d();return p(a.deselectTable())}),i(1,"div",54),m("click",function(a){return u(e),p(a.stopPropagation())}),i(2,"div",55)(3,"h2",56),o(4),r(),i(5,"button",57),m("click",function(){u(e);let a=d();return p(a.deselectTable())}),i(6,"span",5),o(7,"close"),r()()(),i(8,"div",58)(9,"div",59)(10,"div",60)(11,"span",61),o(12),r()(),i(13,"div",62),b(14,Fe,9,0,"div",63)(15,Ve,9,0,"div",63)(16,De,13,0,"div",63)(17,Ae,5,0,"div",64),r()()()()()}if(s&2){let e=d();l(4),g("Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number),l(7),k(e.getStatusColorClass((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")),l(),g(" ",e.getStatusText((e.selectedTableStatus==null?null:e.selectedTableStatus.status)||"free")," "),l(2),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="free"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="reserved"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)==="occupied"),l(),_("ngIf",(e.selectedTableStatus==null?null:e.selectedTableStatus.status)!=="free")}}function qe(s,t){if(s&1&&(i(0,"option",87),o(1),r()),s&2){let e=t.$implicit,n=d(2);_("value",e)("disabled",n.selectedTable&&e>n.selectedTable.capacity),l(),B(" ",e," ",e===1?"persona":"persone"," ",n.selectedTable&&e>n.selectedTable.capacity?" (Troppe persone)":""," ")}}function Ne(s,t){if(s&1){let e=T();i(0,"div",70),m("click",function(){u(e);let a=d();return p(a.closeManualReservationModal())}),i(1,"div",71),m("click",function(a){return u(e),p(a.stopPropagation())}),i(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"event"),r(),o(6),r(),i(7,"button",57),m("click",function(){u(e);let a=d();return p(a.closeManualReservationModal())}),i(8,"span",5),o(9,"close"),r()()(),i(10,"div",58)(11,"form",72,0),m("ngSubmit",function(){u(e);let a=d();return p(a.createManualReservation())}),i(13,"div",73)(14,"label",16),o(15,"Nome Cliente *"),r(),i(16,"input",74),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.customer_name,a)||(c.manualReservationData.customer_name=a),p(a)}),r()(),i(17,"div",73)(18,"label",16),o(19,"Telefono *"),r(),i(20,"input",75),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.customer_phone,a)||(c.manualReservationData.customer_phone=a),p(a)}),r()(),i(21,"div",76)(22,"div",73)(23,"label",16),o(24,"Data *"),r(),i(25,"input",77),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.reservation_date,a)||(c.manualReservationData.reservation_date=a),p(a)}),r()(),i(26,"div",73)(27,"label",16),o(28,"Orario *"),r(),i(29,"input",78),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.reservation_time,a)||(c.manualReservationData.reservation_time=a),p(a)}),r()()(),i(30,"div",73)(31,"label",16),o(32,"Numero Persone *"),r(),i(33,"select",79),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.party_size,a)||(c.manualReservationData.party_size=a),p(a)}),b(34,qe,2,5,"option",80),r(),i(35,"div",81),o(36),r()(),i(37,"div",73)(38,"label",16),o(39,"Note Speciali"),r(),i(40,"textarea",82),x("ngModelChange",function(a){u(e);let c=d();return f(c.manualReservationData.special_requests,a)||(c.manualReservationData.special_requests=a),p(a)}),r()()()(),i(41,"div",83)(42,"div",25)(43,"div",84)(44,"button",85),m("click",function(){u(e);let a=d();return p(a.closeManualReservationModal())}),o(45," Annulla "),r(),i(46,"button",86),m("click",function(){u(e);let a=d();return p(a.createManualReservation())}),i(47,"span",5),o(48,"add"),r(),o(49," Crea Prenotazione "),r()()()()()()}if(s&2){let e=W(12),n=d();l(6),g(" Nuova Prenotazione - Tavolo ",n.selectedTable==null?null:n.selectedTable.table_number," "),l(10),h("ngModel",n.manualReservationData.customer_name),l(4),h("ngModel",n.manualReservationData.customer_phone),l(5),h("ngModel",n.manualReservationData.reservation_date),l(4),h("ngModel",n.manualReservationData.reservation_time),l(4),h("ngModel",n.manualReservationData.party_size),l(),_("ngForOf",$(10,Ce)),l(2),g(" Capacit\xE0 massima tavolo: ",(n.selectedTable==null?null:n.selectedTable.capacity)||0," persone "),l(4),h("ngModel",n.manualReservationData.special_requests),l(6),_("disabled",!e.valid)}}function We(s,t){if(s&1&&(i(0,"option",87),o(1),r()),s&2){let e=t.$implicit,n=d(2);_("value",e)("disabled",n.selectedTable&&e>n.selectedTable.capacity),l(),B(" ",e," ",e===1?"persona":"persone"," ",n.selectedTable&&e>n.selectedTable.capacity?" (Troppe persone)":""," ")}}function Le(s,t){if(s&1){let e=T();i(0,"button",89),m("click",function(){u(e);let a=d(2);return p(a.deleteReservation())}),i(1,"span",5),o(2,"delete"),r(),o(3," Elimina Prenotazione "),r()}}function Be(s,t){if(s&1){let e=T();i(0,"div",70),m("click",function(){u(e);let a=d();return p(a.closeEditReservationModal())}),i(1,"div",71),m("click",function(a){return u(e),p(a.stopPropagation())}),i(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"edit"),r(),o(6),r(),i(7,"button",57),m("click",function(){u(e);let a=d();return p(a.closeEditReservationModal())}),i(8,"span",5),o(9,"close"),r()()(),i(10,"div",58)(11,"form",72,0),m("ngSubmit",function(){u(e);let a=d();return p(a.updateReservation())}),i(13,"div",73)(14,"label",16),o(15,"Nome Cliente *"),r(),i(16,"input",74),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.customer_name,a)||(c.editingReservation.customer_name=a),p(a)}),r()(),i(17,"div",73)(18,"label",16),o(19,"Telefono *"),r(),i(20,"input",75),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.customer_phone,a)||(c.editingReservation.customer_phone=a),p(a)}),r()(),i(21,"div",76)(22,"div",73)(23,"label",16),o(24,"Data *"),r(),i(25,"input",77),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.reservation_date,a)||(c.editingReservation.reservation_date=a),p(a)}),r()(),i(26,"div",73)(27,"label",16),o(28,"Orario *"),r(),i(29,"input",78),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.reservation_time,a)||(c.editingReservation.reservation_time=a),p(a)}),r()()(),i(30,"div",73)(31,"label",16),o(32,"Numero Persone *"),r(),i(33,"select",79),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.party_size,a)||(c.editingReservation.party_size=a),p(a)}),b(34,We,2,5,"option",80),r(),i(35,"div",81),o(36),r()(),i(37,"div",73)(38,"label",16),o(39,"Note Speciali"),r(),i(40,"textarea",82),x("ngModelChange",function(a){u(e);let c=d();return f(c.editingReservation.special_requests,a)||(c.editingReservation.special_requests=a),p(a)}),r()()()(),i(41,"div",83)(42,"div",25),b(43,Le,4,0,"button",88),i(44,"button",85),m("click",function(){u(e);let a=d();return p(a.closeEditReservationModal())}),o(45," Annulla "),r(),i(46,"button",86),m("click",function(){u(e);let a=d();return p(a.updateReservation())}),i(47,"span",5),o(48,"save"),r(),o(49," Salva Modifiche "),r()()()()()}if(s&2){let e=W(12),n=d();l(6),g(" Modifica Prenotazione - Tavolo ",n.selectedTable==null?null:n.selectedTable.table_number," "),l(10),h("ngModel",n.editingReservation.customer_name),l(4),h("ngModel",n.editingReservation.customer_phone),l(5),h("ngModel",n.editingReservation.reservation_date),l(4),h("ngModel",n.editingReservation.reservation_time),l(4),h("ngModel",n.editingReservation.party_size),l(),_("ngForOf",$(11,Ce)),l(2),g(" Capacit\xE0 massima tavolo: ",(n.selectedTable==null?null:n.selectedTable.capacity)||0," persone "),l(4),h("ngModel",n.editingReservation.special_requests),l(3),_("ngIf",n.isReservationDeletable(n.editingReservation)),l(3),_("disabled",!e.valid)}}function $e(s,t){if(s&1&&(i(0,"div",108),o(1),O(2,"slice"),r()),s&2){let e=d().$implicit;l(),F(" ",X(2,2,e.description,0,80),"",e.description.length>80?"...":""," ")}}function Qe(s,t){if(s&1){let e=T();i(0,"div",104),m("click",function(){let a=u(e).$implicit,c=d(2);return p(c.addDishAndContinue(a))}),i(1,"div",105)(2,"strong"),o(3),r(),i(4,"span",106),o(5),O(6,"number"),r()(),b(7,$e,3,6,"div",107),r()}if(s&2){let e=t.$implicit;l(3),w(e.name),l(2),g("\u20AC",E(6,3,e.base_price,"1.2-2")),l(2),_("ngIf",e.description)}}function Ue(s,t){if(s&1&&(i(0,"div",109)(1,"div",110)(2,"span",5),o(3,"event"),r(),i(4,"div",111)(5,"span",112),o(6,"Prenotazione:"),r(),i(7,"span",113),o(8),r()()()()),s&2){let e=d(2);l(8),F(" ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.customer_name," - ",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation.party_size," persone ")}}function je(s,t){if(s&1){let e=T();i(0,"div",116)(1,"div",105)(2,"strong"),o(3),r(),i(4,"span",117),o(5),O(6,"number"),r()(),i(7,"div",118)(8,"button",119),m("click",function(){let a=u(e).$implicit,c=d(3);return p(c.updateOrderItemQuantity(a,-1))}),o(9,"-"),r(),i(10,"span",120),o(11),r(),i(12,"button",119),m("click",function(){let a=u(e).$implicit,c=d(3);return p(c.updateOrderItemQuantity(a,1))}),o(13,"+"),r(),i(14,"button",121),m("click",function(){let a=u(e).index,c=d(3);return p(c.removeOrderItem(a))}),i(15,"span",5),o(16,"delete"),r()()()()}if(s&2){let e=t.$implicit;l(3),w(e.dish_name),l(2),g("\u20AC",E(6,3,e.total_price,"1.2-2")),l(6),w(e.quantity)}}function He(s,t){if(s&1&&(i(0,"div",114),b(1,je,17,6,"div",115),r()),s&2){let e=d(2);l(),_("ngForOf",e.newOrderData.items)}}function Ge(s,t){s&1&&(i(0,"div",122)(1,"p",6),o(2,"Nessun piatto aggiunto"),r(),i(3,"p",123),o(4,"Clicca sui piatti dal menu per aggiungerli"),r()())}function Ye(s,t){if(s&1&&(i(0,"div",124)(1,"strong"),o(2),O(3,"number"),r()()),s&2){let e=d(2);l(2),g("Totale: \u20AC",E(3,1,e.orderTotal,"1.2-2"))}}function Je(s,t){s&1&&(i(0,"div",125)(1,"p",123)(2,"span",5),o(3,"info"),r(),o(4," Clicca sui piatti dal menu per aggiungerli all'ordine "),r()())}function Ke(s,t){if(s&1){let e=T();i(0,"div",70),m("click",function(){u(e);let a=d();return p(a.closeCreateOrderModal())}),i(1,"div",90),m("click",function(a){return u(e),p(a.stopPropagation())}),i(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"restaurant"),r(),o(6),r(),i(7,"button",57),m("click",function(){u(e);let a=d();return p(a.closeCreateOrderModal())}),i(8,"span",5),o(9,"close"),r()()(),i(10,"div",58)(11,"div",91)(12,"div",92)(13,"h4",93)(14,"span",5),o(15,"restaurant_menu"),r(),o(16," Menu Disponibile "),r(),i(17,"div",94),b(18,Qe,8,6,"div",95),r()(),i(19,"div",96)(20,"h4",93)(21,"span",5),o(22,"receipt"),r(),o(23," Riepilogo Ordine "),r(),b(24,Ue,9,2,"div",97)(25,He,2,1,"div",98)(26,Ge,5,0,"div",99)(27,Ye,4,4,"div",100),i(28,"div",101)(29,"button",102),m("click",function(){u(e);let a=d();return p(a.addDishesToOrder())}),i(30,"span",5),o(31,"add"),r(),o(32," Aggiungi "),r(),i(33,"button",26),m("click",function(){u(e);let a=d();return p(a.closeCreateOrderModal())}),i(34,"span",5),o(35,"check"),r(),o(36," Chiudi "),r()(),b(37,Je,5,0,"div",103),r()()()()()}if(s&2){let e=d();l(6),F(" ",e.editingOrder?e.isAddingToExistingOrder?"Aggiungi all'Ordine":"Modifica Ordine":"Nuovo Ordine"," - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number," "),l(12),_("ngForOf",e.dishes),l(6),_("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentReservation),l(),_("ngIf",e.newOrderData.items.length>0),l(),_("ngIf",e.newOrderData.items.length===0),l(),_("ngIf",e.newOrderData.items.length>0),l(2),_("disabled",e.newOrderData.items.length===0),l(8),_("ngIf",e.newOrderData.items.length===0)}}function Xe(s,t){s&1&&(i(0,"span",129),o(1," Pronto per il conto "),r())}function Ze(s,t){if(s&1&&(i(0,"div",134)(1,"div",105)(2,"span",135),o(3),r(),i(4,"span",136),o(5),r()(),i(6,"div",137)(7,"span",138),o(8),r(),i(9,"span",117),o(10),O(11,"number"),r()()()),s&2){let e=t.$implicit,n=d(3);l(3),w(e.dish_name||"Piatto"),l(),k(n.getOrderStatusColor(e.status)),l(),g(" ",n.getOrderStatusText(e.status)," "),l(3),g("x",e.quantity),l(2),g("\u20AC",E(11,6,e.total_price,"1.2-2"))}}function et(s,t){if(s&1&&(i(0,"div")(1,"div",130)(2,"div",110)(3,"span",5),o(4,"info"),r(),i(5,"div",111)(6,"span",112),o(7,"Stato Ordine:"),r(),i(8,"span",131),o(9),r()()(),i(10,"div",110)(11,"span",5),o(12,"schedule"),r(),i(13,"div",111)(14,"span",112),o(15,"Creato il:"),r(),i(16,"span",113),o(17),O(18,"date"),r()()()(),i(19,"div",132)(20,"h4",93)(21,"span",5),o(22,"restaurant_menu"),r(),o(23," Piatti Ordinati "),i(24,"small"),o(25),r()(),b(26,Ze,12,9,"div",133),r(),i(27,"div",124)(28,"strong"),o(29),O(30,"number"),r()()()),s&2){let e=t.ngIf,n=d(2);l(8),k(n.getOrderStatusColor(n.getOverallOrderStatus(e))),l(),g(" ",n.getOrderStatusText(n.getOverallOrderStatus(e))," "),l(8),w(E(18,8,e.created_at,"dd/MM/yyyy HH:mm")),l(8),F("(",n.getServedItemsCount(e),"/",e.order_items==null?null:e.order_items.length," serviti)"),l(),_("ngForOf",e.order_items),l(3),g("Totale: \u20AC",E(30,11,n.getCurrentOrderTotal(),"1.2-2"))}}function tt(s,t){if(s&1){let e=T();i(0,"div",70),m("click",function(){u(e);let a=d();return p(a.closeOrderDetailsModal())}),i(1,"div",71),m("click",function(a){return u(e),p(a.stopPropagation())}),i(2,"div",55)(3,"h2",56)(4,"span",5),o(5,"receipt_long"),r(),o(6),b(7,Xe,2,0,"span",126),r(),i(8,"button",57),m("click",function(){u(e);let a=d();return p(a.closeOrderDetailsModal())}),i(9,"span",5),o(10,"close"),r()()(),i(11,"div",58),b(12,et,31,14,"div",127),r(),i(13,"div",83)(14,"button",66),m("click",function(){u(e);let a=d();return p(a.closeOrderAndCreateBill())}),i(15,"span",5),o(16,"receipt"),r(),o(17),r(),i(18,"button",128),m("click",function(){u(e);let a=d();return p(a.freeTableManually())}),i(19,"span",5),o(20,"clear"),r(),o(21," Libera Tavolo (Senza Chiudere) "),r()()()()}if(s&2){let e=d();l(6),g(" Dettagli Ordine - Tavolo ",e.selectedTable==null?null:e.selectedTable.table_number," "),l(),_("ngIf",e.getOverallOrderStatus(e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)==="ready_for_bill"),l(5),_("ngIf",e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder),l(2),L("pulse",e.getOverallOrderStatus(e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)==="ready_for_bill"),l(3),g(" ",e.getOverallOrderStatus(e.selectedTableStatus==null?null:e.selectedTableStatus.currentOrder)==="ready_for_bill"?"CHIUDI CONTO":"Chiudi Conto"," ")}}var Me=class s{floorPlanService=S(Se);tableService=S(Te);reservationService=S(A);orderService=S(z);dishService=S(xe);authService=S(se);router=S(oe);shiftService=S(we);tableStatusService=S(q);notificationService=S(ye);notificationSubscription;floorPlans=[];currentFloorPlan=null;tables=[];tableStatuses=[];reservations=[];activeOrders=[];dishes=[];editingOrder=null;showEditReservationModal=!1;editingReservation=null;isFullscreen=!1;_orderTotal=0;get freeTablesCount(){return this.tableStatuses.filter(t=>t.status==="free").length}get reservedTablesCount(){return this.tableStatuses.filter(t=>t.status==="reserved").length}get occupiedTablesCount(){return this.tableStatuses.filter(t=>t.status==="occupied").length}get totalTablesCount(){return this.tableStatuses.length}get orderTotal(){return this._orderTotal}selectedTable=null;selectedTableStatus=null;showManualReservationModal=!1;showCreateOrderModal=!1;showOrderDetailsModal=!1;showQuickActionsModal=!1;manualReservationData={customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",party_size:2,special_requests:""};newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]};searchTerm="";statusFilter="all";isAddingToExistingOrder=!1;subscriptions=new G;ngOnInit(){console.log("\u{1F3C1} TableMap initialized"),this.loadData(),this.setupSubscriptions(),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),this.notificationSubscription=this.notificationService.orderUpdates$.subscribe(t=>{t==="refresh_all"?this.forceRefreshAllData():this.refreshSingleOrder(t)})}handleFullscreenChange(){this.isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}ngOnDestroy(){this.subscriptions.unsubscribe(),this.notificationSubscription&&this.notificationSubscription.unsubscribe(),document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this))}checkAuth(){return v(this,null,function*(){try{let t=this.authService.currentUserValue;return t?(console.log("\u2705 User authenticated:",t.id),!0):(console.error("\u274C No authenticated user"),!1)}catch(t){return console.error("\u274C Auth check failed:",t),!1}})}checkAndUpdateExpiredReservations(){return v(this,null,function*(){try{let t=new Date().toISOString().split("T")[0],{data:e,error:n}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",t).in("status",["pending","confirmed"]);if(n)throw n;for(let a of e||[])if(!this.tableStatusService.isReservationActive(a)){let{error:c}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",a.id);c&&console.error("Error updating expired reservation:",c)}}catch(t){console.error("\u274C Error checking expired reservations:",t)}})}loadData(){return v(this,null,function*(){if(!(yield this.checkAuth())){alert("Errore di autenticazione. Per favore, effettua il login nuovamente.");return}try{console.log("\u{1F504} Loading all data..."),yield Promise.all([this.floorPlanService.loadFloorPlans(),this.tableService.loadData(),this.dishService.loadDishes(),this.loadReservations(),this.loadActiveOrders()]),yield this.checkAndUpdateExpiredReservations(),yield this.updateTableStatuses(),console.log("\u2705 All data loaded successfully")}catch(e){console.error("\u{1F4A5} Error loading data:",e)}})}setupSubscriptions(){this.subscriptions.add(this.floorPlanService.floorPlans$.subscribe(t=>{this.floorPlans=t,t.length>0&&!this.currentFloorPlan&&(this.currentFloorPlan=t[0],this.loadTablesForFloorPlan())})),this.subscriptions.add(this.tableService.data$.subscribe(()=>{this.loadTablesForFloorPlan()})),this.subscriptions.add(this.dishService.dishes$.subscribe(t=>{this.dishes=t.filter(e=>e.status==="available")}))}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[],this.tableStatuses=[];return}this.tables=this.tableService.getTablesByFloorPlan(this.currentFloorPlan.id),this.updateTableStatuses()}updateTableStatuses(){return v(this,null,function*(){if(console.log("\u{1F504} Aggiornamento stati tavoli..."),!this.tables||this.tables.length===0){console.log("\u274C Nessun tavolo da aggiornare");return}try{this.tableStatuses=yield this.tableStatusService.calculateTableStatus(this.tables),this.selectedTable&&(this.selectedTableStatus=this.tableStatuses.find(t=>t.table.id===this.selectedTable?.id)||null),console.log("\u2705 Stati tavoli aggiornati:",this.tableStatuses.length),console.log("\u{1F4CA} Distribuzione stati:"),console.log("  - Liberi:",this.tableStatuses.filter(t=>t.status==="free").length),console.log("  - Prenotati:",this.tableStatuses.filter(t=>t.status==="reserved").length),console.log("  - Occupati:",this.tableStatuses.filter(t=>t.status==="occupied").length)}catch(t){console.error("\u274C Errore aggiornamento stati tavoli:",t)}})}isOrderActive(t){return this.tableStatusService.isOrderActive(t)}isReservationActive(t){return this.tableStatusService.isReservationActive(t)}loadReservations(){return v(this,null,function*(){try{let t=new Date().toISOString().split("T")[0],{data:e,error:n}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").select("*").eq("reservation_date",t).in("status",["pending","confirmed"]);if(n)throw n;this.reservations=e||[]}catch(t){console.error("\u274C Error loading reservations:",t)}})}loadActiveOrders(){return v(this,null,function*(){try{console.log("\u{1F504} Loading active orders...");let t=yield this.orderService.forceRefreshActiveOrders();Array.isArray(t)?(this.activeOrders=t,console.log("\u2705 Active orders loaded:",this.activeOrders.length)):this.activeOrders=[]}catch(t){console.error("\u274C Error loading active orders:",t),this.activeOrders=[]}})}onTableClick(t){this.selectedTable=t.table,this.selectedTableStatus=t,this.showQuickActionsModal=!0}deselectTable(){this.selectedTable=null,this.selectedTableStatus=null,this.showQuickActionsModal=!1}openManualReservationModal(){if(!this.selectedTable)return;let t=new Date;this.manualReservationData={customer_name:"",customer_phone:"",reservation_date:t.toISOString().split("T")[0],reservation_time:t.toTimeString().split(" ")[0].substring(0,5),party_size:this.selectedTable.capacity||2,special_requests:""},this.showQuickActionsModal=!1,this.showManualReservationModal=!0}closeManualReservationModal(){this.showManualReservationModal=!1}createManualReservation(){return v(this,null,function*(){if(this.selectedTable){if(this.manualReservationData.party_size>this.selectedTable.capacity){alert(`Il tavolo pu\xF2 ospitare al massimo ${this.selectedTable.capacity} persone.`);return}try{let t={restaurant_id:this.selectedTable.restaurant_id,table_id:this.selectedTable.id,reservation_date:this.manualReservationData.reservation_date,reservation_time:this.manualReservationData.reservation_time,party_size:this.manualReservationData.party_size,special_requests:this.manualReservationData.special_requests,status:"confirmed",customer_id:null,customer_name:this.manualReservationData.customer_name,customer_phone:this.manualReservationData.customer_phone};console.log("\u{1F4DD} Creating manual reservation:",t);let{data:e,error:n}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").insert(t).select().single();if(n)throw console.error("\u274C Error creating manual reservation:",n),n;console.log("\u2705 Manual reservation created:",e),this.closeManualReservationModal(),yield this.loadReservations(),this.updateTableStatuses(),alert("Prenotazione creata con successo!")}catch(t){console.error("\u274C Error creating manual reservation:",t),alert("Errore durante la creazione della prenotazione: "+t.message)}}})}getTableClass(t){let e=["table-element",`shape-${t.table.shape}`];return e.push(t.status),this.selectedTable?.id===t.table.id&&e.push("selected"),e.join(" ")}getTableStyle(t){let e=t.shape==="rectangle"||t.shape==="square"?"8px":"50%";return{left:t.position_x+"px",top:t.position_y+"px",width:t.width+"px",height:t.height+"px","border-radius":e,transform:`rotate(${t.rotation}deg)`}}getStatusText(t){return{free:"Libero",reserved:"Prenotato",occupied:"Occupato",needs_attention:"Da controllare"}[t]||t}getStatusColorClass(t){return`status-${t}`}getFilteredTables(){let t=this.tableStatuses;return this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.searchTerm&&(t=t.filter(e=>e.table.table_number.toLowerCase().includes(this.searchTerm.toLowerCase())||e.table.table_name.toLowerCase().includes(this.searchTerm.toLowerCase()))),t}onFloorPlanSelect(t){this.currentFloorPlan=t,this.loadTablesForFloorPlan(),this.deselectTable()}formatTime(t){return t?t.substring(0,5):""}getCurrentOrderTotal(){return this.selectedTableStatus?.currentOrder?.order_items?this.selectedTableStatus.currentOrder.order_items.reduce((t,e)=>t+e.total_price,0):0}toggleFullscreen(){this.isFullscreen=!this.isFullscreen,this.isFullscreen?this.enterFullscreen():this.exitFullscreen()}enterFullscreen(){let t=document.documentElement;t.requestFullscreen&&t.requestFullscreen()}exitFullscreen(){document.exitFullscreen&&document.exitFullscreen(),this.isFullscreen=!1}openCreateOrderModal(){this.initializeNewOrderData(),this.showCreateOrderModal=!0,this.showQuickActionsModal=!1}openEditReservationModal(){this.selectedTableStatus?.currentReservation&&(this.editingReservation=D({},this.selectedTableStatus.currentReservation),this.showEditReservationModal=!0,this.showQuickActionsModal=!1)}openOrderDetails(){this.showOrderDetailsModal=!0,this.showQuickActionsModal=!1}closeEditReservationModal(){this.showEditReservationModal=!1,this.editingReservation=null}closeCreateOrderModal(){this.showCreateOrderModal=!1,this.newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]},this.editingOrder=null,this.isAddingToExistingOrder=!1}closeOrderDetailsModal(){this.showOrderDetailsModal=!1}isReservationDeletable(t){if(!t?.reservation_date||!t?.reservation_time)return!1;try{return new Date(`${t.reservation_date}T${t.reservation_time}`)>new Date}catch(e){return console.error("Errore nel parsing della data:",e),!1}}addDishAndContinue(t){this.addDishToOrder(t)}updateOrderItemQuantity(t,e){let n=t.quantity+e;n<=0?this.removeOrderItemFromList(t):(t.quantity=n,t.total_price=t.unit_price*n),this.calculateOrderTotal()}removeOrderItem(t){this.newOrderData.items.splice(t,1),this.calculateOrderTotal()}initializeNewOrderData(){this.newOrderData={customer_name:"",customer_phone:"",order_type:"dine_in",notes:"",items:[]},this.isAddingToExistingOrder=!!this.selectedTableStatus?.currentOrder,this.editingOrder=this.selectedTableStatus?.currentOrder||null,this.isAddingToExistingOrder&&this.selectedTableStatus?.currentReservation&&(this.newOrderData.customer_name=this.selectedTableStatus.currentReservation.customer_name,this.newOrderData.customer_phone=this.selectedTableStatus.currentReservation.customer_phone)}calculateOrderTotal(){this._orderTotal=this.newOrderData.items.reduce((t,e)=>t+e.quantity*e.unit_price,0)}addDishToOrder(t){let e=this.newOrderData.items.find(n=>n.dish_id===t.id);e?(e.quantity+=1,e.total_price=e.unit_price*e.quantity):this.newOrderData.items.push({dish_id:t.id,dish_name:t.name,unit_price:t.base_price,quantity:1,total_price:t.base_price}),this.calculateOrderTotal()}removeOrderItemFromList(t){let e=this.newOrderData.items.findIndex(n=>n.dish_id===t.dish_id);e!==-1&&this.newOrderData.items.splice(e,1),this.calculateOrderTotal()}closeOrderAndCreateBill(){return v(this,null,function*(){if(!this.selectedTableStatus?.currentOrder){alert("Nessun ordine attivo per questo tavolo");return}let t=this.selectedTableStatus.currentOrder.id,e=this.selectedTable?.id;if(!e){console.error("\u274C Table ID is undefined, cannot refresh table status");return}this.debugOrderFlow(t);try{if(console.log(`\u{1F9FE} Closing order ${t} for table ${this.selectedTable?.table_number}`),!(yield this.completeOrder(t)))throw new Error("Failed to complete order");console.log("\u2705 Order closed successfully");let a=yield this.getOrderWithDetails(t);if(!a)throw new Error("Failed to fetch order details for bill");let c=this.prepareBillData(a);this.showBillToUser(c),yield this.updateInventoryFromOrder(a),yield this.forceRefreshTableStatus(e),this.closeOrderDetailsModal(),this.closeCreateOrderModal(),this.deselectTable(),setTimeout(()=>{this.verifyTableFreed(e)},1500)}catch(n){console.error("\u274C Error closing order and creating bill:",n),alert("Errore durante la chiusura del conto: "+n.message)}})}completeOrder(t){return v(this,null,function*(){try{let{error:e}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",t);if(e)throw e;return!0}catch(e){return console.error("\u274C Error completing order:",e),!1}})}getOrderWithDetails(t){return v(this,null,function*(){try{let{data:e,error:n}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").select(`
        *,
        order_items (
          *,
          dish:dishes (
            name,
            base_price
          )
        ),
        table:tables (
          table_number,
          table_name
        )
      `).eq("id",t).single();if(n)throw n;return e}catch(e){return console.error("\u274C Error fetching order details:",e),null}})}prepareBillData(t){let e=t.order_items.map(y=>({name:y.dish?.name||"Prodotto",quantity:y.quantity,unitPrice:y.unit_price,totalPrice:y.total_price||y.quantity*y.unit_price})),n=e.reduce((y,C)=>y+C.totalPrice,0),a=t.tax_amount||0,c=t.discount_amount||0,M=t.total_amount||n+a-c;return{orderNumber:t.order_number,tableNumber:t.table?.table_number||this.selectedTable?.table_number,tableName:t.table?.table_name||this.selectedTable?.table_name,customerName:t.customer_name||"Cliente",customerPhone:t.customer_phone||"",date:new Date().toLocaleString("it-IT"),items:e,subtotal:n,taxAmount:a,discountAmount:c,totalAmount:M,paymentMethod:"Contanti"}}showBillToUser(t){let e=window.open("","_blank");e?(e.document.write(this.generateBillHTML(t)),e.document.close(),setTimeout(()=>{e.print()},500)):this.showBillInModal(t)}generateBillHTML(t){return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Scontrino - Ordine ${t.orderNumber}</title>
      <style>
        body { 
          font-family: 'Courier New', monospace;
          font-size: 12px;
          margin: 0;
          padding: 10px;
          max-width: 300px;
        }
        .header { 
          text-align: center; 
          margin-bottom: 15px;
          border-bottom: 1px dashed #000;
          padding-bottom: 10px;
        }
        .restaurant-name { 
          font-weight: bold; 
          font-size: 14px;
        }
        .bill-info { 
          margin: 10px 0;
        }
        .items-table { 
          width: 100%; 
          border-collapse: collapse;
          margin: 10px 0;
        }
        .items-table th, 
        .items-table td { 
          padding: 3px 0;
          border-bottom: 1px dotted #ccc;
        }
        .items-table .quantity { 
          width: 20px; 
          text-align: center;
        }
        .items-table .name { 
          text-align: left;
        }
        .items-table .price { 
          text-align: right; 
          width: 70px;
        }
        .totals { 
          margin-top: 15px;
          border-top: 1px dashed #000;
          padding-top: 10px;
        }
        .total-row { 
          display: flex; 
          justify-content: space-between;
          margin: 3px 0;
        }
        .grand-total { 
          font-weight: bold; 
          font-size: 14px;
          border-top: 2px solid #000;
          padding-top: 5px;
        }
        .footer { 
          text-align: center; 
          margin-top: 20px;
          font-size: 10px;
        }
        @media print {
          body { margin: 0; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <div class="restaurant-name">IL TUO RISTORANTE</div>
        <div>Scontrino Fiscale</div>
      </div>
      
      <div class="bill-info">
        <div>Ordine: ${t.orderNumber}</div>
        <div>Tavolo: ${t.tableNumber} - ${t.tableName}</div>
        <div>Cliente: ${t.customerName}</div>
        <div>Data: ${t.date}</div>
      </div>
      
      <table class="items-table">
        <thead>
          <tr>
            <th class="quantity">Q.t\xE0</th>
            <th class="name">Descrizione</th>
            <th class="price">Importo</th>
          </tr>
        </thead>
        <tbody>
          ${t.items.map(e=>`
            <tr>
              <td class="quantity">${e.quantity}</td>
              <td class="name">${e.name}</td>
              <td class="price">\u20AC${e.totalPrice.toFixed(2)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
      
      <div class="totals">
        <div class="total-row">
          <span>Subtotale:</span>
          <span>\u20AC${t.subtotal.toFixed(2)}</span>
        </div>
        ${t.taxAmount>0?`
        <div class="total-row">
          <span>IVA:</span>
          <span>\u20AC${t.taxAmount.toFixed(2)}</span>
        </div>
        `:""}
        ${t.discountAmount>0?`
        <div class="total-row">
          <span>Sconto:</span>
          <span>-\u20AC${t.discountAmount.toFixed(2)}</span>
        </div>
        `:""}
        <div class="total-row grand-total">
          <span>TOTALE:</span>
          <span>\u20AC${t.totalAmount.toFixed(2)}</span>
        </div>
      </div>
      
      <div class="footer">
        <div>Grazie e arrivederci!</div>
        <div>${new Date().getFullYear()} - Il Tuo Ristorante</div>
      </div>
      
      <div class="no-print" style="margin-top: 20px; text-align: center;">
        <button onclick="window.print()" style="padding: 10px 20px; font-size: 14px;">
          Stampa Scontrino
        </button>
        <button onclick="window.close()" style="padding: 10px 20px; font-size: 14px; margin-left: 10px;">
          Chiudi
        </button>
      </div>
    </body>
    </html>
  `}showBillInModal(t){let e=`
    <div style="font-family: monospace; padding: 20px;">
      <h3>SCONTRINO - Ordine ${t.orderNumber}</h3>
      <p><strong>Tavolo:</strong> ${t.tableNumber}</p>
      <p><strong>Cliente:</strong> ${t.customerName}</p>
      <p><strong>Data:</strong> ${t.date}</p>
      <hr>
      ${t.items.map(n=>`
        <p>${n.quantity}x ${n.name} - \u20AC${n.totalPrice.toFixed(2)}</p>
      `).join("")}
      <hr>
      <p><strong>TOTALE: \u20AC${t.totalAmount.toFixed(2)}</strong></p>
    </div>
  `;alert("Scontrino pronto per la stampa! Controlla la nuova finestra o la cronologia di stampa.")}updateInventoryFromOrder(t){return v(this,null,function*(){try{console.log("\u{1F4E6} Updating inventory from order...");for(let e of t.order_items)console.log(`Updating inventory for dish: ${e.dish_id}, quantity: ${e.quantity}`);console.log("\u2705 Inventory updated successfully")}catch(e){console.error("\u274C Error updating inventory:",e)}})}forceRefreshTableStatus(t){return v(this,null,function*(){try{console.log("\u{1F504} Force refreshing table status for:",t),yield this.loadActiveOrders(),yield this.updateTableStatuses();let e=this.tableStatuses.find(n=>n.table.id===t);console.log("\u2705 Table status after refresh:",e?.status)}catch(e){console.error("\u274C Error refreshing table status:",e)}})}verifyTableFreed(t){return v(this,null,function*(){try{let e=this.tableStatuses.find(n=>n.table.id===t);e&&e.status==="free"?console.log("\u2705 Table successfully freed:",t):(console.warn("\u26A0\uFE0F Table might not be freed properly:",t),yield this.forceRefreshAllData())}catch(e){console.error("\u274C Error verifying table freedom:",e)}})}debugOrderFlow(t){console.log("\u{1F50D} DEBUG Order Flow:"),console.log("  - Selected Table:",this.selectedTable?.table_number),console.log("  - Order ID:",t),console.log("  - Current Status:",this.selectedTableStatus?.status),console.log("  - Has Order:",!!this.selectedTableStatus?.currentOrder)}freeTableManually(){return v(this,null,function*(){if(this.selectedTable)try{if(this.selectedTableStatus?.currentOrder){let{error:t}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",this.selectedTableStatus.currentOrder.id);if(t)throw t}yield this.loadData(),this.deselectTable(),this.showOrderDetailsModal=!1,this.showQuickActionsModal=!1,console.log("\u2705 Tavolo liberato manualmente")}catch(t){console.error("\u274C Errore nel liberare il tavolo:",t),alert("Errore durante la liberazione del tavolo")}})}updateReservation(){return v(this,null,function*(){if(this.editingReservation)try{let{error:t}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").update(H(D({},this.editingReservation),{updated_at:new Date().toISOString()})).eq("id",this.editingReservation.id);if(t)throw t;yield this.loadData(),this.closeEditReservationModal(),this.deselectTable(),console.log("\u2705 Prenotazione aggiornata")}catch(t){console.error("\u274C Errore nell'aggiornamento della prenotazione:",t),alert("Errore durante l'aggiornamento della prenotazione")}})}deleteReservation(){return v(this,null,function*(){if(this.editingReservation&&this.isReservationDeletable(this.editingReservation))try{let{error:t}=yield this.reservationService.supabaseService.getSupabaseClient().from("reservations").delete().eq("id",this.editingReservation.id);if(t)throw t;yield this.loadData(),this.closeEditReservationModal(),this.deselectTable(),console.log("\u2705 Prenotazione eliminata")}catch(t){console.error("\u274C Errore nell'eliminazione della prenotazione:",t),alert("Errore durante l'eliminazione della prenotazione")}else alert("Impossibile eliminare questa prenotazione")})}addDishesToOrder(){return v(this,null,function*(){if(this.newOrderData.items.length===0){alert("Aggiungi almeno un piatto all'ordine");return}try{let t=this.authService.currentUserValue;if(!t)throw new Error("Utente non autenticato");let{data:e}=yield this.orderService.supabaseService.getSupabaseClient().from("restaurants").select("id").eq("owner_id",t.id).limit(1);if(!e||e.length===0)throw new Error("Nessun ristorante trovato");let n=e[0].id;if(this.isAddingToExistingOrder&&this.selectedTableStatus?.currentOrder){let a=this.newOrderData.items.map(M=>({order_id:this.selectedTableStatus.currentOrder.id,dish_id:M.dish_id,quantity:M.quantity,unit_price:M.unit_price})),{error:c}=yield this.orderService.supabaseService.getSupabaseClient().from("order_items").insert(a);if(c)throw c;console.log("\u2705 Piatti aggiunti all'ordine esistente")}else{let a={restaurant_id:n,customer_id:t.id,order_number:`ORD-${Date.now()}`,order_type:"dine_in",status:"received",subtotal:this.orderTotal,tax_amount:0,discount_amount:0,total_amount:this.orderTotal,table_id:this.selectedTable?.id,customer_name:this.newOrderData.customer_name||"Cliente",customer_phone:this.newOrderData.customer_phone||""};console.log("\u{1F4E6} Creazione ordine per tavolo:",this.selectedTable?.id);let{data:c,error:M}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").insert(a).select().single();if(M)throw console.error("\u274C Errore creazione ordine:",M),M;let y=this.newOrderData.items.map(P=>({order_id:c.id,dish_id:P.dish_id,quantity:P.quantity,unit_price:P.unit_price})),{error:C}=yield this.orderService.supabaseService.getSupabaseClient().from("order_items").insert(y);if(C)throw C;console.log("\u2705 Nuovo ordine creato con ID:",c.id)}yield this.forceRefreshAllData(),this.closeCreateOrderModal()}catch(t){console.error("\u274C Errore nella creazione/aggiornamento dell'ordine:",t),alert("Errore durante la creazione dell'ordine: "+t.message)}})}forceRefreshAllData(){return v(this,null,function*(){try{console.log("\u{1F504} Forzando refresh completo dati..."),yield this.loadReservations(),yield this.loadActiveOrders(),yield this.updateTableStatuses(),this.tables=[...this.tables],this.tableStatuses=[...this.tableStatuses],console.log("\u2705 Refresh completato")}catch(t){console.error("\u274C Errore nel refresh:",t)}})}debugTableStructure(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.orderService.supabaseService.getSupabaseClient().from("orders").select("*").limit(1);e?console.error("\u274C Errore nel fetch struttura:",e):console.log("\u{1F50D} Struttura tabella orders:",t)}catch(t){console.error("\u274C Errore debug:",t)}})}getOverallOrderStatus(t){if(!t||!t.order_items||t.order_items.length===0)return t?.status||"received";let e=this.orderService.calculateOverallOrderStatus(t.order_items);return e==="served"&&this.orderService.areAllItemsServed(t)?"ready_for_bill":e}getOrderStatusText(t){return{waiting:"In Attesa",preparing:"In Preparazione",ready:"Pronto",served:"Servito",ready_for_bill:"Pronto per conto",out_of_stock:"Esaurito",received:"Ricevuto"}[t]||t}getOrderStatusColor(t){return{waiting:"warning",preparing:"preparing",ready:"success",served:"secondary",ready_for_bill:"success",out_of_stock:"danger",received:"info"}[t]||"secondary"}getServedItemsCount(t){return!t||!t.order_items?0:t.order_items.filter(e=>e.status==="served").length}refreshSingleOrder(t){return v(this,null,function*(){try{yield this.loadActiveOrders(),yield this.updateTableStatuses(),this.selectedTableStatus?.currentOrder?.id===t&&(this.selectedTableStatus=D({},this.selectedTableStatus))}catch(e){console.error("Error refreshing single order:",e)}})}get readyForBillTablesCount(){return this.tableStatuses.filter(t=>t.status==="occupied"&&t.currentOrder&&this.orderService.areAllItemsServed(t.currentOrder)).length}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=J({type:s,selectors:[["app-table-map"]],decls:121,vars:25,consts:[["reservationForm","ngForm"],[1,"table-map-container","page-container"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"material-icons"],[1,"text-muted"],[1,"grid-cards"],[1,"card"],[1,"card-content"],[1,"card-header"],[1,"card-title"],[1,"card-number"],[1,"filters-section"],[1,"filters-container"],[1,"filter-group"],[1,"form-label"],[1,"form-input",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-input",3,"ngModelChange","ngModel"],["value","all"],["value","free"],["value","reserved"],["value","occupied"],["type","text","placeholder","Numero o nome tavolo...",1,"form-input",3,"ngModelChange","ngModel"],[1,"actions-container"],[1,"promethea-button","primary",3,"click"],[1,"map-section"],[1,"map-legend"],[1,"legend-item"],[1,"legend-color","free"],[1,"legend-color","reserved"],[1,"legend-color","occupied"],[1,"fullscreen-btn",3,"click"],[1,"canvas-container"],[1,"floor-plan-canvas"],[1,"grid-overlay"],["class","table-element",3,"class","ngStyle","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-overlay quick-actions",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"fullscreen-controls"],[1,"promethea-button","secondary",3,"click"],[3,"ngValue"],[1,"table-element",3,"click","ngStyle"],[1,"table-content"],[1,"table-number"],[1,"table-details"],[1,"table-capacity"],[1,"table-status-badge"],["class","table-info",4,"ngIf"],[1,"table-info"],[1,"empty-state"],[1,"modal-overlay","quick-actions",3,"click"],[1,"modal-container","quick-actions",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"quick-actions-content"],[1,"status-info"],[1,"chip"],[1,"action-buttons"],["class","multiple-actions",4,"ngIf"],["class","emergency-actions",4,"ngIf"],[1,"multiple-actions"],[1,"promethea-button","success",3,"click"],[1,"promethea-button",3,"click"],[1,"emergency-actions"],[1,"promethea-button","ghost",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-md",3,"click"],[1,"generic-form",3,"ngSubmit"],[1,"form-group"],["type","text","name","customer_name","required","","placeholder","Inserisci il nome del cliente",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","customer_phone","required","","placeholder","Inserisci il telefono",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["type","date","name","reservation_date","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","time","name","reservation_time","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","party_size","required","",1,"form-input",3,"ngModelChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"form-text"],["name","special_requests","rows","3","placeholder","Note o richieste speciali...",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"right-actions"],["type","button",1,"promethea-button","secondary",3,"click"],["type","submit",1,"promethea-button","primary",3,"click","disabled"],[3,"value","disabled"],["type","button","class","promethea-button danger",3,"click",4,"ngIf"],["type","button",1,"promethea-button","danger",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"order-creation-layout"],[1,"menu-section"],[1,"subsection-title"],[1,"dishes-grid"],["class","dish-card",3,"click",4,"ngFor","ngForOf"],[1,"order-summary-section"],["class","reservation-info",4,"ngIf"],["class","order-items",4,"ngIf"],["class","empty-order",4,"ngIf"],["class","order-total",4,"ngIf"],[1,"order-actions"],[1,"promethea-button","success",3,"click","disabled"],["class","instructions",4,"ngIf"],[1,"dish-card",3,"click"],[1,"item-info"],[1,"dish-price"],["class","dish-description text-muted",4,"ngIf"],[1,"dish-description","text-muted"],[1,"reservation-info"],[1,"info-item"],[1,"contact-info"],[1,"info-label"],[1,"info-value"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"item-price"],[1,"item-controls"],[1,"quantity-btn",3,"click"],[1,"quantity"],[1,"remove-btn",3,"click"],[1,"empty-order"],[1,"text-muted","small"],[1,"order-total"],[1,"instructions"],["class","chip success","style","margin-left: 10px;",4,"ngIf"],[4,"ngIf"],[1,"promethea-button","warning",3,"click"],[1,"chip","success",2,"margin-left","10px"],[1,"order-info"],[1,"info-value","chip"],[1,"order-items-list"],["class","order-item-detail",4,"ngFor","ngForOf"],[1,"order-item-detail"],[1,"item-name"],[1,"item-status","chip","small"],[1,"item-details"],[1,"item-quantity"]],template:function(e,n){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4)(4,"span",5),o(5,"map"),r(),o(6," Mappa Tavoli - Gestione Ristorante "),r(),i(7,"p",6),o(8,"Gestisci prenotazioni e ordini in tempo reale"),r()()(),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"span",5),o(14,"event_available"),r(),i(15,"div",11),o(16,"Tavoli Liberi"),r()(),i(17,"div",12),o(18),r()()(),i(19,"div",8)(20,"div",9)(21,"div",10)(22,"span",5),o(23,"event"),r(),i(24,"div",11),o(25,"Prenotati"),r()(),i(26,"div",12),o(27),r()()(),i(28,"div",8)(29,"div",9)(30,"div",10)(31,"span",5),o(32,"restaurant"),r(),i(33,"div",11),o(34,"Occupati"),r()(),i(35,"div",12),o(36),r()()(),i(37,"div",8)(38,"div",9)(39,"div",10)(40,"span",5),o(41,"table_restaurant"),r(),i(42,"div",11),o(43,"Tavoli Totali"),r()(),i(44,"div",12),o(45),r()()(),i(46,"div",8)(47,"div",9)(48,"div",10)(49,"span",5),o(50,"receipt"),r(),i(51,"div",11),o(52,"Pronti per conto"),r()(),i(53,"div",12),o(54),r()()()(),i(55,"div",13)(56,"div",14)(57,"div",15)(58,"label",16),o(59,"Mappa:"),r(),i(60,"select",17),x("ngModelChange",function(c){return f(n.currentFloorPlan,c)||(n.currentFloorPlan=c),c}),m("change",function(){return n.onFloorPlanSelect(n.currentFloorPlan)}),b(61,Ee,2,2,"option",18),r()(),i(62,"div",15)(63,"label",16),o(64,"Stato:"),r(),i(65,"select",19),x("ngModelChange",function(c){return f(n.statusFilter,c)||(n.statusFilter=c),c}),i(66,"option",20),o(67,"Tutti gli stati"),r(),i(68,"option",21),o(69,"Libero"),r(),i(70,"option",22),o(71,"Prenotato"),r(),i(72,"option",23),o(73,"Occupato"),r()()(),i(74,"div",15)(75,"label",16),o(76,"Cerca:"),r(),i(77,"input",24),x("ngModelChange",function(c){return f(n.searchTerm,c)||(n.searchTerm=c),c}),r()()(),i(78,"div",25)(79,"button",26),m("click",function(){return n.loadData()}),i(80,"span",5),o(81,"refresh"),r(),o(82," Aggiorna "),r()()(),i(83,"div",27)(84,"div",8)(85,"div",10)(86,"h2",11),o(87),r(),i(88,"div",28)(89,"div",29),I(90,"div",30),i(91,"span"),o(92,"Libero"),r()(),i(93,"div",29),I(94,"div",31),i(95,"span"),o(96,"Prenotato"),r()(),i(97,"div",29),I(98,"div",32),i(99,"span"),o(100,"Occupato"),r()()(),i(101,"button",33),m("click",function(){return n.toggleFullscreen()}),i(102,"span",5),o(103),r(),o(104),r()(),i(105,"div",9)(106,"div",34)(107,"div",35),I(108,"div",36),b(109,Re,11,10,"div",37)(110,Ie,7,0,"div",38),r()()()()(),b(111,ze,18,8,"div",39)(112,Ne,50,11,"div",40)(113,Be,50,12,"div",40)(114,Ke,38,9,"div",40)(115,tt,22,6,"div",40),i(116,"div",41)(117,"button",42),m("click",function(){return n.toggleFullscreen()}),i(118,"span",5),o(119,"fullscreen_exit"),r(),o(120," Esci da schermo intero "),r()()()),e&2&&(l(18),w(n.freeTablesCount),l(9),w(n.reservedTablesCount),l(9),w(n.occupiedTablesCount),l(9),w(n.totalTablesCount),l(9),w(n.readyForBillTablesCount),l(6),h("ngModel",n.currentFloorPlan),l(),_("ngForOf",n.floorPlans),l(4),h("ngModel",n.statusFilter),l(12),h("ngModel",n.searchTerm),l(10),w((n.currentFloorPlan==null?null:n.currentFloorPlan.name)||"Mappa"),l(14),L("active",n.isFullscreen),l(2),g(" ",n.isFullscreen?"fullscreen_exit":"fullscreen"," "),l(),g(" ",n.isFullscreen?"Esci":"Schermo intero"," "),l(3),K("width",(n.currentFloorPlan==null?null:n.currentFloorPlan.width)||1e3,"px")("height",(n.currentFloorPlan==null?null:n.currentFloorPlan.height)||800,"px"),l(2),_("ngForOf",n.getFilteredTables()),l(),_("ngIf",n.getFilteredTables().length===0),l(),_("ngIf",n.showQuickActionsModal),l(),_("ngIf",n.showManualReservationModal),l(),_("ngIf",n.showEditReservationModal),l(),_("ngIf",n.showCreateOrderModal),l(),_("ngIf",n.showOrderDetailsModal))},dependencies:[ae,Z,ee,te,fe,_e,ge,be,ce,ve,de,ue,he,me,pe,re,ne,ie],styles:[".table-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg)}.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--gutter-md)}.stat-card.card[_ngcontent-%COMP%]{flex-direction:row;align-items:center;padding:var(--gutter-md);gap:var(--gutter-md);min-height:100px}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon.free[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 15%,transparent)}.stat-icon.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent)}.stat-icon.occupied[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 15%,transparent)}.stat-icon.total[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--text-color) 15%,transparent)}.stat-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--text-color)}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:var(--fs-md);line-height:1}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-sm)}.map-section[_ngcontent-%COMP%]{width:100%;height:70vh;min-height:600px;display:flex;flex-direction:column}.canvas-container[_ngcontent-%COMP%]{border:1px solid var(--smoke-color-1);border-radius:12px;background:var(--background);overflow:auto;max-height:70vh}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:color-mix(in srgb,var(--background) 98%,white);min-width:min-content;min-height:min-content;margin:var(--gutter-md)}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:40px 40px;opacity:.3;pointer-events:none}.table-element[_ngcontent-%COMP%]{position:absolute;border:2px solid;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.2,.9,.2,1);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px var(--shadow);min-width:80px;min-height:80px}.table-element[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 8px 20px var(--shadow2)}.table-element.free[_ngcontent-%COMP%]{border-color:#10b981;background:color-mix(in srgb,#10b981 8%,transparent)}.table-element.reserved[_ngcontent-%COMP%]{border-color:#f59e0b;background:color-mix(in srgb,#f59e0b 8%,transparent)}.table-element.occupied[_ngcontent-%COMP%]{border-color:#ef4444;background:color-mix(in srgb,#ef4444 8%,transparent)}.table-element.selected[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 20%,transparent),0 8px 25px var(--shadow2);z-index:100}.table-content[_ngcontent-%COMP%]{text-align:center;padding:8px 4px;width:100%;display:flex;flex-direction:column;gap:2px}.table-number[_ngcontent-%COMP%]{font-weight:800;font-size:14px;color:var(--text-color);line-height:1;margin-bottom:2px}.table-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:4px;padding:0 4px;margin-bottom:2px}.table-capacity[_ngcontent-%COMP%]{font-size:10px;color:var(--text-muted);font-weight:600;line-height:1}.table-status-badge[_ngcontent-%COMP%]{font-size:9px;font-weight:700;text-transform:uppercase;line-height:1;padding:2px 4px;border-radius:4px}.status-free[_ngcontent-%COMP%]{color:#10b981;background:color-mix(in srgb,#10b981 15%,transparent)}.status-reserved[_ngcontent-%COMP%]{color:#f59e0b;background:color-mix(in srgb,#f59e0b 15%,transparent)}.status-occupied[_ngcontent-%COMP%]{color:#ef4444;background:color-mix(in srgb,#ef4444 15%,transparent)}.status-needs-attention[_ngcontent-%COMP%]{color:#8b5cf6;background:color-mix(in srgb,#8b5cf6 15%,transparent)}.table-info[_ngcontent-%COMP%]{font-size:8px;color:var(--text-muted);line-height:1.1;padding:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-legend[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-md);flex-wrap:wrap;align-items:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px;border-radius:6px;background:var(--smoke-color-1)}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:2px solid;flex-shrink:0}.legend-color.free[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 15%,transparent);border-color:#10b981}.legend-color.reserved[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent);border-color:#f59e0b}.legend-color.occupied[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 15%,transparent);border-color:#ef4444}.legend-color.selected[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary)}.quick-actions-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md)}.quick-actions-content[_ngcontent-%COMP%]   .multiple-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.quick-actions-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md)}.emergency-actions[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding-top:var(--gutter-md);margin-top:var(--gutter-sm)}.order-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}@media (max-width: 768px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.stat-card.card[_ngcontent-%COMP%]{min-height:80px;padding:var(--gutter-sm)}.stat-icon[_ngcontent-%COMP%]{width:44px;height:44px}.map-legend[_ngcontent-%COMP%]{justify-content:center}.table-details[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.table-content[_ngcontent-%COMP%]{padding:6px 3px;gap:1px}.table-number[_ngcontent-%COMP%]{font-size:12px}.table-capacity[_ngcontent-%COMP%], .table-status-badge[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 480px){.stats-grid.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.map-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--gutter-sm)}.table-element[_ngcontent-%COMP%]{min-width:70px;min-height:70px}}.fullscreen-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:6px;margin-right:12px;border-radius:8px;display:flex;align-items:center;transition:.2s}.fullscreen-btn[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1)}[_ngcontent-%COMP%]:fullscreen   .modal[_ngcontent-%COMP%]{position:fixed;z-index:999999}.table-element.small-table[_ngcontent-%COMP%]{min-width:60px;min-height:60px}.table-element.small-table[_ngcontent-%COMP%]   .table-content[_ngcontent-%COMP%]{padding:4px 2px;gap:1px}.table-element.small-table[_ngcontent-%COMP%]   .table-number[_ngcontent-%COMP%]{font-size:11px}.table-element.small-table[_ngcontent-%COMP%]   .table-capacity[_ngcontent-%COMP%], .table-element.small-table[_ngcontent-%COMP%]   .table-status-badge[_ngcontent-%COMP%]{font-size:7px}.table-element.small-table[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{font-size:6px}@media (max-width: 480px){.table-info[_ngcontent-%COMP%]{display:none}}.canvas-container[_ngcontent-%COMP%]:fullscreen{width:100vw;height:100vh;background:var(--background);display:flex;align-items:center;justify-content:center;padding:20px}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{margin:0;border:2px solid var(--smoke-color-1);border-radius:12px;box-shadow:0 8px 32px var(--shadow2);max-width:95%;max-height:95%}[_ngcontent-%COMP%]:fullscreen   .fullscreen-controls[_ngcontent-%COMP%]{z-index:10001!important}.fullscreen-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:var(--background);border:1px solid var(--smoke-color-1);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .3s ease;font-size:var(--fs-sm);font-weight:500}.fullscreen-btn[_ngcontent-%COMP%]:hover{background:var(--smoke-color-1);border-color:var(--primary);color:var(--primary)}.fullscreen-btn.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:var(--primary)}.fullscreen-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.fullscreen-controls[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:10010;display:none}.canvas-container[_ngcontent-%COMP%]:fullscreen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-webkit-full-screen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-moz-full-screen ~ .fullscreen-controls[_ngcontent-%COMP%], .canvas-container[_ngcontent-%COMP%]:-ms-fullscreen ~ .fullscreen-controls[_ngcontent-%COMP%]{display:block}[_ngcontent-%COMP%]:fullscreen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-webkit-full-screen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-moz-full-screen   .modal-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-ms-fullscreen   .modal-overlay[_ngcontent-%COMP%]{z-index:10020!important}.canvas-container[_ngcontent-%COMP%]:fullscreen{background:var(--background)}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{max-width:95%;max-height:95%}.card-title[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.fullscreen-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:.8rem}.fullscreen-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.canvas-container[_ngcontent-%COMP%]:fullscreen   .floor-plan-canvas[_ngcontent-%COMP%]{max-width:98%;max-height:98%}}.canvas-container[_ngcontent-%COMP%]:-webkit-full-screen{width:100vw;height:100vh;background:var(--background)}.canvas-container[_ngcontent-%COMP%]:-moz-full-screen{width:100vw;height:100vh;background:var(--background)}.canvas-container[_ngcontent-%COMP%]:-ms-fullscreen{width:100vw;height:100vh;background:var(--background)}.card-number[_ngcontent-%COMP%]{text-align:center}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--gutter-sm);align-items:center;padding:var(--gutter-sm)}.dish-description[_ngcontent-%COMP%]{padding:0 var(--gutter-sm)}"]})};export{Me as TableMap};
