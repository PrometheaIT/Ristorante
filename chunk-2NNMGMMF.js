import{a as le,b as V}from"./chunk-5YRSER4B.js";import"./chunk-ZQHNSJM3.js";import{Da as ne,Ea as ae}from"./chunk-OFUIVTUT.js";import{a as re}from"./chunk-CUMNL6IM.js";import{d as X,h as q,q as K,r as ee,s as te,x as ie}from"./chunk-22BNR7AL.js";import{d as J}from"./chunk-NPMWXJE4.js";import{d as Q,f as Y}from"./chunk-6GCWWUP3.js";import{j as S,k as E,m as U,q as G,s as k}from"./chunk-N5RTTLWI.js";import{Db as A,Ea as x,Eb as N,Fb as b,Ha as o,Ib as r,Jb as h,Kb as f,Lb as P,Ma as z,Ob as L,Pb as $,Qb as W,Wb as O,Xa as C,Xb as Z,Yb as B,_b as H,ab as m,ca as w,ia as _,ib as c,ja as p,jb as i,kb as n,lb as I,pb as F,qb as j,rb as v,u as D,ub as u,v as R,wb as d}from"./chunk-R56C6QW6.js";import{j as y}from"./chunk-4ZZIO3ZI.js";function _e(t,a){if(t&1){let e=v();i(0,"img",9),u("error",function(s){_(e);let g=d();return p(g.onImageError(s))})("click",function(){_(e);let s=d();return p(s.onImageClick(s.previousIndex))}),n()}if(t&2){let e=d();c("src",e.images[e.previousIndex],x)("alt","Immagine "+(e.previousIndex+1))}}function pe(t,a){if(t&1){let e=v();i(0,"img",9),u("error",function(s){_(e);let g=d();return p(g.onImageError(s))})("click",function(){_(e);let s=d();return p(s.onImageClick(s.currentIndex))}),n()}if(t&2){let e=d();c("src",e.images[e.currentIndex],x)("alt","Immagine "+(e.currentIndex+1))}}function ue(t,a){if(t&1){let e=v();i(0,"button",10),u("click",function(){_(e);let s=d();return p(s.prev())}),i(1,"span",11),r(2,"chevron_left"),n()()}}function ge(t,a){if(t&1){let e=v();i(0,"button",12),u("click",function(){_(e);let s=d();return p(s.next())}),i(1,"span",11),r(2,"chevron_right"),n()()}}function ve(t,a){if(t&1){let e=v();i(0,"span",15),u("click",function(){let s=_(e).index,g=d(2);return p(g.goTo(s))}),n()}if(t&2){let e=a.index,l=d(2);b("active",e===l.currentIndex)}}function xe(t,a){if(t&1&&(i(0,"div",13),m(1,ve,1,2,"span",14),n()),t&2){let e=d();o(),c("ngForOf",e.images)}}function fe(t,a){t&1&&(i(0,"div",16)(1,"span",11),r(2,"photo_library"),n(),i(3,"p"),r(4,"Nessuna immagine disponibile"),n()())}var M=class t{images=[];autoPlay=!0;interval=3e3;transitionDuration=600;imageClicked=new z;currentIndex=0;previousIndex=0;isTransitioning=!1;direction="next";timer;ngOnInit(){this.autoPlay&&this.images.length>0&&this.startAutoPlay()}ngOnDestroy(){this.stopAutoPlay()}startAutoPlay(){this.timer&&clearInterval(this.timer),this.images.length>0&&this.autoPlay&&(this.timer=setInterval(()=>{this.next()},this.interval))}stopAutoPlay(){this.timer&&(clearInterval(this.timer),this.timer=null)}next(){this.images.length===0||this.isTransitioning||(this.direction="next",this.previousIndex=this.currentIndex,this.currentIndex=(this.currentIndex+1)%this.images.length,this.startTransition())}prev(){this.images.length===0||this.isTransitioning||(this.direction="prev",this.previousIndex=this.currentIndex,this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.startTransition())}goTo(a){this.images.length===0||this.isTransitioning||a===this.currentIndex||(this.direction=a>this.currentIndex?"next":"prev",this.previousIndex=this.currentIndex,this.currentIndex=a,this.startTransition())}startTransition(){this.isTransitioning=!0,setTimeout(()=>{this.isTransitioning=!1},this.transitionDuration)}onImageError(a){let e=a.target;console.error("Errore caricamento immagine:",e.src),e.style.display="none";let l=this.images.indexOf(e.src);if(l>-1&&this.images.splice(l,1),this.images.length===0){this.stopAutoPlay();return}this.currentIndex>=this.images.length&&(this.currentIndex=0)}onImageClick(a){console.log("Cliccata immagine n\xB0",a),this.imageClicked.emit(a)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-image-slideshow"]],inputs:{images:"images",autoPlay:"autoPlay",interval:"interval",transitionDuration:"transitionDuration"},outputs:{imageClicked:"imageClicked"},decls:10,vars:18,consts:[[1,"slideshow-container",3,"mouseenter","mouseleave"],[1,"slides-wrapper"],[1,"slide","previous"],["class","slide-image",3,"src","alt","error","click",4,"ngIf"],[1,"slide","current"],["class","nav-button prev",3,"click",4,"ngIf"],["class","nav-button next",3,"click",4,"ngIf"],["class","indicators",4,"ngIf"],["class","slideshow-placeholder",4,"ngIf"],[1,"slide-image",3,"error","click","src","alt"],[1,"nav-button","prev",3,"click"],[1,"material-icons"],[1,"nav-button","next",3,"click"],[1,"indicators"],["class","indicator",3,"active","click",4,"ngFor","ngForOf"],[1,"indicator",3,"click"],[1,"slideshow-placeholder"]],template:function(e,l){e&1&&(i(0,"div",0),u("mouseenter",function(){return l.stopAutoPlay()})("mouseleave",function(){return l.startAutoPlay()}),i(1,"div",1)(2,"div",2),m(3,_e,1,2,"img",3),n(),i(4,"div",4),m(5,pe,1,2,"img",3),n()(),m(6,ue,3,0,"button",5)(7,ge,3,0,"button",6)(8,xe,2,1,"div",7),n(),m(9,fe,5,0,"div",8)),e&2&&(o(2),b("exiting",l.isTransitioning)("slide-out-next",l.direction==="next"&&l.isTransitioning)("slide-out-prev",l.direction==="prev"&&l.isTransitioning),o(),c("ngIf",l.images[l.previousIndex]),o(),b("entering",l.isTransitioning)("slide-in-next",l.direction==="next"&&l.isTransitioning)("slide-in-prev",l.direction==="prev"&&l.isTransitioning),o(),c("ngIf",l.images[l.currentIndex]),o(),c("ngIf",l.images.length>1),o(),c("ngIf",l.images.length>1),o(),c("ngIf",l.images.length>1),o(),c("ngIf",l.images.length===0))},dependencies:[k,S,E],styles:[".slideshow-container[_ngcontent-%COMP%]{position:relative;width:100%;height:clamp(250px,50vh,400px);border-radius:clamp(12px,2vw,20px);overflow:hidden;background:var(--smoke-1);box-shadow:0 4px 20px #00000014;margin:0 auto;cursor:pointer}.slides-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.slide[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;transition:transform .6s cubic-bezier(.4,0,.2,1),opacity .6s cubic-bezier(.4,0,.2,1)}.slide.current[_ngcontent-%COMP%]{z-index:2;opacity:1;transform:translate(0)}.slide.previous[_ngcontent-%COMP%]{z-index:1;opacity:0;transform:translate(0)}.slide.previous.slide-out-next[_ngcontent-%COMP%]{opacity:0;transform:translate(-100%)}.slide.previous.slide-out-prev[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.slide.current.slide-in-next[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromRight .6s cubic-bezier(.4,0,.2,1) forwards}.slide.current.slide-in-prev[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .6s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.slide-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;object-position:center;border-radius:clamp(8px,1.5vw,12px)}.fade-transition[_ngcontent-%COMP%]   .slide.previous[_ngcontent-%COMP%]{opacity:0}.fade-transition[_ngcontent-%COMP%]   .slide.current[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.nav-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#0009;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);color:#fff;width:clamp(40px,6vw,48px);height:clamp(40px,6vw,48px);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:10;font-size:clamp(18px,3vw,24px);box-shadow:0 4px 12px #0003}.nav-button[_ngcontent-%COMP%]:hover, .nav-button[_ngcontent-%COMP%]:active{background:var(--primary);transform:translateY(-50%) scale(1.1);box-shadow:0 6px 20px rgba(var(--primary-rgb, 0, 0, 0),.3)}.nav-button.prev[_ngcontent-%COMP%]{left:clamp(8px,2vw,16px)}.nav-button.next[_ngcontent-%COMP%]{right:clamp(8px,2vw,16px)}.indicators[_ngcontent-%COMP%]{position:absolute;bottom:clamp(12px,3vh,20px);left:50%;transform:translate(-50%);display:flex;gap:clamp(6px,1.5vw,10px);z-index:10;padding:clamp(6px,1.5vw,10px);background:#0006;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:100px}.indicator[_ngcontent-%COMP%]{width:clamp(8px,2vw,12px);height:clamp(8px,2vw,12px);border-radius:50%;background:#fff9;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid rgba(255,255,255,.2)}.indicator.active[_ngcontent-%COMP%]{background:var(--primary);transform:scale(1.3);box-shadow:0 0 8px rgba(var(--primary-rgb, 0, 0, 0),.4)}.slideshow-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;color:var(--smoke-3);background:linear-gradient(135deg,var(--smoke-1) 0%,var(--smoke-2) 100%);padding:clamp(20px,5vw,40px);text-align:center}.slideshow-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:clamp(48px,10vw,64px);margin-bottom:clamp(12px,3vw,20px);opacity:.6}@media (hover: none) and (pointer: coarse){.slideshow-container[_ngcontent-%COMP%]{height:clamp(200px,40vh,350px)}.nav-button[_ngcontent-%COMP%]{background:#000000b3;width:clamp(44px,8vw,52px);height:clamp(44px,8vw,52px)}.indicators[_ngcontent-%COMP%]{padding:clamp(8px,2vw,12px)}}"]})};function he(t,a){if(t&1){let e=v();i(0,"button",10),u("click",function(){_(e);let s=d();return p(s.authService.toggleSidebar())}),I(1,"lucide-icon",11),n()}}function be(t,a){if(t&1){let e=v();i(0,"img",12),u("error",function(s){_(e);let g=d();return p(g.onLogoError(s))}),n()}if(t&2){let e=d();c("src",e.restaurant==null?null:e.restaurant.logo_url,x)("alt",e.restaurant==null?null:e.restaurant.name)}}function we(t,a){t&1&&(i(0,"span",13),r(1,"restaurant"),n())}function Ie(t,a){t&1&&(i(0,"div",17)(1,"span",18),r(2,"restaurant"),n(),i(3,"h2",19),r(4,"Ristorante non trovato"),n(),i(5,"p",20),r(6,"Il ristorante che stai cercando non esiste o non \xE8 disponibile."),n(),i(7,"button",21)(8,"span",13),r(9,"arrow_back"),n(),r(10," Torna alla ricerca "),n()())}function ye(t,a){if(t&1){let e=v();i(0,"app-image-slideshow",41),u("imageClicked",function(s){_(e);let g=d(3);return p(g.openLightbox(s))}),n()}if(t&2){let e=d(3);c("images",e.restaurantImages)}}function Ce(t,a){if(t&1){let e=v();i(0,"div",42),u("click",function(){_(e);let s=d(3);return p(s.closeLightbox())}),i(1,"div",43),u("click",function(s){return _(e),p(s.stopPropagation())}),i(2,"button",44),u("click",function(s){_(e);let g=d(3);return p(g.prevImage(s))}),r(3," \u2190 "),n(),I(4,"img",45),i(5,"button",46),u("click",function(s){_(e);let g=d(3);return p(g.nextImage(s))}),r(6," \u2192 "),n(),i(7,"button",47),u("click",function(){_(e);let s=d(3);return p(s.closeLightbox())}),r(8,"\xD7"),n(),i(9,"div",48),r(10),n()()()}if(t&2){let e=d(3);o(4),c("src",e.restaurantImages[e.lightboxIndex],x),o(6),P(" ",e.lightboxIndex+1," / ",e.restaurantImages.length," ")}}function Se(t,a){t&1&&(i(0,"div",49)(1,"div",50)(2,"span",18),r(3,"photo_library"),n(),i(4,"p",20),r(5,"Nessuna immagine disponibile per questo ristorante"),n()()())}function Ee(t,a){if(t&1&&(i(0,"div",33)(1,"h3",34),r(2,"Descrizione"),n(),i(3,"p"),r(4),n()()),t&2){let e=d(3);o(4),h(e.restaurant.description)}}function ke(t,a){if(t&1&&(i(0,"div",51)(1,"span",13),r(2,"place"),n(),i(3,"span"),r(4),n()()),t&2){let e=d(3);o(4),h(e.restaurant.address)}}function Me(t,a){if(t&1&&(i(0,"div",51)(1,"span",13),r(2,"phone"),n(),i(3,"a",52),r(4),n()()),t&2){let e=d(3);o(3),c("href","tel:"+e.restaurant.phone,x),o(),h(e.restaurant.phone)}}function Te(t,a){if(t&1&&(i(0,"div",51),I(1,"lucide-angular",53),i(2,"a",52),r(3),n()()),t&2){let e=d(3);o(),c("size",20),o(),c("href","mailto:"+e.restaurant.email,x),o(),h(e.restaurant.email)}}function De(t,a){t&1&&(i(0,"div",51)(1,"span",54),r(2,"delivery_dining"),n(),i(3,"div")(4,"strong"),r(5,"Consegna a domicilio"),n(),i(6,"p",20),r(7,"Ordina online con consegna a casa"),n()()())}function Pe(t,a){t&1&&(i(0,"div",51)(1,"span",54),r(2,"takeout_dining"),n(),i(3,"div")(4,"strong"),r(5,"Asporto"),n(),i(6,"p",20),r(7,"Ritira il tuo ordine in ristorante"),n()()())}function Oe(t,a){t&1&&(i(0,"div",51)(1,"span",54),r(2,"event_available"),n(),i(3,"div")(4,"strong"),r(5,"Prenotazione tavolo"),n(),i(6,"p",20),r(7,"Prenota il tuo tavolo online"),n()()())}function Ve(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=d().$implicit,l=d(6);o(),f(" ",l.getDayName(e)," ")}}function Re(t,a){if(t&1&&(F(0),m(1,Ve,2,1,"span",62),j()),t&2){let e=a.$implicit,l=d(6);o(),c("ngIf",l.getDayName(e))}}function ze(t,a){if(t&1&&(i(0,"div",60),m(1,Re,2,1,"ng-container",61),n()),t&2){let e=d().$implicit;o(),c("ngForOf",e.days_of_week)}}function Fe(t,a){if(t&1&&(i(0,"div",56)(1,"div",57)(2,"h3",34),r(3),n(),i(4,"span",58),r(5),n()(),m(6,ze,2,1,"div",59),n()),t&2){let e=a.$implicit,l=d(4);o(3),h(e.name),o(2),P(" ",l.formatTime(e.start_time)," - ",l.formatTime(e.end_time)," "),o(),c("ngIf",e.days_of_week&&e.days_of_week.length>0)}}function je(t,a){if(t&1&&(i(0,"div",27)(1,"div",28)(2,"span",13),r(3,"schedule"),n(),i(4,"h2",30),r(5,"Orari di apertura"),n()(),i(6,"div",31),m(7,Fe,7,4,"div",55),n()()),t&2){let e=d(3);o(7),c("ngForOf",e.shifts)}}function Ae(t,a){t&1&&(i(0,"span"),r(1," (Default)"),n())}function Ne(t,a){if(t&1&&(i(0,"option",80),r(1),m(2,Ae,2,0,"span",72),n()),t&2){let e=a.$implicit;c("value",e.id),o(),f(" ",e.name),o(),c("ngIf",e.is_default)}}function Le(t,a){if(t&1){let e=v();i(0,"div")(1,"div",76)(2,"span",77),r(3,"restaurant_menu"),n(),i(4,"span",78),r(5,"Visualizza per menu:"),n()(),i(6,"div",71)(7,"select",79),W("ngModelChange",function(s){_(e);let g=d(4);return $(g.selectedMenuId,s)||(g.selectedMenuId=s),p(s)}),u("ngModelChange",function(s){_(e);let g=d(4);return p(g.selectMenu(s))}),i(8,"option",80),r(9,"-- Tutti i piatti --"),n(),m(10,Ne,3,3,"option",81),n()()()}if(t&2){let e=d(4);o(7),L("ngModel",e.selectedMenuId),o(),c("value",null),o(2),c("ngForOf",e.menus)}}function $e(t,a){t&1&&(i(0,"span"),r(1,"Oppure filtra"),n())}function We(t,a){t&1&&(i(0,"span"),r(1,"Filtra"),n())}function Ze(t,a){if(t&1){let e=v();i(0,"button",83),u("click",function(){let s=_(e).$implicit,g=d(5);return p(g.selectCategory(s.id))}),i(1,"span",13),r(2,"category"),n(),r(3),n()}if(t&2){let e=a.$implicit,l=d(5);b("active",l.selectedCategory===e.id),o(3),f(" ",e.name," ")}}function Be(t,a){if(t&1){let e=v();i(0,"div")(1,"div",76)(2,"span",77),r(3,"filter_list"),n(),i(4,"span",78),m(5,$e,2,0,"span",72)(6,We,2,0,"span",72),r(7," per categoria: "),n()(),i(8,"div",82)(9,"button",83),u("click",function(){_(e);let s=d(4);return p(s.selectCategory(null))}),i(10,"span",13),r(11,"all_inclusive"),n(),r(12," Tutti i piatti "),n(),m(13,Ze,4,3,"button",84),n()()}if(t&2){let e=d(4);o(5),c("ngIf",e.menus.length>0),o(),c("ngIf",e.menus.length===0),o(3),b("active",e.selectedCategory===null),o(4),c("ngForOf",e.categories)}}function He(t,a){if(t&1&&(i(0,"div",58)(1,"span",13),r(2,"schedule"),n(),r(3),n()),t&2){let e=d().$implicit;o(3),f(" ",e.preparation_time," min ")}}function Ue(t,a){if(t&1&&(i(0,"p",101),r(1),n()),t&2){let e=d().$implicit;o(),f(" ",e.description," ")}}function Ge(t,a){if(t&1){let e=v();i(0,"div",89)(1,"div",90)(2,"img",91),u("error",function(s){let g=_(e).$implicit,T=d(5);return p(T.onDishImageError(s,g))}),n(),i(3,"div",92)(4,"div",93),r(5),O(6,"currency"),n(),m(7,He,4,1,"div",94),n()(),i(8,"div",95)(9,"div")(10,"h3",96),r(11),n(),m(12,Ue,2,1,"p",97),n(),i(13,"div",98)(14,"button",99),u("click",function(){let s=_(e).$implicit,g=d(5);return p(g.addToCart(s))}),i(15,"span",13),r(16,"add_shopping_cart"),n(),r(17," Aggiungi "),n(),i(18,"button",100),I(19,"lucide-angular",29),n()()()()}if(t&2){let e=a.$implicit;o(2),c("src",e.image_url,x)("alt",e.name),o(3),f(" ",B(6,6,e.base_price,"EUR")," "),o(2),c("ngIf",e.preparation_time),o(4),h(e.name),o(),c("ngIf",e.description)}}function Qe(t,a){if(t&1&&(i(0,"div",102)(1,"p",103),r(2),n()()),t&2){let e=d(5);o(2),f("+",e.filteredDishes.length-6," altri piatti disponibili")}}function Ye(t,a){if(t&1&&(i(0,"div",85)(1,"div",86),m(2,Ge,20,9,"div",87),n(),m(3,Qe,3,1,"div",88),n()),t&2){let e=d(4);o(2),c("ngForOf",e.filteredDishes.slice(0,6)),o(),c("ngIf",e.filteredDishes.length>6)}}function Je(t,a){if(t&1){let e=v();i(0,"div",104)(1,"div",105)(2,"span",106),r(3,"search_off"),n(),i(4,"div",107),r(5,"Nessun piatto trovato"),n()(),i(6,"button",108),u("click",function(){_(e);let s=d(4);return p(s.selectMenu(null))}),i(7,"span",13),r(8,"refresh"),n(),r(9," Mostra tutti i piatti "),n()()}}function Xe(t,a){if(t&1){let e=v();i(0,"div",109)(1,"button",70),u("click",function(){_(e);let s=d(4);return p(s.viewFullMenu())}),i(2,"span",13),r(3,"restaurant_menu"),n(),r(4," Esplora il menu completo "),i(5,"span",13),r(6,"arrow_forward"),n()()()}}function qe(t,a){if(t&1){let e=v();i(0,"div",27)(1,"div",64)(2,"div",65)(3,"div",4)(4,"span",66),r(5,"restaurant_menu"),n()(),i(6,"div")(7,"h2",67),r(8,"Il Nostro Menu"),n(),i(9,"p",68),r(10,"Scopri le nostre specialit\xE0"),n()()(),i(11,"div",51)(12,"span",69),r(13),n(),i(14,"button",70),u("click",function(){_(e);let s=d(3);return p(s.viewFullMenu())}),i(15,"span",13),r(16,"menu_book"),n(),r(17," Menu Completo "),n()()(),i(18,"div",71),m(19,Le,11,3,"div",72)(20,Be,14,5,"div",72),n(),m(21,Ye,4,2,"div",73)(22,Je,10,0,"div",74)(23,Xe,7,0,"div",75),n()}if(t&2){let e=d(3);o(13),f("",e.filteredDishes.length," piatti"),o(6),c("ngIf",e.menus.length>0),o(),c("ngIf",!e.isMenuView&&e.categories.length>0),o(),c("ngIf",e.filteredDishes.length>0),o(),c("ngIf",e.filteredDishes.length===0),o(),c("ngIf",e.filteredDishes.length>0)}}function Ke(t,a){if(t&1){let e=v();i(0,"button",70),u("click",function(){_(e);let s=d(3);return p(s.viewFullMenu())}),i(1,"span",13),r(2,"restaurant_menu"),n(),r(3," Vedi Menu Completo "),n()}}function et(t,a){if(t&1){let e=v();i(0,"button",110),u("click",function(){_(e);let s=d(3);return p(s.viewInteractiveMenu())}),i(1,"span",13),r(2,"shopping_cart"),n(),r(3," Ordina Ora "),n()}}function tt(t,a){if(t&1){let e=v();i(0,"div",22),m(1,ye,1,1,"app-image-slideshow",23)(2,Ce,11,3,"div",24)(3,Se,6,0,"div",25),i(4,"div",26)(5,"div",27)(6,"div",28),I(7,"lucide-angular",29),i(8,"h2",30),r(9,"Informazioni"),n()(),i(10,"div",31),m(11,Ee,5,1,"div",32),i(12,"div",33)(13,"h3",34),r(14,"Contatti"),n(),i(15,"div",33),m(16,ke,5,1,"div",35)(17,Me,5,2,"div",35)(18,Te,4,3,"div",35),n()()()(),i(19,"div",27)(20,"div",28)(21,"span",13),r(22,"room_service"),n(),i(23,"h2",30),r(24,"Servizi"),n()(),i(25,"div",31),m(26,De,8,0,"div",35)(27,Pe,8,0,"div",35)(28,Oe,8,0,"div",35),n()()(),m(29,je,8,1,"div",36)(30,qe,24,6,"div",36),i(31,"div",37)(32,"button",38),u("click",function(){_(e);let s=d(2);return p(s.viewRestaurantMap())}),i(33,"span",13),r(34,"map"),n(),r(35," Visualizza Mappa "),n(),m(36,Ke,4,0,"button",39)(37,et,4,0,"button",40),n()()}if(t&2){let e=d(2);o(),c("ngIf",e.restaurantImages.length>0),o(),c("ngIf",e.lightboxVisible),o(),c("ngIf",e.restaurant&&e.restaurantImages.length===0),o(8),c("ngIf",e.restaurant.description),o(5),c("ngIf",e.restaurant.address),o(),c("ngIf",e.restaurant.phone),o(),c("ngIf",e.restaurant.email),o(8),c("ngIf",e.restaurant.accepts_delivery),o(),c("ngIf",e.restaurant.accepts_takeaway),o(),c("ngIf",e.restaurant.allow_table_selection),o(),c("ngIf",e.shifts.length>0),o(),c("ngIf",e.dishes.length>0||e.menus.length>0),o(6),c("ngIf",e.restaurant),o(),c("ngIf",e.restaurant.accepts_delivery||e.restaurant.accepts_takeaway)}}function it(t,a){if(t&1&&(i(0,"div",14),m(1,Ie,11,0,"div",15)(2,tt,38,14,"div",16),n()),t&2){let e=d();o(),c("ngIf",!e.restaurant),o(),c("ngIf",e.restaurant)}}function nt(t,a){t&1&&(i(0,"div",14)(1,"div",17)(2,"span",111),r(3,"sync"),n(),i(4,"p"),r(5,"Caricamento informazioni ristorante..."),n()()())}var oe=class t{restaurantPublicService=w(re);router=w(Y);route=w(Q);breakpointObserver=w(le);authService=w(J);lightboxVisible=!1;lightboxIndex=0;restaurant=null;shifts=[];dishes=[];filteredDishes=[];selectedCategory=null;loading=!0;categories=[];restaurantImages=[];menus=[];selectedMenuId=null;isMenuView=!1;weekDays=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"];isMobile$=this.breakpointObserver.observe([V.Handset,V.TabletPortrait]).pipe(D(a=>a.matches));showToggle$=R([this.isMobile$,this.authService.sidebarCollapsed$]).pipe(D(([a,e])=>a&&e));ngOnInit(){return y(this,null,function*(){let a=this.route.snapshot.paramMap.get("id");a?yield this.loadRestaurantData(a):this.router.navigate(["/customer/search"])})}extractCategories(a){this.categories=a||[]}selectMenu(a){return y(this,null,function*(){this.selectedMenuId=a,this.isMenuView=a!==null,this.selectedCategory=null,a?this.filteredDishes=yield this.restaurantPublicService.loadMenuDishes(a):this.filteredDishes=[...this.dishes]})}selectCategory(a){this.selectedCategory=a,this.selectedMenuId=null,this.isMenuView=!1,a?this.filteredDishes=this.dishes.filter(e=>e.category_id===a):this.filteredDishes=[...this.dishes]}formatTime(a){return a?a.substring(0,5):""}getDayName(a){return this.weekDays[a]||""}truncateText(a,e){return a?a.length<=e?a:a.substring(0,e)+"...":""}viewRestaurantMap(){this.restaurant&&this.router.navigate(["/customer/restaurant",this.restaurant.id,"map"])}viewInteractiveMenu(){this.restaurant&&this.router.navigate(["/customer/menu",this.restaurant.id])}onLogoError(a){let e=a.target;e.style.display="none"}onDishImageError(a,e){let l=a.target;l.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VhZWFlYSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBpbWFnZTwvdGV4dD48L3N2Zz4=",l.onerror=null}loadRestaurantData(a){return y(this,null,function*(){try{this.loading=!0;let[e,l,s,g,T,se]=yield Promise.all([this.restaurantPublicService.loadRestaurantById(a),this.restaurantPublicService.loadRestaurantShifts(a),this.restaurantPublicService.loadRestaurantDishes(a,{onlyActive:!0}),this.restaurantPublicService.loadRestaurantCategories(a),this.restaurantPublicService.loadRestaurantPhotos(a),this.restaurantPublicService.loadRestaurantMenus(a)]);this.restaurant=e,this.shifts=l,this.dishes=s,this.filteredDishes=[...s],this.restaurantImages=T,this.menus=se,this.extractCategories(g),console.log("\u2705 Dati caricati:",{ristorante:this.restaurant?.name,piatti:this.dishes.length,turni:this.shifts.length,foto:this.restaurantImages.length,menu:this.menus.length})}catch(e){console.error("Error loading restaurant data:",e)}finally{this.loading=!1}})}viewFullMenu(){this.restaurant&&this.router.navigate(["/customer/menu",this.restaurant.id])}addToCart(a){console.log("Aggiunto al carrello:",a)}openLightbox(a){this.lightboxIndex=a,this.lightboxVisible=!0,document.body.style.overflow="hidden"}closeLightbox(){this.lightboxVisible=!1,document.body.style.overflow=""}prevImage(a){a.stopPropagation(),this.lightboxIndex=(this.lightboxIndex-1+this.restaurantImages.length)%this.restaurantImages.length}nextImage(a){a.stopPropagation(),this.lightboxIndex=(this.lightboxIndex+1)%this.restaurantImages.length}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-restaurant-detail"]],decls:13,vars:10,consts:[["loadingTemplate",""],[1,"section-header"],[1,"flex","items-center","gap-md","w-100"],["class","icon-button mobile-toggle",3,"click",4,"ngIf"],[1,"header-icon"],["class","logo-image rounded-full",3,"src","alt","error",4,"ngIf"],["class","material-icons",4,"ngIf"],[1,"section-titles"],[1,"section-title"],["class","page-container",4,"ngIf","ngIfElse"],[1,"icon-button","mobile-toggle",3,"click"],["name","menu"],[1,"logo-image","rounded-full",3,"error","src","alt"],[1,"material-icons"],[1,"page-container"],["class","flex flex-col items-center justify-center p-xl gap-md",4,"ngIf"],["class","flex flex-col gap-md mt-lg",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","p-xl","gap-md"],[1,"material-icons","fs-lg"],[1,"text-lg","font-bold"],[1,"text-muted"],["routerLink","/customer/search",1,"promethea-button"],[1,"flex","flex-col","gap-md","mt-lg"],["class","mb-lg",3,"images","imageClicked",4,"ngIf"],["class","lightbox-overlay",3,"click",4,"ngIf"],["class","image-placeholder card mb-lg",4,"ngIf"],[1,"grid-form"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],["name","info"],[1,"text-md","font-semibold","m-0"],[1,"flex","flex-col","gap-md"],["class","flex flex-col gap-sm",4,"ngIf"],[1,"flex","flex-col","gap-sm"],[1,"font-semibold"],["class","flex items-center gap-sm",4,"ngIf"],["class","card",4,"ngIf"],[1,"flex","flex-wrap","gap-md","justify-center"],[1,"promethea-button",3,"click"],["class","promethea-button primary",3,"click",4,"ngIf"],["class","promethea-button ghost",3,"click",4,"ngIf"],[1,"mb-lg",3,"imageClicked","images"],[1,"lightbox-overlay",3,"click"],[1,"lightbox-content","modal-lg",3,"click"],[1,"nav-arrow","prev",3,"click"],["alt","Foto ingrandita",1,"lightbox-image",3,"src"],[1,"nav-arrow","next",3,"click"],[1,"close-btn",3,"click"],[1,"counter"],[1,"image-placeholder","card","mb-lg"],[1,"flex","flex-col","items-center","justify-center","p-xl","gap-sm"],[1,"flex","items-center","gap-sm"],[1,"link",3,"href"],["name","mail",1,"nav-icon",3,"size"],[1,"material-icons","text-primary"],["class","shift-section",4,"ngFor","ngForOf"],[1,"shift-section"],[1,"flex","justify-between","items-center","mb-sm"],[1,"chip"],["class","flex flex-wrap gap-sm",4,"ngIf"],[1,"flex","flex-wrap","gap-sm"],[4,"ngFor","ngForOf"],["class","chip active",4,"ngIf"],[1,"chip","active"],[1,"flex","items-center","justify-between","mb-md"],[1,"flex","items-center","gap-md"],[1,"material-icons","text-lg"],[1,"section-title","m-0"],[1,"text-muted","mt-sm"],[1,"chip","bg-gradient"],[1,"promethea-button","primary",3,"click"],[1,"mb-md"],[4,"ngIf"],["class","dishes-preview",4,"ngIf"],["class","text-center gap-sm",4,"ngIf"],["class","flex flex-col md:flex-row gap-md justify-between items-center mt-lg pt-md border-t border-smoke-1",4,"ngIf"],[1,"flex","items-center","gap-sm","mb-sm"],[1,"material-icons","text-muted"],[1,"text-mini","font-semibold","text-muted"],[1,"promethea-input","w-full",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","gap-sm","pb-2"],[1,"chip","text-normal",3,"click"],["class","chip text-normal",3,"active","click",4,"ngFor","ngForOf"],[1,"dishes-preview"],[1,"grid-cards"],["class","card hover-lift flex flex-col",4,"ngFor","ngForOf"],["class","text-center mt-lg pt-md border-t border-smoke-1",4,"ngIf"],[1,"card","hover-lift","flex","flex-col"],[1,"dish-image-container"],[1,"dish-image",3,"error","src","alt"],[1,"dish-badges","flex","justify-between","p-sm"],[1,"dish-price","chip","bg-gradient","text-white"],["class","chip",4,"ngIf"],[1,"p-md","flex","flex-col","gap-md","flex-1"],[1,"card-title"],["class","text-muted line-clamp-2",4,"ngIf"],[1,"flex","gap-sm","card-footer"],[1,"promethea-button","primary","flex-1",3,"click"],["title","Pi\xF9 informazioni",1,"icon-button"],[1,"text-muted","line-clamp-2"],[1,"text-center","mt-lg","pt-md","border-t","border-smoke-1"],[1,"text-muted","mb-md"],[1,"text-center","gap-sm"],[1,"flex","gap-sm"],[1,"material-icons","text-md","mb-md"],[1,"font-semibold","text-md"],[1,"promethea-button","ghost","mt-md",3,"click"],[1,"flex","flex-col","md:flex-row","gap-md","justify-between","items-center","mt-lg","pt-md","border-t","border-smoke-1"],[1,"promethea-button","ghost",3,"click"],[1,"material-icons","animate-spin"]],template:function(e,l){if(e&1&&(i(0,"div",1)(1,"div",2),m(2,he,2,0,"button",3),O(3,"async"),i(4,"div",4),m(5,be,1,2,"img",5)(6,we,2,0,"span",6),n(),i(7,"div",7)(8,"h1",8),r(9),n()()()(),m(10,it,3,2,"div",9)(11,nt,6,0,"ng-template",null,0,H)),e&2){let s=A(12);N("background",l.restaurant!=null&&l.restaurant.cover_image_url?"url("+(l.restaurant==null?null:l.restaurant.cover_image_url)+")":"var(--vetro)"),o(2),c("ngIf",Z(3,8,l.showToggle$)),o(3),c("ngIf",l.restaurant==null?null:l.restaurant.logo_url),o(),c("ngIf",!(l.restaurant!=null&&l.restaurant.logo_url)),o(3),h(l.restaurant==null?null:l.restaurant.name),o(),c("ngIf",!l.loading)("ngIfElse",s)}},dependencies:[k,S,E,ie,ee,te,K,X,q,M,ae,ne,U,G],styles:[".logo-image[_ngcontent-%COMP%]{max-width:var(--fs-xl);max-height:var(--fs-xl);width:auto;height:auto;object-fit:contain;padding:var(--gap-sm);background:var(--smoke-1)}.dish-image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:var(--gap-md);margin-bottom:var(--gap-sm)}.dish-image[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;display:block;transition:transform .3s cubic-bezier(.2,.9,.2,1)}.card[_ngcontent-%COMP%]:hover   .dish-image[_ngcontent-%COMP%]{transform:scale(1.05)}.dish-badges[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.dish-badges[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{color:var(--text-color);border:none;background:var(--gradiente)}.text-normal[_ngcontent-%COMP%]{color:var(--text-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.flex-1[_ngcontent-%COMP%]{flex:1}.hover-lift[_ngcontent-%COMP%]{padding:0}@media (max-width: 768px){.dish-image[_ngcontent-%COMP%]{height:150px}}.lightbox-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:color-mix(in srgb,var(--text-color) 90%,transparent);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:9999999!important;display:flex;align-items:center;justify-content:center}.lightbox-content[_ngcontent-%COMP%]{height:100%}.lightbox-image[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:contain}.nav-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:var(--gradiente);border:none;font-size:var(--fs-md);padding:var(--gap-sm) var(--gap-md);cursor:pointer;border-radius:50%;z-index:10}.prev[_ngcontent-%COMP%]{left:10%}.next[_ngcontent-%COMP%]{right:10%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:20px;right:30px;background:none;border:none;color:var(--background);font-size:var(--fs-lg);cursor:pointer;z-index:10}.counter[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:#fff;background:#0009;padding:8px 16px;border-radius:20px;font-size:1.1rem}"]})};export{oe as RestaurantDetail};
