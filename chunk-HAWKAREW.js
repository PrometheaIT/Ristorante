import{a as N,b as z}from"./chunk-IG67TT3L.js";import{a as ne,b as ie,d as oe,e as re,g as ae,h as le,i as se,j as de,o as ce,p as me,q as pe,r as ue,s as ge,v as _e}from"./chunk-CV27PIWO.js";import{a as te}from"./chunk-CXV4BLDF.js";import{d as K,e as Z,k as $,w as ee}from"./chunk-L5SOXNIK.js";import{$a as B,Cb as u,Db as m,Hb as Y,Ib as G,Jb as X,Ka as s,Lb as E,Mb as M,Nb as U,Ob as I,Pb as a,Qb as w,Rb as C,Sb as F,Tb as Q,Ua as H,Ub as _,Vb as h,Wb as b,Yb as J,a as V,b as L,da as y,eb as P,f as x,g as j,ia as d,ja as c,kb as q,pb as g,qb as n,rb as r,sb as D,yb as f}from"./chunk-KZSY5CHT.js";var Ce=["floorPlanCanvas"];function ye(p,o){if(p&1&&(n(0,"option",49),a(1),r()),p&2){let e=o.$implicit;g("ngValue",e),s(),w(e.name)}}function Fe(p,o){if(p&1){let e=f();n(0,"div",50)(1,"button",51),u("click",function(t){d(e);let l=m();return c(l.startEditFloorPlan(l.currentFloorPlan,t))}),n(2,"span",27),a(3,"edit"),r()(),n(4,"button",52),u("click",function(t){d(e);let l=m();return c(l.onDeleteFloorPlan(l.currentFloorPlan,t))}),n(5,"span",27),a(6,"delete"),r()()()}if(p&2){let e=m();s(),g("disabled",!e.currentFloorPlan),s(3),g("disabled",!e.currentFloorPlan)}}function Ee(p,o){if(p&1){let e=f();n(0,"div",53)(1,"input",54),b("ngModelChange",function(t){d(e);let l=m();return h(l.editedFloorPlanName,t)||(l.editedFloorPlanName=t),c(t)}),u("keyup.enter",function(){d(e);let t=m();return c(t.saveFloorPlanName())})("keyup.escape",function(){d(e);let t=m();return c(t.cancelEditFloorPlan())}),r(),n(2,"button",55),u("click",function(){d(e);let t=m();return c(t.saveFloorPlanName())}),n(3,"span",27),a(4,"check"),r()(),n(5,"button",56),u("click",function(){d(e);let t=m();return c(t.cancelEditFloorPlan())}),n(6,"span",27),a(7,"close"),r()()()}if(p&2){let e=m();s(),_("ngModel",e.editedFloorPlanName)}}function Se(p,o){if(p&1){let e=f();n(0,"div",57)(1,"div",58)(2,"label",13),a(3,"Tavolo Selezionato"),r(),n(4,"span",7),a(5),r()(),n(6,"div",59)(7,"button",26),u("click",function(){d(e);let t=m();return c(t.openEditTableModal(t.selectedTable))}),n(8,"span",27),a(9,"edit"),r(),a(10," Modifica "),r(),n(11,"button",29),u("click",function(){d(e);let t=m();return c(t.deselectAll())}),n(12,"span",27),a(13,"close"),r(),a(14," Deseleziona "),r()()()}if(p&2){let e=m();s(5),F(" Tavolo ",e.selectedTable.table_number," - ",e.selectedTable.capacity," persone ")}}function Te(p,o){p&1&&D(0,"div",60)}function Oe(p,o){if(p&1&&(n(0,"div",61)(1,"div",62)(2,"div",63),a(3),r(),n(4,"div",64),a(5),r()()()),p&2){let e=o.$implicit,i=m();U(i.getTableStyle(e)),I(i.getTableClass(e)),q("data-table-id",e.id),s(3),w(e.table_number),s(2),C("",e.capacity," p")}}function ke(p,o){p&1&&(n(0,"div",65)(1,"div",66)(2,"span",27),a(3,"touch_app"),r(),n(4,"h4"),a(5,"Clicca per aggiungere un tavolo"),r(),n(6,"p"),a(7,"Clicca su qualsiasi punto della mappa per aprire il menu di creazione tavolo"),r()()())}function Ve(p,o){if(p&1){let e=f();n(0,"div",67)(1,"span",27),a(2,"table_restaurant"),r(),n(3,"h3"),a(4,"Nessun tavolo configurato"),r(),n(5,"p"),a(6,'Usa la modalit\xE0 "Aggiungi Tavoli" per iniziare a creare la tua mappa'),r(),n(7,"button",68),u("click",function(){d(e);let t=m();return c(t.toggleDrawingMode())}),n(8,"span",27),a(9,"add"),r(),a(10," Inizia ad Aggiungere Tavoli "),r()()}}function De(p,o){if(p&1){let e=f();n(0,"div",69),u("click",function(){d(e);let t=m();return c(t.deselectAll())}),n(1,"div",70),u("click",function(t){return d(e),c(t.stopPropagation())}),n(2,"div",71)(3,"div",72)(4,"div",73)(5,"span",27),a(6,"edit"),r(),n(7,"h3",74),a(8),r()(),n(9,"button",75),u("click",function(){d(e);let t=m();return c(t.deselectAll())}),n(10,"span",27),a(11,"close"),r()()(),n(12,"div",9)(13,"form",76)(14,"div",12)(15,"label",77),a(16,"Nome Tavolo"),r(),n(17,"input",78),b("ngModelChange",function(t){d(e);let l=m();return h(l.selectedTable.table_name,t)||(l.selectedTable.table_name=t),c(t)}),r()(),n(18,"div",24)(19,"div",12)(20,"label",79),a(21,"Numero"),r(),n(22,"input",80),b("ngModelChange",function(t){d(e);let l=m();return h(l.selectedTable.table_number,t)||(l.selectedTable.table_number=t),c(t)}),r()(),n(23,"div",12)(24,"label",81),a(25,"Capacit\xE0"),r(),n(26,"input",82),b("ngModelChange",function(t){d(e);let l=m();return h(l.selectedTable.capacity,t)||(l.selectedTable.capacity=t),c(t)}),r()()(),n(27,"div",83)(28,"button",84),u("click",function(){d(e);let t=m();return c(t.deselectAll())}),a(29," Annulla "),r(),n(30,"button",85),u("click",function(){d(e);let t=m();return c(t.onUpdateTable())}),n(31,"span",27),a(32,"save"),r(),a(33," Aggiorna "),r()()(),n(34,"div",86)(35,"button",87),u("click",function(){d(e);let t=m();return c(t.onDeleteTable())}),n(36,"span",27),a(37,"delete"),r(),a(38," Elimina Tavolo "),r()()()()()()}if(p&2){let e=m();s(8),C("Modifica Tavolo ",e.selectedTable.table_number),s(9),_("ngModel",e.selectedTable.table_name),s(5),_("ngModel",e.selectedTable.table_number),s(4),_("ngModel",e.selectedTable.capacity)}}function Ie(p,o){if(p&1){let e=f();n(0,"div",103),u("click",function(){let t=d(e).$implicit,l=m(2);return c(l.onShapeSelect(t))}),n(1,"div",104)(2,"span",27),a(3),r()(),n(4,"span",105),a(5),r()()}if(p&2){let e=o.$implicit,i=m(2);M("selected",i.tableForm.shape===e.type),s(),I("shape-"+e.type),s(2),w(e.icon),s(2),w(e.name)}}function Ne(p,o){if(p&1){let e=f();n(0,"div",12)(1,"label",106),a(2,"Angoli Arrotondati"),r(),n(3,"select",107),b("ngModelChange",function(t){d(e);let l=m(2);return h(l.tableForm.borderRadius,t)||(l.tableForm.borderRadius=t),c(t)}),n(4,"option",108),a(5,"Nessuno"),r(),n(6,"option",109),a(7,"Leggero"),r(),n(8,"option",110),a(9,"Medio"),r(),n(10,"option",111),a(11,"Alto"),r(),n(12,"option",112),a(13,"Massimo"),r()()()}if(p&2){let e=m(2);s(3),_("ngModel",e.tableForm.borderRadius)}}function ze(p,o){if(p&1){let e=f();n(0,"div",69),u("click",function(){d(e);let t=m();return c(t.onCancelCreateTable())}),n(1,"div",70),u("click",function(t){return d(e),c(t.stopPropagation())}),n(2,"div",71)(3,"div",72)(4,"div",73)(5,"span",27),a(6,"add_circle"),r(),n(7,"h3",74),a(8,"Crea Nuovo Tavolo"),r()(),n(9,"button",75),u("click",function(){d(e);let t=m();return c(t.onCancelCreateTable())}),n(10,"span",27),a(11,"close"),r()()(),n(12,"div",9)(13,"form",76)(14,"div",12)(15,"label",13),a(16,"Forma del Tavolo"),r(),n(17,"div",88),P(18,Ie,6,6,"div",89),r()(),n(19,"div",24)(20,"div",12)(21,"label",90),a(22,"Larghezza (quadrati)"),r(),n(23,"input",91),b("ngModelChange",function(t){d(e);let l=m();return h(l.tableForm.gridWidth,t)||(l.tableForm.gridWidth=t),c(t)}),r(),n(24,"small",7),a(25),r()(),n(26,"div",12)(27,"label",92),a(28,"Altezza (quadrati)"),r(),n(29,"input",93),b("ngModelChange",function(t){d(e);let l=m();return h(l.tableForm.gridHeight,t)||(l.tableForm.gridHeight=t),c(t)}),r(),n(30,"small",7),a(31),r()()(),n(32,"div",94)(33,"h4"),a(34,"Dimensioni Reali"),r(),n(35,"p"),a(36),r()(),P(37,Ne,14,1,"div",95),n(38,"div",24)(39,"div",12)(40,"label",79),a(41,"Numero Tavolo"),r(),n(42,"input",96),b("ngModelChange",function(t){d(e);let l=m();return h(l.tableForm.tableNumber,t)||(l.tableForm.tableNumber=t),c(t)}),r()(),n(43,"div",12)(44,"label",77),a(45,"Nome Tavolo (opzionale)"),r(),n(46,"input",97),b("ngModelChange",function(t){d(e);let l=m();return h(l.tableForm.tableName,t)||(l.tableForm.tableName=t),c(t)}),r()()(),n(47,"div",12)(48,"label",98),a(49,"Capacit\xE0 (persone)"),r(),n(50,"input",99),b("ngModelChange",function(t){d(e);let l=m();return h(l.tableForm.capacity,t)||(l.tableForm.capacity=t),c(t)}),r()(),n(51,"div",100)(52,"h4"),a(53,"Anteprima"),r(),n(54,"div",101)(55,"div",102)(56,"span",63),a(57),r(),n(58,"span",64),a(59),r()()()(),n(60,"div",83)(61,"button",84),u("click",function(){d(e);let t=m();return c(t.onCancelCreateTable())}),a(62," Annulla "),r(),n(63,"button",85),u("click",function(){d(e);let t=m();return c(t.onCreateTable())}),n(64,"span",27),a(65,"add"),r(),a(66," Crea Tavolo "),r()()()()()()()}if(p&2){let e=m();s(18),g("ngForOf",e.tableShapes),s(5),_("ngModel",e.tableForm.gridWidth),g("disabled",e.tableForm.shape==="circle"),s(2),C("1 quadrato = ",e.gridSize,"px"),s(4),_("ngModel",e.tableForm.gridHeight),g("disabled",e.tableForm.shape==="circle"||e.tableForm.shape==="square"),s(2),C("1 quadrato = ",e.gridSize,"px"),s(5),F("",e.tableForm.gridWidth*e.gridSize," \xD7 ",e.tableForm.gridHeight*e.gridSize," px"),s(),g("ngIf",e.tableForm.shape==="rectangle"||e.tableForm.shape==="square"),s(5),_("ngModel",e.tableForm.tableNumber),s(4),_("ngModel",e.tableForm.tableName),s(4),_("ngModel",e.tableForm.capacity),s(4),E("width",e.tableForm.gridWidth*20,"px")("height",e.tableForm.gridHeight*20,"px")("border-radius",e.tableForm.borderRadius,"px"),M("shape-circle",e.tableForm.shape==="circle"),s(3),w(e.tableForm.tableNumber||"1"),s(2),C("",e.tableForm.capacity," p")}}function We(p,o){if(p&1){let e=f();n(0,"div",69),u("click",function(){d(e);let t=m();return c(t.onCancelDimensionsModal())}),n(1,"div",70),u("click",function(t){return d(e),c(t.stopPropagation())}),n(2,"div",71)(3,"div",72)(4,"div",73)(5,"span",27),a(6,"aspect_ratio"),r(),n(7,"h3",74),a(8,"Dimensioni Sala"),r()(),n(9,"button",75),u("click",function(){d(e);let t=m();return c(t.onCancelDimensionsModal())}),n(10,"span",27),a(11,"close"),r()()(),n(12,"div",9)(13,"form",76)(14,"div",24)(15,"div",12)(16,"label",113),a(17,"Larghezza (px)"),r(),n(18,"input",114),b("ngModelChange",function(t){d(e);let l=m();return h(l.dimensionsForm.width,t)||(l.dimensionsForm.width=t),c(t)}),r(),n(19,"small",7),a(20,"Min: 500px, Max: 5000px"),r()(),n(21,"div",12)(22,"label",115),a(23,"Altezza (px)"),r(),n(24,"input",116),b("ngModelChange",function(t){d(e);let l=m();return h(l.dimensionsForm.height,t)||(l.dimensionsForm.height=t),c(t)}),r(),n(25,"small",7),a(26,"Min: 500px, Max: 5000px"),r()()(),n(27,"div",12)(28,"label",13),a(29,"Dimensioni Predefinite"),r(),n(30,"div",117)(31,"button",118),u("click",function(){d(e);let t=m();return c(t.setDimensions(1e3,800))}),a(32," Piccola (1000\xD7800) "),r(),n(33,"button",118),u("click",function(){d(e);let t=m();return c(t.setDimensions(1500,1200))}),a(34," Media (1500\xD71200) "),r(),n(35,"button",118),u("click",function(){d(e);let t=m();return c(t.setDimensions(2e3,1600))}),a(36," Grande (2000\xD71600) "),r()()(),n(37,"div",100)(38,"h4"),a(39,"Anteprima Dimensioni"),r(),n(40,"div",119)(41,"div",120)(42,"div",121),a(43),r()()()(),n(44,"div",83)(45,"button",84),u("click",function(){d(e);let t=m();return c(t.onCancelDimensionsModal())}),a(46," Annulla "),r(),n(47,"button",85),u("click",function(){d(e);let t=m();return c(t.onSaveDimensions())}),n(48,"span",27),a(49,"save"),r(),a(50," Salva Dimensioni "),r()()()()()()()}if(p&2){let e=m();s(18),_("ngModel",e.dimensionsForm.width),s(6),_("ngModel",e.dimensionsForm.height),s(17),E("width",e.dimensionsForm.width*.1,"px")("height",e.dimensionsForm.height*.1,"px"),s(2),F(" ",e.dimensionsForm.width," \xD7 ",e.dimensionsForm.height," px ")}}var he=class p{floorPlanService=y(N);tableService=y(z);authService=y(te);supabaseService=y(ee);renderer=y(H);showEditTableModal=!1;canvasRef;floorPlans=[];currentFloorPlan=null;tables=[];tableShapes=[];selectedTable=null;isDrawing=!1;showTableModal=!1;gridSize=20;snapToGrid=!0;currentRestaurantId=null;modalPosition={x:0,y:0};showDimensionsModal=!1;dimensionsForm={width:1e3,height:800};tableForm={shape:"rectangle",gridWidth:6,gridHeight:4,capacity:4,borderRadius:0,tableName:"",tableNumber:""};editingFloorPlan=null;editedFloorPlanName="";subscriptions=new j;mouseMoveListener;mouseUpListener;ngOnInit(){return x(this,null,function*(){console.log("\u{1F3C1} FloorPlanEditor ngOnInit"),this.tableShapes=this.floorPlanService.getTableShapes(),yield this.loadInitialData(),this.subscriptions.add(this.floorPlanService.floorPlans$.subscribe(o=>{this.floorPlans=o,o.length>0&&!this.currentFloorPlan?(this.currentFloorPlan=o[0],this.loadTablesForFloorPlan()):o.length===0&&this.createDefaultFloorPlan()})),this.subscriptions.add(this.tableService.tables$.subscribe(()=>{this.loadTablesForFloorPlan()}))})}loadInitialData(){return x(this,null,function*(){try{let o=this.authService.currentUserValue;if(o){let{data:e,error:i}=yield this.supabaseService.getSupabaseClient().from("restaurants").select("id").eq("owner_id",o.id).limit(1);if(i){console.error("\u274C Error loading restaurants:",i);return}e&&e.length>0&&(this.currentRestaurantId=e[0].id)}yield this.floorPlanService.loadFloorPlans(),yield this.tableService.loadTables()}catch(o){console.error("\u{1F4A5} Error in loadInitialData:",o)}})}ngAfterViewInit(){this.setupCanvasInteractions()}ngOnDestroy(){this.mouseMoveListener&&this.mouseMoveListener(),this.mouseUpListener&&this.mouseUpListener(),this.subscriptions.unsubscribe()}setupCanvasInteractions(){let o=this.canvasRef.nativeElement;this.renderer.listen(o,"click",e=>this.onCanvasClick(e)),this.renderer.listen(o,"mousedown",e=>this.onCanvasMouseDown(e))}onCanvasClick(o){if(!this.isDrawing||!this.currentFloorPlan||!this.currentRestaurantId)return;let e=this.canvasRef.nativeElement.getBoundingClientRect(),i=o.clientX-e.left,t=o.clientY-e.top,l=this.snapToGrid?Math.round(i/this.gridSize)*this.gridSize:i,v=this.snapToGrid?Math.round(t/this.gridSize)*this.gridSize:t;this.modalPosition={x:l,y:v},this.showTableModal=!0,this.resetTableForm(),o.stopPropagation()}onCanvasMouseDown(o){if(this.isDrawing)return;let i=o.target.closest(".table-element");if(i){let t=i.getAttribute("data-table-id"),l=this.tables.find(v=>v.id===t);l&&(this.selectTable(l),this.startDrag(l,o))}else this.deselectAll();o.preventDefault(),o.stopPropagation()}startDrag(o,e){let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=this.getTableElement(o);if(!t)return;let l=e.clientX,v=e.clientY,be=o.position_x,ve=o.position_y,W=R=>{if(!this.currentFloorPlan)return;let xe=R.clientX-l,fe=R.clientY-v,S=be+xe,T=ve+fe;this.snapToGrid&&(S=Math.round(S/this.gridSize)*this.gridSize,T=Math.round(T/this.gridSize)*this.gridSize);let Pe=this.currentFloorPlan.width-o.width,we=this.currentFloorPlan.height-o.height,O=Math.max(0,Math.min(S,Pe)),k=Math.max(0,Math.min(T,we)),Me=L(V({},o),{position_x:O,position_y:k});this.tableService.checkTableOverlap(Me,o.id)||(o.position_x=O,o.position_y=k,t.style.left=O+"px",t.style.top=k+"px")},A=()=>x(this,null,function*(){document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",A),this.selectedTable&&(yield this.saveTablePosition(this.selectedTable))});document.addEventListener("mousemove",W),document.addEventListener("mouseup",A)}saveTablePosition(o){return x(this,null,function*(){try{let e={position_x:o.position_x,position_y:o.position_y};yield this.tableService.updateTable(o.id,e)}catch(e){console.error("\u274C Error saving table position:",e)}})}getTableElement(o){return this.canvasRef.nativeElement.querySelector(`[data-table-id="${o.id}"]`)}loadTablesForFloorPlan(){if(!this.currentFloorPlan){this.tables=[];return}this.tables=this.tableService.getTablesByFloorPlan(this.currentFloorPlan.id)}onFloorPlanSelect(o){this.currentFloorPlan=o,this.loadTablesForFloorPlan(),this.deselectAll(),this.cancelEditFloorPlan()}resetTableForm(){this.tableForm={shape:"rectangle",gridWidth:6,gridHeight:4,capacity:4,borderRadius:0,tableName:"",tableNumber:this.generateNextTableNumber().toString()}}onShapeSelect(o){this.tableForm.shape=o.type,this.tableForm.gridWidth=Math.round(o.default_width/this.gridSize),this.tableForm.gridHeight=Math.round(o.default_height/this.gridSize),(o.type==="circle"||o.type==="square")&&(this.tableForm.gridHeight=this.tableForm.gridWidth)}onCreateTable(){return x(this,null,function*(){if(!this.currentFloorPlan||!this.currentRestaurantId){console.error("\u274C Missing required data");return}try{let o=this.tableForm.gridWidth*this.gridSize,e=this.tableForm.gridHeight*this.gridSize,i={restaurant_id:this.currentRestaurantId,floor_plan_id:this.currentFloorPlan.id,table_name:this.tableForm.tableName||`Tavolo ${this.tableForm.tableNumber}`,table_number:this.tableForm.tableNumber,capacity:this.tableForm.capacity,shape:this.tableForm.shape,position_x:this.modalPosition.x,position_y:this.modalPosition.y,width:o,height:e,rotation:0,is_active:!0};if(this.tableService.checkTableOverlap(i)){alert("Il tavolo si sovrappone a un altro tavolo. Scegli una posizione diversa.");return}console.log("\u{1F4DD} Creating table:",i),(yield this.tableService.createTable(i))?(console.log("\u2705 Table created successfully"),this.showTableModal=!1,this.isDrawing=!1):console.error("\u274C Table creation failed")}catch(o){console.error("\u{1F4A5} Error creating table:",o)}})}onCancelCreateTable(){this.showTableModal=!1,this.isDrawing=!1}selectTable(o){this.deselectAll(),this.selectedTable=o}openEditTableModal(o){this.selectedTable=o,this.showEditTableModal=!0}deselectAll(){this.selectedTable=null,this.showEditTableModal=!1}onUpdateTable(){return x(this,null,function*(){if(this.selectedTable)try{let o=V({},this.selectedTable);(yield this.tableService.updateTable(this.selectedTable.id,o))&&this.deselectAll()}catch(o){console.error("\u274C Error updating table:",o)}})}onDeleteTable(){return x(this,null,function*(){if(this.selectedTable&&confirm("Sei sicuro di voler eliminare questo tavolo?"))try{(yield this.tableService.deleteTable(this.selectedTable.id))&&this.deselectAll()}catch(o){console.error("\u274C Error deleting table:",o)}})}createNewFloorPlan(){return x(this,null,function*(){if(this.currentRestaurantId)try{let o=window.innerWidth<768,e=o?800:1e3,i=o?600:800,t={restaurant_id:this.currentRestaurantId,name:`Mappa ${this.floorPlans.length+1}`,width:e,height:i,is_active:!0},l=yield this.floorPlanService.createFloorPlan(t);l&&(this.currentFloorPlan=l,setTimeout(()=>this.openDimensionsModal(),100))}catch(o){console.error("\u{1F4A5} Error creating floor plan:",o)}})}onDeleteFloorPlan(o,e){return x(this,null,function*(){if(e.stopPropagation(),!!confirm(`Sei sicuro di voler eliminare la mappa "${o.name}"?`))try{(yield this.floorPlanService.deleteFloorPlan(o.id))&&this.currentFloorPlan?.id===o.id&&(this.currentFloorPlan=this.floorPlans.find(t=>t.id!==o.id)||null,this.loadTablesForFloorPlan())}catch(i){console.error("\u{1F4A5} Error deleting floor plan:",i)}})}startEditFloorPlan(o,e){e.stopPropagation(),o&&(this.editingFloorPlan=o,this.editedFloorPlanName=o.name)}saveFloorPlanName(){return x(this,null,function*(){if(!(!this.editingFloorPlan||!this.editedFloorPlanName.trim()))try{(yield this.floorPlanService.updateFloorPlan(this.editingFloorPlan.id,{name:this.editedFloorPlanName}))&&(this.currentFloorPlan?.id===this.editingFloorPlan.id&&(this.currentFloorPlan.name=this.editedFloorPlanName),yield this.floorPlanService.loadFloorPlans(),this.editingFloorPlan=null,this.editedFloorPlanName="")}catch(o){console.error("\u274C Error saving floor plan name:",o)}})}cancelEditFloorPlan(){this.editingFloorPlan=null}toggleDrawingMode(){this.isDrawing=!this.isDrawing,this.isDrawing||this.deselectAll()}generateNextTableNumber(){let o=this.tables.map(e=>parseInt(e.table_number)).filter(e=>!isNaN(e));return o.length>0?Math.max(...o)+1:1}getTableStyle(o){let e=o.shape==="rectangle"||o.shape==="square"?"8px":"50%";return{left:o.position_x+"px",top:o.position_y+"px",width:o.width+"px",height:o.height+"px","border-radius":e,transform:`rotate(${o.rotation}deg)`}}getTableClass(o){let e=["table-element",`shape-${o.shape}`];return this.selectedTable?.id===o.id&&e.push("selected"),e.join(" ")}testCreateTable(){if(!this.currentFloorPlan||!this.currentRestaurantId)return;let o={restaurant_id:this.currentRestaurantId,floor_plan_id:this.currentFloorPlan.id,table_name:"Tavolo Test",table_number:"999",capacity:4,shape:"rectangle",position_x:100,position_y:100,width:120,height:80,rotation:0,is_active:!0};this.tableService.createTable(o)}createDefaultFloorPlan(){return x(this,null,function*(){if(this.currentRestaurantId)try{let o={restaurant_id:this.currentRestaurantId,name:"Mappa Principale",width:1e3,height:800,is_active:!0},e=yield this.floorPlanService.createFloorPlan(o);e&&(this.currentFloorPlan=e)}catch(o){console.error("\u{1F4A5} Error creating default floor plan:",o)}})}openDimensionsModal(){this.currentFloorPlan&&(this.dimensionsForm={width:this.currentFloorPlan.width,height:this.currentFloorPlan.height},this.showDimensionsModal=!0)}onCancelDimensionsModal(){this.showDimensionsModal=!1}onSaveDimensions(){return x(this,null,function*(){if(this.currentFloorPlan)try{let o=this.tables.filter(i=>i.position_x+i.width>this.dimensionsForm.width||i.position_y+i.height>this.dimensionsForm.height);if(o.length>0){if(!confirm(`${o.length} tavolo(i) escono dai nuovi bordi della mappa. Vuoi continuare? I tavoli verranno spostati automaticamente.`))return;for(let t of o)t.position_x=Math.min(t.position_x,this.dimensionsForm.width-t.width),t.position_y=Math.min(t.position_y,this.dimensionsForm.height-t.height),yield this.saveTablePosition(t)}(yield this.floorPlanService.updateFloorPlan(this.currentFloorPlan.id,{width:this.dimensionsForm.width,height:this.dimensionsForm.height}))&&(this.currentFloorPlan.width=this.dimensionsForm.width,this.currentFloorPlan.height=this.dimensionsForm.height,this.showDimensionsModal=!1)}catch(o){console.error("\u274C Error updating floor plan dimensions:",o)}})}setDimensions(o,e){this.dimensionsForm.width=o,this.dimensionsForm.height=e}get isMobileView(){return window.innerWidth<768}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=B({type:p,selectors:[["app-floor-plan"]],viewQuery:function(e,i){if(e&1&&Y(Ce,5),e&2){let t;G(t=X())&&(i.canvasRef=t.first)}},features:[J([N,z])],decls:86,vars:36,consts:[["canvasContainer",""],["floorPlanCanvas",""],[1,"floor-plan-editor"],[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"card","tools-bar"],[1,"card-content"],[1,"tools-main-row"],[1,"map-section"],[1,"form-group"],[1,"form-label"],[1,"form-input","compact",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["class","map-actions",4,"ngIf"],["class","floor-plan-edit",4,"ngIf"],[1,"form-group","small"],[1,"checkbox-container","inline"],[1,"checkbox-label","small"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"center-section"],[1,"form-row"],[1,"action-buttons","compact"],[1,"promethea-button","primary","x-small",3,"click"],[1,"material-icons"],[1,"promethea-button","secondary","x-small",3,"click","disabled"],[1,"promethea-button","secondary","x-small",3,"click"],[1,"mode-buttons"],[1,"promethea-button","ghost","x-small",3,"click"],["class","selected-table-section",4,"ngIf"],[1,"status-section"],[1,"status-info"],[1,"mode-indicator"],[1,"mode-text"],[1,"canvas-stats"],[1,"editor-main-area"],[1,"canvas-section"],[1,"canvas-controls"],[1,"canvas-info"],[1,"canvas-container"],[1,"floor-plan-canvas"],["class","grid-overlay",4,"ngIf"],["class","table-element",3,"class","style",4,"ngFor","ngForOf"],["class","canvas-instructions",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","edit-table-modal-overlay",3,"click",4,"ngIf"],[3,"ngValue"],[1,"map-actions"],["title","Modifica nome mappa",1,"icon-button","small",3,"click","disabled"],["title","Elimina mappa",1,"icon-button","small",3,"click","disabled"],[1,"floor-plan-edit"],["type","text","placeholder","Nome mappa",1,"form-input","x-small",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],["title","Salva",1,"icon-button","x-small","save-btn",3,"click"],["title","Annulla",1,"icon-button","x-small","cancel-btn",3,"click"],[1,"selected-table-section"],[1,"selected-table-header"],[1,"selected-table-actions"],[1,"grid-overlay"],[1,"table-element"],[1,"table-content"],[1,"table-number"],[1,"table-capacity"],[1,"canvas-instructions"],[1,"instruction-card"],[1,"empty-state"],[1,"promethea-button","primary",3,"click"],[1,"edit-table-modal-overlay",3,"click"],[1,"edit-table-modal",3,"click"],[1,"card"],[1,"card-header"],[1,"modal-title"],[1,"card-title"],["title","Chiudi",1,"icon-button",3,"click"],[1,"generic-form"],["for","tableName",1,"form-label"],["id","tableName","type","text","name","tableName","placeholder","Nome tavolo",1,"form-input",3,"ngModelChange","ngModel"],["for","tableNumber",1,"form-label"],["id","tableNumber","type","text","name","tableNumber","placeholder","Numero",1,"form-input",3,"ngModelChange","ngModel"],["for","tableCapacity",1,"form-label"],["id","tableCapacity","type","number","name","tableCapacity","min","1","max","20",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"promethea-button","secondary",3,"click"],["type","button",1,"promethea-button","primary",3,"click"],[1,"danger-zone"],[1,"promethea-button","danger","full-width",3,"click"],[1,"shape-selection"],["class","shape-option",3,"selected","click",4,"ngFor","ngForOf"],["for","gridWidth",1,"form-label"],["id","gridWidth","type","number","name","gridWidth","min","2","max","20",1,"form-input",3,"ngModelChange","ngModel","disabled"],["for","gridHeight",1,"form-label"],["id","gridHeight","type","number","name","gridHeight","min","2","max","20",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"size-preview"],["class","form-group",4,"ngIf"],["id","tableNumber","type","text","name","tableNumber","placeholder","Es: 1",1,"form-input",3,"ngModelChange","ngModel"],["id","tableName","type","text","name","tableName","placeholder","Es: Tavolo VIP",1,"form-input",3,"ngModelChange","ngModel"],["for","capacity",1,"form-label"],["id","capacity","type","number","name","capacity","min","1","max","20",1,"form-input",3,"ngModelChange","ngModel"],[1,"preview-section"],[1,"table-preview"],[1,"preview-content"],[1,"shape-option",3,"click"],[1,"shape-preview"],[1,"shape-name"],["for","borderRadius",1,"form-label"],["id","borderRadius","name","borderRadius",1,"form-input",3,"ngModelChange","ngModel"],["value","0"],["value","5"],["value","10"],["value","15"],["value","20"],["for","floorPlanWidth",1,"form-label"],["id","floorPlanWidth","type","number","name","floorPlanWidth","min","500","max","5000","step","50",1,"form-input",3,"ngModelChange","ngModel"],["for","floorPlanHeight",1,"form-label"],["id","floorPlanHeight","type","number","name","floorPlanHeight","min","500","max","5000","step","50",1,"form-input",3,"ngModelChange","ngModel"],[1,"preset-buttons"],["type","button",1,"promethea-button","ghost","x-small",3,"click"],[1,"dimension-preview"],[1,"preview-canvas"],[1,"preview-label"]],template:function(e,i){if(e&1){let t=f();n(0,"div",2)(1,"div",3)(2,"span",4),a(3,"map"),r(),n(4,"div",5)(5,"h1",6),a(6,"Editor Mappa Ristorante"),r(),n(7,"p",7),a(8,"Crea e modifica la disposizione dei tavoli nel tuo ristorante"),r()()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),a(15,"Mappa"),r(),n(16,"select",14),b("ngModelChange",function(v){return d(t),h(i.currentFloorPlan,v)||(i.currentFloorPlan=v),c(v)}),u("change",function(){return d(t),c(i.onFloorPlanSelect(i.currentFloorPlan))}),P(17,ye,2,2,"option",15),r()(),P(18,Fe,7,2,"div",16)(19,Ee,8,1,"div",17),r(),n(20,"div",18)(21,"label",13),a(22,"Opzioni"),r(),n(23,"div",19)(24,"label",20)(25,"input",21),b("ngModelChange",function(v){return d(t),h(i.snapToGrid,v)||(i.snapToGrid=v),c(v)}),r(),D(26,"span",22),a(27),r()()()(),n(28,"div",23)(29,"div",24)(30,"div",12)(31,"label",13),a(32,"Azioni"),r(),n(33,"div",25)(34,"button",26),u("click",function(){return d(t),c(i.createNewFloorPlan())}),n(35,"span",27),a(36,"add"),r(),a(37," Nuova Mappa "),r(),n(38,"button",28),u("click",function(){return d(t),c(i.openDimensionsModal())}),n(39,"span",27),a(40,"aspect_ratio"),r(),a(41," Dimensioni "),r(),n(42,"button",29),u("click",function(){return d(t),c(i.deselectAll())}),n(43,"span",27),a(44,"clear_all"),r(),a(45," Desel. "),r()()(),n(46,"div",12)(47,"label",13),a(48,"Modalit\xE0"),r(),n(49,"div",30)(50,"button",31),u("click",function(){return d(t),c(i.isDrawing=!1)}),n(51,"span",27),a(52,"open_with"),r(),a(53," Sposta "),r(),n(54,"button",31),u("click",function(){return d(t),c(i.toggleDrawingMode())}),n(55,"span",27),a(56,"add_circle"),r(),a(57," Aggiungi Tavoli "),r()()()()(),P(58,Se,15,2,"div",32),n(59,"div",33)(60,"div",34)(61,"div",35)(62,"span",27),a(63),r(),n(64,"span",36),a(65),r()(),n(66,"div",37)(67,"span",7),a(68),r()()()()()(),n(69,"div",38)(70,"div",39)(71,"div",40)(72,"div",41)(73,"span",7),a(74),r()()(),n(75,"div",42,0)(77,"div",43,1),P(79,Te,1,0,"div",44)(80,Oe,6,7,"div",45)(81,ke,8,0,"div",46)(82,Ve,11,0,"div",47),r()()(),P(83,De,39,4,"div",48),r(),P(84,ze,67,23,"div",48)(85,We,51,8,"div",48),r()}e&2&&(s(16),_("ngModel",i.currentFloorPlan),s(),g("ngForOf",i.floorPlans),s(),g("ngIf",!i.editingFloorPlan),s(),g("ngIf",i.editingFloorPlan&&(i.currentFloorPlan==null?null:i.currentFloorPlan.id)===i.editingFloorPlan.id),s(6),_("ngModel",i.snapToGrid),s(2),C(" Snap (",i.gridSize,"px) "),s(11),g("disabled",!i.currentFloorPlan),s(12),M("active",!i.isDrawing),s(4),M("active",i.isDrawing),s(4),g("ngIf",i.selectedTable&&!i.isDrawing),s(3),M("drawing-mode",i.isDrawing),s(2),w(i.isDrawing?"add_circle":"open_with"),s(2),w(i.isDrawing?"Modalit\xE0 Inserimento":"Modalit\xE0 Spostamento"),s(3),Q(" ",(i.currentFloorPlan==null?null:i.currentFloorPlan.width)||1e3,"\xD7",(i.currentFloorPlan==null?null:i.currentFloorPlan.height)||800," | Tavoli: ",i.tables.length," "),s(6),F(" Mappa: ",i.currentFloorPlan==null?null:i.currentFloorPlan.name," | Tavoli: ",i.tables.length," "),s(3),E("width",(i.currentFloorPlan==null?null:i.currentFloorPlan.width)||1e3,"px")("height",(i.currentFloorPlan==null?null:i.currentFloorPlan.height)||800,"px"),M("drawing-mode",i.isDrawing)("mobile-view",i.isMobileView),s(2),g("ngIf",i.snapToGrid||i.isDrawing),s(),g("ngForOf",i.tables),s(),g("ngIf",i.isDrawing),s(),g("ngIf",i.tables.length===0&&!i.isDrawing),s(),g("ngIf",i.showEditTableModal&&i.selectedTable),s(),g("ngIf",i.showTableModal),s(),g("ngIf",i.showDimensionsModal))},dependencies:[$,K,Z,_e,se,me,pe,ie,de,ne,ce,oe,re,ge,ue,le,ae],styles:[".floor-plan-editor[_ngcontent-%COMP%]{min-height:100vh;background:var(--background);padding:var(--gutter-md);display:flex;flex-direction:column;gap:var(--gutter-lg)}.tools-bar[_ngcontent-%COMP%]{margin-bottom:0}.tools-bar[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;gap:var(--gutter-md)}.tools-main-row[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);align-items:flex-start;flex-wrap:wrap}.map-section[_ngcontent-%COMP%]{flex:1;min-width:200px;display:flex;flex-direction:column;gap:var(--gutter-sm)}.map-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.map-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm)}.floor-plan-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.floor-plan-edit[_ngcontent-%COMP%]   .form-input.x-small[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;min-width:120px;flex:1}.center-section[_ngcontent-%COMP%]{flex:2;min-width:300px}.actions-row[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-lg);align-items:flex-end;flex-wrap:wrap}.actions-row[_ngcontent-%COMP%]   .form-group.small[_ngcontent-%COMP%]{margin-bottom:0;min-width:0}.mode-buttons[_ngcontent-%COMP%], .action-buttons.compact[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm)}.actions-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{padding:0}.actions-row[_ngcontent-%COMP%]   .checkbox-label.small[_ngcontent-%COMP%]{padding:4px 0;white-space:nowrap}.selected-table-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-md);padding:var(--gutter-sm);background:color-mix(in srgb,var(--primary) 5%,transparent);border:1px solid color-mix(in srgb,var(--primary) 20%,transparent);border-radius:8px;flex-wrap:wrap}.selected-table-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-md);flex:1;min-width:0}.selected-table-header[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap}.selected-table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);flex-shrink:0}.selected-table-actions[_ngcontent-%COMP%]   .promethea-button.x-small[_ngcontent-%COMP%]{padding:6px 12px;min-height:32px;font-size:var(--fs-sm)}.status-section[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding-top:var(--gutter-md)}.status-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-md);flex-wrap:wrap}.mode-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:8px 12px;background:color-mix(in srgb,#10b981 15%,transparent);color:#10b981;border-radius:8px;font-weight:600;font-size:var(--fs-sm);transition:all .3s ease}.mode-indicator.drawing-mode[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 15%,transparent);color:#f59e0b}.mode-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.canvas-stats[_ngcontent-%COMP%]{font-size:var(--fs-sm);color:var(--text-muted);white-space:nowrap}.editor-main-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg);flex:1;min-height:600px}.canvas-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--background);border-radius:16px;padding:0;box-shadow:var(--shadow-sm);height:100%}.canvas-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:var(--gutter-sm);background:var(--background);border-radius:12px}.canvas-container[_ngcontent-%COMP%]{flex:1;border:2px solid var(--smoke-color-1);border-radius:12px;overflow:auto;background:#f8f9fa;position:relative;display:flex;align-items:center;justify-content:center;min-height:500px}.floor-plan-canvas[_ngcontent-%COMP%]{position:relative;background:var(--background);border-radius:8px;box-shadow:var(--shadow-md);cursor:default;margin:0;min-width:min(100%,1000px);min-height:min(100%,800px)}.floor-plan-canvas.drawing-mode[_ngcontent-%COMP%]{cursor:crosshair}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(var(--smoke-color-1) 1px,transparent 1px),linear-gradient(90deg,var(--smoke-color-1) 1px,transparent 1px);background-size:20px 20px;pointer-events:none;opacity:.5;z-index:1}.table-element[_ngcontent-%COMP%]{position:absolute;border:2px solid var(--smoke-color-1);background:var(--background);cursor:grab;display:flex;align-items:center;justify-content:center;transition:all .2s ease;-webkit-user-select:none;user-select:none;box-shadow:var(--shadow-sm);z-index:10;border-radius:8px}.table-element[_ngcontent-%COMP%]:active{cursor:grabbing}.table-element[_ngcontent-%COMP%]:hover{border-color:var(--primary);transform:scale(1.02);box-shadow:var(--shadow-md);z-index:20}.table-element.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 10%,transparent);z-index:30;box-shadow:var(--shadow-lg)}.table-element.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.table-content[_ngcontent-%COMP%]{text-align:center;pointer-events:none;padding:8px}.table-number[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:var(--text-color);margin-bottom:2px}.table-capacity[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted)}.canvas-instructions[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:5}.instruction-card[_ngcontent-%COMP%]{background:#fffffff2;padding:var(--gutter-lg);border-radius:16px;border:2px dashed var(--primary);text-align:center;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);max-width:300px}.empty-state[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:var(--text-muted);z-index:5}.edit-table-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--gutter-md);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.edit-table-modal[_ngcontent-%COMP%]{background:var(--background);padding:var(--gutter-lg);border-radius:16px;box-shadow:var(--shadow-lg);max-width:500px;width:100%;max-height:90vh;overflow-y:auto;border:1px solid var(--smoke-color-1);animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.edit-table-modal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;box-shadow:none;padding:0;margin:0}.edit-table-modal[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--gutter-lg);padding-bottom:var(--gutter-md);border-bottom:1px solid var(--smoke-color-1)}.edit-table-modal[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0;font-size:var(--fs-md);color:var(--text-color)}.edit-table-modal[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:0}.modal-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.modal-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.edit-table-modal[_ngcontent-%COMP%]   .generic-form[_ngcontent-%COMP%]{gap:var(--gutter-md)}.edit-table-modal[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:var(--gutter-lg);padding-top:var(--gutter-md);border-top:1px solid var(--smoke-color-1)}.edit-table-modal[_ngcontent-%COMP%]   .danger-zone[_ngcontent-%COMP%]{margin-top:var(--gutter-lg);padding-top:var(--gutter-md);border-top:1px solid color-mix(in srgb,#ef4444 30%,transparent)}.preview-section[_ngcontent-%COMP%]{margin:var(--gutter-md) 0;padding:var(--gutter-md);background:var(--smoke-color-1);border-radius:8px;text-align:center}.table-preview[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background:var(--primary);color:#fff;border:2px solid var(--primary);margin-top:var(--gutter-sm);border-radius:8px}.table-preview.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.preview-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:8px}.shape-selection[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.shape-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border:2px solid var(--smoke-color-1);border-radius:8px;cursor:pointer;transition:all .2s ease}.shape-option[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.shape-option.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 10%,transparent)}.shape-preview[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--smoke-color-1);border-radius:4px}.shape-preview.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.shape-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:500}@media (max-width: 768px){.tools-main-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-md)}.map-section[_ngcontent-%COMP%], .center-section[_ngcontent-%COMP%]{min-width:100%}.actions-row[_ngcontent-%COMP%]{justify-content:space-between}.selected-table-section[_ngcontent-%COMP%], .selected-table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gutter-sm)}.status-info[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm);text-align:center}}.preset-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm);margin-top:var(--gutter-sm)}.preset-buttons[_ngcontent-%COMP%]   .promethea-button.ghost.x-small[_ngcontent-%COMP%]{padding:8px 12px;justify-content:flex-start}.dimension-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:var(--gutter-sm)}.preview-canvas[_ngcontent-%COMP%]{background:var(--smoke-color-1);border:2px dashed var(--primary);border-radius:8px;display:flex;align-items:center;justify-content:center;min-width:50px;min-height:50px;max-width:200px;max-height:200px}.preview-label[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);text-align:center;padding:var(--gutter-sm)}@media (max-width: 768px){.floor-plan-editor[_ngcontent-%COMP%]{padding:var(--gutter-sm);gap:var(--gutter-md)}.tools-bar[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.tools-main-row[_ngcontent-%COMP%], .center-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-md)}.action-buttons.compact[_ngcontent-%COMP%]{flex-direction:column}.action-buttons.compact[_ngcontent-%COMP%]   .promethea-button.x-small[_ngcontent-%COMP%]{justify-content:center}.mode-buttons[_ngcontent-%COMP%]{flex-direction:column}.mode-buttons[_ngcontent-%COMP%]   .promethea-button.ghost.x-small[_ngcontent-%COMP%]{justify-content:center}.canvas-container[_ngcontent-%COMP%]{min-height:400px;border-radius:8px}.floor-plan-canvas[_ngcontent-%COMP%]{min-width:100%!important;min-height:400px!important;margin:0}.selected-table-section[_ngcontent-%COMP%], .selected-table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gutter-sm)}.selected-table-actions[_ngcontent-%COMP%]{justify-content:stretch}.status-info[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm);text-align:center}.mode-indicator[_ngcontent-%COMP%]{justify-content:center}.table-element[_ngcontent-%COMP%]{min-width:60px;min-height:60px}.table-content[_ngcontent-%COMP%]{padding:6px}.table-number[_ngcontent-%COMP%]{font-size:12px}.table-capacity[_ngcontent-%COMP%]{font-size:10px}.instruction-card[_ngcontent-%COMP%]{padding:var(--gutter-md);margin:var(--gutter-sm);max-width:none}.empty-state[_ngcontent-%COMP%]{padding:var(--gutter-md)}.empty-state[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:var(--gutter-sm)}.section-titles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--fs-md)}.map-section[_ngcontent-%COMP%]{min-width:100%}.map-actions[_ngcontent-%COMP%]{justify-content:center}.floor-plan-edit[_ngcontent-%COMP%]{flex-direction:column;gap:var(--gutter-sm)}.edit-table-modal[_ngcontent-%COMP%]{margin:var(--gutter-sm);padding:var(--gutter-md)}.shape-selection[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.preset-buttons[_ngcontent-%COMP%]{flex-direction:column}.canvas-container[_ngcontent-%COMP%]{min-height:300px}.floor-plan-canvas[_ngcontent-%COMP%]{min-height:300px!important}.grid-overlay[_ngcontent-%COMP%]{background-size:30px 30px}}@media (hover: none) and (pointer: coarse){.table-element[_ngcontent-%COMP%]:hover{transform:none}.icon-button[_ngcontent-%COMP%], .promethea-button[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.canvas-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}}.edit-table-modal[_ngcontent-%COMP%]{max-width:95vw;max-height:90vh}@media (max-width: 480px){.edit-table-modal[_ngcontent-%COMP%]{max-width:100vw;max-height:100vh;margin:0;border-radius:0;height:100vh}}"]})};export{he as FloorPlanEditor};
