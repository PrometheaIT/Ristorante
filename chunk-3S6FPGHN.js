import{a as de}from"./chunk-H6S2BPSC.js";import{a as se}from"./chunk-NU4D4K4W.js";import{b as G,d as U,e as J,g as K,h as Q,i as X,j as Z,q as ee,r as te,s as ne,t as ae,u as ie,v as re,x as oe}from"./chunk-V2Z2AUIN.js";import{a as le}from"./chunk-FYDQVOFN.js";import"./chunk-MMFTZZDS.js";import"./chunk-IJR26JUT.js";import"./chunk-L36FCDRV.js";import"./chunk-JJFJLBC4.js";import{c as B,d as L,i as j,m as Y}from"./chunk-QY7CV2FB.js";import{$a as g,Ab as F,Bb as M,Db as $,Eb as o,Fb as b,Ga as s,Gb as x,Hb as V,Jb as E,Kb as k,Lb as R,Ob as q,Pb as T,Rb as P,Tb as A,Wa as H,da as I,g as O,hb as m,ia as u,ib as i,ja as v,jb as a,kb as N,pb as D,sb as _,ub as c,zb as W}from"./chunk-PX5DELEN.js";var _e=()=>["LUN","MAR","MER","GIO","VEN","SAB","DOM"];function he(l,t){if(l&1&&(i(0,"div",38)(1,"span"),o(2),a(),i(3,"span",39),o(4),a()()),l&2){let e=t.$implicit;s(2),x("Tavoli da ",e.size,":"),s(2),b(e.count)}}function xe(l,t){if(l&1&&(i(0,"div",36),g(1,he,5,2,"div",37),a()),l&2){let e=c();s(),m("ngForOf",e.getSimpleCapacityDistribution())}}function fe(l,t){if(l&1&&(i(0,"span",40),o(1),a()),l&2){let e=c();s(),x(" (",e.getAvailableTablesToday()," tavoli liberi) ")}}function ye(l,t){if(l&1&&(i(0,"div",18)(1,"div",19)(2,"span",41),o(3,"event"),a(),i(4,"h3",21),o(5),T(6,"date"),a()(),i(7,"div",42),o(8),a(),i(9,"div",23),o(10),a()()),l&2){let e=c();s(5),x("Disponibilit\xE0 ",P(6,4,e.selectedDate,"dd/MM")),s(3),x(" ",e.getAvailableTablesForSelectedDate()," tavoli "),s(2),V(" Posti: ",e.todayCapacity," / ",e.calculateMaxCapacitySimple()," ")}}function we(l,t){if(l&1&&(i(0,"div",48),o(1),a()),l&2){let e=t.$implicit;s(),x(" ",e," ")}}function be(l,t){if(l&1&&(i(0,"span",54),o(1),a()),l&2){let e=c().$implicit,n=c(2);F("background",n.getEventColor(e.events[0].meta.partySize)),s(),x(" ",e.events.length," ")}}function Ce(l,t){if(l&1){let e=D();i(0,"div",58),_("click",function(r){let d=u(e).$implicit,p=c(4);return r.stopPropagation(),v(p.onEventClick(d))}),i(1,"span",59),o(2),T(3,"date"),a(),i(4,"span",60),o(5),a()()}if(l&2){let e=t.$implicit,n=c(4);F("border-color",n.getEventColor(e.meta.partySize)),s(2),b(P(3,4,e.start,"HH:mm")),s(3),b(e.meta.customerName)}}function Se(l,t){if(l&1){let e=D();i(0,"div",61),_("click",function(r){u(e);let d=c(2).$implicit,p=c(2);return r.stopPropagation(),v(p.onDayClick(d.date))}),o(1),a()}if(l&2){let e=c(2).$implicit,n=c(2);s(),x(" +",n.getEventsForDate(e.date).length-2," ")}}function De(l,t){if(l&1&&(i(0,"div",55),g(1,Ce,6,7,"div",56)(2,Se,2,1,"div",57),a()),l&2){let e=c().$implicit,n=c(2);s(),m("ngForOf",n.getLimitedEventsForDate(e.date,2)),s(),m("ngIf",n.hasMoreEvents(e.date,2))}}function Me(l,t){if(l&1){let e=D();i(0,"div",49),_("click",function(){let r=u(e).$implicit,d=c(2);return v(d.openDayDetails(r.date))}),i(1,"div",50)(2,"span",51),o(3),a(),g(4,be,2,3,"span",52),a(),g(5,De,3,2,"div",53),a()}if(l&2){let e=t.$implicit,n=c(2);M("today",n.isToday(e.date))("current-month",e.isCurrentMonth)("other-month",!e.isCurrentMonth),s(2),M("today-number",n.isToday(e.date)),s(),x(" ",e.date.getDate()," "),s(),m("ngIf",e.events.length>0),s(),m("ngIf",e.events.length>0)}}function Ee(l,t){if(l&1&&(i(0,"div",43)(1,"div",44),g(2,we,2,1,"div",45),a(),i(3,"div",46),g(4,Me,6,11,"div",47),a()()),l&2){let e=c();s(2),m("ngForOf",q(2,_e)),s(2),m("ngForOf",e.getMonthDays())}}function ke(l,t){if(l&1&&(i(0,"div",69)(1,"div",70),o(2),T(3,"date"),a(),i(4,"div",71),o(5),a()()),l&2){let e=t.$implicit,n=c(2);M("today",n.isToday(e)),s(2),b(P(3,4,e,"EEE")),s(3),b(e.getDate())}}function Re(l,t){if(l&1&&(i(0,"div",72),o(1),a()),l&2){let e=t.$implicit;s(),x(" ",e,":00 ")}}function Te(l,t){if(l&1){let e=D();i(0,"div",77),_("click",function(r){let d=u(e).$implicit,p=c(4);return r.stopPropagation(),v(p.onEventClick(d))}),i(1,"div",78),o(2),T(3,"date"),a(),i(4,"div",79),o(5),a(),i(6,"div",80),o(7),a()()}if(l&2){let e=t.$implicit,n=c(4);F("background",n.getEventColor(e.meta.partySize)),s(2),b(P(3,5,e.start,"HH:mm")),s(3),b(e.meta.customerName),s(2),x("",e.meta.partySize,"p")}}function Pe(l,t){if(l&1){let e=D();i(0,"div",75),_("click",function(){u(e);let r=c().$implicit,d=c(2);return v(d.openDayDetails(r))}),g(1,Te,8,8,"div",76),a()}if(l&2){let e=t.$implicit,n=c().$implicit,r=c(2);s(),m("ngForOf",r.getEventsForHour(n,e))}}function Oe(l,t){if(l&1&&(i(0,"div",73),g(1,Pe,2,1,"div",74),a()),l&2){let e=c(2);s(),m("ngForOf",e.getWeekViewHours())}}function Fe(l,t){if(l&1&&(i(0,"div",62)(1,"div",63),N(2,"div",64),g(3,ke,6,7,"div",65),a(),i(4,"div",66)(5,"div",64),g(6,Re,2,1,"div",67),a(),g(7,Oe,2,1,"div",68),a()()),l&2){let e=c();s(3),m("ngForOf",e.getWeekDays()),s(3),m("ngForOf",e.getWeekViewHours()),s(),m("ngForOf",e.getWeekDays())}}function Ie(l,t){if(l&1){let e=D();i(0,"div",89),_("click",function(r){let d=u(e).$implicit,p=c(3);return r.stopPropagation(),v(p.onEventClick(d))}),i(1,"div",78),o(2),T(3,"date"),a(),i(4,"div",79),o(5),a(),i(6,"div",80),o(7),a()()}if(l&2){let e=t.$implicit,n=c(3);F("background",n.getEventColor(e.meta.partySize)),s(2),b(P(3,6,e.start,"HH:mm")),s(3),b(e.meta.customerName),s(2),V(" ",e.meta.partySize," persone \u2022 ",e.meta.tableInfo," ")}}function Ve(l,t){if(l&1){let e=D();i(0,"div",85)(1,"div",86),o(2),a(),i(3,"div",87),_("click",function(){u(e);let r=c(2);return v(r.openDayDetails(r.viewDate))}),g(4,Ie,8,9,"div",88),a()()}if(l&2){let e=t.$implicit,n=c(2);s(2),x("",e,":00"),s(2),m("ngForOf",n.getEventsForHour(n.viewDate,e))}}function ze(l,t){if(l&1&&(i(0,"div",81)(1,"div",82)(2,"h2"),o(3),T(4,"date"),a()(),i(5,"div",83),g(6,Ve,5,2,"div",84),a()()),l&2){let e=c();s(3),b(P(4,2,e.viewDate,"fullDate")),s(3),m("ngForOf",e.getWeekViewHours())}}function He(l,t){if(l&1&&(i(0,"option",116),o(1),a()),l&2){let e=t.$implicit;m("value",e),s(),x(" ",e," ")}}function Ne(l,t){if(l&1){let e=D();i(0,"div",90)(1,"div",91)(2,"div",92)(3,"h3",5)(4,"span",20),o(5,"event_available"),a(),o(6," Nuova Prenotazione "),a(),i(7,"button",93),_("click",function(){u(e);let r=c();return v(r.closeNewReservationModal())}),i(8,"span",11),o(9,"close"),a()()(),i(10,"div")(11,"form",94),_("ngSubmit",function(){u(e);let r=c();return v(r.createManualReservation())}),i(12,"div",95)(13,"div",96)(14,"div",97)(15,"label",98)(16,"span",11),o(17,"person"),a(),o(18," Nome * "),a(),i(19,"input",99),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.customer_name,r)||(d.newReservation.customer_name=r),v(r)}),a()(),i(20,"div",97)(21,"label",100)(22,"span",11),o(23,"person_outline"),a(),o(24," Cognome * "),a(),i(25,"input",101),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.customer_surname,r)||(d.newReservation.customer_surname=r),v(r)}),a()()(),i(26,"div",96)(27,"div",97)(28,"label",102)(29,"span",11),o(30,"email"),a(),o(31," Email "),a(),i(32,"input",103),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.customer_email,r)||(d.newReservation.customer_email=r),v(r)}),a()(),i(33,"div",97)(34,"label",104)(35,"span",11),o(36,"phone"),a(),o(37," Telefono * "),a(),i(38,"input",105),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.customer_phone,r)||(d.newReservation.customer_phone=r),v(r)}),a()()(),i(39,"div",96)(40,"div",97)(41,"label",106)(42,"span",11),o(43,"event"),a(),o(44," Data * "),a(),i(45,"input",107),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.reservation_date,r)||(d.newReservation.reservation_date=r),v(r)}),_("change",function(){u(e);let r=c();return v(r.onReservationDateChange())}),a()(),i(46,"div",97)(47,"label",108)(48,"span",11),o(49,"schedule"),a(),o(50," Ora * "),a(),i(51,"select",109),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.reservation_time,r)||(d.newReservation.reservation_time=r),v(r)}),i(52,"option",110),o(53,"Scegli un orario"),a(),g(54,He,2,2,"option",111),a()()(),i(55,"div",96)(56,"div",97)(57,"label",112)(58,"span",11),o(59,"group"),a(),o(60," Numero Persone * "),a(),i(61,"input",113),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.party_size,r)||(d.newReservation.party_size=r),v(r)}),a()(),i(62,"div",97)(63,"label",114)(64,"span",11),o(65,"info"),a(),o(66," Stato "),a(),i(67,"select",115),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.status,r)||(d.newReservation.status=r),v(r)}),i(68,"option",116),o(69,"Confermata"),a(),i(70,"option",116),o(71,"In attesa"),a(),i(72,"option",116),o(73,"Cancellata"),a()()()(),i(74,"div",97)(75,"label",117)(76,"span",11),o(77,"notes"),a(),o(78," Richieste Speciali "),a(),i(79,"textarea",118),R("ngModelChange",function(r){u(e);let d=c();return k(d.newReservation.special_requests,r)||(d.newReservation.special_requests=r),v(r)}),a()()(),i(80,"div",119)(81,"button",120),_("click",function(){u(e);let r=c();return v(r.closeNewReservationModal())}),i(82,"span",11),o(83,"close"),a(),o(84," Annulla "),a(),i(85,"button",121)(86,"span",11),o(87,"add"),a(),o(88," Crea Prenotazione "),a()()()()()()}if(l&2){let e=c();s(19),E("ngModel",e.newReservation.customer_name),s(6),E("ngModel",e.newReservation.customer_surname),s(7),E("ngModel",e.newReservation.customer_email),s(6),E("ngModel",e.newReservation.customer_phone),s(7),E("ngModel",e.newReservation.reservation_date),m("min",e.minDate),s(6),E("ngModel",e.newReservation.reservation_time),s(3),m("ngForOf",e.getAvailableTimeSlotsForDate(e.selectedDate)),s(7),E("ngModel",e.newReservation.party_size),s(6),E("ngModel",e.newReservation.status),s(),m("value",e.ReservationStatus.Confirmed),s(2),m("value",e.ReservationStatus.Pending),s(2),m("value",e.ReservationStatus.Cancelled),s(7),E("ngModel",e.newReservation.special_requests)}}function We(l,t){if(l&1&&(i(0,"p",6)(1,"span",11),o(2,"email"),a(),o(3),a()),l&2){let e=c().$implicit;s(3),x(" ",e.meta.customerEmail," ")}}function $e(l,t){if(l&1&&(i(0,"div",142)(1,"div",138)(2,"span",139),o(3,"notes"),a(),i(4,"strong"),o(5,"Note"),a()(),i(6,"p",143),o(7),a()()),l&2){let e=c().$implicit;s(7),b(e.meta.reservation.special_requests)}}function qe(l,t){if(l&1){let e=D();i(0,"div",129)(1,"div",130)(2,"div")(3,"h4",131),o(4),a(),i(5,"p",6),o(6),a(),g(7,We,4,1,"p",132),a(),i(8,"div",133)(9,"span",134),o(10),a(),i(11,"div",3)(12,"button",135),_("click",function(){let r=u(e).$implicit,d=c(3);return v(d.editReservation(r))}),i(13,"span",11),o(14,"edit"),a()(),i(15,"button",136),_("click",function(){let r=u(e).$implicit,d=c(3);return v(d.deleteReservation(r.id))}),i(16,"span",11),o(17,"delete"),a()()()()(),i(18,"div",137)(19,"div",18)(20,"div",138)(21,"span",139),o(22,"schedule"),a(),i(23,"strong"),o(24,"Orario"),a()(),i(25,"div",140),o(26),T(27,"date"),a()(),i(28,"div",18)(29,"div",138)(30,"span",139),o(31,"group"),a(),i(32,"strong"),o(33,"Persone"),a()(),i(34,"div",140),o(35),a()(),i(36,"div",18)(37,"div",138)(38,"span",139),o(39,"table_restaurant"),a(),i(40,"strong"),o(41,"Tavolo"),a()(),i(42,"div",140),o(43),a()()(),g(44,$e,8,1,"div",141),a()}if(l&2){let e=t.$implicit,n=c(3);s(4),b(e.meta.customerName),s(2),b(e.meta.customerPhone),s(),m("ngIf",e.meta.customerEmail),s(2),$(n.getReservationStatusClass(e.meta.status)),s(),x(" ",e.meta.status," "),s(16),b(P(27,10,e.start,"HH:mm")),s(9),b(e.meta.partySize),s(8),b(e.meta.tableInfo||"Da assegnare"),s(),m("ngIf",e.meta.reservation.special_requests)}}function Ae(l,t){if(l&1&&(i(0,"div",127),g(1,qe,45,13,"div",128),a()),l&2){let e=c(2);s(),m("ngForOf",e.selectedDayEvents)}}function Be(l,t){l&1&&(i(0,"div",144)(1,"span",145),o(2,"event_busy"),a(),i(3,"h3",146),o(4,"Nessuna prenotazione per questa data"),a()())}function Le(l,t){if(l&1){let e=D();i(0,"div",90)(1,"div",91)(2,"div",92)(3,"h3",5)(4,"span",20),o(5,"calendar_today"),a(),o(6),T(7,"date"),a(),i(8,"button",93),_("click",function(){u(e);let r=c();return v(r.closeDayDetailsModal())}),i(9,"span",11),o(10,"close"),a()()(),i(11,"div",122)(12,"div",123)(13,"span",11),o(14,"info"),a(),i(15,"div")(16,"strong"),o(17),a(),o(18," per questa data "),a()(),g(19,Ae,2,1,"div",124)(20,Be,5,0,"ng-template",null,0,A),i(22,"div",125)(23,"button",120),_("click",function(){u(e);let r=c();return v(r.closeDayDetailsModal())}),i(24,"span",11),o(25,"close"),a(),o(26," Chiudi "),a(),i(27,"button",126),_("click",function(){u(e);let r=c();return v(r.openNewReservationForSelectedDay())}),i(28,"span",11),o(29,"add"),a(),o(30," Nuova Prenotazione "),a()()()()()}if(l&2){let e=W(21),n=c();s(6),x(" Prenotazioni del ",P(7,4,n.selectedDate,"dd/MM/yyyy")," "),s(11),x("",n.selectedDayEvents.length," prenotazioni"),s(2),m("ngIf",n.selectedDayEvents.length>0)("ngIfElse",e)}}var me=(n=>(n.Month="month",n.Week="week",n.Day="day",n))(me||{}),pe=(n=>(n.Pending="pending",n.Confirmed="confirmed",n.Cancelled="cancelled",n))(pe||{}),ce=class l{reservationService=I(le);shiftService=I(de);tableService=I(se);view="month";CalendarView=me;viewDate=new Date;minDate=new Date().toISOString().split("T")[0];events=[];ReservationStatus=pe;showNewReservationModal=!1;showDayDetailsModal=!1;showReservationModal=!1;saving=!1;tables=[];maxCapacity=0;tableStats=null;selectedDate=new Date;selectedDayEvents=[];newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(new Date),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"};todayCapacity=0;loading=!1;shifts=[];calendarStartHour=8;calendarEndHour=23;availableTimeSlots=[];ngOnInit(){return O(this,null,function*(){this.minDate=this.formatDateForInput(new Date),console.log("\u{1F504} Calendar component initialized"),yield this.loadShifts(),yield this.loadTables(),yield this.loadCalendarData(),console.log("\u{1F4CA} Calendar hours after initialization:",{view:this.view,calendarStartHour:this.calendarStartHour,calendarEndHour:this.calendarEndHour,weekViewHours:this.getWeekViewHours(),shiftsCount:this.shifts?.length}),this.reservationService.restaurantReservations$.subscribe(t=>{t.length>0&&(this.events=this.mapReservationsToEvents(t),this.calculateTodayCapacity())}),this.tableService.data$.subscribe(t=>{console.log("\u{1F4CA} Tables updated:",t?.length),this.tables=t||[],this.calculateMaxCapacity(),this.calculateTodayCapacity()}),this.reservationService.loadRestaurantReservations()})}loadShifts(){return O(this,null,function*(){try{this.shifts=this.shiftService.getShifts(),(!this.shifts||this.shifts.length===0)&&(yield this.shiftService.loadShifts(),this.shifts=this.shiftService.getShifts()),this.calculateCalendarHoursFromShifts(),this.calculateAvailableTimeSlots(),console.log("\u2705 Shifts loaded for calendar:",{startHour:this.calendarStartHour,endHour:this.calendarEndHour,weekViewHours:this.getWeekViewHours()})}catch(t){console.error("Error loading shifts:",t),this.calendarStartHour=8,this.calendarEndHour=23}})}loadCalendarData(){return O(this,null,function*(){this.loading=!0;try{console.log("\u{1F4C5} Loading calendar data..."),yield this.loadReservations(),console.log("\u2705 Calendar data loaded successfully")}catch(t){console.error("Error loading calendar data:",t)}finally{this.loading=!1}})}loadReservations(){this.reservationService.loadRestaurantReservations()}getEventColor(t){return t<=2?"var(--primary)":t<=4?"var(--secondary)":"var(--tertiary)"}mapReservationsToEvents(t){return t.map(e=>{try{let n=`${e.reservation_date} ${e.reservation_time}`,[r,d,p]=e.reservation_date.split("-").map(Number),[h,f,S=0]=e.reservation_time.split(":").map(Number),C=new Date(r,d-1,p,h,f,S);console.log("\u{1F4C5} Mapped reservation:",{id:e.id,dbDate:e.reservation_date,dbTime:e.reservation_time,jsDate:C,localString:C.toLocaleString("it-IT"),dayOfMonth:C.getDate()});let y="Cliente",w="";if(e.users)y=e.users.first_name||"",w=e.users.last_name||"";else if(e.customer_name)if(e.customer_name&&e.customer_surname)y=e.customer_name,w=e.customer_surname;else{let z=e.customer_name.trim().split(" ");y=z[0]||"",w=z.slice(1).join(" ")||""}let ue=e.users?.phone||e.customer_phone||"",ve=e.users?.email||e.customer_email||"",ge=e.tables?`Tavolo ${e.tables.table_number}`:"Da assegnare";return{id:e.id,start:C,title:`${y} ${w} - ${e.party_size} persone`,color:{primary:this.getEventColor(e.party_size),secondary:"var(--background)"},meta:{reservation:e,customerName:`${y} ${w}`.trim(),customerSurname:w,customerEmail:ve,customerPhone:ue,partySize:e.party_size,tableInfo:ge,status:e.status||"confirmed"}}}catch(n){console.error("\u274C Error mapping reservation:",e.id,n);let r=new Date;return{id:e.id,start:r,title:"Errore nella prenotazione",color:{primary:"var(--danger)",secondary:"var(--background)"},meta:{reservation:e,customerName:"Errore",customerSurname:"",customerEmail:"",customerPhone:"",partySize:e.party_size||0,tableInfo:"Errore",status:"error"}}}})}onDayClick(t){this.openDayDetails(t)}deleteReservation(t){return O(this,null,function*(){if(t&&confirm("Sei sicuro di voler eliminare questa prenotazione?"))try{yield this.reservationService.deleteReservation(t.toString()),this.events=this.events.filter(e=>e.id!==t),this.selectedDayEvents=this.selectedDayEvents.filter(e=>e.id!==t),this.calculateTodayCapacity(),this.reservationService.loadRestaurantReservations(),alert("Prenotazione eliminata con successo!"),this.selectedDayEvents.length===0&&setTimeout(()=>{this.closeDayDetailsModal()},1e3)}catch(e){console.error("Error deleting reservation:",e),alert("Errore durante l'eliminazione della prenotazione")}})}onEventClick(t){console.log("Event clicked:",t),alert(`${t.meta.customerName}
${t.start.toLocaleTimeString()}
${t.meta.partySize} persone`)}createManualReservation(){return O(this,null,function*(){if(this.validateReservation()){this.saving=!0;try{let t=`${this.newReservation.customer_name} ${this.newReservation.customer_surname}`.trim(),e=this.newReservation.reservation_time.length===5?`${this.newReservation.reservation_time}:00`:this.newReservation.reservation_time,n={customer_name:t,customer_email:this.newReservation.customer_email,customer_phone:this.newReservation.customer_phone,reservation_date:this.newReservation.reservation_date,reservation_time:e,party_size:this.newReservation.party_size,special_requests:this.newReservation.special_requests,status:this.newReservation.status};console.log("\u{1F4E4} Invio dati prenotazione:",n);let r=yield this.reservationService.createRestaurantReservation(n);r?(console.log("\u2705 Prenotazione creata con successo:",r),alert("Prenotazione creata con successo!"),yield this.reservationService.loadRestaurantReservations(),this.closeNewReservationModal()):alert("Errore durante la creazione della prenotazione")}catch(t){console.error("\u274C Errore creazione prenotazione:",t),alert(`Errore: ${t.message||"Impossibile creare la prenotazione"}`)}finally{this.saving=!1}}})}onReservationDateChange(){this.selectedDate=new Date(this.newReservation.reservation_date);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&!t.includes(this.newReservation.reservation_time)&&(this.newReservation.reservation_time=t[0])}validateReservation(){if(!this.newReservation.customer_name.trim())return alert("Inserisci il nome del cliente"),!1;if(!this.newReservation.customer_surname.trim())return alert("Inserisci il cognome del cliente"),!1;if(!this.newReservation.customer_phone.trim())return alert("Inserisci il telefono del cliente"),!1;if(this.newReservation.customer_email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.newReservation.customer_email))return alert("Inserisci un'email valida (es: nome@dominio.com)"),!1;let t=new Date(this.newReservation.reservation_date),e=new Date;return e.setHours(0,0,0,0),t<e?(alert("Non puoi prenotare per una data passata"),!1):this.newReservation.party_size<1||this.newReservation.party_size>50?(alert("Il numero di persone deve essere tra 1 e 50"),!1):!0}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}closeReservationModal(){this.showReservationModal=!1,this.resetReservationForm()}resetReservationForm(){let t=new Date;this.newReservation={customer_name:"",customer_surname:"",customer_email:"",customer_phone:"",reservation_date:this.formatDateForInput(t),reservation_time:"20:00",party_size:2,special_requests:"",status:"confirmed"}}setView(t){this.view=t}previous(){this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()-1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()-1)}next(){this.view==="month"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+1,1):this.view==="week"?this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+7):this.viewDate=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate()+1)}today(){this.viewDate=new Date}getWeekDays(){let t=[],e=new Date(this.viewDate),n=e.getDay(),r=e.getDate()-n+(n===0?-6:1),d=new Date(e.setDate(r));for(let p=0;p<7;p++){let h=new Date(d);h.setDate(d.getDate()+p),t.push(h)}return t}getEventsForDay(t){let e=t.toISOString().split("T")[0];return this.events.filter(n=>n.start.toISOString().split("T")[0]===e)}getEventsForHour(t,e){let n=new Date(t);n.setHours(e,0,0,0);let r=new Date(t);return r.setHours(e+1,0,0,0),this.events.filter(d=>d.start>=n&&d.start<r)}getMonthDays(){let t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),n=new Date(t,e,1),r=new Date(t,e+1,0),d=n.getDay(),p=d===0?6:d-1,h=[],f=p;for(let y=f;y>0;y--){let w=new Date(n);w.setDate(w.getDate()-y),h.push({date:w,isCurrentMonth:!1,events:this.getEventsForDate(w)})}for(let y=1;y<=r.getDate();y++){let w=new Date(t,e,y);h.push({date:w,isCurrentMonth:!0,events:this.getEventsForDate(w)})}let C=42-h.length;for(let y=1;y<=C;y++){let w=new Date(r);w.setDate(w.getDate()+y),h.push({date:w,isCurrentMonth:!1,events:this.getEventsForDate(w)})}return h}getEventCountForDate(t){return this.getEventsForDate(t).length}getLimitedEventsForDate(t,e=3){return this.getEventsForDate(t).slice(0,e)}hasMoreEvents(t,e=3){return this.getEventsForDate(t).length>e}isToday(t){let e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isCurrentMonth(t){return t.getMonth()===this.viewDate.getMonth()}calculateCalendarHoursFromShifts(){if(!this.shifts||this.shifts.length===0){this.calendarStartHour=8,this.calendarEndHour=23;return}let t=24,e=0;this.shifts.forEach(n=>{if(n.is_active){let r=this.extractHourFromTime(n.start_time),d=this.extractHourFromTime(n.end_time);r<t&&(t=r),d>e&&(e=d)}}),this.calendarStartHour=t===24?8:t,this.calendarEndHour=e===0?23:e}extractHourFromTime(t){return t?parseInt(t.split(":")[0],10):0}extractMinutesFromTime(t){return t?parseInt(t.split(":")[1],10):0}calculateAvailableTimeSlots(){if(!this.shifts||this.shifts.length===0){this.availableTimeSlots=this.generateTimeSlots(12,23,30);return}let t=[],e=30;this.shifts.forEach(n=>{if(n.is_active){let r=this.extractHourFromTime(n.start_time),d=this.extractMinutesFromTime(n.start_time),p=this.extractHourFromTime(n.end_time),h=this.extractMinutesFromTime(n.end_time),f=this.generateTimeSlotsWithStartEnd(r,d,p,h,e);t.push(...f)}}),this.availableTimeSlots=[...new Set(t)].sort()}generateTimeSlotsWithStartEnd(t,e,n,r,d){let p=[],h=t,f=e,S=Math.floor(f/d)*d;for(S>f,f=S;h<n||h===n&&f<r;){let C=h.toString().padStart(2,"0"),y=f.toString().padStart(2,"0");p.push(`${C}:${y}`),f+=d,f>=60&&(f=0,h++)}return p}generateTimeSlots(t,e,n){let r=[];for(let d=t;d<=e;d++)for(let p=0;p<60;p+=n){let h=d.toString().padStart(2,"0"),f=p.toString().padStart(2,"0");r.push(`${h}:${f}`)}return r}getAvailableTimeSlotsForDate(t){return this.availableTimeSlots}getWeekViewHours(){console.log("\u{1F4C5} getWeekViewHours called:",{start:this.calendarStartHour,end:this.calendarEndHour,view:this.view});let t=[],e=Math.max(0,Math.min(this.calendarStartHour||8,23)),n=Math.max(e,Math.min(this.calendarEndHour||23,23));for(let r=e;r<=n;r++)t.push(r);return t}openNewReservationModal(){this.selectedDate=new Date,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0,this.resetReservationForm()}openDayDetails(t){console.log("\u{1F4C5} Opening day details for:",t),this.selectedDate=t,this.selectedDayEvents=this.getEventsForDate(t),this.showDayDetailsModal=!0}closeNewReservationModal(){this.showNewReservationModal=!1,this.resetReservationForm()}closeDayDetailsModal(){this.showDayDetailsModal=!1}openNewReservationForSelectedDay(){this.showDayDetailsModal=!1,this.newReservation.reservation_date=this.formatDateForInput(this.selectedDate);let t=this.getAvailableTimeSlotsForDate(this.selectedDate);t.length>0&&(this.newReservation.reservation_time=t[0]),this.showNewReservationModal=!0}editReservation(t){let e=t.meta.customerName.split(" "),n=e[0]||"",r=e.slice(1).join(" ")||"";t.meta.customerSurname&&(r=t.meta.customerSurname);let d,p=t.meta.status?.toLowerCase();p==="pending"?d="pending":p==="cancelled"||p==="cancellata"?d="cancelled":d="confirmed",this.newReservation={customer_name:n,customer_surname:r,customer_email:t.meta.customerEmail||"",customer_phone:t.meta.customerPhone||"",reservation_date:this.formatDateForInput(t.start),reservation_time:this.formatTime(t.start),party_size:t.meta.partySize,special_requests:t.meta.reservation.special_requests||"",status:d},this.showDayDetailsModal=!1,this.showNewReservationModal=!0}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}getReservationStatusClass(t){switch(t?.toLowerCase()){case"confirmed":case"confermata":return"status-confirmed";case"pending":case"in attesa":return"status-pending";case"cancelled":case"cancellata":return"status-cancelled";default:return"status-unknown"}}formatTimeForDisplay(t){if(!t)return"";let[e,n]=t.split(":");return`${e}:${n}`}formatDateForInput(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`}formatDateForDB(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`}loadTables(){return O(this,null,function*(){try{console.log("\u{1F504} Loading restaurant tables..."),yield this.tableService.loadData();let t=this.tableService.getTables();console.log("\u2705 Tables loaded from service:",t?.length),this.tables=t||[],this.calculateMaxCapacity()}catch(t){console.error("Error loading tables:",t)}})}calculateMaxCapacity(){if(this.tables.length===0){console.log("\u26A0\uFE0F No tables found, using default capacity"),this.maxCapacity=50,this.tableStats=null;return}this.maxCapacity=this.tableService.calculateMaxCapacity(this.tables),this.tableStats=this.tableService.getTableStats(this.tables),console.log("\u{1F4CA} Capacity calculated:",{maxCapacity:this.maxCapacity,tableCount:this.tables.length,stats:this.tableStats})}getCapacityDistribution(){if(!this.tables.length)return[];let t=this.tableService.getCapacityByTableType(this.tables);return Object.entries(t).map(([e,n])=>({capacity:parseInt(e),count:n})).sort((e,n)=>e.capacity-n.capacity)}getAvailableTablesForDate(t){let e=this.formatDateForInput(t),r=this.events.filter(d=>this.formatDateForInput(d.start)===e).map(d=>d.meta.reservation).filter(d=>d.table_id).map(d=>d.table_id);return this.tables.filter(d=>!r.includes(d.id))}getDateCapacityStats(t){let e=this.formatDateForInput(t),r=this.events.filter(S=>this.formatDateForInput(S.start)===e).reduce((S,C)=>S+(C.meta?.partySize||0),0),d=this.getAvailableTablesForDate(t),p=d.length,h=d.reduce((S,C)=>S+(C.capacity||0),0),f=this.maxCapacity>0?r/this.maxCapacity*100:0;return{totalCapacity:this.maxCapacity,usedCapacity:r,availableCapacity:h,availableTables:p,percentage:Math.round(f)}}calculateMaxCapacitySimple(){return this.tables.length===0?50:this.tables.reduce((t,e)=>t+(e.capacity||0),0)}getAvailableTablesToday(){if(this.tables.length===0)return 0;let t=new Date().toISOString().split("T")[0],e=this.events.filter(n=>new Date(n.start).toISOString().split("T")[0]===t&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getAvailableTablesForSelectedDate(){if(this.tables.length===0||!this.selectedDate)return 0;let t=this.formatDateForInput(this.selectedDate),e=this.events.filter(n=>this.formatDateForInput(n.start)===t&&n.meta.reservation.table_id).map(n=>n.meta.reservation.table_id).filter(n=>n);return this.tables.filter(n=>!e.includes(n.id)).length}getSimpleCapacityDistribution(){let t=[],e={};this.tables.forEach(n=>{let r=n.capacity||0;e[r]=(e[r]||0)+1});for(let[n,r]of Object.entries(e))t.push({size:parseInt(n),count:r});return t.sort((n,r)=>n.size-r.size)}isSameDate(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}getEventsForDate(t){return this.events.filter(e=>this.isSameDate(e.start,t))}getTodaysReservationCount(){let t=new Date;return this.events.filter(e=>this.isSameDate(e.start,t)).length}calculateTodayCapacity(){let t=new Date,e=this.events.filter(n=>this.isSameDate(n.start,t));this.todayCapacity=e.reduce((n,r)=>n+(r.meta?.partySize||0),0),console.log("\u{1F4C5} Today capacity (local):",{today:t.toLocaleDateString("it-IT"),events:e.length,capacity:this.todayCapacity})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=H({type:l,selectors:[["app-calendar-view"]],decls:82,vars:38,consts:[["noReservations",""],[1,"page-container"],[1,"section-header"],[1,"flex","gap-sm"],[1,"material-icons","fs-lg"],[1,"section-title"],[1,"text-muted"],[1,"calendar-controls","flex","justify-between","items-center","gap-lg","mb-lg","flex-wrap"],[1,"flex","items-center","gap-lg","flex-wrap"],[1,"view-controls","flex","gap-sm"],[1,"promethea-button","ghost",3,"click"],[1,"material-icons"],[1,"date-controls","flex","gap-sm","items-center"],[1,"promethea-button","icon-button","x-small",3,"click"],[1,"promethea-button","today-btn",3,"click"],[1,"date-display"],[1,"promethea-button",3,"click"],[1,"calendar-stats","grid-cards","mb-lg"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"text-md","font-semibold","m-0"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"text-muted","card-footer","flex-col"],[1,"flex"],["class","mt-xs text-xs flex flex-col",4,"ngIf"],[1,"material-icons","text-md"],[1,"text-md","font-bold","justify-center","flex"],["class","ml-sm text-xs",4,"ngIf"],["class","card",4,"ngIf"],[1,"calendar-wrapper"],["class","calendar-month-view",4,"ngIf"],["class","calendar-week-view",4,"ngIf"],["class","calendar-day-view",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"mt-xs","text-xs","flex","flex-col"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"font-semibold"],[1,"ml-sm","text-xs"],[1,"material-icons","text-md","text-primary"],[1,"text-md","font-bold","text-info","justify-center","text-primary","flex"],[1,"calendar-month-view"],[1,"month-weekdays","flex"],["class","month-weekday",4,"ngFor","ngForOf"],[1,"month-grid"],["class","month-day",3,"today","current-month","other-month","click",4,"ngFor","ngForOf"],[1,"month-weekday"],[1,"month-day",3,"click"],[1,"day-number-wrapper"],[1,"day-number"],["class","day-events-indicator",3,"background",4,"ngIf"],["class","month-events-compact",4,"ngIf"],[1,"day-events-indicator"],[1,"month-events-compact"],["class","month-event-compact",3,"border-color","click",4,"ngFor","ngForOf"],["class","more-events-compact",3,"click",4,"ngIf"],[1,"month-event-compact",3,"click"],[1,"event-time-small"],[1,"event-customer-small"],[1,"more-events-compact",3,"click"],[1,"calendar-week-view"],[1,"week-header","flex"],[1,"week-time-column"],["class","week-day-header",3,"today",4,"ngFor","ngForOf"],[1,"week-body"],["class","week-hour",4,"ngFor","ngForOf"],["class","week-day-column",4,"ngFor","ngForOf"],[1,"week-day-header"],[1,"week-day-name"],[1,"week-day-number"],[1,"week-hour"],[1,"week-day-column"],["class","week-hour-slot",3,"click",4,"ngFor","ngForOf"],[1,"week-hour-slot",3,"click"],["class","week-event",3,"background","click",4,"ngFor","ngForOf"],[1,"week-event",3,"click"],[1,"event-time"],[1,"event-customer"],[1,"event-details"],[1,"calendar-day-view"],[1,"day-header"],[1,"day-body"],["class","day-hour",4,"ngFor","ngForOf"],[1,"day-hour"],[1,"hour-label"],[1,"hour-slot",3,"click"],["class","day-event",3,"background","click",4,"ngFor","ngForOf"],[1,"day-event",3,"click"],[1,"modal-overlay"],[1,"modal-container","modal-lg"],[1,"modal-header"],[1,"icon-button",3,"click"],[3,"ngSubmit"],[1,"form-card"],[1,"form-row"],[1,"form-group"],["for","customerName",1,"standard-label"],["type","text","id","customerName","name","customerName","required","","placeholder","Inserisci nome",3,"ngModelChange","ngModel"],["for","customerSurname",1,"standard-label"],["type","text","id","customerSurname","name","customerSurname","required","","placeholder","Inserisci cognome",3,"ngModelChange","ngModel"],["for","customerEmail",1,"standard-label"],["type","email","id","customerEmail","name","customerEmail","placeholder","Inserisci email (facoltativo)",3,"ngModelChange","ngModel"],["for","customerPhone",1,"standard-label"],["type","tel","id","customerPhone","name","customerPhone","required","","placeholder","Inserisci telefono",3,"ngModelChange","ngModel"],["for","reservationDate",1,"standard-label"],["type","date","id","reservationDate","name","reservationDate","required","",3,"ngModelChange","change","ngModel","min"],["for","reservationTime",1,"standard-label"],["id","reservationTime","name","reservationTime","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","partySize",1,"standard-label"],["type","number","id","partySize","name","partySize","min","1","max","20","required","",3,"ngModelChange","ngModel"],["for","reservationStatus",1,"standard-label"],["id","reservationStatus","name","reservationStatus",3,"ngModelChange","ngModel"],[3,"value"],["for","specialRequests",1,"standard-label"],["id","specialRequests","name","specialRequests","rows","3","placeholder","Note o richieste particolari...",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","ghost",3,"click"],["type","submit",1,"promethea-button"],[1,"modal-content","p-lg"],[1,"info-message","mb-lg"],["class","day-reservations-list",4,"ngIf","ngIfElse"],[1,"modal-footer","mt-lg"],["type","button",1,"promethea-button",3,"click"],[1,"day-reservations-list"],["class","reservation-card card mb-md",4,"ngFor","ngForOf"],[1,"reservation-card","card","mb-md"],[1,"flex","justify-between","items-start","mb-sm"],[1,"font-bold","text-md"],["class","text-muted",4,"ngIf"],[1,"flex","gap-sm","items-center"],[1,"chip"],["title","Modifica",1,"icon-button","x-small",3,"click"],["title","Elimina",1,"icon-button","x-small",3,"click"],[1,"reservation-details","grid-cards"],[1,"flex","items-center","gap-sm","mb-sm"],[1,"material-icons","text-primary"],[1,"text-md","font-bold"],["class","mt-md p-sm bg-smoke rounded",4,"ngIf"],[1,"mt-md","p-sm","bg-smoke","rounded"],[1,"text-sm"],[1,"empty-state","text-center","py-xl",2,"padding","var(--gap-lg) 0"],[1,"material-icons","fs-lg","text-muted","mb-md"],[1,"text-md","font-bold","mb-sm"]],template:function(e,n){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),o(4,"calendar_today"),a(),i(5,"h1",5),o(6,"Calendario Prenotazioni"),a()(),i(7,"p",6),o(8,"Gestisci e visualizza tutte le prenotazioni"),a()(),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"button",10),_("click",function(){return n.setView(n.CalendarView.Month)}),i(13,"span",11),o(14,"calendar_view_month"),a(),o(15," Mese "),a(),i(16,"button",10),_("click",function(){return n.setView(n.CalendarView.Week)}),i(17,"span",11),o(18,"calendar_view_week"),a(),o(19," Settimana "),a(),i(20,"button",10),_("click",function(){return n.setView(n.CalendarView.Day)}),i(21,"span",11),o(22,"calendar_view_day"),a(),o(23," Giorno "),a()(),i(24,"div",12)(25,"button",13),_("click",function(){return n.previous()}),i(26,"span",11),o(27,"chevron_left"),a()(),i(28,"button",14),_("click",function(){return n.today()}),o(29," Oggi "),a(),i(30,"button",13),_("click",function(){return n.next()}),i(31,"span",11),o(32,"chevron_right"),a()(),i(33,"div",15)(34,"strong"),o(35),T(36,"date"),a()()()(),i(37,"button",16),_("click",function(){return n.openNewReservationModal()}),i(38,"span",11),o(39,"add"),a(),o(40," Nuova Prenotazione "),a()(),i(41,"div",17)(42,"div",18)(43,"div",19)(44,"span",20),o(45,"event_available"),a(),i(46,"h3",21),o(47,"Prenotazioni Oggi"),a()(),i(48,"div",22),o(49),a(),i(50,"div",23),o(51,"Per oggi"),a()(),i(52,"div",18)(53,"div",19)(54,"span",20),o(55,"group"),a(),i(56,"h3",21),o(57,"Capienza Massima"),a()(),i(58,"div",22),o(59),a(),i(60,"div",24)(61,"div",25),o(62),a(),g(63,xe,2,1,"div",26),a()(),i(64,"div",18)(65,"div",19)(66,"span",27),o(67," table_restaurant "),a(),i(68,"h3",21),o(69,"Occupazione Oggi"),a()(),i(70,"div",28),o(71),a(),i(72,"div",23),o(73),g(74,fe,2,1,"span",29),a()(),g(75,ye,11,7,"div",30),a(),i(76,"div",31),g(77,Ee,5,3,"div",32)(78,Fe,8,3,"div",33)(79,ze,7,5,"div",34),a(),g(80,Ne,89,14,"div",35)(81,Le,31,7,"div",35),a()),e&2&&(s(12),M("active",n.view===n.CalendarView.Month),s(4),M("active",n.view===n.CalendarView.Week),s(4),M("active",n.view===n.CalendarView.Day),s(15),b(P(36,35,n.viewDate,"MMMM yyyy")),s(14),x(" ",n.getTodaysReservationCount()," "),s(10),x(" ",n.calculateMaxCapacitySimple()," "),s(3),x("",n.tables.length," tavoli"),s(),m("ngIf",n.tables.length>0),s(3),M("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),s(4),M("text-primary",n.todayCapacity/n.calculateMaxCapacitySimple()<=.7)("text-warning",n.todayCapacity/n.calculateMaxCapacitySimple()>.7&&n.todayCapacity/n.calculateMaxCapacitySimple()<=.9)("text-danger",n.todayCapacity/n.calculateMaxCapacitySimple()>.9),s(),V(" ",n.todayCapacity," / ",n.calculateMaxCapacitySimple()," "),s(2),x(" ",(n.todayCapacity/n.calculateMaxCapacitySimple()*100||0).toFixed(0),"% "),s(),m("ngIf",n.getAvailableTablesToday()>0),s(),m("ngIf",n.selectedDate),s(),M("loading",n.loading),s(),m("ngIf",n.view===n.CalendarView.Month),s(),m("ngIf",n.view===n.CalendarView.Week),s(),m("ngIf",n.view===n.CalendarView.Day),s(),m("ngIf",n.showNewReservationModal),s(),m("ngIf",n.showDayDetailsModal))},dependencies:[Y,B,L,oe,X,te,ne,G,Z,ee,U,J,re,ie,ae,Q,K,j],styles:['.calendar-wrapper[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;border:1px solid var(--smoke-1);padding:var(--gap-md);box-shadow:0 4px 12px var(--smoke-1);min-height:600px;height:100%}.calendar-month-view[_ngcontent-%COMP%]{background:var(--background);border-radius:16px;overflow:hidden}.month-weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:var(--smoke-2);border-bottom:2px solid var(--primary)}.month-weekday[_ngcontent-%COMP%]{padding:var(--gap-sm);text-align:center;font-weight:700;font-size:var(--fs-sm);color:var(--text-color);text-transform:uppercase;border-right:1px solid var(--smoke-1)}.month-weekday[_ngcontent-%COMP%]:last-child{border-right:none}.month-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);grid-auto-rows:1fr;min-height:400px}.month-day[_ngcontent-%COMP%]{border:1px solid var(--smoke-1);padding:0;display:flex;flex-direction:column;min-height:90px;background:var(--background);transition:all .2s ease;cursor:pointer;position:relative}.month-day[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 20%,transparent);z-index:10}.month-day.today[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 8%,transparent);border-color:var(--primary)}.month-day.other-month[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--smoke-1) 10%,transparent);opacity:.6}.day-number-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;padding:var(--gap-sm)}.day-number[_ngcontent-%COMP%]{font-weight:800;font-size:var(--fs-sn);color:var(--text-color);transition:all .2s ease;line-height:1}.month-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--primary);font-weight:900}.day-events-indicator[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:2px 6px;border-radius:10px;color:#fff;min-width:16px;text-align:center;line-height:1}.month-events-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;overflow:hidden;flex:1}.month-event-compact[_ngcontent-%COMP%]{background:var(--vetro);border-left:3px solid;padding:3px 5px;border-radius:4px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px;font-size:calc(var(--fs-sm) / 1.4);line-height:1.2}.month-event-compact[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px var(--shadow-2)}.event-time-small[_ngcontent-%COMP%]{font-weight:700;font-size:9px;color:var(--text-color);min-width:28px;background:var(--background);padding:1px 3px;border-radius:3px;text-align:center;flex-shrink:0}.event-customer-small[_ngcontent-%COMP%]{font-weight:600;font-size:9px;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.more-events-compact[_ngcontent-%COMP%]{font-size:9px;color:var(--primary);text-align:center;padding:2px;background:color-mix(in srgb,var(--primary) 8%,transparent);border-radius:3px;cursor:pointer;transition:all .2s ease;margin-top:2px}.more-events-compact[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 15%,transparent)}.calendar-week-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.week-header[_ngcontent-%COMP%]{display:flex;background:var(--smoke-2);border-bottom:2px solid var(--primary);flex-shrink:0}.week-time-column[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);border-right:2px solid var(--primary);flex-shrink:0}.week-day-header[_ngcontent-%COMP%]{padding:var(--gap-sm);text-align:center;font-weight:700;color:var(--text-color);border-right:1px solid var(--smoke-1);flex:1;display:flex;flex-direction:column;justify-content:center;min-height:60px}.week-day-header.today[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.week-day-name[_ngcontent-%COMP%]{font-size:var(--fs-sm);text-transform:uppercase;margin-bottom:2px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-md);font-weight:800}.week-body[_ngcontent-%COMP%]{flex:1;display:flex;overflow-y:auto}.week-time-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%]{height:60px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:var(--fs-sm);font-weight:600;color:var(--text-color);border-bottom:1px solid var(--smoke-1);position:relative}.week-hour[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;background:var(--smoke-1);z-index:1}.week-day-column[_ngcontent-%COMP%]{flex:1;border-right:1px solid var(--smoke-1);display:flex;flex-direction:column;overflow:hidden}.week-hour-slot[_ngcontent-%COMP%]{height:60px;flex-shrink:0;border-bottom:1px solid var(--smoke-1);position:relative;padding:2px;cursor:pointer;transition:background .2s ease;background:var(--background)}.week-hour-slot[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.week-hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 15%,transparent)}.week-event[_ngcontent-%COMP%]{position:absolute;left:2px;right:2px;padding:6px 8px;border-radius:6px;color:#fff;font-size:11px;cursor:pointer;z-index:2;transition:all .2s ease;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-shadow:0 2px 4px #0000001a}.week-event[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px var(--shadow-2);z-index:100}.calendar-day-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;border:1px solid var(--smoke-1);border-radius:12px;overflow:hidden}.day-header[_ngcontent-%COMP%]{padding:var(--gap-md);text-align:center;background:var(--smoke-2);border-bottom:2px solid var(--primary);border-radius:12px 12px 0 0;flex-shrink:0}.day-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.day-hour[_ngcontent-%COMP%]{display:flex;min-height:60px;border-bottom:1px solid var(--smoke-1);background:var(--background)}.day-hour[_ngcontent-%COMP%]:nth-child(2n){background:color-mix(in srgb,var(--smoke-1) 5%,transparent)}.hour-label[_ngcontent-%COMP%]{width:80px;background:var(--smoke-1);display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0;font-size:var(--fs-sm);border-right:2px solid var(--primary)}.hour-slot[_ngcontent-%COMP%]{flex:1;position:relative;padding:4px;cursor:pointer;transition:background .2s ease}.hour-slot[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--smoke-1) 10%,transparent)}.day-event[_ngcontent-%COMP%]{background:var(--gradiente);color:#fff;padding:8px 12px;border-radius:8px;margin:2px 0;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.day-event[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px var(--shadow-2)}.event-time[_ngcontent-%COMP%]{font-weight:600;font-size:10px;opacity:.9;margin-bottom:2px}.event-customer[_ngcontent-%COMP%]{font-weight:700;font-size:12px;display:flex;align-items:center;gap:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.event-details[_ngcontent-%COMP%]{font-size:10px;opacity:.9;margin-top:2px}@media (max-width: 768px){.calendar-wrapper[_ngcontent-%COMP%]{padding:var(--gap-sm);margin:0;border-radius:12px}.month-grid[_ngcontent-%COMP%]{min-height:350px}.month-day[_ngcontent-%COMP%]{min-height:70px;padding:6px}.day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.month-weekday[_ngcontent-%COMP%]{padding:8px 4px;font-size:10px}.month-event-compact[_ngcontent-%COMP%]{padding:2px 3px;font-size:8px}.event-time-small[_ngcontent-%COMP%]{font-size:7px;min-width:24px}.day-events-indicator[_ngcontent-%COMP%]{font-size:8px;padding:1px 4px}.calendar-week-view[_ngcontent-%COMP%], .calendar-day-view[_ngcontent-%COMP%]{height:fit-content}.week-time-column[_ngcontent-%COMP%], .hour-label[_ngcontent-%COMP%]{width:60px}.week-time-column[_ngcontent-%COMP%]   .week-hour[_ngcontent-%COMP%], .week-hour-slot[_ngcontent-%COMP%], .day-hour[_ngcontent-%COMP%]{height:40px}.week-event[_ngcontent-%COMP%]{font-size:9px;padding:4px}.week-day-header[_ngcontent-%COMP%]{padding:6px 3px;min-height:50px}.week-day-name[_ngcontent-%COMP%]{font-size:10px}.week-day-number[_ngcontent-%COMP%]{font-size:var(--fs-sm)}}@media (max-width: 480px){.month-day[_ngcontent-%COMP%]{min-height:60px;padding:4px}.month-event-compact[_ngcontent-%COMP%]{flex-direction:column;gap:1px}.event-customer-small[_ngcontent-%COMP%], .more-events-compact[_ngcontent-%COMP%]{font-size:7px}}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--smoke-2);border-radius:4px}.week-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.view-controls[_ngcontent-%COMP%]   .promethea-button.active[_ngcontent-%COMP%]{background:var(--gradiente);color:#fff}.view-controls[_ngcontent-%COMP%]   .promethea-button.active[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#fff!important}']})};export{me as CalendarView,pe as ReservationStatus,ce as RestaurantCalendar};
