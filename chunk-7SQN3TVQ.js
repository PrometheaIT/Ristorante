import{a as ie}from"./chunk-NU4D4K4W.js";import{r as X,s as Z,x as ee}from"./chunk-V2Z2AUIN.js";import{a as ne,c as re}from"./chunk-R6UHVGZ2.js";import{a as te}from"./chunk-LO733TVC.js";import"./chunk-MMFTZZDS.js";import"./chunk-IJR26JUT.js";import"./chunk-L36FCDRV.js";import"./chunk-JJFJLBC4.js";import{c as H,d as Y,f as J,j as Q,m as W}from"./chunk-QY7CV2FB.js";import{$a as _,A as R,Ab as G,B as z,Db as E,Eb as a,Fb as h,Ga as o,Gb as f,Hb as D,Pb as y,Qb as O,Rb as j,Tb as F,Wa as U,_ as k,a as M,b as $,da as x,g as v,h as A,hb as p,ia as b,ib as n,ja as S,jb as i,kb as B,n as K,nb as q,ob as L,pb as I,sb as g,ub as d,zb as V}from"./chunk-PX5DELEN.js";var w=class s{statusConfig={waiting:{label:"In Attesa",color:"warning",icon:"schedule"},preparing:{label:"In Preparazione",color:"primary",icon:"kitchen"},ready:{label:"Pronto",color:"success",icon:"done"},served:{label:"Servito",color:"secondary",icon:"local_shipping"},out_of_stock:{label:"Esaurito",color:"danger",icon:"block"}};getStatusConfig(t){return this.statusConfig[t]||this.statusConfig.waiting}calculateElapsedTime(t){let e=new Date(t).getTime(),r=new Date().getTime();return Math.floor((r-e)/(1e3*60))}getPreparationTimeColor(t,e){let r=t/e*100;return r<50?"success":r<75?"warning":"danger"}formatTime(t){return new Date(t).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};var C=class s{validTransitions={waiting:["preparing","out_of_stock"],preparing:["ready","out_of_stock"],ready:["served"],served:[],out_of_stock:[]};canTransition(t,e){let r=this.validTransitions[t];return r?r.includes(e):!1}getNextValidStatuses(t){return this.validTransitions[t]||[]}static \u0275fac=function(e){return new(e||s)};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};var P=class s{orderService=x(re);dishService=x(te);tableService=x(ie);kitchenUtils=x(w);orderStatusService=x(C);notificationService=x(ne);kitchenOrdersSubject=new K([]);kitchenOrders$=this.kitchenOrdersSubject.asObservable();statusFilterSubject=new K("all");searchTermSubject=new K("");filteredOrders$;stats$;constructor(){this.filteredOrders$=z([this.kitchenOrders$,this.statusFilterSubject,this.searchTermSubject]).pipe(R(([t,e,r])=>this.applyFilters(t,e,r))),this.stats$=this.kitchenOrders$.pipe(R(t=>this.calculateStats(t))),this.loadKitchenData()}loadKitchenData(){return v(this,null,function*(){try{console.log("\u{1F504} Loading kitchen data..."),yield Promise.all([this.loadActiveKitchenOrders(),this.dishService.loadData(),this.tableService.loadData()]),console.log("\u2705 Kitchen data loaded successfully")}catch(t){console.error("\u{1F4A5} Error loading kitchen data:",t)}})}loadActiveKitchenOrders(){return v(this,null,function*(){try{let t=yield this.orderService.getActiveOrders(),e=yield Promise.all(t.map(r=>this.transformOrderForKitchen(r)));e.sort((r,l)=>new Date(r.created_at).getTime()-new Date(l.created_at).getTime()),this.kitchenOrdersSubject.next(e)}catch(t){console.error("\u274C Error loading kitchen orders:",t),this.kitchenOrdersSubject.next([])}})}updateItemStatus(t,e){return v(this,null,function*(){try{return this.orderStatusService.canTransition(t.status,e)?(yield this.orderService.updateOrderItemStatus(t.id,e))?(this.updateLocalItemStatus(t.id,e),e==="out_of_stock"&&(yield this.markDishAsOutOfStock(t.dish_id)),this.notificationService.notifyOrderUpdate(t.order_id),!0):!1:(console.warn(`\u274C Transizione non valida da ${t.status} a ${e}`),!1)}catch(r){return console.error("\u274C Error updating item status:",r),!1}})}setStatusFilter(t){this.statusFilterSubject.next(t)}setSearchTerm(t){this.searchTermSubject.next(t)}getRecipeDetails(t){let e=this.dishService.getDishById(t);return{ingredients:e?.ingredients_composition||[],instructions:e?.recipe_instructions||""}}transformOrderForKitchen(t){return v(this,null,function*(){let e=t.order_items||[],r=yield this.getTableById(t.table_id),l=e.map(u=>{let T=this.getDishById(u.dish_id)||u.dishes;return{id:u.id,dish_id:u.dish_id,dish_name:u.dish_name||T?.name||"Piatto sconosciuto",quantity:u.quantity,status:u.status||"waiting",order_id:t.id,table_number:r?.table_number||"N/A",table_id:t.table_id,comanda_number:t.comanda_number||1,preparation_time:T?.preparation_time||15,elapsed_time:this.kitchenUtils.calculateElapsedTime(u.created_at||t.created_at),notes:u.item_notes,created_at:u.created_at||t.created_at}}),c=this.calculateOrderProgress(e),m=this.orderService.calculateOverallOrderStatus(e);return{id:t.id,order_number:t.order_number,comanda_number:t.comanda_number||1,table_id:t.table_id,table_number:r?.table_number||"N/A",status:m,items:l,created_at:t.created_at,total_items:c.total,completed_items:c.completed,progress_percentage:c.percentage}})}applyFilters(t,e,r){let l=t;if(e!=="all"&&(l=l.filter(c=>c.status===e)),r){let c=r.toLowerCase();l=l.filter(m=>m.order_number.toLowerCase().includes(c)||m.table_number.toLowerCase().includes(c)||`comanda ${m.comanda_number}`.includes(c)||m.items.some(u=>u.dish_name.toLowerCase().includes(c)))}return l.filter(c=>c.items.some(m=>m.status!=="served"&&m.status!=="out_of_stock"))}calculateStats(t){let e=t.filter(m=>this.getNonServedItems(m.items).some(u=>u.status==="waiting")).length,r=t.filter(m=>this.getNonServedItems(m.items).some(u=>u.status==="preparing")).length,l=t.filter(m=>this.getNonServedItems(m.items).some(u=>u.status==="ready")).length,c=t.filter(m=>this.getNonServedItems(m.items).length>0).length;return{waiting:e,preparing:r,ready:l,totalActive:c}}updateLocalItemStatus(t,e){let l=this.kitchenOrdersSubject.value.map(c=>$(M({},c),{items:c.items.map(m=>m.id===t?$(M({},m),{status:e}):m)}));this.kitchenOrdersSubject.next(l)}markDishAsOutOfStock(t){return v(this,null,function*(){try{yield this.dishService.updateDish(t,{status:"out_of_stock"})}catch(e){console.error("\u274C Error marking dish as out of stock:",e)}})}getDishById(t){return this.dishService.getDishes().find(r=>r.id===t)}getNonServedItems(t){return t.filter(e=>e.status!=="served")}calculateOrderProgress(t){let e=t.filter(m=>!["out_of_stock","cancelled"].includes(m.status)),r=e.filter(m=>["ready","served"].includes(m.status)).length,l=e.length,c=l>0?Math.round(r/l*100):0;return{completed:r,total:l,percentage:c}}getTableById(t){return v(this,null,function*(){try{return this.tableService.getTables().find(r=>r.id===t)}catch(e){return console.error("\u274C Error getting table:",e),null}})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};function se(s,t){s&1&&(n(0,"div",33)(1,"span",20),a(2,"restaurant_menu"),i(),n(3,"h3"),a(4,"Nessun ordine attivo"),i(),n(5,"p",7),a(6,"Tutti gli ordini sono stati completati"),i()())}function oe(s,t){if(s&1&&(n(0,"span",61),a(1),i()),s&2){let e=d(2).$implicit,r=d(2);o(),f(" (",e.preparation_time-r.getElapsedTime(e)," min rimanenti) ")}}function le(s,t){if(s&1&&(n(0,"div",62)(1,"p",63),a(2),i()()),s&2){let e=d(2).$implicit;o(2),h(e.notes)}}function ce(s,t){if(s&1){let e=I();n(0,"button",64),g("click",function(){b(e);let l=d(2).$implicit,c=d(2);return S(c.quickUpdateItemStatus(l,"preparing"))}),n(1,"span",20),a(2,"play_arrow"),i(),a(3," Inizia "),i()}}function de(s,t){if(s&1){let e=I();n(0,"button",64),g("click",function(){b(e);let l=d(2).$implicit,c=d(2);return S(c.quickUpdateItemStatus(l,"ready"))}),n(1,"span",20),a(2,"check"),i(),a(3," Pronto "),i()}}function me(s,t){if(s&1){let e=I();n(0,"button",64),g("click",function(){b(e);let l=d(2).$implicit,c=d(2);return S(c.quickUpdateItemStatus(l,"served"))}),n(1,"span",20),a(2,"local_shipping"),i(),a(3," Servito "),i()}}function pe(s,t){if(s&1){let e=I();n(0,"div",9)(1,"div",50)(2,"div",51)(3,"div",52)(4,"div",53),a(5),i(),n(6,"span",39),a(7),i()(),n(8,"div",54)(9,"div",38)(10,"span",39),a(11),i(),n(12,"span",39)(13,"span",55),a(14,"schedule"),i(),a(15),i(),n(16,"span",39),a(17),_(18,oe,2,1,"span",56),i()(),_(19,le,3,1,"div",57),n(20,"div",58),_(21,ce,4,0,"button",59)(22,de,4,0,"button",59)(23,me,4,0,"button",59),n(24,"button",60),g("click",function(){b(e);let l=d().$implicit,c=d(2);return S(c.openRecipeModal(l))}),n(25,"span",20),a(26,"menu_book"),i(),a(27," Ricetta "),i(),n(28,"button",60),g("click",function(){b(e);let l=d().$implicit,c=d(2);return S(c.quickUpdateItemStatus(l,"out_of_stock"))}),n(29,"span",20),a(30,"block"),i(),a(31," Esaurito "),i()()()()()()}if(s&2){let e=d().$implicit,r=d(2);E("status-"+e.status),o(5),h(e.dish_name),o(),E(r.getStatusColor(e.status)),o(),f(" ",r.getStatusText(e.status)," "),o(4),f("x",e.quantity),o(4),f(" ",e.preparation_time," min "),o(),E(r.getPreparationTimeColor(r.getElapsedTime(e),e.preparation_time)),o(),D(" ",r.getElapsedTime(e),"/",e.preparation_time," min "),o(),p("ngIf",e.status==="preparing"),o(),p("ngIf",e.notes),o(2),p("ngIf",e.status==="waiting"),o(),p("ngIf",e.status==="preparing"),o(),p("ngIf",e.status==="ready")}}function ue(s,t){if(s&1&&(q(0),_(1,pe,32,17,"div",49),L()),s&2){let e=t.$implicit;o(),p("ngIf",e.status!=="served"&&e.status!=="out_of_stock")}}function _e(s,t){if(s&1){let e=I();n(0,"div",65)(1,"button",66),g("click",function(){b(e);let l=d().$implicit,c=d();return S(c.markOrderAsReady(l))}),n(2,"span",20),a(3,"done_all"),i(),a(4," Segna tutto come pronto "),i()()}if(s&2){let e=d().$implicit;o(),p("disabled",e.status==="ready")}}function ge(s,t){if(s&1&&(n(0,"div",34)(1,"div",35)(2,"div",36)(3,"h2",37),a(4),i(),n(5,"div",38)(6,"span",39),a(7),i(),n(8,"span",39),a(9),i(),n(10,"span",39),a(11),i()()(),n(12,"div",40)(13,"div",41)(14,"span",42),a(15),i(),n(16,"span",43),a(17),y(18,"number"),i()(),n(19,"div",44),B(20,"div",45),i()()(),n(21,"div",46),_(22,ue,2,1,"ng-container",47),i(),_(23,_e,5,1,"div",48),i()),s&2){let e=t.$implicit,r=d();o(4),f("Ordine #",e.order_number),o(3),f("Tavolo ",e.table_number),o(2),h(r.formatTime(e.created_at)),o(),E(r.getStatusColor(e.status)),o(),f(" ",r.getStatusText(e.status)," "),o(4),D("",e.completed_items,"/",e.total_items," piatti"),o(2),f("",j(18,15,e.progress_percentage,"1.0-0"),"%"),o(3),E(r.getStatusColor(e.status)+"-bg"),G("width",e.progress_percentage,"%"),o(2),p("ngForOf",e.items),o(),p("ngIf",e.items.length>0)}}function ve(s,t){if(s&1&&(n(0,"div",86),a(1),y(2,"number"),i()),s&2){let e=d().$implicit;o(),f(" \u20AC",j(2,1,e.cost,"1.2-2")," ")}}function he(s,t){if(s&1&&(n(0,"div",29)(1,"label",19)(2,"span",20),a(3,"notes"),i(),a(4," Note di preparazione: "),i(),n(5,"p",83),a(6),i()()),s&2){let e=d().$implicit;o(6),h(e.notes)}}function fe(s,t){if(s&1&&(n(0,"div",9)(1,"div",81)(2,"div")(3,"strong",82),a(4),i(),n(5,"div",83),a(6),i()(),_(7,ve,3,4,"div",84),i(),_(8,he,7,1,"div",85),i()),s&2){let e=t.$implicit;o(4),h(e.name||"Ingrediente"),o(2),D("",e.quantity||0," ",e.unit||""),o(),p("ngIf",e.cost>0),o(),p("ngIf",e.notes)}}function xe(s,t){if(s&1&&(n(0,"div",8),_(1,fe,9,5,"div",80),i()),s&2){let e=d(3);o(),p("ngForOf",e.getRecipeDetails().ingredients)}}function be(s,t){s&1&&(n(0,"div",87)(1,"span",88),a(2,"info"),i(),n(3,"p",7),a(4,"Nessun ingrediente definito per questo piatto"),i()())}function Se(s,t){if(s&1&&(n(0,"div",9)(1,"div",10)(2,"span",20),a(3,"menu_book"),i(),n(4,"h3",12),a(5,"Istruzioni di Preparazione"),i()(),n(6,"p",7),a(7),i()()),s&2){let e=d(3);o(7),h(e.getRecipeDetails().instructions)}}function ye(s,t){s&1&&(n(0,"div",89)(1,"span",88),a(2,"info"),i(),n(3,"p",7),a(4,"Nessuna istruzione di preparazione disponibile"),i()())}function Ie(s,t){if(s&1&&(n(0,"div")(1,"div",75)(2,"div",10)(3,"span",20),a(4,"list_alt"),i(),n(5,"h3",12),a(6,"Ingredienti"),i(),n(7,"span",76),a(8),i()(),_(9,xe,2,1,"div",77)(10,be,5,0,"ng-template",null,1,F),i(),_(12,Se,8,1,"div",78)(13,ye,5,0,"div",79),i()),s&2){let e=V(11),r=d(2);o(8),h(r.getRecipeDetails().ingredients.length),o(),p("ngIf",r.getRecipeDetails().ingredients.length>0)("ngIfElse",e),o(3),p("ngIf",r.getRecipeDetails().instructions),o(),p("ngIf",!r.getRecipeDetails().instructions)}}function Oe(s,t){s&1&&(n(0,"div",90)(1,"span",88),a(2,"info"),i(),n(3,"p",7),a(4,"Nessuna ricetta disponibile per questo piatto"),i()())}function ke(s,t){if(s&1){let e=I();n(0,"div",67),g("click",function(){b(e);let l=d();return S(l.closeRecipeModal())}),n(1,"div",68),g("click",function(l){return b(e),S(l.stopPropagation())}),n(2,"div",69)(3,"h2",70)(4,"span",20),a(5,"menu_book"),i(),a(6),n(7,"span",71),a(8),i()(),n(9,"button",72),g("click",function(){b(e);let l=d();return S(l.closeRecipeModal())}),n(10,"span",20),a(11,"close"),i()()(),n(12,"div",73),_(13,Ie,14,5,"div",74)(14,Oe,5,0,"ng-template",null,0,F),i(),n(16,"div",65)(17,"button",28),g("click",function(){b(e);let l=d();return S(l.closeRecipeModal())}),n(18,"span",20),a(19,"close"),i(),a(20," Chiudi "),i()()()()}if(s&2){let e=V(15),r=d();o(6),f(" Ricetta - ",r.selectedRecipeItem==null?null:r.selectedRecipeItem.dish_name," "),o(2),f(" ",r.selectedRecipeItem==null?null:r.selectedRecipeItem.preparation_time," min "),o(5),p("ngIf",r.selectedRecipeItem)("ngIfElse",e)}}var ae=class s{kitchenService=x(P);kitchenUtils=x(w);orderStatusService=x(C);statusFilter="all";filteredOrders$=this.kitchenService.filteredOrders$;stats$=this.kitchenService.stats$;searchTerm="";showRecipeModal=!1;selectedRecipeItem=null;subscriptions=new A;ngOnInit(){console.log("\u{1F3C1} KitchenDisplay initialized"),this.subscriptions.add(this.kitchenService.kitchenOrders$.subscribe(t=>{console.log("\u{1F4E6} Kitchen orders updated:",t.length)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}updateItemStatus(t,e){return v(this,null,function*(){let r;if(typeof e=="string"?r=e:r=e.target.value,!["waiting","preparing","ready","served","out_of_stock"].includes(r)){console.error("\u274C Stato non valido:",r);return}console.log(`\u{1F504} Aggiornamento stato: ${t.dish_name} da ${t.status} a ${r}`);try{yield this.kitchenService.updateItemStatus(t,r)}catch(c){console.error("\u274C Errore nell'aggiornamento dello stato:",c),alert("Errore durante l'aggiornamento dello stato")}})}quickUpdateItemStatus(t,e){return v(this,null,function*(){console.log(`\u26A1 Aggiornamento rapido: ${t.dish_name} a ${e}`);try{yield this.kitchenService.updateItemStatus(t,e)}catch(r){console.error("\u274C Errore nell'aggiornamento rapido:",r),alert("Errore durante l'aggiornamento dello stato")}})}markOrderAsReady(t){return v(this,null,function*(){for(let e of t.items)e.status!=="served"&&(yield this.kitchenService.updateItemStatus(e,"ready"))})}markItemAsOutOfStock(t){return v(this,null,function*(){yield this.kitchenService.updateItemStatus(t,"out_of_stock")})}onStatusFilterChange(t){this.kitchenService.setStatusFilter(t)}onSearchChange(){this.kitchenService.setSearchTerm(this.searchTerm)}openRecipeModal(t){this.selectedRecipeItem=t,this.showRecipeModal=!0}closeRecipeModal(){this.selectedRecipeItem=null,this.showRecipeModal=!1}getRecipeDetails(){return this.selectedRecipeItem?this.kitchenService.getRecipeDetails(this.selectedRecipeItem.dish_id):{ingredients:[],instructions:""}}getStatusText(t){return this.kitchenUtils.getStatusConfig(t).label}getStatusColor(t){return this.kitchenUtils.getStatusConfig(t).color}getPreparationTimeColor(t,e){return this.kitchenUtils.getPreparationTimeColor(t,e)}formatTime(t){return this.kitchenUtils.formatTime(t)}getNextValidStatuses(t){return this.orderStatusService.getNextValidStatuses(t)}getElapsedTime(t){return this.kitchenUtils.calculateElapsedTime(t.created_at)}forceRefresh(){return v(this,null,function*(){yield this.kitchenService.loadKitchenData()})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=U({type:s,selectors:[["app-kitchen-display"]],decls:88,vars:21,consts:[["noRecipe",""],["noIngredients",""],[1,"page-container"],[1,"section-header"],[1,"flex","gap-sm"],[1,"material-icons","fs-lg"],[1,"section-title"],[1,"text-muted"],[1,"grid-cards"],[1,"card"],[1,"flex","items-center","gap-sm","mb-md"],[1,"material-icons","text-primary","text-md"],[1,"card-title"],[1,"text-md","font-bold","text-primary","justify-center","flex"],[1,"text-muted","card-footer"],[1,"form-card","mt-lg"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-end","gap-sm"],[1,"form-row"],[1,"form-group"],[1,"standard-label"],[1,"material-icons"],[3,"change","value"],["value","all"],["value","waiting"],["value","preparing"],["value","ready"],["type","text","placeholder","Numero ordine, tavolo o piatto...",3,"input","value"],[1,"modal-footer","p-md0"],[1,"promethea-button",3,"click"],[1,"mt-lg"],["class","empty-state",4,"ngIf"],["class","order-card form-card mt-lg",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"empty-state"],[1,"order-card","form-card","mt-lg"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-md","mb-md"],[1,"flex","flex-col","gap-sm"],[1,"flex","mb-lg"],[1,"flex","flex-wrap","gap-sm"],[1,"chip"],[1,"order-progress","min-w-200"],[1,"flex","justify-between","items-center","mb-sm"],[1,"text-sm","font-semibold"],[1,"text-sm","font-bold","text-primary"],[1,"progress-bar"],[1,"progress-fill"],[1,"grid-form"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","card",3,"class",4,"ngIf"],[1,"card-body"],[1,"item-info"],[1,"item-header"],[1,"item-name"],[1,"flex"],[1,"material-icons","text-sm"],["class","text-mini",4,"ngIf"],["class","item-notes mt-sm",4,"ngIf"],[1,"item-actions"],["class","promethea-button small",3,"click",4,"ngIf"],[1,"promethea-button","ghost","small",3,"click"],[1,"text-mini"],[1,"item-notes","mt-sm"],[1,"text-muted","text-sm"],[1,"promethea-button","small",3,"click"],[1,"modal-footer"],[1,"promethea-button",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-container","modal-lg",3,"click"],[1,"modal-header"],[1,"section-title","m-0"],[1,"chip","active","ml-md"],["type","button",1,"icon-button",3,"click"],[1,"modal-content"],[4,"ngIf","ngIfElse"],[1,"card","mb-lg"],[1,"chip","active"],["class","grid-cards",4,"ngIf","ngIfElse"],["class","card",4,"ngIf"],["class","card text-center p-md",4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-start","mb-sm"],[1,"text-md"],[1,"text-muted","text-sm","mt-1"],["class","text-primary font-semibold",4,"ngIf"],["class","mt-lg",4,"ngIf"],[1,"text-primary","font-semibold"],[1,"text-center","p-md"],[1,"material-icons","text-muted"],[1,"card","text-center","p-md"],[1,"card","text-center","p-xl"]],template:function(e,r){if(e&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),a(4,"restaurant"),i(),n(5,"h1",6),a(6,"Display Cucina"),i()(),n(7,"p",7),a(8,"Gestisci gli ordini in tempo reale"),i()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),a(13,"schedule"),i(),n(14,"h3",12),a(15,"In Attesa"),i()(),n(16,"div",13),a(17),y(18,"async"),i(),n(19,"span",14),a(20,"Ordini in attesa"),i()(),n(21,"div",9)(22,"div",10)(23,"span",11),a(24,"kitchen"),i(),n(25,"h3",12),a(26,"In Preparazione"),i()(),n(27,"div",13),a(28),y(29,"async"),i(),n(30,"span",14),a(31,"Ordini in preparazione"),i()(),n(32,"div",9)(33,"div",10)(34,"span",11),a(35,"done"),i(),n(36,"h3",12),a(37,"Pronti"),i()(),n(38,"div",13),a(39),y(40,"async"),i(),n(41,"span",14),a(42,"Ordini pronti"),i()(),n(43,"div",9)(44,"div",10)(45,"span",11),a(46,"list_alt"),i(),n(47,"h3",12),a(48,"Ordini Totali"),i()(),n(49,"div",13),a(50),y(51,"async"),i(),n(52,"span",14),a(53,"Ordini attivi"),i()()(),n(54,"div",15)(55,"div",16)(56,"div",17)(57,"div",18)(58,"label",19)(59,"span",20),a(60,"filter_list"),i(),a(61," Stato: "),i(),n(62,"select",21),g("change",function(c){return r.onStatusFilterChange(c.target.value)}),n(63,"option",22),a(64,"Tutti gli ordini"),i(),n(65,"option",23),a(66,"In Attesa"),i(),n(67,"option",24),a(68,"In Preparazione"),i(),n(69,"option",25),a(70,"Pronti"),i()()(),n(71,"div",18)(72,"label",19)(73,"span",20),a(74,"search"),i(),a(75," Cerca: "),i(),n(76,"input",26),g("input",function(){return r.onSearchChange()}),i()()(),n(77,"div",27)(78,"button",28),g("click",function(){return r.forceRefresh()}),n(79,"span",20),a(80,"refresh"),i(),a(81," Aggiorna "),i()()()(),n(82,"div",29),_(83,se,7,0,"div",30),y(84,"async"),_(85,ge,24,18,"div",31),y(86,"async"),i()(),_(87,ke,21,4,"div",32)),e&2){let l,c,m,u,T;o(17),h((l=O(18,9,r.stats$))==null?null:l.waiting),o(11),h((c=O(29,11,r.stats$))==null?null:c.preparing),o(11),h((m=O(40,13,r.stats$))==null?null:m.ready),o(11),h((u=O(51,15,r.stats$))==null?null:u.totalActive),o(12),p("value",r.statusFilter),o(14),p("value",r.searchTerm),o(7),p("ngIf",((T=O(84,17,r.filteredOrders$))==null?null:T.length)===0),o(2),p("ngForOf",O(86,19,r.filteredOrders$)),o(2),p("ngIf",r.showRecipeModal)}},dependencies:[W,H,Y,ee,X,Z,J,Q],styles:[".order-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.2,.9,.2,1)}.order-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-2)}.order-progress[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:var(--gap-sm)}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:var(--smoke-1);border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.progress-fill.waiting-bg[_ngcontent-%COMP%]{background:var(--secondary)}.progress-fill.preparing-bg[_ngcontent-%COMP%]{background:var(--primary)}.progress-fill.ready-bg[_ngcontent-%COMP%]{background:#10b981}.item-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--gap-sm)}.item-name[_ngcontent-%COMP%]{font-size:var(--fs-md);line-height:1.2;margin-bottom:var(--gap-sm);font-weight:700}.item-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--gap-sm);justify-content:space-between}.item-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gap-sm);padding:var(--gap-sm);min-width:200px}.chip.waiting[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 20%,transparent);color:var(--secondary)}.chip.preparing[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 20%,transparent);color:var(--primary)}.chip.ready[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 20%,transparent);color:#10b981}.chip.served[_ngcontent-%COMP%]{background:color-mix(in srgb,#6b7280 20%,transparent);color:#6b7280}.chip.time-normal[_ngcontent-%COMP%]{background:var(--smoke-1)}.chip.time-warning[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 20%,transparent);color:#f59e0b}.chip.time-critical[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 20%,transparent);color:#ef4444}.promethea-button.small[_ngcontent-%COMP%]{padding:var(--gap-sm) var(--gap-md);font-size:.875rem;min-height:36px}.modal-content[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.modal-lg[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.item-actions[_ngcontent-%COMP%]{align-items:stretch;min-width:auto}.item-actions[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{justify-content:space-between}.order-progress[_ngcontent-%COMP%]{min-width:auto}.modal-lg[_ngcontent-%COMP%]{margin:var(--gap-md);max-width:calc(100vw - 2 * var(--gap-md))}}@media (max-width: 480px){.promethea-button.small[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.promethea-button.small[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.grid-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{ae as KitchenDisplay};
