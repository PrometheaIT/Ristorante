import{b as c}from"./chunk-PMU7JIES.js";import{ba as a,ga as u,h as n,o as s}from"./chunk-2FS7XGGJ.js";var o=class i{supabaseService=u(c);unitsSubject=new s([]);units$=this.unitsSubject.asObservable();constructor(){this.loadUnits()}loadUnits(){return n(this,null,function*(){try{let{data:e,error:t}=yield this.supabaseService.getSupabaseClient().from("units").select("*").order("name");if(t)throw t;let r=(e||[]).filter(p=>p.name!=="Confezione");this.unitsSubject.next(r)}catch(e){console.error("Error loading units:",e)}})}getUnits(){return this.unitsSubject.value}getUnitById(e){return this.unitsSubject.value.find(t=>t.id===e)}getUnitsByType(e){return this.unitsSubject.value.filter(t=>t.type===e)}getBaseUnitForType(e){switch(e){case"weight":return"g";case"volume":return"mL";case"piece":return"pz";case"package":return"pz";default:return""}}getUnitsForIngredientType(e){let t={solid:["weight"],liquid:["volume"],piece:["piece","package"]};return this.unitsSubject.value.filter(r=>t[e].includes(r.type))}getConversionFactor(e){switch(e.symbol){case"kg":return 1e3;case"g":return 1;case"L":return 1e3;case"mL":return 1;case"pz":return 1;default:return 1}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{o as a};
